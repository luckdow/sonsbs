import{j as e,K as s,m as a,U as r,ay as t,M as l,P as i,az as n,X as c,S as o,aA as d,O as x,aB as m,a7 as u}from"./chunk-BcaSFcXu.js";import{a as h,r as y}from"./chunk-rj-8a6OE.js";import{u as g,V as p}from"./index-B7_6YKqI.js";import{N as b,O as f,P as j}from"./chunk-BY_DoteD.js";import"./chunk-Bkkzv6j4.js";import"./chunk-CY8KpSnY.js";import"./chunk-D-dPr7Hw.js";const N=()=>{const{user:N,userProfile:w,updateUserProfile:v}=g(),k=h(),[P,C]=y.useState(!1),[z,S]=y.useState(!1),[A,D]=y.useState({current:!1,new:!1,confirm:!1}),[T,Y]=y.useState({firstName:w?.firstName||"",lastName:w?.lastName||"",phone:w?.phone||""}),[M,B]=y.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[K,H]=y.useState(!1),E=e=>{D(s=>({...s,[e]:!s[e]}))};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>k("/rezervasyonlarim"),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx(s,{className:"w-5 h-5"}),e.jsx("span",{children:"Rezervasyonlarım"})]}),e.jsx("div",{className:"h-6 w-px bg-gray-300"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profil Ayarları"})]})})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(r,{className:"w-5 h-5 mr-2 text-blue-600"}),"Kişisel Bilgiler"]}),!P&&e.jsxs("button",{onClick:()=>C(!0),className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx(t,{className:"w-4 h-4"}),e.jsx("span",{children:"Düzenle"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"email",value:N?.email||"",disabled:!0,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg bg-gray-50 text-gray-600"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"E-posta adresi değiştirilemez"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad *"}),e.jsx("input",{type:"text",value:T.firstName,onChange:e=>Y(s=>({...s,firstName:e.target.value})),disabled:!P,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(P?"":"bg-gray-50 text-gray-600"),placeholder:"Adınızı girin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Soyad *"}),e.jsx("input",{type:"text",value:T.lastName,onChange:e=>Y(s=>({...s,lastName:e.target.value})),disabled:!P,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(P?"":"bg-gray-50 text-gray-600"),placeholder:"Soyadınızı girin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon Numarası"}),e.jsxs("div",{className:"relative",children:[e.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"tel",value:T.phone,onChange:e=>Y(s=>({...s,phone:e.target.value})),disabled:!P,className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(P?"":"bg-gray-50 text-gray-600"),placeholder:"+90 (5xx) xxx xx xx"})]})]}),P&&e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsxs("button",{onClick:async()=>{if(T.firstName.trim()&&T.lastName.trim())try{H(!0),await v(T),C(!1),p.success("Profil başarıyla güncellendi")}catch(e){p.error("Profil güncellenirken bir hata oluştu")}finally{H(!1)}else p.error("Ad ve soyad alanları zorunludur")},disabled:K,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{children:K?"Kaydediliyor...":"Kaydet"})]}),e.jsxs("button",{onClick:()=>{Y({firstName:w?.firstName||"",lastName:w?.lastName||"",phone:w?.phone||""}),C(!1)},disabled:K,className:"flex items-center space-x-2 border border-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:"İptal"})]})]})]})]})}),e.jsxs("div",{children:[e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center mb-6",children:[e.jsx(o,{className:"w-5 h-5 mr-2 text-green-600"}),"Güvenlik"]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("button",{onClick:()=>S(!z),className:"w-full flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Şifre Değiştir"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Hesap şifrenizi güncelleyin"})]})]}),e.jsx(x,{className:"w-4 h-4 text-gray-400"})]})})]}),e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Hesap Bilgileri"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Hesap Türü:"}),e.jsx("span",{className:"font-medium",children:"Müşteri"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Üyelik Tarihi:"}),e.jsx("span",{className:"font-medium",children:w?.createdAt?new Date(w.createdAt).toLocaleDateString("tr-TR"):"Bilinmiyor"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Durum:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Aktif"})]})]})]})]})]}),z&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(a.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Şifre Değiştir"}),e.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(c,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mevcut Şifre *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:A.current?"text":"password",value:M.currentPassword,onChange:e=>B(s=>({...s,currentPassword:e.target.value})),className:"w-full pr-10 px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Mevcut şifrenizi girin"}),e.jsx("button",{type:"button",onClick:()=>E("current"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:A.current?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Şifre *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:A.new?"text":"password",value:M.newPassword,onChange:e=>B(s=>({...s,newPassword:e.target.value})),className:"w-full pr-10 px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni şifrenizi girin"}),e.jsx("button",{type:"button",onClick:()=>E("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:A.new?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yeni Şifre Tekrar *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:A.confirm?"text":"password",value:M.confirmPassword,onChange:e=>B(s=>({...s,confirmPassword:e.target.value})),className:"w-full pr-10 px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Yeni şifrenizi tekrar girin"}),e.jsx("button",{type:"button",onClick:()=>E("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:A.confirm?e.jsx(m,{className:"w-5 h-5"}):e.jsx(u,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"flex space-x-3 mt-6",children:[e.jsx("button",{onClick:async()=>{if(M.currentPassword&&M.newPassword&&M.confirmPassword)if(M.newPassword===M.confirmPassword)if(M.newPassword.length<6)p.error("Yeni şifre en az 6 karakter olmalıdır");else try{H(!0);const e=b.credential(N.email,M.currentPassword);await f(N,e),await j(N,M.newPassword),B({currentPassword:"",newPassword:"",confirmPassword:""}),S(!1),p.success("Şifre başarıyla değiştirildi")}catch(e){"auth/wrong-password"===e.code?p.error("Mevcut şifre yanlış"):p.error("Şifre değiştirilirken bir hata oluştu")}finally{H(!1)}else p.error("Yeni şifreler eşleşmiyor");else p.error("Tüm şifre alanları zorunludur")},disabled:K,className:"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:K?"Değiştiriliyor...":"Şifre Değiştir"}),e.jsx("button",{onClick:()=>S(!1),disabled:K,className:"flex-1 border border-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"})]})]})})]})]})};export{N as default};
