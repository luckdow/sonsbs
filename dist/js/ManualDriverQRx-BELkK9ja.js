import{j as e,af as s,p as t,U as a,c as l,d as r,ah as i,s as n,a as d}from"./chunk-BcaSFcXu.js";import{d as c,r as m}from"./chunk-rj-8a6OE.js";import{n as x,m as o,u,Q as h}from"./chunk-BY_DoteD.js";import{d as p}from"./index-B7_6YKqI.js";import{u as j,a as b}from"./chunk-CQKzXw4l.js";import"./chunk-Bkkzv6j4.js";import"./chunk-CY8KpSnY.js";import"./chunk-D-dPr7Hw.js";const g=()=>{const{reservationId:g}=c(),[N,f]=m.useState(null),[y,v]=m.useState(!0),[w,k]=m.useState(!1),[D,z]=m.useState("waiting"),[T,S]=m.useState(!1);m.useEffect(()=>{B()},[g]),m.useEffect(()=>{let e;return"completed"===D&&(e=setTimeout(()=>{S(!0)},3e4)),()=>{e&&clearTimeout(e)}},[D]);const B=async()=>{try{if(v(!0),!g)return void z("invalid");const e=x(p,"reservations",g),s=await o(e);if(!s.exists())return void z("invalid");const t={id:s.id,...s.data()};f(t),"completed"===t.status?z("completed"):"in_progress"===t.status?z("started"):"manual"===t.assignedDriver&&t.manualDriverInfo?z("waiting"):z("invalid")}catch(e){z("invalid")}finally{v(!1)}},E=e=>!!e&&("round_trip"===e.tripDetails?.tripType||"round-trip"===e.tripDetails?.tripType||"round-trip"===e.tripType||"round-trip"===e.transferType||!0===e.isRoundTrip),M=e=>e?"string"==typeof e?e:e.address?e.address:e.name?e.name:"Konum bilgisi mevcut değil":"Belirtilmemiş";return y?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm max-w-sm w-full text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Rezervasyon Yükleniyor..."})]})}):"invalid"===D||T?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm max-w-sm w-full text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(s,{className:"w-10 h-10 text-red-500"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-3",children:T?"Link Süresi Doldu":"Erişim Engellendi"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6 leading-relaxed",children:T?"Bu link güvenlik nedeniyle süresi dolmuştur. Artık kullanılamaz.":"Bu link artık geçerli değil veya yetkiniz bulunmuyor. Lütfen yeni bir link talep edin."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-4",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"📞 Destek İhtiyacınız mı Var?"}),e.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:"Sorun yaşıyorsanız +90 532 574 26 82 numaralı telefonu arayabilirsiniz."})]}),e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("strong",{children:"Güvenlik Bildirimi:"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bu sistem güvenlik amacıyla her yolculuk için tek kullanımlık linkler oluşturur."})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-sm mx-auto p-4",children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SBS Transfer Hizmetleri Ltd. Şti."}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Transfer Servisi"})]}),"completed"===D?e.jsx("div",{className:"bg-white rounded-3xl shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(t,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Yolculuk Tamamlandı!"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6 leading-relaxed",children:"Transfer hizmeti başarıyla tamamlanmıştır. Müşteriye güvenli bir yolculuk sunduğunuz için teşekkür ederiz."}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Rezervasyon:"}),e.jsxs("span",{className:"text-green-900 font-bold",children:["#",N.reservationId]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Tamamlanma:"}),e.jsx("span",{className:"text-green-900",children:(new Date).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Müşteri:"}),e.jsxs("span",{className:"text-green-900",children:[N.customerInfo?.firstName," ",N.customerInfo?.lastName]})]}),("cash"===N.paymentMethod||"nakit"===N.paymentMethod)&&e.jsx("div",{className:"border-t border-green-300 pt-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Tahsil Edilen:"}),e.jsxs("span",{className:"text-green-900 font-bold",children:["€",N.totalPrice||N.pricing?.totalPrice||0]})]})})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-4",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"🏆 SBS Transfer Hizmetleri Ltd. Şti. Ailesinin Bir Parçası Olduğunuz İçin Teşekkürler"}),e.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:"Kaliteli hizmetiniz sayesinde müşteri memnuniyetini artırıyor ve markamızı güçlendiriyorsunuz."})]}),e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("strong",{children:"Güvenlik Bildirimi:"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bu link artık güvenlik nedeniyle devre dışı bırakılmıştır. Yeni rezervasyonlar için yeni link alınması gerekmektedir."})]})]})}):e.jsxs(e.Fragment,{children:[N&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg p-6 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Rezervasyon"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["#",N.reservationId]})]}),e.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("started"===D?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"),children:"started"===D?"Devam Ediyor":"Beklemede"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(a,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Müşteri"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[N.customerInfo?.firstName," ",N.customerInfo?.lastName]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(l,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Tarih & Saat"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[e.jsx("span",{className:"text-green-700",children:"GİDİŞ:"})," ",N.tripDetails?.date," • ",N.tripDetails?.time]}),E(N)&&e.jsxs("p",{className:"font-semibold text-gray-900",children:[e.jsx("span",{className:"text-blue-700",children:"DÖNÜŞ:"})," ",(I=N,I.tripDetails?.returnDate||I.returnDate||"Belirtilmemiş")," • ",(e=>e.tripDetails?.returnTime||e.returnTime||e.tripDetails?.time||"Belirtilmemiş")(N)]})]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(r,{className:"w-4 h-4 text-purple-600"})}),e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Güzergah"})]}),E(N)&&e.jsx("div",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-semibold",children:"GİDİŞ-DÖNÜŞ"})]}),e.jsxs("div",{className:"ml-11 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"NEREDEN"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:M(N.tripDetails?.pickupLocation)})]})]}),e.jsx("div",{className:"ml-1.5 w-0.5 h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"NEREYE"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:M(N.tripDetails?.dropoffLocation)})]})]}),E(N)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1.5 w-0.5 h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"DÖNÜŞ"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:M(N.tripDetails?.pickupLocation)})]})]})]})]})]}),e.jsx("div",{className:"bg-green-50 rounded-2xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(i,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Sizin Ücretiniz"}),e.jsxs("p",{className:"text-xl font-bold text-green-700",children:["€",N.manualDriverInfo?.price]})]})]})}),("cash"===N.paymentMethod||"nakit"===N.paymentMethod)&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx(i,{className:"w-4 h-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-amber-600 uppercase font-semibold",children:"NAKİT ÖDEME"}),e.jsxs("p",{className:"text-lg font-bold text-amber-800",children:["Müşteriden €",N.totalPrice||N.pricing?.totalPrice||0," alınacak"]})]})]}),e.jsx("div",{className:"bg-amber-100 rounded-xl p-3 mt-3",children:e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("strong",{children:"ÖNEMLİ:"})," Müşteri size nakit olarak €",N.totalPrice||N.pricing?.totalPrice||0," ödeyecek. Lütfen bu tutarı tahsil ettiğinizi onaylayın."]})})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg p-6",children:["waiting"===D&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(n,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Hazır mısınız?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Müşteri ile buluştuğunuzda yolculuğu başlatın"}),e.jsx("button",{onClick:async()=>{if(N)try{k(!0);const e=x(p,"reservations",N.id);await u(e,{status:"in_progress",startedAt:h(),updatedAt:h()}),z("started")}catch(e){}finally{k(!1)}},disabled:w,className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-semibold text-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:w?"Başlatılıyor...":"Yolculuğu Başlat"})]}),"started"===D&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(d,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Yolculuk Devam Ediyor"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Hedefe vardığınızda tamamlayın"}),e.jsx("button",{onClick:async()=>{if(N)try{k(!0);const e=x(p,"reservations",N.id);await u(e,{status:"completed",completedAt:h(),updatedAt:h()}),"manual"===N.assignedDriver||N.manualDriverInfo?await j(N.id,{...N,status:"completed",completedAt:h()}):(N.assignedDriver||N.assignedDriverId)&&await b(N.id,{...N,status:"completed",completedAt:h()}),z("completed")}catch(e){}finally{k(!1)}},disabled:w,className:"w-full bg-green-600 text-white py-4 rounded-2xl font-semibold text-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:w?"Tamamlanıyor...":"Yolculuğu Tamamla"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-xs text-gray-500",children:"© 2025 SBS Transfer Hizmetleri Ltd. Şti."})})]})});var I};export{g as default};
