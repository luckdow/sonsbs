import{j as e,af as s,p as t,U as a,c as l,d as r,ah as i,s as n,a as d}from"./chunk-BcaSFcXu.js";import{d as c,r as m}from"./chunk-rj-8a6OE.js";import{n as x,m as o,u,Q as h}from"./chunk-BY_DoteD.js";import{d as p}from"./index-B7_6YKqI.js";import{u as j,a as b}from"./chunk-CQKzXw4l.js";import"./chunk-Bkkzv6j4.js";import"./chunk-CY8KpSnY.js";import"./chunk-D-dPr7Hw.js";const g=()=>{const{reservationId:g}=c(),[N,f]=m.useState(null),[y,v]=m.useState(!0),[w,k]=m.useState(!1),[D,z]=m.useState("waiting"),[T,S]=m.useState(!1);m.useEffect(()=>{B()},[g]),m.useEffect(()=>{let e;return"completed"===D&&(e=setTimeout(()=>{S(!0)},3e4)),()=>{e&&clearTimeout(e)}},[D]);const B=async()=>{try{if(v(!0),!g)return void z("invalid");const e=x(p,"reservations",g),s=await o(e);if(!s.exists())return void z("invalid");const t={id:s.id,...s.data()};f(t),"completed"===t.status?z("completed"):"in_progress"===t.status?z("started"):"manual"===t.assignedDriver&&t.manualDriverInfo?z("waiting"):z("invalid")}catch(e){z("invalid")}finally{v(!1)}},E=e=>!!e&&("round_trip"===e.tripDetails?.tripType||"round-trip"===e.tripDetails?.tripType||"round-trip"===e.tripType||"round-trip"===e.transferType||!0===e.isRoundTrip),M=e=>e?"string"==typeof e?e:e.address?e.address:e.name?e.name:"Konum bilgisi mevcut deÄŸil":"BelirtilmemiÅŸ";return y?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm max-w-sm w-full text-center",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-700 font-medium",children:"Rezervasyon YÃ¼kleniyor..."})]})}):"invalid"===D||T?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm max-w-sm w-full text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(s,{className:"w-10 h-10 text-red-500"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-3",children:T?"Link SÃ¼resi Doldu":"EriÅŸim Engellendi"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6 leading-relaxed",children:T?"Bu link gÃ¼venlik nedeniyle sÃ¼resi dolmuÅŸtur. ArtÄ±k kullanÄ±lamaz.":"Bu link artÄ±k geÃ§erli deÄŸil veya yetkiniz bulunmuyor. LÃ¼tfen yeni bir link talep edin."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-4",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"ðŸ“ž Destek Ä°htiyacÄ±nÄ±z mÄ± Var?"}),e.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:"Sorun yaÅŸÄ±yorsanÄ±z +90 532 574 26 82 numaralÄ± telefonu arayabilirsiniz."})]}),e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("strong",{children:"GÃ¼venlik Bildirimi:"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bu sistem gÃ¼venlik amacÄ±yla her yolculuk iÃ§in tek kullanÄ±mlÄ±k linkler oluÅŸturur."})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-sm mx-auto p-4",children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"SBS Transfer Hizmetleri Ltd. Åžti."}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Transfer Servisi"})]}),"completed"===D?e.jsx("div",{className:"bg-white rounded-3xl shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(t,{className:"w-10 h-10 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Yolculuk TamamlandÄ±!"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6 leading-relaxed",children:"Transfer hizmeti baÅŸarÄ±yla tamamlanmÄ±ÅŸtÄ±r. MÃ¼ÅŸteriye gÃ¼venli bir yolculuk sunduÄŸunuz iÃ§in teÅŸekkÃ¼r ederiz."}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Rezervasyon:"}),e.jsxs("span",{className:"text-green-900 font-bold",children:["#",N.reservationId]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Tamamlanma:"}),e.jsx("span",{className:"text-green-900",children:(new Date).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"MÃ¼ÅŸteri:"}),e.jsxs("span",{className:"text-green-900",children:[N.customerInfo?.firstName," ",N.customerInfo?.lastName]})]}),("cash"===N.paymentMethod||"nakit"===N.paymentMethod)&&e.jsx("div",{className:"border-t border-green-300 pt-3 mt-3",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-green-700 font-medium",children:"Tahsil Edilen:"}),e.jsxs("span",{className:"text-green-900 font-bold",children:["â‚¬",N.totalPrice||N.pricing?.totalPrice||0]})]})})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4 mb-4",children:[e.jsx("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"ðŸ† SBS Transfer Hizmetleri Ltd. Åžti. Ailesinin Bir ParÃ§asÄ± OlduÄŸunuz Ä°Ã§in TeÅŸekkÃ¼rler"}),e.jsx("p",{className:"text-blue-700 text-xs leading-relaxed",children:"Kaliteli hizmetiniz sayesinde mÃ¼ÅŸteri memnuniyetini artÄ±rÄ±yor ve markamÄ±zÄ± gÃ¼Ã§lendiriyorsunuz."})]}),e.jsxs("div",{className:"bg-gray-100 rounded-2xl p-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:e.jsx("strong",{children:"GÃ¼venlik Bildirimi:"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bu link artÄ±k gÃ¼venlik nedeniyle devre dÄ±ÅŸÄ± bÄ±rakÄ±lmÄ±ÅŸtÄ±r. Yeni rezervasyonlar iÃ§in yeni link alÄ±nmasÄ± gerekmektedir."})]})]})}):e.jsxs(e.Fragment,{children:[N&&e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg p-6 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Rezervasyon"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["#",N.reservationId]})]}),e.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold "+("started"===D?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"),children:"started"===D?"Devam Ediyor":"Beklemede"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(a,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"MÃ¼ÅŸteri"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[N.customerInfo?.firstName," ",N.customerInfo?.lastName]})]})]})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(l,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Tarih & Saat"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[e.jsx("span",{className:"text-green-700",children:"GÄ°DÄ°Åž:"})," ",N.tripDetails?.date," â€¢ ",N.tripDetails?.time]}),E(N)&&e.jsxs("p",{className:"font-semibold text-gray-900",children:[e.jsx("span",{className:"text-blue-700",children:"DÃ–NÃœÅž:"})," ",(I=N,I.tripDetails?.returnDate||I.returnDate||"BelirtilmemiÅŸ")," â€¢ ",(e=>e.tripDetails?.returnTime||e.returnTime||e.tripDetails?.time||"BelirtilmemiÅŸ")(N)]})]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(r,{className:"w-4 h-4 text-purple-600"})}),e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"GÃ¼zergah"})]}),E(N)&&e.jsx("div",{className:"bg-orange-100 text-orange-700 px-2 py-1 rounded-full text-xs font-semibold",children:"GÄ°DÄ°Åž-DÃ–NÃœÅž"})]}),e.jsxs("div",{className:"ml-11 space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"NEREDEN"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:M(N.tripDetails?.pickupLocation)})]})]}),e.jsx("div",{className:"ml-1.5 w-0.5 h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"NEREYE"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:M(N.tripDetails?.dropoffLocation)})]})]}),E(N)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"ml-1.5 w-0.5 h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"DÃ–NÃœÅž"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:M(N.tripDetails?.pickupLocation)})]})]})]})]})]}),e.jsx("div",{className:"bg-green-50 rounded-2xl p-4 mb-4",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(i,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase",children:"Sizin Ãœcretiniz"}),e.jsxs("p",{className:"text-xl font-bold text-green-700",children:["â‚¬",N.manualDriverInfo?.price]})]})]})}),("cash"===N.paymentMethod||"nakit"===N.paymentMethod)&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx(i,{className:"w-4 h-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-amber-600 uppercase font-semibold",children:"NAKÄ°T Ã–DEME"}),e.jsxs("p",{className:"text-lg font-bold text-amber-800",children:["MÃ¼ÅŸteriden â‚¬",N.totalPrice||N.pricing?.totalPrice||0," alÄ±nacak"]})]})]}),e.jsx("div",{className:"bg-amber-100 rounded-xl p-3 mt-3",children:e.jsxs("p",{className:"text-xs text-amber-700",children:[e.jsx("strong",{children:"Ã–NEMLÄ°:"})," MÃ¼ÅŸteri size nakit olarak â‚¬",N.totalPrice||N.pricing?.totalPrice||0," Ã¶deyecek. LÃ¼tfen bu tutarÄ± tahsil ettiÄŸinizi onaylayÄ±n."]})})]})]}),e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg p-6",children:["waiting"===D&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(n,{className:"w-8 h-8 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"HazÄ±r mÄ±sÄ±nÄ±z?"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"MÃ¼ÅŸteri ile buluÅŸtuÄŸunuzda yolculuÄŸu baÅŸlatÄ±n"}),e.jsx("button",{onClick:async()=>{if(N)try{k(!0);const e=x(p,"reservations",N.id);await u(e,{status:"in_progress",startedAt:h(),updatedAt:h()}),z("started")}catch(e){}finally{k(!1)}},disabled:w,className:"w-full bg-blue-600 text-white py-4 rounded-2xl font-semibold text-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:w?"BaÅŸlatÄ±lÄ±yor...":"YolculuÄŸu BaÅŸlat"})]}),"started"===D&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(d,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Yolculuk Devam Ediyor"}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:"Hedefe vardÄ±ÄŸÄ±nÄ±zda tamamlayÄ±n"}),e.jsx("button",{onClick:async()=>{if(N)try{k(!0);const e=x(p,"reservations",N.id);await u(e,{status:"completed",completedAt:h(),updatedAt:h()}),"manual"===N.assignedDriver||N.manualDriverInfo?await j(N.id,{...N,status:"completed",completedAt:h()}):(N.assignedDriver||N.assignedDriverId)&&await b(N.id,{...N,status:"completed",completedAt:h()}),z("completed")}catch(e){}finally{k(!1)}},disabled:w,className:"w-full bg-green-600 text-white py-4 rounded-2xl font-semibold text-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:w?"TamamlanÄ±yor...":"YolculuÄŸu Tamamla"})]})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Â© 2025 SBS Transfer Hizmetleri Ltd. Åžti."})})]})});var I};export{g as default};
