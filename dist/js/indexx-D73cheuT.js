import{j as e,X as t,U as s,d as n,a as r,N as i,c as o,ax as a,az as l,q as d,D as c,af as u,s as p,p as m,aK as g,P as h,M as v,e as f,at as x,r as b,R as y,m as j,au as w,av as L,h as N,Z as k,V as C,aE as S,C as E,aL as M,E as D,aM as O}from"./chunk-BcaSFcXu.js";import{r as P,e as I,R as T}from"./chunk-rj-8a6OE.js";import{B as z,H as A,K as R,A as B,M as U,J as _,u as V,n as F}from"./chunk-BY_DoteD.js";import{V as H,d as W,U as Z}from"./index-B7_6YKqI.js";import{m as $}from"./chunk-CQKzXw4l.js";import{Q as G}from"./chunk-B38cIYZW.js";import{E as K}from"./chunk-CY8KpSnY.js";import"./chunk-Bkkzv6j4.js";import"./chunk-D-dPr7Hw.js";function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t);if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}function Q(e,t,s){return(t=q(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function J(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var X,ee;var te=J(ee?X:(ee=1,X=function(e,t,s,n,r,i,o,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,n,r,i,o,a],c=0;(l=new Error(t.replace(/%s/g,function(){return d[c++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}})),se=P.createContext(null);function ne(e,t,s,n){var r,i,o={};return r=e,i=(e,r)=>{var i=s[r];i!==t[r]&&(o[r]=i,e(n,i))},Object.keys(r).forEach(e=>i(r[e],e)),o}function re(e,t,s){var n,r,i,o=(n=s,r=function(s,n,r){return"function"==typeof e[r]&&s.push(google.maps.event.addListener(t,n,e[r])),s},i=[],Object.keys(n).reduce(function(e,t){return r(e,n[t],t)},i));return o}function ie(e){google.maps.event.removeListener(e)}function oe(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(ie)}function ae(e){var{updaterMap:t,eventMap:s,prevProps:n,nextProps:r,instance:i}=e,o=re(r,i,s);return ne(t,n,r,i),o}function le(e,t,s,n,r,i,o){try{var a=e[i](o),l=a.value}catch(d){return void s(d)}a.done?t(l):Promise.resolve(l).then(n,r)}function de(e){return function(){var t=this,s=arguments;return new Promise(function(n,r){var i=e.apply(t,s);function o(e){le(i,n,r,o,a,"next",e)}function a(e){le(i,n,r,o,a,"throw",e)}o(void 0)})}}function ce(e){var{googleMapsApiKey:t,googleMapsClientId:s,version:n="weekly",language:r,region:i,libraries:o,channel:a,mapIds:l,authReferrerPolicy:d,apiUrl:c="https://maps.googleapis.com"}=e,u=[];return te(t&&s||!(t&&s),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?u.push("key=".concat(t)):s&&u.push("client=".concat(s)),n&&u.push("v=".concat(n)),r&&u.push("language=".concat(r)),i&&u.push("region=".concat(i)),o&&o.length&&u.push("libraries=".concat(o.sort().join(","))),a&&u.push("channel=".concat(a)),l&&l.length&&u.push("map_ids=".concat(l.join(","))),d&&u.push("auth_referrer_policy=".concat(d)),u.push("loading=async"),u.push("callback=initMap"),"".concat(c,"/maps/api/js?").concat(u.join("&"))}P.memo(function(t){var{children:s,options:n,id:r,mapContainerStyle:i,mapContainerClassName:o,center:a,onClick:l,onDblClick:d,onDrag:c,onDragEnd:u,onDragStart:p,onMouseMove:m,onMouseOut:g,onMouseOver:h,onMouseDown:v,onMouseUp:f,onRightClick:x,onCenterChanged:b,onLoad:y,onUnmount:j}=t,[w,L]=P.useState(null),N=P.useRef(null),[k,C]=P.useState(null),[S,E]=P.useState(null),[M,D]=P.useState(null),[O,I]=P.useState(null),[T,z]=P.useState(null),[A,R]=P.useState(null),[B,U]=P.useState(null),[_,V]=P.useState(null),[F,H]=P.useState(null),[W,Z]=P.useState(null),[$,G]=P.useState(null),[K,Y]=P.useState(null);return P.useEffect(()=>{n&&null!==w&&w.setOptions(n)},[w,n]),P.useEffect(()=>{null!==w&&void 0!==a&&w.setCenter(a)},[w,a]),P.useEffect(()=>{w&&d&&(null!==S&&google.maps.event.removeListener(S),E(google.maps.event.addListener(w,"dblclick",d)))},[d]),P.useEffect(()=>{w&&u&&(null!==M&&google.maps.event.removeListener(M),D(google.maps.event.addListener(w,"dragend",u)))},[u]),P.useEffect(()=>{w&&p&&(null!==O&&google.maps.event.removeListener(O),I(google.maps.event.addListener(w,"dragstart",p)))},[p]),P.useEffect(()=>{w&&v&&(null!==T&&google.maps.event.removeListener(T),z(google.maps.event.addListener(w,"mousedown",v)))},[v]),P.useEffect(()=>{w&&m&&(null!==A&&google.maps.event.removeListener(A),R(google.maps.event.addListener(w,"mousemove",m)))},[m]),P.useEffect(()=>{w&&g&&(null!==B&&google.maps.event.removeListener(B),U(google.maps.event.addListener(w,"mouseout",g)))},[g]),P.useEffect(()=>{w&&h&&(null!==_&&google.maps.event.removeListener(_),V(google.maps.event.addListener(w,"mouseover",h)))},[h]),P.useEffect(()=>{w&&f&&(null!==F&&google.maps.event.removeListener(F),H(google.maps.event.addListener(w,"mouseup",f)))},[f]),P.useEffect(()=>{w&&x&&(null!==W&&google.maps.event.removeListener(W),Z(google.maps.event.addListener(w,"rightclick",x)))},[x]),P.useEffect(()=>{w&&l&&(null!==$&&google.maps.event.removeListener($),G(google.maps.event.addListener(w,"click",l)))},[l]),P.useEffect(()=>{w&&c&&(null!==K&&google.maps.event.removeListener(K),Y(google.maps.event.addListener(w,"drag",c)))},[c]),P.useEffect(()=>{w&&b&&(null!==k&&google.maps.event.removeListener(k),C(google.maps.event.addListener(w,"center_changed",b)))},[l]),P.useEffect(()=>{var e=null===N.current?null:new google.maps.Map(N.current,n);return L(e),null!==e&&y&&y(e),()=>{null!==e&&j&&j(e)}},[]),e.jsx("div",{id:r,ref:N,style:i,className:o,children:e.jsx(se.Provider,{value:w,children:null!==w?s:null})})});var ue="undefined"!=typeof document;function pe(e){var{url:t,id:s,nonce:n}=e;return ue?new Promise(function(e,r){var i=document.getElementById(s),o=window;if(i){var a=i.getAttribute("data-state");if(i.src===t&&"error"!==a){if("ready"===a)return e(s);var l=o.initMap,d=i.onerror;return o.initMap=function(){l&&l(),e(s)},void(i.onerror=function(e){d&&d(e),r(e)})}i.remove()}var c=document.createElement("script");c.type="text/javascript",c.src=t,c.id=s,c.async=!0,c.nonce=n||"",c.onerror=function(e){c.setAttribute("data-state","error"),r(e)},o.initMap=function(){c.setAttribute("data-state","ready"),e(s)},document.head.appendChild(c)}).catch(e=>{throw e}):Promise.reject(new Error("document is undefined"))}function me(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function ge(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(s,n){return me(s)||Reflect.apply(t,e,[s,n]),s};var s=e.appendChild.bind(e);e.appendChild=function(t){return me(t)||Reflect.apply(s,e,[t]),t}}}var he=!1;function ve(){return e.jsx("div",{children:"Loading..."})}var fe,xe={id:"script-loader",version:"weekly"};class be extends P.PureComponent{constructor(){super(...arguments),Q(this,"check",null),Q(this,"state",{loaded:!1}),Q(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Q(this,"isCleaningUp",de(function*(){return new Promise(function(e){if(he){if(ue)var t=window.setInterval(function(){he||(window.clearInterval(t),e())},1)}else e()})})),Q(this,"cleanup",()=>{he=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(e){return"string"==typeof e.src&&e.src.includes("maps.googleapis")}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")}).forEach(function(e){e.parentNode&&e.parentNode.removeChild(e)})}),Q(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&ge(),te(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id),pe({id:this.props.id,nonce:this.props.nonce,url:ce(this.props)}).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(e=>{this.props.onError&&this.props.onError(e)})}),Q(this,"getRef",e=>{this.check=e})}componentDidMount(){if(ue){if(window.google&&window.google.maps&&!he)return;this.isCleaningUp().then(this.injectScript).catch(function(e){})}}componentDidUpdate(e){this.props.libraries,e.libraries,ue&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(ue){this.cleanup();window.setTimeout(()=>{this.check||(delete window.google,he=!1)},1),this.props.onUnmount&&this.props.onUnmount()}}render(){return e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||e.jsx(ve,{})]})}}function ye(e,t){if(null==e)return{};var s,n,r=function(e,t){if(null==e)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;s[n]=e[n]}return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.includes(s)||{}.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function je(e){var{id:t=xe.id,version:s=xe.version,nonce:n,googleMapsApiKey:r,googleMapsClientId:i,language:o,region:a,libraries:l,preventGoogleFontsLoading:d,channel:c,mapIds:u,authReferrerPolicy:p,apiUrl:m="https://maps.googleapis.com"}=e,g=P.useRef(!1),[h,v]=P.useState(!1),[f,x]=P.useState(void 0);P.useEffect(function(){return g.current=!0,()=>{g.current=!1}},[]),P.useEffect(function(){ue&&d&&ge()},[d]),P.useEffect(function(){h&&te(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[h]);var b=ce({version:s,googleMapsApiKey:r,googleMapsClientId:i,language:o,region:a,libraries:l,channel:c,mapIds:u,authReferrerPolicy:p,apiUrl:m});P.useEffect(function(){function e(){g.current&&(v(!0),fe=b)}ue&&(window.google&&window.google.maps&&fe===b?e():pe({id:t,url:b,nonce:n}).then(e).catch(function(e){g.current&&x(e)}))},[t,b,n]);var y=P.useRef(void 0);return P.useEffect(function(){y.current&&y.current,y.current=l},[l]),{isLoaded:h,loadError:f,url:b}}Q(be,"defaultProps",xe);var we,Le,Ne=["loadingElement","onLoad","onError","onUnmount","children"],ke=e.jsx(ve,{});function Ce(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ce(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}P.memo(function(e){var{loadingElement:t,onLoad:s,onError:n,onUnmount:r,children:i}=e,o=ye(e,Ne),{isLoaded:a,loadError:l}=je(o);return P.useEffect(function(){a&&"function"==typeof s&&s()},[a,s]),P.useEffect(function(){l&&"function"==typeof n&&n(l)},[l,n]),P.useEffect(function(){return()=>{r&&r()}},[r]),a?i:t||ke}),"function"==typeof SuppressedError&&SuppressedError,(Le=we||(we={}))[Le.INITIALIZED=0]="INITIALIZED",Le[Le.LOADING=1]="LOADING",Le[Le.SUCCESS=2]="SUCCESS",Le[Le.FAILURE=3]="FAILURE";var Ee={},Me={options(e,t){e.setOptions(t)}};P.memo(function(e){var{options:t,onLoad:s,onUnmount:n}=e,r=P.useContext(se),[i,o]=P.useState(null);return P.useEffect(()=>{null!==i&&i.setMap(r)},[r]),P.useEffect(()=>{t&&null!==i&&i.setOptions(t)},[i,t]),P.useEffect(()=>{var e=new google.maps.TrafficLayer(Se(Se({},t),{},{map:r}));return o(e),s&&s(e),()=>{null!==i&&(n&&n(i),i.setMap(null))}},[]),null});class De extends P.PureComponent{constructor(){super(...arguments),Q(this,"state",{trafficLayer:null}),Q(this,"setTrafficLayerCallback",()=>{null!==this.state.trafficLayer&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Q(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Se(Se({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:Me,eventMap:Ee,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){null!==this.state.trafficLayer&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Me,eventMap:Ee,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),oe(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Q(De,"contextType",se),P.memo(function(e){var{onLoad:t,onUnmount:s}=e,n=P.useContext(se),[r,i]=P.useState(null);return P.useEffect(()=>{null!==r&&r.setMap(n)},[n]),P.useEffect(()=>{var e=new google.maps.BicyclingLayer;return i(e),e.setMap(n),t&&t(e),()=>{null!==e&&(s&&s(e),e.setMap(null))}},[]),null});class Oe extends P.PureComponent{constructor(){super(...arguments),Q(this,"state",{bicyclingLayer:null}),Q(this,"setBicyclingLayerCallback",()=>{null!==this.state.bicyclingLayer&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Q(Oe,"contextType",se),P.memo(function(e){var{onLoad:t,onUnmount:s}=e,n=P.useContext(se),[r,i]=P.useState(null);return P.useEffect(()=>{null!==r&&r.setMap(n)},[n]),P.useEffect(()=>{var e=new google.maps.TransitLayer;return i(e),e.setMap(n),t&&t(e),()=>{null!==r&&(s&&s(r),r.setMap(null))}},[]),null});class Pe extends P.PureComponent{constructor(){super(...arguments),Q(this,"state",{transitLayer:null}),Q(this,"setTransitLayerCallback",()=>{null!==this.state.transitLayer&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}function Ie(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ie(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(Pe,"contextType",se);var ze={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},Ae={drawingMode(e,t){e.setDrawingMode(t)},options(e,t){e.setOptions(t)}};P.memo(function(e){var{options:t,drawingMode:s,onCircleComplete:n,onMarkerComplete:r,onOverlayComplete:i,onPolygonComplete:o,onPolylineComplete:a,onRectangleComplete:l,onLoad:d,onUnmount:c}=e,u=P.useContext(se),[p,m]=P.useState(null),[g,h]=P.useState(null),[v,f]=P.useState(null),[x,b]=P.useState(null),[y,j]=P.useState(null),[w,L]=P.useState(null),[N,k]=P.useState(null);return P.useEffect(()=>{null!==p&&p.setMap(u)},[u]),P.useEffect(()=>{t&&null!==p&&p.setOptions(t)},[p,t]),P.useEffect(()=>{null!==p&&p.setDrawingMode(null!=s?s:null)},[p,s]),P.useEffect(()=>{p&&n&&(null!==g&&google.maps.event.removeListener(g),h(google.maps.event.addListener(p,"circlecomplete",n)))},[p,n]),P.useEffect(()=>{p&&r&&(null!==v&&google.maps.event.removeListener(v),f(google.maps.event.addListener(p,"markercomplete",r)))},[p,r]),P.useEffect(()=>{p&&i&&(null!==x&&google.maps.event.removeListener(x),b(google.maps.event.addListener(p,"overlaycomplete",i)))},[p,i]),P.useEffect(()=>{p&&o&&(null!==y&&google.maps.event.removeListener(y),j(google.maps.event.addListener(p,"polygoncomplete",o)))},[p,o]),P.useEffect(()=>{p&&a&&(null!==w&&google.maps.event.removeListener(w),L(google.maps.event.addListener(p,"polylinecomplete",a)))},[p,a]),P.useEffect(()=>{p&&l&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(p,"rectanglecomplete",l)))},[p,l]),P.useEffect(()=>{te(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(Te(Te({},t),{},{map:u}));return s&&e.setDrawingMode(s),n&&h(google.maps.event.addListener(e,"circlecomplete",n)),r&&f(google.maps.event.addListener(e,"markercomplete",r)),i&&b(google.maps.event.addListener(e,"overlaycomplete",i)),o&&j(google.maps.event.addListener(e,"polygoncomplete",o)),a&&L(google.maps.event.addListener(e,"polylinecomplete",a)),l&&k(google.maps.event.addListener(e,"rectanglecomplete",l)),m(e),d&&d(e),()=>{null!==p&&(g&&google.maps.event.removeListener(g),v&&google.maps.event.removeListener(v),x&&google.maps.event.removeListener(x),y&&google.maps.event.removeListener(y),w&&google.maps.event.removeListener(w),N&&google.maps.event.removeListener(N),c&&c(p),p.setMap(null))}},[]),null});class Re extends P.PureComponent{constructor(e){super(e),Q(this,"registeredEvents",[]),Q(this,"state",{drawingManager:null}),Q(this,"setDrawingManagerCallback",()=>{null!==this.state.drawingManager&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),te(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Te(Te({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:Ae,eventMap:ze,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){null!==this.state.drawingManager&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Ae,eventMap:ze,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),oe(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}function Be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Ue(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Be(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(Re,"contextType",se);var _e={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},Ve={animation(e,t){e.setAnimation(t)},clickable(e,t){e.setClickable(t)},cursor(e,t){e.setCursor(t)},draggable(e,t){e.setDraggable(t)},icon(e,t){e.setIcon(t)},label(e,t){e.setLabel(t)},map(e,t){e.setMap(t)},opacity(e,t){e.setOpacity(t)},options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},shape(e,t){e.setShape(t)},title(e,t){e.setTitle(t)},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},Fe={};P.memo(function(t){var{position:s,options:n,clusterer:r,noClustererRedraw:i,children:o,draggable:a,visible:l,animation:d,clickable:c,cursor:u,icon:p,label:m,opacity:g,shape:h,title:v,zIndex:f,onClick:x,onDblClick:b,onDrag:y,onDragEnd:j,onDragStart:w,onMouseOut:L,onMouseOver:N,onMouseUp:k,onMouseDown:C,onRightClick:S,onClickableChanged:E,onCursorChanged:M,onAnimationChanged:D,onDraggableChanged:O,onFlatChanged:I,onIconChanged:T,onPositionChanged:z,onShapeChanged:A,onTitleChanged:R,onVisibleChanged:B,onZindexChanged:U,onLoad:_,onUnmount:V}=t,F=P.useContext(se),[H,W]=P.useState(null),[Z,$]=P.useState(null),[G,K]=P.useState(null),[Y,q]=P.useState(null),[Q,J]=P.useState(null),[X,ee]=P.useState(null),[te,ne]=P.useState(null),[re,ie]=P.useState(null),[oe,ae]=P.useState(null),[le,de]=P.useState(null),[ce,ue]=P.useState(null),[pe,me]=P.useState(null),[ge,he]=P.useState(null),[ve,fe]=P.useState(null),[xe,be]=P.useState(null),[ye,je]=P.useState(null),[we,Le]=P.useState(null),[Ne,ke]=P.useState(null),[Ce,Se]=P.useState(null),[Ee,Me]=P.useState(null),[De,Oe]=P.useState(null),[Pe,Ie]=P.useState(null);P.useEffect(()=>{null!==H&&H.setMap(F)},[F]),P.useEffect(()=>{void 0!==n&&null!==H&&H.setOptions(n)},[H,n]),P.useEffect(()=>{void 0!==a&&null!==H&&H.setDraggable(a)},[H,a]),P.useEffect(()=>{s&&null!==H&&H.setPosition(s)},[H,s]),P.useEffect(()=>{void 0!==l&&null!==H&&H.setVisible(l)},[H,l]),P.useEffect(()=>{null==H||H.setAnimation(d)},[H,d]),P.useEffect(()=>{H&&void 0!==c&&H.setClickable(c)},[H,c]),P.useEffect(()=>{H&&void 0!==u&&H.setCursor(u)},[H,u]),P.useEffect(()=>{H&&void 0!==p&&H.setIcon(p)},[H,p]),P.useEffect(()=>{H&&void 0!==m&&H.setLabel(m)},[H,m]),P.useEffect(()=>{H&&void 0!==g&&H.setOpacity(g)},[H,g]),P.useEffect(()=>{H&&void 0!==h&&H.setShape(h)},[H,h]),P.useEffect(()=>{H&&void 0!==v&&H.setTitle(v)},[H,v]),P.useEffect(()=>{H&&void 0!==f&&H.setZIndex(f)},[H,f]),P.useEffect(()=>{H&&b&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(H,"dblclick",b)))},[b]),P.useEffect(()=>{H&&j&&(null!==G&&google.maps.event.removeListener(G),K(google.maps.event.addListener(H,"dragend",j)))},[j]),P.useEffect(()=>{H&&w&&(null!==Y&&google.maps.event.removeListener(Y),q(google.maps.event.addListener(H,"dragstart",w)))},[w]),P.useEffect(()=>{H&&C&&(null!==Q&&google.maps.event.removeListener(Q),J(google.maps.event.addListener(H,"mousedown",C)))},[C]),P.useEffect(()=>{H&&L&&(null!==X&&google.maps.event.removeListener(X),ee(google.maps.event.addListener(H,"mouseout",L)))},[L]),P.useEffect(()=>{H&&N&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(H,"mouseover",N)))},[N]),P.useEffect(()=>{H&&k&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(H,"mouseup",k)))},[k]),P.useEffect(()=>{H&&S&&(null!==oe&&google.maps.event.removeListener(oe),ae(google.maps.event.addListener(H,"rightclick",S)))},[S]),P.useEffect(()=>{H&&x&&(null!==le&&google.maps.event.removeListener(le),de(google.maps.event.addListener(H,"click",x)))},[x]),P.useEffect(()=>{H&&y&&(null!==ce&&google.maps.event.removeListener(ce),ue(google.maps.event.addListener(H,"drag",y)))},[y]),P.useEffect(()=>{H&&E&&(null!==pe&&google.maps.event.removeListener(pe),me(google.maps.event.addListener(H,"clickable_changed",E)))},[E]),P.useEffect(()=>{H&&M&&(null!==ge&&google.maps.event.removeListener(ge),he(google.maps.event.addListener(H,"cursor_changed",M)))},[M]),P.useEffect(()=>{H&&D&&(null!==ve&&google.maps.event.removeListener(ve),fe(google.maps.event.addListener(H,"animation_changed",D)))},[D]),P.useEffect(()=>{H&&O&&(null!==xe&&google.maps.event.removeListener(xe),be(google.maps.event.addListener(H,"draggable_changed",O)))},[O]),P.useEffect(()=>{H&&I&&(null!==ye&&google.maps.event.removeListener(ye),je(google.maps.event.addListener(H,"flat_changed",I)))},[I]),P.useEffect(()=>{H&&T&&(null!==we&&google.maps.event.removeListener(we),Le(google.maps.event.addListener(H,"icon_changed",T)))},[T]),P.useEffect(()=>{H&&z&&(null!==Ne&&google.maps.event.removeListener(Ne),ke(google.maps.event.addListener(H,"position_changed",z)))},[z]),P.useEffect(()=>{H&&A&&(null!==Ce&&google.maps.event.removeListener(Ce),Se(google.maps.event.addListener(H,"shape_changed",A)))},[A]),P.useEffect(()=>{H&&R&&(null!==Ee&&google.maps.event.removeListener(Ee),Me(google.maps.event.addListener(H,"title_changed",R)))},[R]),P.useEffect(()=>{H&&B&&(null!==De&&google.maps.event.removeListener(De),Oe(google.maps.event.addListener(H,"visible_changed",B)))},[B]),P.useEffect(()=>{H&&U&&(null!==Pe&&google.maps.event.removeListener(Pe),Ie(google.maps.event.addListener(H,"zindex_changed",U)))},[U]),P.useEffect(()=>{var e=Ue(Ue(Ue({},n||Fe),r?Fe:{map:F}),{},{position:s}),t=new google.maps.Marker(e);return r?r.addMarker(t,!!i):t.setMap(F),s&&t.setPosition(s),void 0!==l&&t.setVisible(l),void 0!==a&&t.setDraggable(a),void 0!==c&&t.setClickable(c),"string"==typeof u&&t.setCursor(u),p&&t.setIcon(p),void 0!==m&&t.setLabel(m),void 0!==g&&t.setOpacity(g),h&&t.setShape(h),"string"==typeof v&&t.setTitle(v),"number"==typeof f&&t.setZIndex(f),b&&$(google.maps.event.addListener(t,"dblclick",b)),j&&K(google.maps.event.addListener(t,"dragend",j)),w&&q(google.maps.event.addListener(t,"dragstart",w)),C&&J(google.maps.event.addListener(t,"mousedown",C)),L&&ee(google.maps.event.addListener(t,"mouseout",L)),N&&ne(google.maps.event.addListener(t,"mouseover",N)),k&&ie(google.maps.event.addListener(t,"mouseup",k)),S&&ae(google.maps.event.addListener(t,"rightclick",S)),x&&de(google.maps.event.addListener(t,"click",x)),y&&ue(google.maps.event.addListener(t,"drag",y)),E&&me(google.maps.event.addListener(t,"clickable_changed",E)),M&&he(google.maps.event.addListener(t,"cursor_changed",M)),D&&fe(google.maps.event.addListener(t,"animation_changed",D)),O&&be(google.maps.event.addListener(t,"draggable_changed",O)),I&&je(google.maps.event.addListener(t,"flat_changed",I)),T&&Le(google.maps.event.addListener(t,"icon_changed",T)),z&&ke(google.maps.event.addListener(t,"position_changed",z)),A&&Se(google.maps.event.addListener(t,"shape_changed",A)),R&&Me(google.maps.event.addListener(t,"title_changed",R)),B&&Oe(google.maps.event.addListener(t,"visible_changed",B)),U&&Ie(google.maps.event.addListener(t,"zindex_changed",U)),W(t),_&&_(t),()=>{null!==Z&&google.maps.event.removeListener(Z),null!==G&&google.maps.event.removeListener(G),null!==Y&&google.maps.event.removeListener(Y),null!==Q&&google.maps.event.removeListener(Q),null!==X&&google.maps.event.removeListener(X),null!==te&&google.maps.event.removeListener(te),null!==re&&google.maps.event.removeListener(re),null!==oe&&google.maps.event.removeListener(oe),null!==le&&google.maps.event.removeListener(le),null!==pe&&google.maps.event.removeListener(pe),null!==ge&&google.maps.event.removeListener(ge),null!==ve&&google.maps.event.removeListener(ve),null!==xe&&google.maps.event.removeListener(xe),null!==ye&&google.maps.event.removeListener(ye),null!==we&&google.maps.event.removeListener(we),null!==Ne&&google.maps.event.removeListener(Ne),null!==Ee&&google.maps.event.removeListener(Ee),null!==De&&google.maps.event.removeListener(De),null!==Pe&&google.maps.event.removeListener(Pe),V&&V(t),r?r.removeMarker(t,!!i):t&&t.setMap(null)}},[]);var Te=P.useMemo(()=>o?P.Children.map(o,e=>{if(!P.isValidElement(e))return e;var t=e;return P.cloneElement(t,{anchor:H})}):null,[o,H]);return e.jsx(e.Fragment,{children:Te})||null});class He extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[])}componentDidMount(){var e=this;return de(function*(){var t=Ue(Ue(Ue({},e.props.options||Fe),e.props.clusterer?Fe:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(t),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=ae({updaterMap:Ve,eventMap:_e,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Ve,eventMap:_e,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),oe(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){return(this.props.children?P.Children.map(this.props.children,e=>{if(!P.isValidElement(e))return e;var t=e;return P.cloneElement(t,{anchor:this.marker})}):null)||null}}Q(He,"contextType",se);var We=function(){function e(t,s){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=s,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var s=t.getMaxZoom(),n=this.cluster.getBounds(),r=t.getMap();null!==r&&"fitBounds"in r&&r.fitBounds(n),this.timeOut=window.setTimeout(function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(n);var r=e.getZoom()||0;null!==s&&r>s&&e.setZoom(s+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,s,n,r,i;if(this.div&&this.center){var o=null===this.sums||void 0===this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,a=this.backgroundPosition.split(" "),l=parseInt((null===(e=a[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),d=parseInt((null===(t=a[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),c=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==c?"".concat(c.y,"px"):"0","; left: ").concat(null!==c?"".concat(c.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var u=document.createElement("img");u.alt=o,u.src=this.url,u.width=this.width,u.height=this.height,u.setAttribute("style","position: absolute; top: ".concat(d,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(u.style.clip="rect(-".concat(d,"px, -").concat(l+this.width,"px, -").concat(d+this.height,", -").concat(l,")"));var p=document.createElement("div");p.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(s=this.sums)||void 0===s?void 0:s.text)&&(p.innerText="".concat(null===(n=this.sums)||void 0===n?void 0:n.text)),(null===(r=this.sums)||void 0===r?void 0:r.html)&&(p.innerHTML="".concat(null===(i=this.sums)||void 0===i?void 0:i.html)),this.div.innerHTML="",this.div.appendChild(u),this.div.appendChild(p),this.div.title=o,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),s=t[Math.min(t.length-1,Math.max(0,e.index-1))];s&&(this.url=s.url,this.height=s.height,this.width=s.width,s.className&&(this.className="".concat(this.clusterClassName," ").concat(s.className)),this.anchorText=s.anchorText||[0,0],this.anchorIcon=s.anchorIcon||[this.height/2,this.width/2],this.textColor=s.textColor||"black",this.textSize=s.textSize||11,this.textDecoration=s.textDecoration||"none",this.fontWeight=s.fontWeight||"bold",this.fontStyle=s.fontStyle||"normal",this.fontFamily=s.fontFamily||"Arial,sans-serif",this.backgroundPosition=s.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),Ze=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new We(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,s=this.getMarkers();t<s.length;t++){var n=s[t].getPosition();n&&e.extend(n)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,s;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(s=e.getPosition())){var n=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(n-1)+s.lat())/n,(this.center.lng()*(n-1)+s.lng())/n),this.calculateBounds()}}else(s=e.getPosition())&&(this.center=s,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var r=this.markers.length,i=this.markerClusterer.getMaxZoom(),o=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==i&&void 0!==o&&o>i)e.getMap()!==this.map&&e.setMap(this.map);else if(r<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(r===this.minClusterSize)for(var a=0,l=this.markers;a<l.length;a++){l[a].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,s=this.markerClusterer.getMaxZoom(),n=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==s&&void 0!==n&&n>s||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function $e(e,t){var s=e.length,n=s.toString().length,r=Math.min(n,t);return{text:s.toString(),index:r,title:""}}var Ge=[53,56,66,78,90],Ke=function(){function e(t,s,n){void 0===s&&(s=[]),void 0===n&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,void 0!==n.averageCenter&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=n.imageExtension||"png",this.imageSizes=n.imageSizes||Ge,this.calculator=n.calculator||$e,this.batchSize=n.batchSize||2e3,this.batchSizeIE=n.batchSizeIE||500,this.clusterClass=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(s,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var s=t[e];s.getMap()!==this.activeMap&&s.setMap(this.activeMap)}for(var n=0,r=this.clusters;n<r.length;n++){r[n].remove()}this.clusters=[];for(var i=0,o=this.listeners;i<o.length;i++){var a=o[i];google.maps.event.removeListener(a)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,s=0,n=e;s<n.length;s++){var r=n[s].getPosition();r&&t.extend(r)}var i=this.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var n=e[s];n&&this.pushMarkerTo(n)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){t.ready&&(e.isAdded=!1,t.repaint())}),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var s=0;s<this.markers.length;s++)if(e===this.markers[s]){t=s;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var s=this.removeMarker_(e);return!t&&s&&this.repaint(),s},e.prototype.removeMarkers=function(e,t){for(var s=!1,n=0,r=e;n<r.length;n++){var i=r[n];s=s||this.removeMarker_(i)}return!t&&s&&this.repaint(),s},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var t=0,s=e;t<s.length;t++){s[t].remove()}},0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),s=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==s&&(s.x+=this.gridSize,s.y-=this.gridSize);var n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==n&&(n.x-=this.gridSize,n.y+=this.gridSize),null!==s){var r=t.fromDivPixelToLatLng(s);null!==r&&e.extend(r)}if(null!==n){var i=t.fromDivPixelToLatLng(n);null!==i&&e.extend(i)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,s=this.clusters;t<s.length;t++){s[t].remove()}this.clusters=[];for(var n=0,r=this.markers;n<r.length;n++){var i=r[n];i.isAdded=!1,e&&i.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var s=(t.lat()-e.lat())*Math.PI/180,n=(t.lng()-e.lng())*Math.PI/180,r=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(n/2)*Math.sin(n/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371},e.prototype.isMarkerInBounds=function(e,t){var s=e.getPosition();return!!s&&t.contains(s)},e.prototype.addToClosestCluster=function(e){for(var t,s=4e4,n=null,r=0,i=this.clusters;r<i.length;r++){var o=(t=i[r]).getCenter(),a=e.getPosition();if(o&&a){var l=this.distanceBetweenPoints(o,a);l<s&&(s=l,n=t)}}n&&n.isMarkerInClusterBounds(e)?n.addMarker(e):((t=new Ze(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var s=this.getMap(),n=(null!==s&&"getBounds"in s?s.getBounds():null),r=((null==s?void 0:s.getZoom())||0)>3?new google.maps.LatLngBounds(null==n?void 0:n.getSouthWest(),null==n?void 0:n.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),i=this.getExtendedBounds(r),o=Math.min(e+this.batchSize,this.markers.length),a=e;a<o;a++){var l=this.markers[a];l&&!l.isAdded&&this.isMarkerInBounds(l,i)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(o<this.markers.length)this.timerRefStatic=window.setTimeout(function(){t.createClusters(o)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var d=0,c=this.clusters;d<c.length;d++){c[d].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var s=t;this.prototype[s]=e.prototype[s]}return this}.apply(e,[t])},e}();function Ye(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}var qe={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Qe={averageCenter(e,t){e.setAverageCenter(t)},batchSizeIE(e,t){e.setBatchSizeIE(t)},calculator(e,t){e.setCalculator(t)},clusterClass(e,t){e.setClusterClass(t)},enableRetinaIcons(e,t){e.setEnableRetinaIcons(t)},gridSize(e,t){e.setGridSize(t)},ignoreHidden(e,t){e.setIgnoreHidden(t)},imageExtension(e,t){e.setImageExtension(t)},imagePath(e,t){e.setImagePath(t)},imageSizes(e,t){e.setImageSizes(t)},maxZoom(e,t){e.setMaxZoom(t)},minimumClusterSize(e,t){e.setMinimumClusterSize(t)},styles(e,t){e.setStyles(t)},title(e,t){e.setTitle(t)},zoomOnClick(e,t){e.setZoomOnClick(t)}},Je={};P.memo(function(e){var{children:t,options:s,averageCenter:n,batchSizeIE:r,calculator:i,clusterClass:o,enableRetinaIcons:a,gridSize:l,ignoreHidden:d,imageExtension:c,imagePath:u,imageSizes:p,maxZoom:m,minimumClusterSize:g,styles:h,title:v,zoomOnClick:f,onClick:x,onClusteringBegin:b,onClusteringEnd:y,onMouseOver:j,onMouseOut:w,onLoad:L,onUnmount:N}=e,[k,C]=P.useState(null),S=P.useContext(se),[E,M]=P.useState(null),[D,O]=P.useState(null),[I,T]=P.useState(null),[z,A]=P.useState(null),[R,B]=P.useState(null);return P.useEffect(()=>{k&&w&&(null!==z&&google.maps.event.removeListener(z),A(google.maps.event.addListener(k,qe.onMouseOut,w)))},[w]),P.useEffect(()=>{k&&j&&(null!==R&&google.maps.event.removeListener(R),B(google.maps.event.addListener(k,qe.onMouseOver,j)))},[j]),P.useEffect(()=>{k&&x&&(null!==E&&google.maps.event.removeListener(E),M(google.maps.event.addListener(k,qe.onClick,x)))},[x]),P.useEffect(()=>{k&&b&&(null!==D&&google.maps.event.removeListener(D),O(google.maps.event.addListener(k,qe.onClusteringBegin,b)))},[b]),P.useEffect(()=>{k&&y&&(null!==I&&google.maps.event.removeListener(I),O(google.maps.event.addListener(k,qe.onClusteringEnd,y)))},[y]),P.useEffect(()=>{void 0!==n&&null!==k&&Qe.averageCenter(k,n)},[k,n]),P.useEffect(()=>{void 0!==r&&null!==k&&Qe.batchSizeIE(k,r)},[k,r]),P.useEffect(()=>{void 0!==i&&null!==k&&Qe.calculator(k,i)},[k,i]),P.useEffect(()=>{void 0!==o&&null!==k&&Qe.clusterClass(k,o)},[k,o]),P.useEffect(()=>{void 0!==a&&null!==k&&Qe.enableRetinaIcons(k,a)},[k,a]),P.useEffect(()=>{void 0!==l&&null!==k&&Qe.gridSize(k,l)},[k,l]),P.useEffect(()=>{void 0!==d&&null!==k&&Qe.ignoreHidden(k,d)},[k,d]),P.useEffect(()=>{void 0!==c&&null!==k&&Qe.imageExtension(k,c)},[k,c]),P.useEffect(()=>{void 0!==u&&null!==k&&Qe.imagePath(k,u)},[k,u]),P.useEffect(()=>{void 0!==p&&null!==k&&Qe.imageSizes(k,p)},[k,p]),P.useEffect(()=>{void 0!==m&&null!==k&&Qe.maxZoom(k,m)},[k,m]),P.useEffect(()=>{void 0!==g&&null!==k&&Qe.minimumClusterSize(k,g)},[k,g]),P.useEffect(()=>{void 0!==h&&null!==k&&Qe.styles(k,h)},[k,h]),P.useEffect(()=>{void 0!==v&&null!==k&&Qe.title(k,v)},[k,v]),P.useEffect(()=>{void 0!==f&&null!==k&&Qe.zoomOnClick(k,f)},[k,f]),P.useEffect(()=>{if(S){var e=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ye(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},s||Je),t=new Ke(S,[],e);return n&&Qe.averageCenter(t,n),r&&Qe.batchSizeIE(t,r),i&&Qe.calculator(t,i),o&&Qe.clusterClass(t,o),a&&Qe.enableRetinaIcons(t,a),l&&Qe.gridSize(t,l),d&&Qe.ignoreHidden(t,d),c&&Qe.imageExtension(t,c),u&&Qe.imagePath(t,u),p&&Qe.imageSizes(t,p),m&&Qe.maxZoom(t,m),g&&Qe.minimumClusterSize(t,g),h&&Qe.styles(t,h),v&&Qe.title(t,v),f&&Qe.zoomOnClick(t,f),w&&A(google.maps.event.addListener(t,qe.onMouseOut,w)),j&&B(google.maps.event.addListener(t,qe.onMouseOver,j)),x&&M(google.maps.event.addListener(t,qe.onClick,x)),b&&O(google.maps.event.addListener(t,qe.onClusteringBegin,b)),y&&T(google.maps.event.addListener(t,qe.onClusteringEnd,y)),C(t),L&&L(t),()=>{null!==z&&google.maps.event.removeListener(z),null!==R&&google.maps.event.removeListener(R),null!==E&&google.maps.event.removeListener(E),null!==D&&google.maps.event.removeListener(D),null!==I&&google.maps.event.removeListener(I),N&&N(t)}}},[]),null!==k&&t(k)||null});class Xe extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{markerClusterer:null}),Q(this,"setClustererCallback",()=>{null!==this.state.markerClusterer&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new Ke(this.context,[],this.props.options);this.registeredEvents=ae({updaterMap:Qe,eventMap:qe,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Qe,eventMap:qe,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),oe(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null}}function et(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}Q(Xe,"contextType",se);var tt=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),void 0===t.visible&&(void 0===t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"==typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var n=0,r=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];n<r.length;n++){var i=r[n];this.eventListeners.push(google.maps.event.addListener(this.div,i,et))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||et(t)}),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var s=0,n=0,r=t.getBounds();r&&!r.contains(this.position)&&t.setCenter(this.position);var i=t.getDiv(),o=i.offsetWidth,a=i.offsetHeight,l=this.pixelOffset.width,d=this.pixelOffset.height,c=this.div.offsetWidth,u=this.div.offsetHeight,p=this.infoBoxClearance.width,m=this.infoBoxClearance.height,g=this.getProjection().fromLatLngToContainerPixel(this.position);null!==g&&(g.x<-l+p?s=g.x+l-p:g.x+c+l+p>o&&(s=g.x+c+l+p-o),this.alignBottom?g.y<-d+m+u?n=g.y+d-m-u:g.y+d+m>a&&(n=g.y+d+m-a):g.y<-d+m?n=g.y+d-m:g.y+u+d+m>a&&(n=g.y+u+d+m-a)),0===s&&0===n||t.panBy(s,n)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)",void 0!==this.div.style.opacity&&""!==this.div.style.opacity){var s=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*s+')"',this.div.style.filter="alpha(opacity="+100*s+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,s=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var n=this.div.currentStyle;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),void 0!==e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),void 0!==e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),void 0!==e.content&&this.setContent(e.content),void 0!==e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),void 0!==e.maxWidth&&(this.maxWidth=e.maxWidth),void 0!==e.pixelOffset&&(this.pixelOffset=e.pixelOffset),void 0!==e.alignBottom&&(this.alignBottom=e.alignBottom),void 0!==e.position&&this.setPosition(e.position),void 0!==e.zIndex&&this.setZIndex(e.zIndex),void 0!==e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),void 0!==e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),void 0!==e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),void 0!==e.isHidden&&(this.isHidden=e.isHidden),void 0!==e.visible&&(this.isHidden=!e.visible),void 0!==e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"==typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"==typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return null!=e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var s=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",function(){var e=t.getPosition();s.setPosition(e)}),this.mapListener=google.maps.event.addListener(t,"map_changed",function(){s.setMap(t.map)})),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var s=t[e];google.maps.event.removeListener(s)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),st=["position"],nt=["position"];function rt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function it(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rt(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var ot,at,lt={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},dt={options(e,t){e.setOptions(t)},position(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible(e,t){e.setVisible(t)},zIndex(e,t){e.setZIndex(t)}},ct={};P.memo(function(e){var{children:t,anchor:s,options:n,position:r,zIndex:i,onCloseClick:o,onDomReady:a,onContentChanged:l,onPositionChanged:d,onZindexChanged:c,onLoad:u,onUnmount:p}=e,m=P.useContext(se),[g,h]=P.useState(null),[v,f]=P.useState(null),[x,b]=P.useState(null),[y,j]=P.useState(null),[w,L]=P.useState(null),[N,k]=P.useState(null),C=P.useRef(null);return P.useEffect(()=>{m&&null!==g&&(g.close(),s?g.open(m,s):g.getPosition()&&g.open(m))},[m,g,s]),P.useEffect(()=>{n&&null!==g&&g.setOptions(n)},[g,n]),P.useEffect(()=>{if(r&&null!==g){var e=r instanceof google.maps.LatLng?r:new google.maps.LatLng(r.lat,r.lng);g.setPosition(e)}},[r]),P.useEffect(()=>{"number"==typeof i&&null!==g&&g.setZIndex(i)},[i]),P.useEffect(()=>{g&&o&&(null!==v&&google.maps.event.removeListener(v),f(google.maps.event.addListener(g,"closeclick",o)))},[o]),P.useEffect(()=>{g&&a&&(null!==x&&google.maps.event.removeListener(x),b(google.maps.event.addListener(g,"domready",a)))},[a]),P.useEffect(()=>{g&&l&&(null!==y&&google.maps.event.removeListener(y),j(google.maps.event.addListener(g,"content_changed",l)))},[l]),P.useEffect(()=>{g&&d&&(null!==w&&google.maps.event.removeListener(w),L(google.maps.event.addListener(g,"position_changed",d)))},[d]),P.useEffect(()=>{g&&c&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(g,"zindex_changed",c)))},[c]),P.useEffect(()=>{if(m){var e,t=n||ct,{position:r}=t,i=ye(t,st);!r||r instanceof google.maps.LatLng||(e=new google.maps.LatLng(r.lat,r.lng));var S=new tt(it(it({},i),e?{position:e}:{}));C.current=document.createElement("div"),h(S),o&&f(google.maps.event.addListener(S,"closeclick",o)),a&&b(google.maps.event.addListener(S,"domready",a)),l&&j(google.maps.event.addListener(S,"content_changed",l)),d&&L(google.maps.event.addListener(S,"position_changed",d)),c&&k(google.maps.event.addListener(S,"zindex_changed",c)),S.setContent(C.current),s?S.open(m,s):S.getPosition()?S.open(m):te(!1,"You must provide either an anchor or a position prop for <InfoBox>."),u&&u(S)}return()=>{null!==g&&(v&&google.maps.event.removeListener(v),y&&google.maps.event.removeListener(y),x&&google.maps.event.removeListener(x),w&&google.maps.event.removeListener(w),N&&google.maps.event.removeListener(N),p&&p(g),g.close())}},[]),C.current?I.createPortal(P.Children.only(t),C.current):null});class ut extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",null),Q(this,"state",{infoBox:null}),Q(this,"open",(e,t)=>{t?null!==this.context&&e.open(this.context,t):e.getPosition()?null!==this.context&&e.open(this.context):te(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Q(this,"setInfoBoxCallback",()=>{null!==this.state.infoBox&&null!==this.containerElement&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e,t=this.props.options||{},{position:s}=t,n=ye(t,nt);!s||s instanceof google.maps.LatLng||(e=new google.maps.LatLng(s.lat,s.lng));var r=new tt(it(it({},n),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=ae({updaterMap:dt,eventMap:lt,prevProps:{},nextProps:this.props,instance:r}),this.setState({infoBox:r},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:t}=this.state;null!==t&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:dt,eventMap:lt,prevProps:e,nextProps:this.props,instance:t}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:t}=this.state;null!==t&&(e&&e(t),oe(this.registeredEvents),t.close())}render(){return this.containerElement?I.createPortal(P.Children.only(this.props.children),this.containerElement):null}}Q(ut,"contextType",se);var pt=J(at?ot:(at=1,ot=function e(t,s){if(t===s)return!0;if(t&&s&&"object"==typeof t&&"object"==typeof s){if(t.constructor!==s.constructor)return!1;var n,r,i;if(Array.isArray(t)){if((n=t.length)!=s.length)return!1;for(r=n;0!==r--;)if(!e(t[r],s[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((n=(i=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(s,i[r]))return!1;for(r=n;0!==r--;){var o=i[r];if(!e(t[o],s[o]))return!1}return!0}return t!=t&&s!=s})),mt=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class gt{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[t,s]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");var n=s>>4;if(1!==n)throw new Error("Got v".concat(n," data when expected v").concat(1,"."));var r=mt[15&s];if(!r)throw new Error("Unrecognized array type.");var[i]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new gt(o,i,r,e)}constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,n=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var r=mt.indexOf(this.ArrayType),i=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-o%8)%8;if(r<0)throw new Error("Unexpected typed array class: ".concat(s,"."));n&&n instanceof ArrayBuffer?(this.data=n,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+i+o+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){var s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=t,s}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return ht(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,s,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:r,coords:i,nodeSize:o}=this,a=[0,r.length-1,0],l=[];a.length;){var d=a.pop()||0,c=a.pop()||0,u=a.pop()||0;if(c-u<=o)for(var p=u;p<=c;p++){var m=i[2*p],g=i[2*p+1];m>=e&&m<=s&&g>=t&&g<=n&&l.push(r[p])}else{var h=u+c>>1,v=i[2*h],f=i[2*h+1];v>=e&&v<=s&&f>=t&&f<=n&&l.push(r[h]),(0===d?e<=v:t<=f)&&(a.push(u),a.push(h-1),a.push(1-d)),(0===d?s>=v:n>=f)&&(a.push(h+1),a.push(c),a.push(1-d))}}return l}within(e,t,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:n,coords:r,nodeSize:i}=this,o=[0,n.length-1,0],a=[],l=s*s;o.length;){var d=o.pop()||0,c=o.pop()||0,u=o.pop()||0;if(c-u<=i)for(var p=u;p<=c;p++)bt(r[2*p],r[2*p+1],e,t)<=l&&a.push(n[p]);else{var m=u+c>>1,g=r[2*m],h=r[2*m+1];bt(g,h,e,t)<=l&&a.push(n[m]),(0===d?e-s<=g:t-s<=h)&&(o.push(u),o.push(m-1),o.push(1-d)),(0===d?e+s>=g:t+s>=h)&&(o.push(m+1),o.push(c),o.push(1-d))}}return a}}function ht(e,t,s,n,r,i){if(!(r-n<=s)){var o=n+r>>1;vt(e,t,o,n,r,i),ht(e,t,s,n,o-1,1-i),ht(e,t,s,o+1,r,1-i)}}function vt(e,t,s,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=s-n+1,l=Math.log(o),d=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*d*(o-d)/o)*(a-o/2<0?-1:1);vt(e,t,s,Math.max(n,Math.floor(s-a*d/o+c)),Math.min(r,Math.floor(s+(o-a)*d/o+c)),i)}var u=t[2*s+i],p=n,m=r;for(ft(e,t,n,s),t[2*r+i]>u&&ft(e,t,n,r);p<m;){for(ft(e,t,p,m),p++,m--;t[2*p+i]<u;)p++;for(;t[2*m+i]>u;)m--}t[2*n+i]===u?ft(e,t,n,m):ft(e,t,++m,r),m<=s&&(n=m+1),s<=m&&(r=m-1)}}function ft(e,t,s,n){xt(e,s,n),xt(t,2*s,2*n),xt(t,2*s+1,2*n+1)}function xt(e,t,s){var n=e[t];e[t]=e[s],e[s]=n}function bt(e,t,s,n){var r=e-s,i=t-n;return r*r+i*i}var yt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},jt=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1));class wt{constructor(e){this.options=Object.assign(Object.create(yt),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:t,minZoom:s,maxZoom:n}=this.options;"prepare ".concat(e.length," points");this.points=e;for(var r=[],i=0;i<e.length;i++){var o=e[i];if(o.geometry){var[a,l]=o.geometry.coordinates,d=jt(kt(a)),c=jt(Ct(l));r.push(d,c,1/0,i,-1,1),this.options.reduce&&r.push(0)}}for(var u=this.trees[n+1]=this._createTree(r),p=n;p>=s;p--){Date.now();u=this.trees[p]=this._createTree(this._cluster(u,p))}return this}getClusters(e,t){var s=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),r=180===e[2]?180:((e[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)s=-180,r=180;else if(s>r){var o=this.getClusters([s,n,180,i],t),a=this.getClusters([-180,n,r,i],t);return o.concat(a)}var l=this.trees[this._limitZoom(t)],d=l.range(kt(s),Ct(i),kt(r),Ct(n)),c=l.data,u=[];for(var p of d){var m=this.stride*p;u.push(c[m+5]>1?Lt(c,m,this.clusterProps):this.points[c[m+3]])}return u}getChildren(e){var t=this._getOriginId(e),s=this._getOriginZoom(e),n="No cluster with the specified id.",r=this.trees[s];if(!r)throw new Error(n);var i=r.data;if(t*this.stride>=i.length)throw new Error(n);var o=this.options.radius/(this.options.extent*Math.pow(2,s-1)),a=i[t*this.stride],l=i[t*this.stride+1],d=r.within(a,l,o),c=[];for(var u of d){var p=u*this.stride;i[p+4]===e&&c.push(i[p+5]>1?Lt(i,p,this.clusterProps):this.points[i[p+3]])}if(0===c.length)throw new Error(n);return c}getLeaves(e,t,s){t=t||10,s=s||0;var n=[];return this._appendLeaves(n,e,t,s,0),n}getTile(e,t,s){var n=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:i,radius:o}=this.options,a=o/i,l=(s-a)/r,d=(s+1+a)/r,c={features:[]};return this._addTileFeatures(n.range((t-a)/r,l,(t+1+a)/r,d),n.data,t,s,r,c),0===t&&this._addTileFeatures(n.range(1-a/r,l,1,d),n.data,r,s,r,c),t===r-1&&this._addTileFeatures(n.range(0,l,a/r,d),n.data,-1,s,r,c),c.features.length?c:null}getClusterExpansionZoom(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var s=this.getChildren(e);if(t++,1!==s.length)break;e=s[0].properties.cluster_id}return t}_appendLeaves(e,t,s,n,r){var i=this.getChildren(t);for(var o of i){var a=o.properties;if(a&&a.cluster?r+a.point_count<=n?r+=a.point_count:r=this._appendLeaves(e,a.cluster_id,s,n,r):r<n?r++:e.push(o),e.length===s)break}return r}_createTree(e){for(var t=new gt(e.length/this.stride|0,this.options.nodeSize,Float32Array),s=0;s<e.length;s+=this.stride)t.add(e[s],e[s+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,s,n,r,i){for(var o of e){var a=o*this.stride,l=t[a+5]>1,d=void 0,c=void 0,u=void 0;if(l)d=Nt(t,a,this.clusterProps),c=t[a],u=t[a+1];else{var p=this.points[t[a+3]];d=p.properties;var[m,g]=p.geometry.coordinates;c=kt(m),u=Ct(g)}var h={type:1,geometry:[[Math.round(this.options.extent*(c*r-s)),Math.round(this.options.extent*(u*r-n))]],tags:d},v=void 0;void 0!==(v=l||this.options.generateId?t[a+3]:this.points[t[a+3]].id)&&(h.id=v),i.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){for(var{radius:s,extent:n,reduce:r,minPoints:i}=this.options,o=s/(n*Math.pow(2,t)),a=e.data,l=[],d=this.stride,c=0;c<a.length;c+=d)if(!(a[c+2]<=t)){a[c+2]=t;var u=a[c],p=a[c+1],m=e.within(a[c],a[c+1],o),g=a[c+5],h=g;for(var v of m){var f=v*d;a[f+2]>t&&(h+=a[f+5])}if(h>g&&h>=i){var x=u*g,b=p*g,y=void 0,j=-1,w=(c/d<<5)+(t+1)+this.points.length;for(var L of m){var N=L*d;if(!(a[N+2]<=t)){a[N+2]=t;var k=a[N+5];x+=a[N]*k,b+=a[N+1]*k,a[N+4]=w,r&&(y||(y=this._map(a,c,!0),j=this.clusterProps.length,this.clusterProps.push(y)),r(y,this._map(a,N)))}}a[c+4]=w,l.push(x/h,b/h,1/0,w,-1,h),r&&l.push(j)}else{for(var C=0;C<d;C++)l.push(a[c+C]);if(h>1)for(var S of m){var E=S*d;if(!(a[E+2]<=t)){a[E+2]=t;for(var M=0;M<d;M++)l.push(a[E+M])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,s){if(e[t+5]>1){var n=this.clusterProps[e[t+6]];return s?Object.assign({},n):n}var r=this.points[e[t+3]].properties,i=this.options.map(r);return s&&i===r?Object.assign({},i):i}}function Lt(e,t,s){return{type:"Feature",id:e[t+3],properties:Nt(e,t,s),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),(n=e[t+1],r=(180-360*n)*Math.PI/180,360*Math.atan(Math.exp(r))/Math.PI-90)]}};var n,r,i;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */}function Nt(e,t,s){var n=e[t+5],r=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,i=e[t+6],o=-1===i?{}:Object.assign({},s[i]);return Object.assign(o,{cluster:!0,cluster_id:e[t+3],point_count:n,point_count_abbreviated:r})}function kt(e){return e/360+.5}function Ct(e){var t=Math.sin(e*Math.PI/180),s=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return s<0?0:s>1?1:s}class St{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class Et{constructor(e){var{markers:t,position:s}=e;this.markers=t,s&&(s instanceof google.maps.LatLng?this._position=s:this._position=new google.maps.LatLng(s))}get bounds(){if(0!==this.markers.length||this._position){var e=new google.maps.LatLngBounds(this._position,this._position);for(var t of this.markers)e.extend(St.getPosition(t));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>St.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(St.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class Mt{constructor(e){var{maxZoom:t=16}=e;this.maxZoom=t}noop(e){var{markers:t}=e;return Pt(t)}}var Dt,Ot,Pt=e=>e.map(e=>new Et({position:St.getPosition(e),markers:[e]}));class It extends Mt{constructor(e){var{maxZoom:t,radius:s=60}=e,n=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]])}return s}(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new wt(Object.assign({maxZoom:this.maxZoom,radius:s},n))}calculate(e){var t=!1,s={zoom:e.map.getZoom()};if(!pt(e.markers,this.markers)){t=!0,this.markers=[...e.markers];var n=this.markers.map(e=>{var t=St.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}});this.superCluster.load(n)}return t||(this.state.zoom<=this.maxZoom||s.zoom<=this.maxZoom)&&(t=!pt(this.state,s)),this.state=s,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){var{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map(e=>this.transformCluster(e))}transformCluster(e){var{geometry:{coordinates:[t,s]},properties:n}=e;if(n.cluster)return new Et({markers:this.superCluster.getLeaves(n.cluster_id,1/0).map(e=>e.properties.marker),position:{lat:s,lng:t}});var r=n.marker;return new Et({markers:[r],position:St.getPosition(r)})}}class Tt{constructor(e,t){this.markers={sum:e.length};var s=t.map(e=>e.count),n=s.reduce((e,t)=>e+t,0);this.clusters={count:t.length,markers:{mean:n/t.length,sum:n,min:Math.min(...s),max:Math.max(...s)}}}}class zt{render(e,t,s){var{count:n,position:r}=e,i=n>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",o='<svg fill="'.concat(i,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(n,"</text>\n</svg>"),a="Cluster of ".concat(n," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+n;if(St.isAdvancedMarkerAvailable(s)){var d=(new DOMParser).parseFromString(o,"image/svg+xml").documentElement;d.setAttribute("transform","translate(0 25)");var c={map:s,position:r,zIndex:l,title:a,content:d};return new google.maps.marker.AdvancedMarkerElement(c)}var u={position:r,zIndex:l,title:a,icon:{url:"data:image/svg+xml;base64,".concat(btoa(o)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(u)}}class At{constructor(){!function(e,t){for(var s in t.prototype)e.prototype[s]=t.prototype[s]}(At,google.maps.OverlayView)}}(Ot=Dt||(Dt={})).CLUSTERING_BEGIN="clusteringbegin",Ot.CLUSTERING_END="clusteringend",Ot.CLUSTER_CLICK="click";var Rt=(e,t,s)=>{s.fitBounds(t.bounds)};class Bt extends At{constructor(e){var{map:t,markers:s=[],algorithmOptions:n={},algorithm:r=new It(n),renderer:i=new zt,onClusterClick:o=Rt}=e;super(),this.markers=[...s],this.clusters=[],this.algorithm=r,this.renderer=i,this.onClusterClick=o,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach(e=>{this.addMarker(e,!0)}),t||this.render()}removeMarker(e,t){var s=this.markers.indexOf(e);return-1!==s&&(St.setMap(e,null),this.markers.splice(s,1),t||this.render(),!0)}removeMarkers(e,t){var s=!1;return e.forEach(e=>{s=this.removeMarker(e,!0)||s}),s&&!t&&this.render(),s}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Dt.CLUSTERING_BEGIN,this);var{clusters:t,changed:s}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(s||null==s){var n=new Set;for(var r of t)1==r.markers.length&&n.add(r.markers[0]);var i=[];for(var o of this.clusters)null!=o.marker&&(1==o.markers.length?n.has(o.marker)||St.setMap(o.marker,null):i.push(o.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame(()=>i.forEach(e=>St.setMap(e,null)))}google.maps.event.trigger(this,Dt.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>St.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new Tt(this.markers,this.clusters),t=this.getMap();this.clusters.forEach(s=>{1===s.markers.length?s.marker=s.markers[0]:(s.marker=this.renderer.render(s,e,t),s.markers.forEach(e=>St.setMap(e,null)),this.onClusterClick&&s.marker.addListener("click",e=>{google.maps.event.trigger(this,Dt.CLUSTER_CLICK,s),this.onClusterClick(e,s,t)})),St.setMap(s.marker,t)})}}function Ut(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function _t(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ut(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function Vt(e){var t=function(){te(!!P.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=P.useContext(se);return te(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),[s,n]=P.useState(null);return P.useEffect(()=>{if(t&&null===s){var r=new Bt(_t(_t({},e),{},{map:t}));n(r)}},[t]),s}P.memo(function(e){var{children:t,options:s}=e,n=Vt(s);return null!==n?t(n):null});var Ft={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},Ht={options(e,t){e.setOptions(t)},position(e,t){e.setPosition(t)},zIndex(e,t){e.setZIndex(t)}};P.memo(function(e){var{children:t,anchor:s,options:n,position:r,zIndex:i,onCloseClick:o,onDomReady:a,onContentChanged:l,onPositionChanged:d,onZindexChanged:c,onLoad:u,onUnmount:p}=e,m=P.useContext(se),[g,h]=P.useState(null),[v,f]=P.useState(null),[x,b]=P.useState(null),[y,j]=P.useState(null),[w,L]=P.useState(null),[N,k]=P.useState(null),C=P.useRef(null);return P.useEffect(()=>{null!==g&&(g.close(),s?g.open(m,s):g.getPosition()&&g.open(m))},[m,g,s]),P.useEffect(()=>{n&&null!==g&&g.setOptions(n)},[g,n]),P.useEffect(()=>{r&&null!==g&&g.setPosition(r)},[r]),P.useEffect(()=>{"number"==typeof i&&null!==g&&g.setZIndex(i)},[i]),P.useEffect(()=>{g&&o&&(null!==v&&google.maps.event.removeListener(v),f(google.maps.event.addListener(g,"closeclick",o)))},[o]),P.useEffect(()=>{g&&a&&(null!==x&&google.maps.event.removeListener(x),b(google.maps.event.addListener(g,"domready",a)))},[a]),P.useEffect(()=>{g&&l&&(null!==y&&google.maps.event.removeListener(y),j(google.maps.event.addListener(g,"content_changed",l)))},[l]),P.useEffect(()=>{g&&d&&(null!==w&&google.maps.event.removeListener(w),L(google.maps.event.addListener(g,"position_changed",d)))},[d]),P.useEffect(()=>{g&&c&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(g,"zindex_changed",c)))},[c]),P.useEffect(()=>{var e=new google.maps.InfoWindow(n);return h(e),C.current=document.createElement("div"),o&&f(google.maps.event.addListener(e,"closeclick",o)),a&&b(google.maps.event.addListener(e,"domready",a)),l&&j(google.maps.event.addListener(e,"content_changed",l)),d&&L(google.maps.event.addListener(e,"position_changed",d)),c&&k(google.maps.event.addListener(e,"zindex_changed",c)),e.setContent(C.current),r&&e.setPosition(r),i&&e.setZIndex(i),s?e.open(m,s):e.getPosition()?e.open(m):te(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),u&&u(e),()=>{v&&google.maps.event.removeListener(v),y&&google.maps.event.removeListener(y),x&&google.maps.event.removeListener(x),w&&google.maps.event.removeListener(w),N&&google.maps.event.removeListener(N),p&&p(e),e.close()}},[]),C.current?I.createPortal(P.Children.only(t),C.current):null});class Wt extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",null),Q(this,"state",{infoWindow:null}),Q(this,"open",(e,t)=>{t?e.open(this.context,t):e.getPosition()?e.open(this.context):te(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Q(this,"setInfoWindowCallback",()=>{null!==this.state.infoWindow&&null!==this.containerElement&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=ae({updaterMap:Ht,eventMap:Ft,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){null!==this.state.infoWindow&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Ht,eventMap:Ft,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){null!==this.state.infoWindow&&(oe(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?I.createPortal(P.Children.only(this.props.children),this.containerElement):null}}function Zt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function $t(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zt(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(Wt,"contextType",se);var Gt={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},Kt={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},visible(e,t){e.setVisible(t)}},Yt={};P.memo(function(e){var{options:t,draggable:s,editable:n,visible:r,path:i,onDblClick:o,onDragEnd:a,onDragStart:l,onMouseDown:d,onMouseMove:c,onMouseOut:u,onMouseOver:p,onMouseUp:m,onRightClick:g,onClick:h,onDrag:v,onLoad:f,onUnmount:x}=e,b=P.useContext(se),[y,j]=P.useState(null),[w,L]=P.useState(null),[N,k]=P.useState(null),[C,S]=P.useState(null),[E,M]=P.useState(null),[D,O]=P.useState(null),[I,T]=P.useState(null),[z,A]=P.useState(null),[R,B]=P.useState(null),[U,_]=P.useState(null),[V,F]=P.useState(null),[H,W]=P.useState(null);return P.useEffect(()=>{null!==y&&y.setMap(b)},[b]),P.useEffect(()=>{void 0!==t&&null!==y&&y.setOptions(t)},[y,t]),P.useEffect(()=>{void 0!==s&&null!==y&&y.setDraggable(s)},[y,s]),P.useEffect(()=>{void 0!==n&&null!==y&&y.setEditable(n)},[y,n]),P.useEffect(()=>{void 0!==r&&null!==y&&y.setVisible(r)},[y,r]),P.useEffect(()=>{void 0!==i&&null!==y&&y.setPath(i)},[y,i]),P.useEffect(()=>{y&&o&&(null!==w&&google.maps.event.removeListener(w),L(google.maps.event.addListener(y,"dblclick",o)))},[o]),P.useEffect(()=>{y&&a&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(y,"dragend",a)))},[a]),P.useEffect(()=>{y&&l&&(null!==C&&google.maps.event.removeListener(C),S(google.maps.event.addListener(y,"dragstart",l)))},[l]),P.useEffect(()=>{y&&d&&(null!==E&&google.maps.event.removeListener(E),M(google.maps.event.addListener(y,"mousedown",d)))},[d]),P.useEffect(()=>{y&&c&&(null!==D&&google.maps.event.removeListener(D),O(google.maps.event.addListener(y,"mousemove",c)))},[c]),P.useEffect(()=>{y&&u&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(y,"mouseout",u)))},[u]),P.useEffect(()=>{y&&p&&(null!==z&&google.maps.event.removeListener(z),A(google.maps.event.addListener(y,"mouseover",p)))},[p]),P.useEffect(()=>{y&&m&&(null!==R&&google.maps.event.removeListener(R),B(google.maps.event.addListener(y,"mouseup",m)))},[m]),P.useEffect(()=>{y&&g&&(null!==U&&google.maps.event.removeListener(U),_(google.maps.event.addListener(y,"rightclick",g)))},[g]),P.useEffect(()=>{y&&h&&(null!==V&&google.maps.event.removeListener(V),F(google.maps.event.addListener(y,"click",h)))},[h]),P.useEffect(()=>{y&&v&&(null!==H&&google.maps.event.removeListener(H),W(google.maps.event.addListener(y,"drag",v)))},[v]),P.useEffect(()=>{var e=new google.maps.Polyline($t($t({},t||Yt),{},{map:b}));return i&&e.setPath(i),void 0!==r&&e.setVisible(r),void 0!==n&&e.setEditable(n),void 0!==s&&e.setDraggable(s),o&&L(google.maps.event.addListener(e,"dblclick",o)),a&&k(google.maps.event.addListener(e,"dragend",a)),l&&S(google.maps.event.addListener(e,"dragstart",l)),d&&M(google.maps.event.addListener(e,"mousedown",d)),c&&O(google.maps.event.addListener(e,"mousemove",c)),u&&T(google.maps.event.addListener(e,"mouseout",u)),p&&A(google.maps.event.addListener(e,"mouseover",p)),m&&B(google.maps.event.addListener(e,"mouseup",m)),g&&_(google.maps.event.addListener(e,"rightclick",g)),h&&F(google.maps.event.addListener(e,"click",h)),v&&W(google.maps.event.addListener(e,"drag",v)),j(e),f&&f(e),()=>{null!==w&&google.maps.event.removeListener(w),null!==N&&google.maps.event.removeListener(N),null!==C&&google.maps.event.removeListener(C),null!==E&&google.maps.event.removeListener(E),null!==D&&google.maps.event.removeListener(D),null!==I&&google.maps.event.removeListener(I),null!==z&&google.maps.event.removeListener(z),null!==R&&google.maps.event.removeListener(R),null!==U&&google.maps.event.removeListener(U),null!==V&&google.maps.event.removeListener(V),x&&x(e),e.setMap(null)}},[]),null});class qt extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{polyline:null}),Q(this,"setPolylineCallback",()=>{null!==this.state.polyline&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline($t($t({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:Kt,eventMap:Gt,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){null!==this.state.polyline&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Kt,eventMap:Gt,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),oe(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}function Qt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Jt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qt(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qt(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(qt,"contextType",se);var Xt={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},es={draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},path(e,t){e.setPath(t)},paths(e,t){e.setPaths(t)},visible(e,t){e.setVisible(t)}};P.memo(function(e){var{options:t,draggable:s,editable:n,visible:r,path:i,paths:o,onDblClick:a,onDragEnd:l,onDragStart:d,onMouseDown:c,onMouseMove:u,onMouseOut:p,onMouseOver:m,onMouseUp:g,onRightClick:h,onClick:v,onDrag:f,onLoad:x,onUnmount:b,onEdit:y}=e,j=P.useContext(se),[w,L]=P.useState(null),[N,k]=P.useState(null),[C,S]=P.useState(null),[E,M]=P.useState(null),[D,O]=P.useState(null),[I,T]=P.useState(null),[z,A]=P.useState(null),[R,B]=P.useState(null),[U,_]=P.useState(null),[V,F]=P.useState(null),[H,W]=P.useState(null),[Z,$]=P.useState(null);return P.useEffect(()=>{null!==w&&w.setMap(j)},[j]),P.useEffect(()=>{void 0!==t&&null!==w&&w.setOptions(t)},[w,t]),P.useEffect(()=>{void 0!==s&&null!==w&&w.setDraggable(s)},[w,s]),P.useEffect(()=>{void 0!==n&&null!==w&&w.setEditable(n)},[w,n]),P.useEffect(()=>{void 0!==r&&null!==w&&w.setVisible(r)},[w,r]),P.useEffect(()=>{void 0!==i&&null!==w&&w.setPath(i)},[w,i]),P.useEffect(()=>{void 0!==o&&null!==w&&w.setPaths(o)},[w,o]),P.useEffect(()=>{w&&"function"==typeof a&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(w,"dblclick",a)))},[a]),P.useEffect(()=>{w&&(google.maps.event.addListener(w.getPath(),"insert_at",()=>{null==y||y(w)}),google.maps.event.addListener(w.getPath(),"set_at",()=>{null==y||y(w)}),google.maps.event.addListener(w.getPath(),"remove_at",()=>{null==y||y(w)}))},[w,y]),P.useEffect(()=>{w&&"function"==typeof l&&(null!==C&&google.maps.event.removeListener(C),S(google.maps.event.addListener(w,"dragend",l)))},[l]),P.useEffect(()=>{w&&"function"==typeof d&&(null!==E&&google.maps.event.removeListener(E),M(google.maps.event.addListener(w,"dragstart",d)))},[d]),P.useEffect(()=>{w&&"function"==typeof c&&(null!==D&&google.maps.event.removeListener(D),O(google.maps.event.addListener(w,"mousedown",c)))},[c]),P.useEffect(()=>{w&&"function"==typeof u&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(w,"mousemove",u)))},[u]),P.useEffect(()=>{w&&"function"==typeof p&&(null!==z&&google.maps.event.removeListener(z),A(google.maps.event.addListener(w,"mouseout",p)))},[p]),P.useEffect(()=>{w&&"function"==typeof m&&(null!==R&&google.maps.event.removeListener(R),B(google.maps.event.addListener(w,"mouseover",m)))},[m]),P.useEffect(()=>{w&&"function"==typeof g&&(null!==U&&google.maps.event.removeListener(U),_(google.maps.event.addListener(w,"mouseup",g)))},[g]),P.useEffect(()=>{w&&"function"==typeof h&&(null!==V&&google.maps.event.removeListener(V),F(google.maps.event.addListener(w,"rightclick",h)))},[h]),P.useEffect(()=>{w&&"function"==typeof v&&(null!==H&&google.maps.event.removeListener(H),W(google.maps.event.addListener(w,"click",v)))},[v]),P.useEffect(()=>{w&&"function"==typeof f&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(w,"drag",f)))},[f]),P.useEffect(()=>{var e=new google.maps.Polygon(Jt(Jt({},t),{},{map:j}));return i&&e.setPath(i),o&&e.setPaths(o),void 0!==r&&e.setVisible(r),void 0!==n&&e.setEditable(n),void 0!==s&&e.setDraggable(s),a&&k(google.maps.event.addListener(e,"dblclick",a)),l&&S(google.maps.event.addListener(e,"dragend",l)),d&&M(google.maps.event.addListener(e,"dragstart",d)),c&&O(google.maps.event.addListener(e,"mousedown",c)),u&&T(google.maps.event.addListener(e,"mousemove",u)),p&&A(google.maps.event.addListener(e,"mouseout",p)),m&&B(google.maps.event.addListener(e,"mouseover",m)),g&&_(google.maps.event.addListener(e,"mouseup",g)),h&&F(google.maps.event.addListener(e,"rightclick",h)),v&&W(google.maps.event.addListener(e,"click",v)),f&&$(google.maps.event.addListener(e,"drag",f)),L(e),x&&x(e),()=>{null!==N&&google.maps.event.removeListener(N),null!==C&&google.maps.event.removeListener(C),null!==E&&google.maps.event.removeListener(E),null!==D&&google.maps.event.removeListener(D),null!==I&&google.maps.event.removeListener(I),null!==z&&google.maps.event.removeListener(z),null!==R&&google.maps.event.removeListener(R),null!==U&&google.maps.event.removeListener(U),null!==V&&google.maps.event.removeListener(V),null!==H&&google.maps.event.removeListener(H),b&&b(e),e.setMap(null)}},[]),null});class ts extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=ae({updaterMap:es,eventMap:Xt,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:es,eventMap:Xt,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),oe(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}function ss(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function ns(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ss(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(ts,"contextType",se);var rs={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},is={bounds(e,t){e.setBounds(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},visible(e,t){e.setVisible(t)}};P.memo(function(e){var{options:t,bounds:s,draggable:n,editable:r,visible:i,onDblClick:o,onDragEnd:a,onDragStart:l,onMouseDown:d,onMouseMove:c,onMouseOut:u,onMouseOver:p,onMouseUp:m,onRightClick:g,onClick:h,onDrag:v,onBoundsChanged:f,onLoad:x,onUnmount:b}=e,y=P.useContext(se),[j,w]=P.useState(null),[L,N]=P.useState(null),[k,C]=P.useState(null),[S,E]=P.useState(null),[M,D]=P.useState(null),[O,I]=P.useState(null),[T,z]=P.useState(null),[A,R]=P.useState(null),[B,U]=P.useState(null),[_,V]=P.useState(null),[F,H]=P.useState(null),[W,Z]=P.useState(null),[$,G]=P.useState(null);return P.useEffect(()=>{null!==j&&j.setMap(y)},[y]),P.useEffect(()=>{void 0!==t&&null!==j&&j.setOptions(t)},[j,t]),P.useEffect(()=>{void 0!==n&&null!==j&&j.setDraggable(n)},[j,n]),P.useEffect(()=>{void 0!==r&&null!==j&&j.setEditable(r)},[j,r]),P.useEffect(()=>{void 0!==i&&null!==j&&j.setVisible(i)},[j,i]),P.useEffect(()=>{void 0!==s&&null!==j&&j.setBounds(s)},[j,s]),P.useEffect(()=>{j&&o&&(null!==L&&google.maps.event.removeListener(L),N(google.maps.event.addListener(j,"dblclick",o)))},[o]),P.useEffect(()=>{j&&a&&(null!==k&&google.maps.event.removeListener(k),C(google.maps.event.addListener(j,"dragend",a)))},[a]),P.useEffect(()=>{j&&l&&(null!==S&&google.maps.event.removeListener(S),E(google.maps.event.addListener(j,"dragstart",l)))},[l]),P.useEffect(()=>{j&&d&&(null!==M&&google.maps.event.removeListener(M),D(google.maps.event.addListener(j,"mousedown",d)))},[d]),P.useEffect(()=>{j&&c&&(null!==O&&google.maps.event.removeListener(O),I(google.maps.event.addListener(j,"mousemove",c)))},[c]),P.useEffect(()=>{j&&u&&(null!==T&&google.maps.event.removeListener(T),z(google.maps.event.addListener(j,"mouseout",u)))},[u]),P.useEffect(()=>{j&&p&&(null!==A&&google.maps.event.removeListener(A),R(google.maps.event.addListener(j,"mouseover",p)))},[p]),P.useEffect(()=>{j&&m&&(null!==B&&google.maps.event.removeListener(B),U(google.maps.event.addListener(j,"mouseup",m)))},[m]),P.useEffect(()=>{j&&g&&(null!==_&&google.maps.event.removeListener(_),V(google.maps.event.addListener(j,"rightclick",g)))},[g]),P.useEffect(()=>{j&&h&&(null!==F&&google.maps.event.removeListener(F),H(google.maps.event.addListener(j,"click",h)))},[h]),P.useEffect(()=>{j&&v&&(null!==W&&google.maps.event.removeListener(W),Z(google.maps.event.addListener(j,"drag",v)))},[v]),P.useEffect(()=>{j&&f&&(null!==$&&google.maps.event.removeListener($),G(google.maps.event.addListener(j,"bounds_changed",f)))},[f]),P.useEffect(()=>{var e=new google.maps.Rectangle(ns(ns({},t),{},{map:y}));return void 0!==i&&e.setVisible(i),void 0!==r&&e.setEditable(r),void 0!==n&&e.setDraggable(n),void 0!==s&&e.setBounds(s),o&&N(google.maps.event.addListener(e,"dblclick",o)),a&&C(google.maps.event.addListener(e,"dragend",a)),l&&E(google.maps.event.addListener(e,"dragstart",l)),d&&D(google.maps.event.addListener(e,"mousedown",d)),c&&I(google.maps.event.addListener(e,"mousemove",c)),u&&z(google.maps.event.addListener(e,"mouseout",u)),p&&R(google.maps.event.addListener(e,"mouseover",p)),m&&U(google.maps.event.addListener(e,"mouseup",m)),g&&V(google.maps.event.addListener(e,"rightclick",g)),h&&H(google.maps.event.addListener(e,"click",h)),v&&Z(google.maps.event.addListener(e,"drag",v)),f&&G(google.maps.event.addListener(e,"bounds_changed",f)),w(e),x&&x(e),()=>{null!==L&&google.maps.event.removeListener(L),null!==k&&google.maps.event.removeListener(k),null!==S&&google.maps.event.removeListener(S),null!==M&&google.maps.event.removeListener(M),null!==O&&google.maps.event.removeListener(O),null!==T&&google.maps.event.removeListener(T),null!==A&&google.maps.event.removeListener(A),null!==B&&google.maps.event.removeListener(B),null!==_&&google.maps.event.removeListener(_),null!==F&&google.maps.event.removeListener(F),null!==W&&google.maps.event.removeListener(W),null!==$&&google.maps.event.removeListener($),b&&b(e),e.setMap(null)}},[]),null});class os extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{rectangle:null}),Q(this,"setRectangleCallback",()=>{null!==this.state.rectangle&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(ns(ns({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:is,eventMap:rs,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){null!==this.state.rectangle&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:is,eventMap:rs,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),oe(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}function as(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function ls(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?as(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):as(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(os,"contextType",se);var ds={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},cs={center(e,t){e.setCenter(t)},draggable(e,t){e.setDraggable(t)},editable(e,t){e.setEditable(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},radius(e,t){e.setRadius(t)},visible(e,t){e.setVisible(t)}},us={};P.memo(function(e){var{options:t,center:s,radius:n,draggable:r,editable:i,visible:o,onDblClick:a,onDragEnd:l,onDragStart:d,onMouseDown:c,onMouseMove:u,onMouseOut:p,onMouseOver:m,onMouseUp:g,onRightClick:h,onClick:v,onDrag:f,onCenterChanged:x,onRadiusChanged:b,onLoad:y,onUnmount:j}=e,w=P.useContext(se),[L,N]=P.useState(null),[k,C]=P.useState(null),[S,E]=P.useState(null),[M,D]=P.useState(null),[O,I]=P.useState(null),[T,z]=P.useState(null),[A,R]=P.useState(null),[B,U]=P.useState(null),[_,V]=P.useState(null),[F,H]=P.useState(null),[W,Z]=P.useState(null),[$,G]=P.useState(null),[K,Y]=P.useState(null),[q,Q]=P.useState(null);return P.useEffect(()=>{null!==L&&L.setMap(w)},[w]),P.useEffect(()=>{void 0!==t&&null!==L&&L.setOptions(t)},[L,t]),P.useEffect(()=>{void 0!==r&&null!==L&&L.setDraggable(r)},[L,r]),P.useEffect(()=>{void 0!==i&&null!==L&&L.setEditable(i)},[L,i]),P.useEffect(()=>{void 0!==o&&null!==L&&L.setVisible(o)},[L,o]),P.useEffect(()=>{"number"==typeof n&&null!==L&&L.setRadius(n)},[L,n]),P.useEffect(()=>{void 0!==s&&null!==L&&L.setCenter(s)},[L,s]),P.useEffect(()=>{L&&a&&(null!==k&&google.maps.event.removeListener(k),C(google.maps.event.addListener(L,"dblclick",a)))},[a]),P.useEffect(()=>{L&&l&&(null!==S&&google.maps.event.removeListener(S),E(google.maps.event.addListener(L,"dragend",l)))},[l]),P.useEffect(()=>{L&&d&&(null!==M&&google.maps.event.removeListener(M),D(google.maps.event.addListener(L,"dragstart",d)))},[d]),P.useEffect(()=>{L&&c&&(null!==O&&google.maps.event.removeListener(O),I(google.maps.event.addListener(L,"mousedown",c)))},[c]),P.useEffect(()=>{L&&u&&(null!==T&&google.maps.event.removeListener(T),z(google.maps.event.addListener(L,"mousemove",u)))},[u]),P.useEffect(()=>{L&&p&&(null!==A&&google.maps.event.removeListener(A),R(google.maps.event.addListener(L,"mouseout",p)))},[p]),P.useEffect(()=>{L&&m&&(null!==B&&google.maps.event.removeListener(B),U(google.maps.event.addListener(L,"mouseover",m)))},[m]),P.useEffect(()=>{L&&g&&(null!==_&&google.maps.event.removeListener(_),V(google.maps.event.addListener(L,"mouseup",g)))},[g]),P.useEffect(()=>{L&&h&&(null!==F&&google.maps.event.removeListener(F),H(google.maps.event.addListener(L,"rightclick",h)))},[h]),P.useEffect(()=>{L&&v&&(null!==W&&google.maps.event.removeListener(W),Z(google.maps.event.addListener(L,"click",v)))},[v]),P.useEffect(()=>{L&&f&&(null!==$&&google.maps.event.removeListener($),G(google.maps.event.addListener(L,"drag",f)))},[f]),P.useEffect(()=>{L&&x&&(null!==K&&google.maps.event.removeListener(K),Y(google.maps.event.addListener(L,"center_changed",x)))},[v]),P.useEffect(()=>{L&&b&&(null!==q&&google.maps.event.removeListener(q),Q(google.maps.event.addListener(L,"radius_changed",b)))},[b]),P.useEffect(()=>{var e=new google.maps.Circle(ls(ls({},t||us),{},{map:w}));return"number"==typeof n&&e.setRadius(n),void 0!==s&&e.setCenter(s),"number"==typeof n&&e.setRadius(n),void 0!==o&&e.setVisible(o),void 0!==i&&e.setEditable(i),void 0!==r&&e.setDraggable(r),a&&C(google.maps.event.addListener(e,"dblclick",a)),l&&E(google.maps.event.addListener(e,"dragend",l)),d&&D(google.maps.event.addListener(e,"dragstart",d)),c&&I(google.maps.event.addListener(e,"mousedown",c)),u&&z(google.maps.event.addListener(e,"mousemove",u)),p&&R(google.maps.event.addListener(e,"mouseout",p)),m&&U(google.maps.event.addListener(e,"mouseover",m)),g&&V(google.maps.event.addListener(e,"mouseup",g)),h&&H(google.maps.event.addListener(e,"rightclick",h)),v&&Z(google.maps.event.addListener(e,"click",v)),f&&G(google.maps.event.addListener(e,"drag",f)),x&&Y(google.maps.event.addListener(e,"center_changed",x)),b&&Q(google.maps.event.addListener(e,"radius_changed",b)),N(e),y&&y(e),()=>{null!==k&&google.maps.event.removeListener(k),null!==S&&google.maps.event.removeListener(S),null!==M&&google.maps.event.removeListener(M),null!==O&&google.maps.event.removeListener(O),null!==T&&google.maps.event.removeListener(T),null!==A&&google.maps.event.removeListener(A),null!==B&&google.maps.event.removeListener(B),null!==_&&google.maps.event.removeListener(_),null!==F&&google.maps.event.removeListener(F),null!==W&&google.maps.event.removeListener(W),null!==K&&google.maps.event.removeListener(K),null!==q&&google.maps.event.removeListener(q),j&&j(e),e.setMap(null)}},[]),null});class ps extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{circle:null}),Q(this,"setCircleCallback",()=>{null!==this.state.circle&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(ls(ls({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:cs,eventMap:ds,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){null!==this.state.circle&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:cs,eventMap:ds,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),oe(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))}render(){return null}}function ms(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function gs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ms(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(ps,"contextType",se);var hs={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},vs={add(e,t){e.add(t)},addgeojson(e,t,s){e.addGeoJson(t,s)},contains(e,t){e.contains(t)},foreach(e,t){e.forEach(t)},loadgeojson(e,t,s,n){e.loadGeoJson(t,s,n)},overridestyle(e,t,s){e.overrideStyle(t,s)},remove(e,t){e.remove(t)},revertstyle(e,t){e.revertStyle(t)},controlposition(e,t){e.setControlPosition(t)},controls(e,t){e.setControls(t)},drawingmode(e,t){e.setDrawingMode(t)},map(e,t){e.setMap(t)},style(e,t){e.setStyle(t)},togeojson(e,t){e.toGeoJson(t)}};P.memo(function(e){var{options:t,onClick:s,onDblClick:n,onMouseDown:r,onMouseMove:i,onMouseOut:o,onMouseOver:a,onMouseUp:l,onRightClick:d,onAddFeature:c,onRemoveFeature:u,onRemoveProperty:p,onSetGeometry:m,onSetProperty:g,onLoad:h,onUnmount:v}=e,f=P.useContext(se),[x,b]=P.useState(null),[y,j]=P.useState(null),[w,L]=P.useState(null),[N,k]=P.useState(null),[C,S]=P.useState(null),[E,M]=P.useState(null),[D,O]=P.useState(null),[I,T]=P.useState(null),[z,A]=P.useState(null),[R,B]=P.useState(null),[U,_]=P.useState(null),[V,F]=P.useState(null),[H,W]=P.useState(null),[Z,$]=P.useState(null);return P.useEffect(()=>{null!==x&&x.setMap(f)},[f]),P.useEffect(()=>{x&&n&&(null!==y&&google.maps.event.removeListener(y),j(google.maps.event.addListener(x,"dblclick",n)))},[n]),P.useEffect(()=>{x&&r&&(null!==w&&google.maps.event.removeListener(w),L(google.maps.event.addListener(x,"mousedown",r)))},[r]),P.useEffect(()=>{x&&i&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(x,"mousemove",i)))},[i]),P.useEffect(()=>{x&&o&&(null!==C&&google.maps.event.removeListener(C),S(google.maps.event.addListener(x,"mouseout",o)))},[o]),P.useEffect(()=>{x&&a&&(null!==E&&google.maps.event.removeListener(E),M(google.maps.event.addListener(x,"mouseover",a)))},[a]),P.useEffect(()=>{x&&l&&(null!==D&&google.maps.event.removeListener(D),O(google.maps.event.addListener(x,"mouseup",l)))},[l]),P.useEffect(()=>{x&&d&&(null!==I&&google.maps.event.removeListener(I),T(google.maps.event.addListener(x,"rightclick",d)))},[d]),P.useEffect(()=>{x&&s&&(null!==z&&google.maps.event.removeListener(z),A(google.maps.event.addListener(x,"click",s)))},[s]),P.useEffect(()=>{x&&c&&(null!==R&&google.maps.event.removeListener(R),B(google.maps.event.addListener(x,"addfeature",c)))},[c]),P.useEffect(()=>{x&&u&&(null!==U&&google.maps.event.removeListener(U),_(google.maps.event.addListener(x,"removefeature",u)))},[u]),P.useEffect(()=>{x&&p&&(null!==V&&google.maps.event.removeListener(V),F(google.maps.event.addListener(x,"removeproperty",p)))},[p]),P.useEffect(()=>{x&&m&&(null!==H&&google.maps.event.removeListener(H),W(google.maps.event.addListener(x,"setgeometry",m)))},[m]),P.useEffect(()=>{x&&g&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(x,"setproperty",g)))},[g]),P.useEffect(()=>{if(null!==f){var e=new google.maps.Data(gs(gs({},t),{},{map:f}));n&&j(google.maps.event.addListener(e,"dblclick",n)),r&&L(google.maps.event.addListener(e,"mousedown",r)),i&&k(google.maps.event.addListener(e,"mousemove",i)),o&&S(google.maps.event.addListener(e,"mouseout",o)),a&&M(google.maps.event.addListener(e,"mouseover",a)),l&&O(google.maps.event.addListener(e,"mouseup",l)),d&&T(google.maps.event.addListener(e,"rightclick",d)),s&&A(google.maps.event.addListener(e,"click",s)),c&&B(google.maps.event.addListener(e,"addfeature",c)),u&&_(google.maps.event.addListener(e,"removefeature",u)),p&&F(google.maps.event.addListener(e,"removeproperty",p)),m&&W(google.maps.event.addListener(e,"setgeometry",m)),g&&$(google.maps.event.addListener(e,"setproperty",g)),b(e),h&&h(e)}return()=>{x&&(null!==y&&google.maps.event.removeListener(y),null!==w&&google.maps.event.removeListener(w),null!==N&&google.maps.event.removeListener(N),null!==C&&google.maps.event.removeListener(C),null!==E&&google.maps.event.removeListener(E),null!==D&&google.maps.event.removeListener(D),null!==I&&google.maps.event.removeListener(I),null!==z&&google.maps.event.removeListener(z),null!==R&&google.maps.event.removeListener(R),null!==U&&google.maps.event.removeListener(U),null!==V&&google.maps.event.removeListener(V),null!==H&&google.maps.event.removeListener(H),null!==Z&&google.maps.event.removeListener(Z),v&&v(x),x.setMap(null))}},[]),null});class fs extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{data:null}),Q(this,"setDataCallback",()=>{null!==this.state.data&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(null!==this.context){var e=new google.maps.Data(gs(gs({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:vs,eventMap:hs,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){null!==this.state.data&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:vs,eventMap:hs,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),oe(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}function xs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function bs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xs(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(fs,"contextType",se);var ys={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},js={options(e,t){e.setOptions(t)},url(e,t){e.setUrl(t)},zIndex(e,t){e.setZIndex(t)}};class ws extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{kmlLayer:null}),Q(this,"setKmlLayerCallback",()=>{null!==this.state.kmlLayer&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(bs(bs({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:js,eventMap:ys,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){null!==this.state.kmlLayer&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:js,eventMap:ys,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),oe(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}function Ls(e,t){return"function"==typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function Ns(e,t){return new t(e.lat,e.lng)}function ks(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function Cs(e,t,s,n){return void 0!==s?function(e,t,s){var n=e&&e.fromLatLngToDivPixel(s.getNorthEast()),r=e&&e.fromLatLngToDivPixel(s.getSouthWest());return n&&r?{left:"".concat(r.x+t.x,"px"),top:"".concat(n.y+t.y,"px"),width:"".concat(n.x-r.x-t.x,"px"),height:"".concat(r.y-n.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,(r=s,i=google.maps.LatLngBounds,o=ks,r instanceof i?r:o(r,i))):function(e,t,s){var n=e&&e.fromLatLngToDivPixel(s);if(n){var{x:r,y:i}=n;return{left:"".concat(r+t.x,"px"),top:"".concat(i+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,s){return e instanceof t?e:s(e,t)}(n,google.maps.LatLng,Ns));var r,i,o}function Ss(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Es(e,t,s,n,r){class i extends google.maps.OverlayView{constructor(e,t,s,n){super(),this.container=e,this.pane=t,this.position=s,this.bounds=n}onAdd(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null==t||t.appendChild(this.container)}draw(){var e=this.getProjection(),t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ss(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({},this.container?Ls(this.container,r):{x:0,y:0}),s=Cs(e,t,this.bounds,this.position);for(var[n,i]of Object.entries(s))this.container.style[n]=i}onRemove(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)}}return new i(e,t,s,n)}function Ms(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Ds(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function Os(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}Q(ws,"contextType",se),P.memo(function(e){var{position:t,bounds:s,mapPaneName:n,zIndex:r,onLoad:i,onUnmount:o,getPixelPositionOffset:a,children:l}=e,d=P.useContext(se),c=P.useMemo(()=>{var e=document.createElement("div");return e.style.position="absolute",e},[]),u=P.useMemo(()=>Es(c,n,t,s,a),[c,n,t,s]);return P.useEffect(()=>(null==i||i(u),null==u||u.setMap(d),()=>{null==o||o(u),null==u||u.setMap(null)}),[d,u]),P.useEffect(()=>{c.style.zIndex="".concat(r)},[r,c]),I.createPortal(l,c)});class Ps extends P.PureComponent{constructor(e){super(e),Q(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Q(this,"updatePane",()=>{var e=this.props.mapPaneName,t=this.overlayView.getPanes();te(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?this.setState({paneEl:t[e]}):this.setState({paneEl:null})}),Q(this,"onAdd",()=>{var e,t;this.updatePane(),null===(e=(t=this.props).onLoad)||void 0===e||e.call(t,this.overlayView)}),Q(this,"onPositionElement",()=>{var e,t,s,n,r,i,o=this.overlayView.getProjection(),a=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ms(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}({x:0,y:0},this.containerRef.current?Ls(this.containerRef.current,this.props.getPixelPositionOffset):{}),l=Cs(o,a,this.props.bounds,this.props.position);(r=l,i={left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height},r.left!==i.left||r.top!==i.top||r.width!==i.height||r.height!==i.height)&&this.setState({containerStyle:{top:null!==(e=l.top)&&void 0!==e?e:0,left:null!==(t=l.left)&&void 0!==t?t:0,width:null!==(s=l.width)&&void 0!==s?s:0,height:null!==(n=l.height)&&void 0!==n?n:0,position:"absolute"}})}),Q(this,"draw",()=>{this.onPositionElement()}),Q(this,"onRemove",()=>{var e,t;this.setState(()=>({paneEl:null})),null===(e=(t=this.props).onUnmount)||void 0===e||e.call(t,this.overlayView)}),this.containerRef=P.createRef();var t=new google.maps.OverlayView;t.onAdd=this.onAdd,t.draw=this.draw,t.onRemove=this.onRemove,this.overlayView=t}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var t=Ds(e.position),s=Ds(this.props.position),n=Os(e.bounds),r=Os(this.props.bounds);t===s&&n===r||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var t=this.state.paneEl;return t?I.createPortal(e.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:P.Children.only(this.props.children)}),t):null}}function Is(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Ts(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Is(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(Ps,"FLOAT_PANE","floatPane"),Q(Ps,"MAP_PANE","mapPane"),Q(Ps,"MARKER_LAYER","markerLayer"),Q(Ps,"OVERLAY_LAYER","overlayLayer"),Q(Ps,"OVERLAY_MOUSE_TARGET","overlayMouseTarget"),Q(Ps,"contextType",se);var zs={onDblClick:"dblclick",onClick:"click"},As={opacity(e,t){e.setOpacity(t)}};P.memo(function(e){var{url:t,bounds:s,options:n,visible:r}=e,i=P.useContext(se),o=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east)),a=P.useMemo(()=>new google.maps.GroundOverlay(t,o,n),[]);return P.useEffect(()=>{null!==a&&a.setMap(i)},[i]),P.useEffect(()=>{void 0!==t&&null!==a&&(a.set("url",t),a.setMap(i))},[a,t]),P.useEffect(()=>{void 0!==r&&null!==a&&a.setOpacity(r?1:0)},[a,r]),P.useEffect(()=>{var e=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east));void 0!==s&&null!==a&&(a.set("bounds",e),a.setMap(i))},[a,s]),null});class Rs extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{groundOverlay:null}),Q(this,"setGroundOverlayCallback",()=>{null!==this.state.groundOverlay&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){te(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Ts(Ts({},this.props.options),{},{map:this.context}));this.registeredEvents=ae({updaterMap:As,eventMap:zs,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){null!==this.state.groundOverlay&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:As,eventMap:zs,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}function Bs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,n)}return s}function Us(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(s),!0).forEach(function(t){Q(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bs(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}Q(Rs,"defaultProps",{onLoad:function(){}}),Q(Rs,"contextType",se);var _s={},Vs={data(e,t){e.setData(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)}};P.memo(function(e){var{data:t,onLoad:s,onUnmount:n,options:r}=e,i=P.useContext(se),[o,a]=P.useState(null);return P.useEffect(()=>{google.maps.visualization||te(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),P.useEffect(()=>{te(!!t,"data property is required in HeatmapLayer %s",t)},[t]),P.useEffect(()=>{null!==o&&o.setMap(i)},[i]),P.useEffect(()=>{r&&null!==o&&o.setOptions(r)},[o,r]),P.useEffect(()=>{var e=new google.maps.visualization.HeatmapLayer(Us(Us({},r),{},{data:t,map:i}));return a(e),s&&s(e),()=>{null!==o&&(n&&n(o),o.setMap(null))}},[]),null});class Fs extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{heatmapLayer:null}),Q(this,"setHeatmapLayerCallback",()=>{null!==this.state.heatmapLayer&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){te(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),te(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Us(Us({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=ae({updaterMap:Vs,eventMap:_s,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Vs,eventMap:_s,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),oe(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Q(Fs,"contextType",se);var Hs={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},Ws={register(e,t,s){e.registerPanoProvider(t,s)},links(e,t){e.setLinks(t)},motionTracking(e,t){e.setMotionTracking(t)},options(e,t){e.setOptions(t)},pano(e,t){e.setPano(t)},position(e,t){e.setPosition(t)},pov(e,t){e.setPov(t)},visible(e,t){e.setVisible(t)},zoom(e,t){e.setZoom(t)}};class Zs extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{streetViewPanorama:null}),Q(this,"setStreetViewPanoramaCallback",()=>{null!==this.state.streetViewPanorama&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,t,s=null!==(e=null===(t=this.context)||void 0===t?void 0:t.getStreetView())&&void 0!==e?e:null;this.registeredEvents=ae({updaterMap:Ws,eventMap:Hs,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({streetViewPanorama:s}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){null!==this.state.streetViewPanorama&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Ws,eventMap:Hs,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),oe(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Q(Zs,"contextType",se);class $s extends P.PureComponent{constructor(){super(...arguments),Q(this,"state",{streetViewService:null}),Q(this,"setStreetViewServiceCallback",()=>{null!==this.state.streetViewService&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Q($s,"contextType",se);var Gs={onDirectionsChanged:"directions_changed"},Ks={directions(e,t){e.setDirections(t)},map(e,t){e.setMap(t)},options(e,t){e.setOptions(t)},panel(e,t){e.setPanel(t)},routeIndex(e,t){e.setRouteIndex(t)}};class Ys extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{directionsRenderer:null}),Q(this,"setDirectionsRendererCallback",()=>{null!==this.state.directionsRenderer&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=ae({updaterMap:Ks,eventMap:Gs,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){null!==this.state.directionsRenderer&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Ks,eventMap:Gs,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),oe(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Q(Ys,"contextType",se);var qs={onPlacesChanged:"places_changed"},Qs={bounds(e,t){e.setBounds(t)}};class Js extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",P.createRef()),Q(this,"state",{searchBox:null}),Q(this,"setSearchBoxCallback",()=>{null!==this.state.searchBox&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(te(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=ae({updaterMap:Qs,eventMap:qs,prevProps:{},nextProps:this.props,instance:t}),this.setState(function(){return{searchBox:t}},this.setSearchBoxCallback)}}}componentDidUpdate(e){null!==this.state.searchBox&&(oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:Qs,eventMap:qs,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),oe(this.registeredEvents))}render(){return e.jsx("div",{ref:this.containerElement,children:P.Children.only(this.props.children)})}}Q(Js,"contextType",se);var Xs={onPlaceChanged:"place_changed"},en={bounds(e,t){e.setBounds(t)},restrictions(e,t){e.setComponentRestrictions(t)},fields(e,t){e.setFields(t)},options(e,t){e.setOptions(t)},types(e,t){e.setTypes(t)}};class tn extends P.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",P.createRef()),Q(this,"state",{autocomplete:null}),Q(this,"setAutocompleteCallback",()=>{null!==this.state.autocomplete&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;te(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var s=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=ae({updaterMap:en,eventMap:Xs,prevProps:{},nextProps:this.props,instance:s}),this.setState(()=>({autocomplete:s}),this.setAutocompleteCallback)}}componentDidUpdate(e){oe(this.registeredEvents),this.registeredEvents=ae({updaterMap:en,eventMap:Xs,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){null!==this.state.autocomplete&&oe(this.registeredEvents)}render(){return e.jsx("div",{ref:this.containerElement,className:this.props.className,children:P.Children.only(this.props.children)})}}Q(tn,"defaultProps",{className:""}),Q(tn,"contextType",se);const sn={"+90":{flag:"🇹🇷",name:"Turkey",code:"TR"},"+1":{flag:"🇺🇸",name:"United States",code:"US"},"+44":{flag:"🇬🇧",name:"United Kingdom",code:"GB"},"+49":{flag:"🇩🇪",name:"Germany",code:"DE"},"+33":{flag:"🇫🇷",name:"France",code:"FR"},"+39":{flag:"🇮🇹",name:"Italy",code:"IT"},"+34":{flag:"🇪🇸",name:"Spain",code:"ES"},"+31":{flag:"🇳🇱",name:"Netherlands",code:"NL"},"+41":{flag:"🇨🇭",name:"Switzerland",code:"CH"},"+43":{flag:"🇦🇹",name:"Austria",code:"AT"},"+32":{flag:"🇧🇪",name:"Belgium",code:"BE"},"+45":{flag:"🇩🇰",name:"Denmark",code:"DK"},"+46":{flag:"🇸🇪",name:"Sweden",code:"SE"},"+47":{flag:"🇳🇴",name:"Norway",code:"NO"},"+358":{flag:"🇫🇮",name:"Finland",code:"FI"},"+7":{flag:"🇷🇺",name:"Russia",code:"RU"},"+86":{flag:"🇨🇳",name:"China",code:"CN"},"+81":{flag:"🇯🇵",name:"Japan",code:"JP"},"+82":{flag:"🇰🇷",name:"South Korea",code:"KR"},"+91":{flag:"🇮🇳",name:"India",code:"IN"},"+61":{flag:"🇦🇺",name:"Australia",code:"AU"},"+64":{flag:"🇳🇿",name:"New Zealand",code:"NZ"},"+55":{flag:"🇧🇷",name:"Brazil",code:"BR"},"+52":{flag:"🇲🇽",name:"Mexico",code:"MX"},"+54":{flag:"🇦🇷",name:"Argentina",code:"AR"},"+27":{flag:"🇿🇦",name:"South Africa",code:"ZA"},"+20":{flag:"🇪🇬",name:"Egypt",code:"EG"},"+971":{flag:"🇦🇪",name:"UAE",code:"AE"},"+966":{flag:"🇸🇦",name:"Saudi Arabia",code:"SA"},"+98":{flag:"🇮🇷",name:"Iran",code:"IR"},"+964":{flag:"🇮🇶",name:"Iraq",code:"IQ"},"+962":{flag:"🇯🇴",name:"Jordan",code:"JO"},"+961":{flag:"🇱🇧",name:"Lebanon",code:"LB"},"+963":{flag:"🇸🇾",name:"Syria",code:"SY"},"+212":{flag:"🇲🇦",name:"Morocco",code:"MA"},"+213":{flag:"🇩🇿",name:"Algeria",code:"DZ"},"+216":{flag:"🇹🇳",name:"Tunisia",code:"TN"},"+30":{flag:"🇬🇷",name:"Greece",code:"GR"},"+359":{flag:"🇧🇬",name:"Bulgaria",code:"BG"},"+40":{flag:"🇷🇴",name:"Romania",code:"RO"},"+385":{flag:"🇭🇷",name:"Croatia",code:"HR"},"+381":{flag:"🇷🇸",name:"Serbia",code:"RS"},"+387":{flag:"🇧🇦",name:"Bosnia and Herzegovina",code:"BA"},"+382":{flag:"🇲🇪",name:"Montenegro",code:"ME"},"+383":{flag:"🇽🇰",name:"Kosovo",code:"XK"},"+389":{flag:"🇲🇰",name:"North Macedonia",code:"MK"},"+355":{flag:"🇦🇱",name:"Albania",code:"AL"}},nn=e=>{if(!e||"string"!=typeof e)return null;const t=e.replace(/[^\d+]/g,"");if(!t.startsWith("+"))return null;const s=Object.keys(sn).sort((e,t)=>t.length-e.length);for(const n of s)if(t.startsWith(n))return n;return null},rn=e=>{const t=(e=>{const t=nn(e);return t&&sn[t]?sn[t]:sn["+90"]})(e),s=nn(e);if(!t||!s)return{flag:"🇹🇷",countryCode:"+90",number:e||"",fullNumber:e||"",countryName:"Turkey"};const n=e.replace(/[^\d+]/g,"").substring(s.length);return{flag:t.flag,countryCode:s,number:n,fullNumber:e,countryName:t.name}},on=({phone:t,className:s="",showCountryName:n=!1,size:r="md"})=>{const i=rn(t),o={sm:"text-sm",md:"text-base",lg:"text-lg"};return t?e.jsxs("div",{className:`flex items-center gap-2 ${s}`,children:[e.jsx("span",{className:`${{sm:"text-sm",md:"text-base",lg:"text-lg"}[r]}`,children:i.flag}),e.jsx("span",{className:`font-medium text-gray-900 ${o[r]}`,children:i.countryCode}),e.jsx("span",{className:`text-gray-700 ${o[r]}`,children:i.number}),n&&e.jsxs("span",{className:"text-gray-500 text-xs",children:["(",i.countryName,")"]})]}):e.jsx("span",{className:`text-gray-400 ${o[r]} ${s}`,children:"Telefon belirtilmemiş"})},an=["places"],ln=({onClose:a,onSubmit:l,vehicles:d=[]})=>{const[c,u]=P.useState({customerInfo:{firstName:"",lastName:"",phone:"",email:""},tripDetails:{date:"",time:"",returnDate:"",returnTime:"",tripType:"one-way",pickupLocation:"",dropoffLocation:"",passengerCount:1,luggageCount:0,flightNumber:""},paymentMethod:"cash",selectedVehicle:"",totalPrice:0,calculatedDistance:0}),[p,m]=P.useState({}),[g,h]=P.useState(!1),[v,f]=P.useState(!1),[x,b]=P.useState(null),[y,j]=P.useState(null),{isLoaded:w}=je({googleMapsApiKey:"AIzaSyDa66vbuMgm_L4wdOgPutliu_PLzI3xqEw",libraries:an}),L=async(e,t,s,n=!1)=>{if(!(e&&t&&s&&window.google))return{price:0,distance:0};try{f(!0);const r=new window.google.maps.DistanceMatrixService;return new Promise(i=>{r.getDistanceMatrix({origins:[e],destinations:[t],travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC},(e,t)=>{if("OK"===t&&"OK"===e.rows[0].elements[0].status){const t=e.rows[0].elements[0].distance.value/1e3,r=d.find(e=>e.id===s),o=r&&r.kmRate||3;let a=Math.round(t*o);n&&(a*=2),i({price:a,distance:Math.round(100*t)/100})}else{const e=d.find(e=>e.id===s);let t=e&&10*e.kmRate||100;n&&(t*=2),i({price:t,distance:0})}f(!1)})})}catch(r){f(!1);return{price:n?200:100,distance:0}}},N=async()=>{const{pickupLocation:e,dropoffLocation:t,tripType:s}=c.tripDetails,{selectedVehicle:n}=c;if(e&&t&&n){const r="round-trip"===s,{price:i,distance:o}=await L(e,t,n,r);u(e=>({...e,totalPrice:i,calculatedDistance:o}))}},k=(e,t,s)=>{u(n=>({...n,[e]:{...n[e],[t]:s}})),"tripDetails"===e&&"tripType"===t&&setTimeout(()=>N(),100),p[`${e}.${t}`]&&m(s=>{const n={...s};return delete n[`${e}.${t}`],n})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Hızlı Rezervasyon Ekle"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(t,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return c.customerInfo.firstName.trim()||(e["customerInfo.firstName"]="Ad zorunludur"),c.customerInfo.lastName.trim()||(e["customerInfo.lastName"]="Soyad zorunludur"),c.customerInfo.phone.trim()||(e["customerInfo.phone"]="Telefon zorunludur"),c.customerInfo.email.trim()||(e["customerInfo.email"]="E-posta zorunludur"),c.tripDetails.date||(e["tripDetails.date"]="Tarih zorunludur"),c.tripDetails.time||(e["tripDetails.time"]="Saat zorunludur"),c.tripDetails.pickupLocation.trim()||(e["tripDetails.pickupLocation"]="Kalkış noktası zorunludur"),c.tripDetails.dropoffLocation.trim()||(e["tripDetails.dropoffLocation"]="Varış noktası zorunludur"),c.selectedVehicle||(e.selectedVehicle="Araç seçimi zorunludur"),m(e),0===Object.keys(e).length})()){h(!0);try{if(0===c.totalPrice&&c.selectedVehicle){const e="round-trip"===c.tripDetails.tripType,{price:t}=await L(c.tripDetails.pickupLocation,c.tripDetails.dropoffLocation,c.selectedVehicle,e);c.totalPrice=t}const e={...c,totalPrice:c.totalPrice||("round-trip"===c.tripDetails.tripType?200:100),createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};await l(e)}catch(t){}finally{h(!1)}}},className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(s,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Müşteri Bilgileri"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),e.jsx("input",{type:"text",value:c.customerInfo.firstName,onChange:e=>k("customerInfo","firstName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["customerInfo.firstName"]?"border-red-500":"border-gray-300"),placeholder:"Müşteri adı"}),p["customerInfo.firstName"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["customerInfo.firstName"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),e.jsx("input",{type:"text",value:c.customerInfo.lastName,onChange:e=>k("customerInfo","lastName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["customerInfo.lastName"]?"border-red-500":"border-gray-300"),placeholder:"Müşteri soyadı"}),p["customerInfo.lastName"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["customerInfo.lastName"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),e.jsx("input",{type:"tel",value:c.customerInfo.phone,onChange:e=>k("customerInfo","phone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["customerInfo.phone"]?"border-red-500":"border-gray-300"),placeholder:"+90 555 123 45 67"}),c.customerInfo.phone&&e.jsxs("div",{className:"mt-1 p-2 bg-gray-50 rounded-md",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Önizleme:"}),e.jsx(on,{phone:c.customerInfo.phone,size:"sm",showCountryName:!0})]}),p["customerInfo.phone"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["customerInfo.phone"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),e.jsx("input",{type:"email",value:c.customerInfo.email,onChange:e=>k("customerInfo","email",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["customerInfo.email"]?"border-red-500":"border-gray-300"),placeholder:"ornek@email.com"}),p["customerInfo.email"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["customerInfo.email"]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(n,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Seyahat Bilgileri"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"round-trip"===c.tripDetails.tripType?"Gidiş Tarihi *":"Tarih *"}),e.jsx("input",{type:"date",value:c.tripDetails.date,onChange:e=>k("tripDetails","date",e.target.value),min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["tripDetails.date"]?"border-red-500":"border-gray-300")}),p["tripDetails.date"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["tripDetails.date"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"round-trip"===c.tripDetails.tripType?"Gidiş Saati *":"Saat *"}),e.jsx("input",{type:"time",value:c.tripDetails.time,onChange:e=>k("tripDetails","time",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["tripDetails.time"]?"border-red-500":"border-gray-300")}),p["tripDetails.time"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["tripDetails.time"]})]}),"round-trip"===c.tripDetails.tripType&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dönüş Tarihi"}),e.jsx("input",{type:"date",value:c.tripDetails.returnDate,onChange:e=>k("tripDetails","returnDate",e.target.value),min:c.tripDetails.date||(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dönüş Saati"}),e.jsx("input",{type:"time",value:c.tripDetails.returnTime,onChange:e=>k("tripDetails","returnTime",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seyahat Türü *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer transition-colors "+("one-way"===c.tripDetails.tripType?"border-blue-500 bg-blue-50":"border-gray-300"),children:[e.jsx("input",{type:"radio",name:"tripType",value:"one-way",checked:"one-way"===c.tripDetails.tripType,onChange:e=>k("tripDetails","tripType",e.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Tek Yön"})]}),e.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer transition-colors "+("round-trip"===c.tripDetails.tripType?"border-blue-500 bg-blue-50":"border-gray-300"),children:[e.jsx("input",{type:"radio",name:"tripType",value:"round-trip",checked:"round-trip"===c.tripDetails.tripType,onChange:e=>k("tripDetails","tripType",e.target.value),className:"mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Gidiş-Dönüş"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kalkış Noktası *"}),w?e.jsxs("div",{className:"relative",children:[e.jsx(tn,{onLoad:e=>{b(e)},onPlaceChanged:()=>{if(null!==x){const e=x.getPlace();u(t=>({...t,tripDetails:{...t.tripDetails,pickupLocation:e.formatted_address}})),setTimeout(()=>N(),500)}},options:{componentRestrictions:{country:"tr"},fields:["formatted_address","name","geometry"],types:["establishment","geocode"]},children:e.jsx("input",{type:"text",value:c.tripDetails.pickupLocation,onChange:e=>k("tripDetails","pickupLocation",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["tripDetails.pickupLocation"]?"border-red-500":"border-gray-300"),placeholder:"Kalkış noktasını yazın (otel, adres vb.)"})}),e.jsx(n,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400"})]}):e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:"Google Maps yükleniyor..."}),p["tripDetails.pickupLocation"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["tripDetails.pickupLocation"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Varış Noktası *"}),w?e.jsxs("div",{className:"relative",children:[e.jsx(tn,{onLoad:e=>{j(e)},onPlaceChanged:()=>{if(null!==y){const e=y.getPlace();u(t=>({...t,tripDetails:{...t.tripDetails,dropoffLocation:e.formatted_address}})),setTimeout(()=>N(),500)}},options:{componentRestrictions:{country:"tr"},fields:["formatted_address","name","geometry"],types:["establishment","geocode"]},children:e.jsx("input",{type:"text",value:c.tripDetails.dropoffLocation,onChange:e=>k("tripDetails","dropoffLocation",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p["tripDetails.dropoffLocation"]?"border-red-500":"border-gray-300"),placeholder:"Varış noktasını yazın (otel, adres vb.)"})}),e.jsx(n,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400"})]}):e.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:"Google Maps yükleniyor..."}),p["tripDetails.dropoffLocation"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p["tripDetails.dropoffLocation"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(r,{className:"w-4 h-4 text-blue-600"}),e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Araç Seçimi *"})]}),e.jsxs("select",{value:c.selectedVehicle,onChange:e=>{u(t=>({...t,selectedVehicle:e.target.value})),setTimeout(()=>{N()},100)},className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(p.selectedVehicle?"border-red-500":"border-gray-300"),children:[e.jsx("option",{value:"",children:"Araç seçiniz..."}),d.map(t=>e.jsxs("option",{value:t.id,children:[t.brand," ",t.model," - ",t.plateNumber,t.kmRate&&` (€${t.kmRate}/km)`]},t.id))]}),p.selectedVehicle&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:p.selectedVehicle})]}),c.totalPrice>0&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-green-700",children:["Hesaplanan Fiyat ","round-trip"===c.tripDetails.tripType?"(Gidiş-Dönüş)":"(Tek Yön)"]}),e.jsxs("p",{className:"text-2xl font-bold text-green-800",children:["€",c.totalPrice]}),c.calculatedDistance>0&&e.jsxs("p",{className:"text-xs text-green-600",children:["Mesafe: ",c.calculatedDistance," km","round-trip"===c.tripDetails.tripType&&" (tek yön)"]}),"round-trip"===c.tripDetails.tripType&&e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Gidiş-dönüş fiyatı hesaplanmıştır"})]}),v&&e.jsx("div",{className:"w-6 h-6 border-2 border-green-500 border-t-transparent rounded-full animate-spin"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yolcu Sayısı"}),e.jsx("input",{type:"number",min:"1",max:"8",value:c.tripDetails.passengerCount,onChange:e=>k("tripDetails","passengerCount",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bagaj Adedi"}),e.jsx("input",{type:"number",min:"0",max:"10",value:c.tripDetails.luggageCount,onChange:e=>k("tripDetails","luggageCount",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uçuş No"}),e.jsx("input",{type:"text",value:c.tripDetails.flightNumber,onChange:e=>k("tripDetails","flightNumber",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"TK123 (opsiyonel)"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(i,{className:"w-5 h-5 text-purple-600"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Ödeme Yöntemi"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"cash",label:"Nakit",desc:"Araçta ödeme"},{value:"credit_card",label:"Kredi Kartı",desc:"Online ödeme"},{value:"bank_transfer",label:"Havale",desc:"Banka havalesi"}].map(t=>e.jsxs("label",{className:"flex flex-col p-3 border rounded-lg cursor-pointer transition-colors "+(c.paymentMethod===t.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.label}),e.jsx("input",{type:"radio",name:"paymentMethod",value:t.value,checked:c.paymentMethod===t.value,onChange:e=>u(t=>({...t,paymentMethod:e.target.value})),className:"text-blue-600"})]}),e.jsx("span",{className:"text-xs text-gray-500 mt-1",children:t.desc})]},t.value))})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),e.jsx("button",{type:"submit",disabled:g,className:"px-8 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Ekleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-4 h-4"}),"Rezervasyon Ekle"]})})]})]})]})})},dn=({reservation:s,onClose:n,onUpdate:r})=>{const[i,o]=P.useState({customerInfo:{firstName:"",lastName:"",phone:"",email:""},tripDetails:{date:"",time:"",returnDate:"",returnTime:"",tripType:"one-way",pickupLocation:"",dropoffLocation:"",passengerCount:1,luggageCount:0,flightNumber:""},paymentMethod:"cash",totalPrice:0}),[d,c]=P.useState({}),[u,p]=P.useState(!1),m=["Lara Kundu Otelleri","Kaleici Otelleri","Belek Otelleri","Side Otelleri","Alanya Otelleri","Kemer Otelleri","Antalya Merkez","Kepez","Muratpaşa","Aksu"];P.useEffect(()=>{s&&o({customerInfo:s.customerInfo||{firstName:"",lastName:"",phone:"",email:""},tripDetails:s.tripDetails||{date:"",time:"",returnDate:"",returnTime:"",tripType:"one-way",pickupLocation:"",dropoffLocation:"",passengerCount:1,luggageCount:0,flightNumber:""},paymentMethod:s.paymentMethod||"cash",totalPrice:s.totalPrice||0})},[s]);const g=(e,t,s)=>{o(n=>({...n,[e]:{...n[e],[t]:s}})),d[`${e}.${t}`]&&c(s=>{const n={...s};return delete n[`${e}.${t}`],n})};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(a,{className:"w-5 h-5"}),"Rezervasyon Düzenle - ",s.reservationId]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(t,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return i.customerInfo.firstName.trim()||(e["customerInfo.firstName"]="Ad zorunludur"),i.customerInfo.lastName.trim()||(e["customerInfo.lastName"]="Soyad zorunludur"),i.customerInfo.phone.trim()||(e["customerInfo.phone"]="Telefon zorunludur"),i.customerInfo.email.trim()||(e["customerInfo.email"]="E-posta zorunludur"),i.tripDetails.date||(e["tripDetails.date"]="Tarih zorunludur"),i.tripDetails.time||(e["tripDetails.time"]="Saat zorunludur"),i.tripDetails.pickupLocation.trim()||(e["tripDetails.pickupLocation"]="Kalkış noktası zorunludur"),i.tripDetails.dropoffLocation.trim()||(e["tripDetails.dropoffLocation"]="Varış noktası zorunludur"),c(e),0===Object.keys(e).length})()){p(!0);try{await r(s.id,i)}catch(t){alert("Rezervasyon güncellenirken hata oluştu")}finally{p(!1)}}},className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Müşteri Bilgileri"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),e.jsx("input",{type:"text",value:i.customerInfo.firstName,onChange:e=>g("customerInfo","firstName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["customerInfo.firstName"]?"border-red-500":"border-gray-300")}),d["customerInfo.firstName"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["customerInfo.firstName"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),e.jsx("input",{type:"text",value:i.customerInfo.lastName,onChange:e=>g("customerInfo","lastName",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["customerInfo.lastName"]?"border-red-500":"border-gray-300")}),d["customerInfo.lastName"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["customerInfo.lastName"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),e.jsx("input",{type:"tel",value:i.customerInfo.phone,onChange:e=>g("customerInfo","phone",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["customerInfo.phone"]?"border-red-500":"border-gray-300")}),d["customerInfo.phone"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["customerInfo.phone"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),e.jsx("input",{type:"email",value:i.customerInfo.email,onChange:e=>g("customerInfo","email",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["customerInfo.email"]?"border-red-500":"border-gray-300")}),d["customerInfo.email"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["customerInfo.email"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Seyahat Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seyahat Türü"}),e.jsxs("select",{value:i.tripDetails.tripType,onChange:e=>g("tripDetails","tripType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"one-way",children:"Tek Yön"}),e.jsx("option",{value:"round-trip",children:"Gidiş-Dönüş"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"round-trip"===i.tripDetails.tripType?"Gidiş Tarihi *":"Tarih *"}),e.jsx("input",{type:"date",value:i.tripDetails.date,onChange:e=>g("tripDetails","date",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["tripDetails.date"]?"border-red-500":"border-gray-300")}),d["tripDetails.date"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["tripDetails.date"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"round-trip"===i.tripDetails.tripType?"Gidiş Saati *":"Saat *"}),e.jsx("input",{type:"time",value:i.tripDetails.time,onChange:e=>g("tripDetails","time",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["tripDetails.time"]?"border-red-500":"border-gray-300")}),d["tripDetails.time"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["tripDetails.time"]})]}),"round-trip"===i.tripDetails.tripType&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dönüş Tarihi"}),e.jsx("input",{type:"date",value:i.tripDetails.returnDate,onChange:e=>g("tripDetails","returnDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["tripDetails.returnDate"]?"border-red-500":"border-gray-300")}),d["tripDetails.returnDate"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["tripDetails.returnDate"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dönüş Saati"}),e.jsx("input",{type:"time",value:i.tripDetails.returnTime,onChange:e=>g("tripDetails","returnTime",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["tripDetails.returnTime"]?"border-red-500":"border-gray-300")}),d["tripDetails.returnTime"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["tripDetails.returnTime"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kalkış Noktası *"}),e.jsx("input",{type:"text",list:"pickup-locations",value:i.tripDetails.pickupLocation,onChange:e=>g("tripDetails","pickupLocation",e.target.value),placeholder:"Kalkış noktasını yazın veya listeden seçin",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["tripDetails.pickupLocation"]?"border-red-500":"border-gray-300")}),e.jsxs("datalist",{id:"pickup-locations",children:[e.jsx("option",{value:"Antalya Havalimanı"}),m.map(t=>e.jsx("option",{value:t},t))]}),d["tripDetails.pickupLocation"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["tripDetails.pickupLocation"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Varış Noktası *"}),e.jsx("input",{type:"text",list:"dropoff-locations",value:i.tripDetails.dropoffLocation,onChange:e=>g("tripDetails","dropoffLocation",e.target.value),placeholder:"Varış noktasını yazın veya listeden seçin",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 "+(d["tripDetails.dropoffLocation"]?"border-red-500":"border-gray-300")}),e.jsxs("datalist",{id:"dropoff-locations",children:[e.jsx("option",{value:"Antalya Havalimanı"}),m.map(t=>e.jsx("option",{value:t},t))]}),d["tripDetails.dropoffLocation"]&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d["tripDetails.dropoffLocation"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yolcu"}),e.jsx("input",{type:"number",min:"1",max:"8",value:i.tripDetails.passengerCount,onChange:e=>g("tripDetails","passengerCount",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bagaj"}),e.jsx("input",{type:"number",min:"0",max:"10",value:i.tripDetails.luggageCount,onChange:e=>g("tripDetails","luggageCount",parseInt(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiyat (€)"}),e.jsx("input",{type:"number",min:"0",value:i.totalPrice,onChange:e=>o(t=>({...t,totalPrice:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uçuş Numarası"}),e.jsx("input",{type:"text",value:i.tripDetails.flightNumber,onChange:e=>g("tripDetails","flightNumber",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"TK123 (opsiyonel)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ödeme Yöntemi"}),e.jsxs("select",{value:i.paymentMethod,onChange:e=>o(t=>({...t,paymentMethod:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"cash",children:"💵 Nakit"}),e.jsx("option",{value:"credit_card",children:"💳 Kredi Kartı"}),e.jsx("option",{value:"bank_transfer",children:"🏦 Havale"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:n,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),e.jsx("button",{type:"submit",disabled:u,className:"px-8 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Güncelleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"w-4 h-4"}),"Güncelle"]})})]})]})]})}):null},cn=({status:t,type:n="reservation"})=>{const r=(()=>{if("payment"===n)switch(t){case"paid":return{color:"bg-green-100 text-green-800 border-green-200",icon:m,label:"Ödendi"};case"pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:p,label:"Bekleyen"};case"unpaid":return{color:"bg-red-100 text-red-800 border-red-200",icon:u,label:"Ödenmedi"};case"refunded":return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:c,label:"İade Edildi"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:d,label:"Bilinmeyen"}}else switch(t){case"confirmed":return{color:"bg-green-100 text-green-800 border-green-200",icon:m,label:"Onaylandı"};case"assigned":return{color:"bg-purple-100 text-purple-800 border-purple-200",icon:s,label:"Şoför Atandı"};case"trip-started":return{color:"bg-orange-100 text-orange-800 border-orange-200",icon:d,label:"🚗 Yolculuk Başladı"};case"pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:p,label:"Bekleyen"};case"cancelled":return{color:"bg-red-100 text-red-800 border-red-200",icon:u,label:"İptal Edildi"};case"completed":return{color:"bg-blue-100 text-blue-800 border-blue-200",icon:m,label:"Tamamlandı"};case"in_progress":return{color:"bg-purple-100 text-purple-800 border-purple-200",icon:d,label:"Devam Ediyor"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:d,label:"Bilinmeyen"}}})(),i=r.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${r.color}`,children:[e.jsx(i,{className:"w-3 h-3 mr-1"}),r.label]})},un=({reservations:t,drivers:a,vehicles:l,onEdit:d,onDriverAssign:u,onShowQR:m,onStatusChange:j,onCompleteReservation:w,onDeleteReservation:L})=>{const[N,k]=P.useState(new Set),C=e=>{if("manual"===e.assignedDriver&&e.manualDriverInfo)return`${e.manualDriverInfo.name} (Dış)`;const t=e.assignedDriver||e.assignedDriverId;if(t&&"manual"!==t){const e=a.find(e=>e.id===t);return e?`${e.firstName} ${e.lastName}`:"Sistem Şoförü"}return"Atanmamış"},S=e=>{const t=l.find(t=>t.id===e);return t?`${t.brand} ${t.model}`:"Araç yok"},E=e=>e?"string"==typeof e?e:"object"==typeof e?e.address?String(e.address):e.name?String(e.name):e.formatted_address?String(e.formatted_address):e.description?String(e.description):"Lokasyon bilgisi mevcut":String(e):"Belirtilmemiş",M=e=>({firstName:e.customerInfo?.firstName||e.personalInfo?.firstName||"",lastName:e.customerInfo?.lastName||e.personalInfo?.lastName||"",phone:e.customerInfo?.phone||e.personalInfo?.phone||"",email:e.customerInfo?.email||e.personalInfo?.email||""}),D=e=>{let t="one-way";return"round-trip"===e.transferType||!0===e.isRoundTrip?t="round-trip":e.tripDetails?.tripType?t=e.tripDetails.tripType:e.tripType&&(t=e.tripType),{date:e.tripDetails?.date||e.date,time:e.tripDetails?.time||e.time,returnDate:e.tripDetails?.returnDate||e.returnDate,returnTime:e.tripDetails?.returnTime||e.returnTime,tripType:t,pickupLocation:E(e.tripDetails?.pickupLocation||e.pickupLocation),dropoffLocation:E(e.tripDetails?.dropoffLocation||e.dropoffLocation),passengerCount:e.tripDetails?.passengerCount||e.passengerCount||1,luggageCount:e.tripDetails?.luggageCount||e.baggageCount||0,flightNumber:e.tripDetails?.flightNumber||e.personalInfo?.flightNumber||""}},O=e=>{const t={credit_card:{label:"Kredi Kartı",icon:"💳",color:"text-blue-600 bg-blue-50"},card:{label:"Kredi Kartı",icon:"💳",color:"text-blue-600 bg-blue-50"},bank_transfer:{label:"Havale",icon:"🏦",color:"text-green-600 bg-green-50"},transfer:{label:"Havale",icon:"🏦",color:"text-green-600 bg-green-50"},cash:{label:"Nakit",icon:"💵",color:"text-yellow-600 bg-yellow-50"},eft:{label:"EFT",icon:"📱",color:"text-purple-600 bg-purple-50"}};return t[e]||t.cash};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-24 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rezervasyon"}),e.jsx("th",{className:"w-40 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Müşteri"}),e.jsx("th",{className:"w-28 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih & Saat"}),e.jsx("th",{className:"w-48 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rota"}),e.jsx("th",{className:"w-24 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"w-32 px-2 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Şoför"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(t=>e.jsxs(T.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onDoubleClick:()=>{return e=t.id,void k(t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s});var e},title:"Çift tıklayın detayları görmek için",children:[e.jsx("td",{className:"px-2 py-3 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-xs font-medium text-gray-900 truncate",children:t.reservationId})})}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(s,{className:"w-3 h-3 text-gray-400 mr-1"}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-xs font-medium text-gray-900 truncate",children:[M(t).firstName," ",M(t).lastName]}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:e.jsx(on,{phone:M(t).phone,size:"sm",className:"text-xs"})})]})]})}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-xs text-gray-900",children:[e.jsx(o,{className:"w-3 h-3 text-gray-400 mr-1"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-medium truncate text-xs",children:D(t).date}),e.jsx("div",{className:"text-gray-500 truncate text-xs",children:D(t).time}),"round-trip"===D(t).tripType&&D(t).returnDate&&e.jsx("div",{className:"font-medium text-blue-600 truncate text-xs",children:D(t).returnDate})]})]})}),e.jsx("td",{className:"px-2 py-3",children:e.jsxs("div",{className:"flex items-center text-xs text-gray-900",children:[e.jsx(n,{className:"w-3 h-3 text-gray-400 mr-1"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-xs",children:D(t).pickupLocation}),e.jsxs("div",{className:"text-gray-500 truncate text-xs",children:["↓ ",D(t).dropoffLocation]})]})]})}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(cn,{status:t.status}),"cancelled"===t.status&&e.jsxs("div",{className:"text-xs text-red-600 bg-red-50 px-2 py-1 rounded",children:[t.cancellationReason&&e.jsx("div",{className:"font-medium",children:t.cancellationReason}),t.cancelledBy&&e.jsxs("div",{className:"text-red-500 mt-1",children:["İptal eden: ",t.cancelledBy]}),t.cancelledAt&&e.jsx("div",{className:"text-red-400 text-xs",children:new Date(t.cancelledAt).toLocaleString("tr-TR")})]}),t.lastEditedAt&&e.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[e.jsxs("div",{className:"font-medium flex items-center",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),"Düzenlendi"]}),t.editedBy&&e.jsxs("div",{className:"text-blue-500 mt-1",children:["Düzenleyen: ",t.editedBy]}),e.jsx("div",{className:"text-blue-400 text-xs",children:new Date(t.lastEditedAt).toLocaleString("tr-TR")})]})]})}),e.jsx("td",{className:"px-2 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-xs",children:[e.jsx(r,{className:"w-3 h-3 text-gray-400 mr-1"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-gray-900 truncate text-xs",children:C(t)}),e.jsx("div",{className:"text-gray-500 truncate text-xs",children:S(t.assignedVehicle)})]})]})})]}),N.has(t.id)&&e.jsx("tr",{children:e.jsxs("td",{colSpan:"6",className:"px-4 py-4 bg-gradient-to-r from-gray-50 to-blue-50 border-l-4 border-blue-500",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-4 pb-2 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4 text-blue-600"}),"Rezervasyon Detayları - ",t.reservationId]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:["Oluşturulma: ",new Date(t.createdAt).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-100",children:[e.jsx("div",{className:"p-1.5 bg-blue-100 rounded-lg",children:e.jsx(s,{className:"w-4 h-4 text-blue-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Müşteri"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Ad Soyad"}),e.jsxs("p",{className:"text-sm text-gray-900 font-semibold truncate",children:[M(t).firstName," ",M(t).lastName]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(h,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Telefon"}),e.jsx("div",{className:"text-sm",children:e.jsx(on,{phone:M(t).phone,size:"sm",showCountryName:!1})})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(v,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"E-posta"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold truncate",children:M(t).email||"Belirtilmemiş"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-100",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg",children:e.jsx(n,{className:"w-4 h-4 text-green-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Seyahat Detayları"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(g,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"SEYAHAT TÜRÜ"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:"round-trip"===D(t).tripType?"Gidiş-Dönüş":"Tek Yön"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(o,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"GİDİŞ TARİHİ"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:D(t).date})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(p,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"GİDİŞ SAATİ"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:D(t).time})]})]})]}),"round-trip"===D(t).tripType&&D(t).returnDate&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(o,{className:"w-3 h-3 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"DÖNÜŞ TARİHİ"}),e.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:D(t).returnDate})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(p,{className:"w-3 h-3 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"DÖNÜŞ SAATİ"}),e.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:D(t).returnTime})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(f,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"KİŞİ SAYISI"}),e.jsxs("p",{className:"text-sm text-gray-900 font-semibold",children:[D(t).passengerCount," Kişi"]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(x,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"BAGAJ SAYISI"}),e.jsxs("p",{className:"text-sm text-gray-900 font-semibold",children:[D(t).luggageCount," Bagaj"]})]})]})]}),D(t).flightNumber&&e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(b,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"UÇUŞ NUMARASI"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:D(t).flightNumber})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-100",children:[e.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:e.jsx(s,{className:"w-4 h-4 text-indigo-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Şoför"})]}),e.jsx("div",{className:"space-y-2",children:"manual"===t.assignedDriver&&t.manualDriverInfo?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{className:"w-3 h-3 text-purple-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Dış Şoför"}),e.jsx("p",{className:"text-sm text-purple-600 font-semibold",children:t.manualDriverInfo.name})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(h,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Telefon"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:t.manualDriverInfo.phone})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Plaka"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:t.manualDriverInfo.plateNumber})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(c,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Ücret"}),e.jsxs("p",{className:"text-sm text-green-600 font-bold",children:[t.manualDriverInfo.price," €"]})]})]})]}):t.assignedDriver&&"manual"!==t.assignedDriver?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{className:"w-3 h-3 text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Sistem Şoförü"}),e.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:C(t)})]})]}),t.assignedVehicle&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(r,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Araç"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:(()=>{const e=l.find(e=>e.id===t.assignedVehicle);return e?`${e.brand} ${e.model} (${e.plateNumber})`:t.assignedVehicle})()})]})]})]}):e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(s,{className:"w-3 h-3 text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Durum"}),e.jsx("p",{className:"text-sm text-gray-500 font-semibold",children:"Şoför Atanmadı"})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-100",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:e.jsx(i,{className:"w-4 h-4 text-purple-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Ödeme"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(i,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Yöntem"}),e.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${O(t.paymentMethod).color}`,children:[e.jsx("span",{className:"mr-1",children:O(t.paymentMethod).icon}),O(t.paymentMethod).label]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(c,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Tutar"}),e.jsxs("p",{className:"text-base text-gray-900 font-bold",children:["€",t.totalPrice]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(y,{className:"w-3 h-3 text-gray-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700",children:"Güncelleme"}),e.jsx("p",{className:"text-sm text-gray-900 font-semibold",children:t.updatedAt?new Date(t.updatedAt).toLocaleDateString("tr-TR"):"Yok"})]})]})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-100",children:[e.jsx("div",{className:"p-1.5 bg-orange-100 rounded-lg",children:e.jsx(n,{className:"w-4 h-4 text-orange-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Rota Bilgileri"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1 bg-green-100 rounded-full",children:e.jsx(n,{className:"w-3 h-3 text-green-600"})}),e.jsx("h5",{className:"font-medium text-gray-800 text-sm",children:"Kalkış Noktası"})]}),e.jsx("div",{className:"pl-6",children:e.jsx("p",{className:"text-gray-900 font-medium leading-relaxed",children:D(t).pickupLocation})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-1 bg-red-100 rounded-full",children:e.jsx(n,{className:"w-3 h-3 text-red-600"})}),e.jsx("h5",{className:"font-medium text-gray-800 text-sm",children:"Varış Noktası"})]}),e.jsx("div",{className:"pl-6",children:e.jsx("p",{className:"text-gray-900 font-medium leading-relaxed",children:D(t).dropoffLocation})})]})]})]})}),e.jsxs("div",{className:"mt-4 bg-white rounded-lg p-3 shadow-sm border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 bg-gray-100 rounded",children:e.jsx(s,{className:"w-3 h-3 text-gray-600"})}),e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"İşlemler"})]})}),e.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[e.jsxs("button",{onClick:()=>d(t),className:"flex items-center justify-center gap-1 p-2 text-center bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 hover:border-blue-300 transition-all group",title:"Rezervasyon bilgilerini düzenle",children:[e.jsx("div",{className:"p-1 bg-blue-100 rounded group-hover:bg-blue-200 transition-colors",children:e.jsx("svg",{className:"w-3 h-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Düzenle"})]}),e.jsxs("button",{onClick:()=>u(t),className:"flex items-center justify-center gap-1 p-2 text-center bg-purple-50 border border-purple-200 rounded-lg hover:bg-purple-100 hover:border-purple-300 transition-all group",title:"Şoför ve araç ataması yap",children:[e.jsx("div",{className:"p-1 bg-purple-100 rounded group-hover:bg-purple-200 transition-colors",children:e.jsx(s,{className:"w-3 h-3 text-purple-600"})}),e.jsx("span",{className:"text-xs font-medium text-purple-700",children:"Şoför"})]}),e.jsxs("button",{onClick:()=>m(t),className:"flex items-center justify-center gap-1 p-2 text-center bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 hover:border-green-300 transition-all group",title:"QR kod oluştur ve görüntüle",children:[e.jsx("div",{className:"p-1 bg-green-100 rounded group-hover:bg-green-200 transition-colors",children:e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),e.jsx("span",{className:"text-xs font-medium text-green-700",children:"QR"})]}),"completed"!==t.status&&(t.assignedDriver||t.assignedDriverId||t.driverId)?e.jsxs("button",{onClick:()=>w(t.id),className:"flex items-center justify-center gap-1 p-2 text-center bg-emerald-50 border border-emerald-200 rounded-lg hover:bg-emerald-100 hover:border-emerald-300 transition-all group",title:"Rezervasyonu tamamla",children:[e.jsx("div",{className:"p-1 bg-emerald-100 rounded group-hover:bg-emerald-200 transition-colors",children:e.jsx("svg",{className:"w-3 h-3 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("span",{className:"text-xs font-medium text-emerald-700",children:"Bitir"})]}):e.jsxs("button",{onClick:()=>L(t.id),className:"flex items-center justify-center gap-1 p-2 text-center bg-red-50 border border-red-200 rounded-lg hover:bg-red-100 hover:border-red-300 transition-all group",title:"Rezervasyonu sil",children:[e.jsx("div",{className:"p-1 bg-red-100 rounded group-hover:bg-red-200 transition-colors",children:e.jsx("svg",{className:"w-3 h-3 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),e.jsx("span",{className:"text-xs font-medium text-red-700",children:"Sil"})]})]})]}),(t.editHistory||t.lastEditedAt)&&e.jsxs("div",{className:"mt-4 bg-white rounded-lg p-3 shadow-sm border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-1 bg-blue-100 rounded",children:e.jsx(g,{className:"w-3 h-3 text-blue-600"})}),e.jsx("h4",{className:"font-medium text-blue-900 text-sm",children:"Düzenleme Geçmişi"})]}),e.jsxs("div",{className:"space-y-2",children:[t.lastEditedAt&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-800",children:"Son Düzenleme"}),e.jsx("span",{className:"text-xs text-blue-600",children:new Date(t.lastEditedAt).toLocaleString("tr-TR")})]}),t.editedBy&&e.jsxs("div",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Düzenleyen:"})," ",t.editedBy]})]}),t.editHistory&&t.editHistory.length>0&&e.jsxs("div",{className:"space-y-1",children:[t.editHistory.slice(-3).reverse().map((t,s)=>e.jsxs("div",{className:"bg-gray-50 rounded p-2 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:t.changes||"Bilgiler güncellendi"}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(t.editedAt).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Düzenleyen: ",t.editedBy]})]},s)),t.editHistory.length>3&&e.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["ve ",t.editHistory.length-3," daha fazla düzenleme..."]})]})]})]})]})," "]})})]},t.id))})]})}),0===t.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(o,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Henüz rezervasyon bulunmuyor"})]})]})},pn=({value:t,size:s=200})=>{const n=P.useRef();return T.useEffect(()=>{n.current&&t&&G.toCanvas(n.current,t,{width:s,margin:2,color:{dark:"#000000",light:"#ffffff"}}).catch(e=>{})},[t,s]),e.jsx("canvas",{ref:n,className:"rounded-lg"})},mn=({reservation:s,onClose:n})=>{const[r,i]=P.useState(!1),[o,a]=P.useState(!1);P.useRef();const l={reservationId:s.id,reservationCode:s.reservationId||`SBS-${s.id?.slice(-6)}`,customerName:`${s.customerInfo?.firstName||""} ${s.customerInfo?.lastName||""}`.trim(),pickup:s.tripDetails?.pickupLocation||"",dropoff:s.tripDetails?.dropoffLocation||"",date:s.tripDetails?.date||"",time:s.tripDetails?.time||"",phone:s.customerInfo?.phone||"",verifyUrl:`${window.location.origin}/driver-qr`},d=JSON.stringify(l);return e.jsx("div",{className:"modal-overlay",children:e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"modal-content max-w-lg",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(w,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"QR Kod"}),e.jsx("p",{className:"text-sm text-gray-500",children:l.reservationCode})]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(t,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"modal-body text-center",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl border-2 border-gray-100 inline-block",children:e.jsx(pn,{value:d,size:200})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Bu QR kodu müşteriye göndererek rezervasyon bilgilerini doğrulayabilirsiniz."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs("button",{onClick:async()=>{i(!0);try{const e=await G.toCanvas(d,{width:512,margin:2,color:{dark:"#000000",light:"#ffffff"}}),t=document.createElement("a");t.download=`qr-${l.reservationCode}.png`,t.href=e.toDataURL(),t.click(),H.success("QR kodu indirildi")}catch(e){H.error("QR kodu indirilemedi")}finally{i(!1)}},disabled:r,className:"btn btn-primary disabled:opacity-50",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),r?"İndiriliyor...":"PNG İndir"]}),e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(l.verifyUrl),a(!0),H.success("Doğrulama linki kopyalandı"),setTimeout(()=>a(!1),2e3)}catch(e){H.error("Link kopyalanamadı")}},className:"btn btn-outline",children:e.jsx(N,{mode:"wait",children:o?e.jsxs(j.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"flex items-center",children:[e.jsx(k,{className:"w-4 h-4 mr-2 text-green-600"}),"Kopyalandı"]},"check"):e.jsxs(j.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},className:"flex items-center",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Link Kopyala"]},"copy")})})]})]}),e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-lg p-4 text-left",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Rezervasyon Detayları"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Müşteri:"}),e.jsx("span",{className:"font-medium",children:l.customerName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Telefon:"}),e.jsx("span",{className:"font-medium",children:l.phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tarih:"}),e.jsx("span",{className:"font-medium",children:l.date?new Date(l.date).toLocaleDateString("tr-TR"):"-"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Saat:"}),e.jsx("span",{className:"font-medium",children:l.time||"-"})]}),l.pickup&&e.jsxs("div",{className:"pt-2",children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Kalkış:"}),e.jsx("span",{className:"font-medium text-sm",children:l.pickup})]}),l.dropoff&&e.jsxs("div",{className:"pt-2",children:[e.jsx("span",{className:"text-gray-600 block mb-1",children:"Varış:"}),e.jsx("span",{className:"font-medium text-sm",children:l.dropoff})]})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{onClick:n,className:"btn btn-outline w-full",children:"Kapat"})})]})})},gn=(e,t)=>{try{const s=e.replace(/[^\d]/g,""),n=`https://wa.me/${s}?text=${encodeURIComponent(t)}`;if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return window.location.href=n,!0;{const e=window.open(n,"_blank","noopener,noreferrer");if(e&&!e.closed)return!0;return confirm("WhatsApp otomatik açılamadı.\n\nTAMAM = WhatsApp Web'de aç\nİPTAL = Link'i kopyala")?(window.location.href=n,!0):(navigator.clipboard.writeText(n).then(()=>{alert("WhatsApp linki kopyalandı! Manuel olarak WhatsApp'ta paylaşabilirsiniz.")}).catch(()=>{prompt("WhatsApp linki (Ctrl+C ile kopyalayın):",n)}),!1)}}catch(s){return alert("WhatsApp gönderiminde hata oluştu. Lütfen manuel olarak şoföre mesaj gönderin."),!1}},hn=(e,t)=>{const s=e=>e?"string"==typeof e?e:"object"==typeof e?e.address||e.name||e.formatted_address||e.description||"Lokasyon bilgisi mevcut":String(e):"Belirtilmemiş",n=`${window.location.origin}/manual-driver/${e.id}`;let r="";r="cash"===e.paymentMethod?`ODEME TIPI: NAKIT\nONEMLI: Musteriden ${e.totalPrice} EUR nakit alacaksiniz.\nSizin hak edisiniz: ${t.price} EUR\nFirmaya verecegınız: ${(e.totalPrice-t.price).toFixed(2)} EUR`:`ODEME TIPI: KREDI KARTI / BANKA HAVALESI\nMusteri online odeme yapti.\nSizin hak edisiniz: ${t.price} EUR\n(Hak edisinizi firmadan alacaksiniz)`;return`SBS TRANSFER HİZMETLERİ LTD. ŞTİ.\nYeni Seyahat Gorevi\n\nMerhaba ${t.name},\n\nREZERVASYON NO: ${e.reservationId}\nMUSTERI: ${e.customerInfo?.firstName} ${e.customerInfo?.lastName}\nTELEFON: ${e.customerInfo?.phone}\n\nTARIH: ${(e=>{if(!e)return"Belirtilmemiş";const[t,s,n]=e.split("-");return`${n}/${s}/${t}`})(e.tripDetails?.date)}\nSAAT: ${e.tripDetails?.time}\n\nNEREDEN: ${s(e.tripDetails?.pickupLocation)}\nNEREYE: ${s(e.tripDetails?.dropoffLocation)}\n\nYOLCU: ${e.tripDetails?.passengerCount||1} kisi\n\n${r}\n\nYOLCULUK YONETIMI:\n${n}\n\nBu link ile yolculugu baslatip tamamlayabilirsiniz.\n\nIyi yolculuklar.\n\nSBS Transfer Hizmetleri Ltd. Şti.`},vn=({reservation:n,drivers:r,vehicles:i,onClose:o,onAssign:a})=>{const[l,d]=P.useState(""),[c,u]=P.useState("system"),[p,m]=P.useState(!1),[g,h]=P.useState([]),[v,f]=P.useState(""),[x,b]=P.useState(!1),[y,j]=P.useState(!1),[L,N]=P.useState({name:"",phone:"",plateNumber:"",price:""});P.useEffect(()=>{"manual"===c&&(async()=>{try{const e=z(W,"manual_drivers"),t=await A(e),s=[];t.docs.forEach(e=>{const t=e.data();s.push({id:e.id,...t})}),h(s)}catch(e){}})()},[c]);const C=e=>e?"string"==typeof e?e:"object"==typeof e?e.address?String(e.address):e.name?String(e.name):e.formatted_address?String(e.formatted_address):e.description?String(e.description):"Lokasyon bilgisi mevcut":String(e):"Belirtilmemiş",D=r.filter(e=>"active"===e.status),O=async e=>{if(e.preventDefault(),"system"!==c||l){if("manual"===c){if(!v&&!x)return void alert("Lütfen bir şoför seçin veya yeni şoför ekleyin");if(!(L.name&&L.phone&&L.plateNumber&&L.price))return void alert("Lütfen tüm manuel şoför bilgilerini doldurun")}m(!0);try{if("system"===c){const e=r.find(e=>e.id===l),t=e?.assignedVehicle||null;await a(n.id,l,t)}else{await a(n.id,null,null,L);try{const e=((e,t)=>{try{const s=hn(e,t);return gn(t.phone,s)}catch(s){return!1}})(n,L);e?alert(`✅ Şoför atandı!\n\n📱 WhatsApp mesajı ${L.name} adlı şoföre gönderildi.\n\nEğer WhatsApp açılmadıysa, popup engelleyicisini kontrol edin.`):alert(`✅ Şoför atandı!\n\n⚠️ WhatsApp mesajı gönderilemedi.\nLütfen manuel olarak ${L.phone} numarasına mesaj gönderin.`)}catch(t){alert(`✅ Şoför atandı!\n\n❌ WhatsApp gönderiminde hata oluştu.\nLütfen manuel olarak ${L.phone} numarasına mesaj gönderin.`)}}}catch(s){alert("Şoför atama sırasında bir hata oluştu")}finally{m(!1)}}else alert("Lütfen şoför seçin")};return e.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Şoför Atama"}),e.jsx("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(t,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"bg-white px-4 py-2 rounded-full shadow-sm border border-blue-200",children:e.jsx("h3",{className:"text-md font-bold text-blue-800",children:n.reservationId})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),e.jsx("h4",{className:"font-medium text-gray-800 text-xs uppercase tracking-wide",children:"Transfer Rotası"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Kalkış"}),e.jsx("p",{className:"font-medium text-gray-900 leading-tight text-sm",children:C(n.tripDetails?.pickupLocation)})]})]}),e.jsx("div",{className:"ml-2 border-l border-dashed border-gray-300 h-3"}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full mt-1.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Varış"}),e.jsx("p",{className:"font-medium text-gray-900 leading-tight text-sm",children:C(n.tripDetails?.dropoffLocation)})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),e.jsx("h4",{className:"font-medium text-gray-800 text-xs uppercase tracking-wide",children:"Rezervasyon Detayları"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Müşteri"}),e.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:[n.customerInfo?.firstName," ",n.customerInfo?.lastName]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Yolcu Sayısı"}),e.jsxs("p",{className:"font-medium text-gray-900 text-sm",children:[n.tripDetails?.passengerCount," kişi"]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:"Tarih & Saat"}),e.jsxs("p",{className:"font-medium text-gray-900 text-md",children:[n.tripDetails?.date," - ",n.tripDetails?.time]})]})]})]})]})]}),e.jsxs("form",{onSubmit:O,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-md font-medium text-gray-700 mb-3",children:"Şoför Atama Türü"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{u("system"),d("")},className:"p-3 border rounded-lg transition-all flex items-center gap-3 "+("system"===c?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400 text-gray-700 hover:bg-gray-50"),children:[e.jsx(s,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Sistem Şoförü"}),e.jsx("div",{className:"text-xs opacity-75",children:"Kayıtlı şoförlerden seç"})]})]}),e.jsxs("button",{type:"button",onClick:()=>{u("manual"),d("")},className:"p-3 border rounded-lg transition-all flex items-center gap-3 "+("manual"===c?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 hover:border-gray-400 text-gray-700 hover:bg-gray-50"),children:[e.jsx(S,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:"Manuel Şoför"}),e.jsx("div",{className:"text-xs opacity-75",children:"Dış şoför bilgisi gir"})]})]})]})]}),"system"===c&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Şoför Seçin *"}),0===D.length?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(s,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"Aktif şoför bulunamadı"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-60 overflow-y-auto",children:D.map(t=>(i.find(e=>e.id===t.assignedVehicle),e.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-colors "+(l===t.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:[e.jsx("input",{type:"radio",name:"driver",value:t.id,checked:l===t.id,onChange:()=>{return e=t.id,void d(e);var e},className:"sr-only"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.firstName&&t.lastName?`${t.firstName} ${t.lastName}`:t.name||t.email||"İsimsiz Şoför"}),e.jsx("p",{className:"text-sm text-gray-600",children:t.phone||"Telefon belirtilmemiş"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Ehliyet: ",t.licenseNumber||"Belirtilmemiş"]}),t.assignedVehicle&&e.jsxs("p",{className:"text-xs text-green-600",children:["✓ Atanmış araç: ",i.find(e=>e.id===t.assignedVehicle)?.plateNumber||"Araç bilgisi bulunamadı"]}),!t.assignedVehicle&&e.jsx("p",{className:"text-xs text-orange-600",children:"⚠ Atanmış araç yok"})]}),l===t.id&&e.jsx(k,{className:"w-5 h-5 text-blue-600"})]},t.id)))})]}),"manual"===c&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"}),"Manuel Şoför Seçimi"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şoför Seçin"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:v||(x?"new":""),onChange:e=>(e=>{if("new"===e)b(!0),f(""),N({name:"",phone:"",plateNumber:"",price:""});else{b(!1),f(e);const t=g.find(t=>t.id===e);t&&N({name:t.name||"",phone:t.phone||"",plateNumber:t.plateNumber||"",price:""})}})(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 appearance-none bg-white",children:[e.jsx("option",{value:"",children:"Şoför seçin..."}),e.jsx("option",{value:"new",children:"+ Yeni Şoför Ekle"}),g.map(t=>e.jsxs("option",{value:t.id,children:[t.name," - ",t.phone," (",t.plateNumber,")"]},t.id))]}),e.jsx(E,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"})]})]}),(x||v)&&e.jsxs("div",{className:"space-y-4 bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsx("h5",{className:"text-md font-medium text-purple-700",children:x?"Yeni Şoför Bilgileri":"Seçilen Şoför Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şoför Adı Soyadı *"}),e.jsx("input",{type:"text",value:L.name,onChange:e=>N(t=>({...t,name:e.target.value})),disabled:!x&&v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 "+(!x&&v?"bg-gray-100 text-gray-600":""),placeholder:"Örn: Ahmet Yılmaz"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon Numarası *"}),e.jsx("input",{type:"tel",value:L.phone,onChange:e=>N(t=>({...t,phone:e.target.value})),disabled:!x&&v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 "+(!x&&v?"bg-gray-100 text-gray-600":""),placeholder:"Örn: +90 555 123 45 67"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Araç Plakası *"}),e.jsx("input",{type:"text",value:L.plateNumber,onChange:e=>N(t=>({...t,plateNumber:e.target.value.toUpperCase()})),disabled:!x&&v,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 "+(!x&&v?"bg-gray-100 text-gray-600":""),placeholder:"Örn: 34 ABC 1234"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seyahat Ücreti (€) *"}),e.jsx("input",{type:"number",value:L.price,onChange:e=>N(t=>({...t,price:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white",placeholder:"Örn: 500",min:"0",step:"0.01"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Her rezervasyon için şoföre ödenecek hak ediş tutarı"})]})]})]}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(M,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-purple-800",children:"WhatsApp Gönderimi"}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Atama tamamlandığında şoföre WhatsApp ile rezervasyon detayları gönderilecek."})]})]})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 flex-shrink-0 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:o,className:"px-6 py-3 text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-lg transition-colors font-medium",children:"İptal"}),e.jsxs("button",{type:"button",onClick:()=>j(!0),className:"px-4 py-3 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-50 transition-colors flex items-center gap-2 font-medium",children:[e.jsx(w,{className:"w-4 h-4"}),"QR Kod"]}),e.jsx("button",{type:"submit",form:"driver-assign-form",onClick:O,disabled:p||"system"===c&&(!l||0===D.length)||"manual"===c&&(!v&&!x||!L.name||!L.phone||!L.plateNumber||!L.price),className:"px-6 py-3 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 font-medium "+("system"===c?"bg-blue-600 hover:bg-blue-700":"bg-purple-600 hover:bg-purple-700"),children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Atanıyor..."]}):e.jsxs(e.Fragment,{children:["system"===c?e.jsx(s,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"}),"system"===c?"Şoför Ata":"Manuel Ata & WhatsApp Gönder"]})})]})]}),y&&e.jsx(mn,{reservation:n,onClose:()=>j(!1)})]})},fn=({reservation:s,onClose:n})=>{const r=P.useRef(null),i=e=>e?"string"==typeof e?e:"object"==typeof e?e.address?String(e.address):e.name?String(e.name):e.formatted_address?String(e.formatted_address):e.description?String(e.description):"Lokasyon bilgisi mevcut":String(e):"Belirtilmemiş";T.useEffect(()=>{if(s&&r.current){const e=s.reservationId||s.id;G.toCanvas(r.current,e,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}})}},[s]);return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"QR Kod"]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(t,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:s.reservationId}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.customerInfo?.firstName," ",s.customerInfo?.lastName]})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-4 bg-white border-2 border-gray-200 rounded-lg",children:e.jsx("canvas",{ref:r,className:"block"})})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tarih:"}),e.jsxs("span",{className:"font-medium",children:[s.tripDetails?.date," ",s.tripDetails?.time]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Kalkış:"}),e.jsx("span",{className:"font-medium",children:i(s.tripDetails?.pickupLocation)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Varış:"}),e.jsx("span",{className:"font-medium",children:i(s.tripDetails?.dropoffLocation)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Yolcu:"}),e.jsxs("span",{className:"font-medium",children:[s.tripDetails?.passengerCount," kişi"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Tutar:"}),e.jsxs("span",{className:"font-medium text-green-600",children:["€",s.totalPrice]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{if(r.current){const e=document.createElement("a");e.download=`QR-${s.reservationId}.png`,e.href=r.current.toDataURL(),e.click()}},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"İndir"]}),navigator.share&&e.jsxs("button",{onClick:async()=>{if(r.current&&navigator.share)try{r.current.toBlob(async e=>{const t=new File([e],`QR-${s.reservationId}.png`,{type:"image/png"});await navigator.share({files:[t],title:`QR Kod - ${s.reservationId}`,text:`${s.customerInfo?.firstName} ${s.customerInfo?.lastName} rezervasyon QR kodu`})})}catch(e){}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Paylaş"]})]})]})]})}):null},xn=()=>{const[t,s]=P.useState([]),[n,r]=P.useState([]),[i,a]=P.useState([]),[l,d]=P.useState([]),[c,u]=P.useState(!0),[m,g]=P.useState(null),[h,v]=P.useState("today"),[f,x]=P.useState(null),[b,j]=P.useState(null),[w,L]=P.useState(null),[N,k]=P.useState(!1),[C,S]=P.useState(!1),[E,M]=P.useState(!1),[I,T]=P.useState(!1),A=e=>{const t=new Date;t.setHours(0,0,0,0);const s=new Date(t);s.setDate(s.getDate()+7);const n=new Date(t);return n.setDate(n.getDate()+30),{today:e.filter(e=>{const s=new Date(e.tripDetails?.date||e.date);return s.setHours(0,0,0,0),s.getTime()===t.getTime()&&!["cancelled","completed"].includes(e.status)}),thisWeek:e.filter(e=>{const n=new Date(e.tripDetails?.date||e.date);return n.setHours(0,0,0,0),n>t&&n<s&&!["cancelled","completed"].includes(e.status)}),thisMonth:e.filter(e=>{const t=new Date(e.tripDetails?.date||e.date);return t.setHours(0,0,0,0),t>=s&&t<n&&!["cancelled","completed"].includes(e.status)}),assigned:e.filter(e=>"assigned"===e.status),completed:e.filter(e=>"completed"===e.status),cancelled:e.filter(e=>"cancelled"===e.status),pending:e.filter(e=>"pending"===e.status||"confirmed"===e.status),all:e.filter(e=>!["cancelled","completed"].includes(e.status))}},G=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],Y=()=>{if(w&&b&&f){const e=`${f}-${b.toString().padStart(2,"0")}-${w.toString().padStart(2,"0")}`;return t.filter(t=>(t.tripDetails?.date||t.date)===e)}if(b&&f){const e=`${f}-${b.toString().padStart(2,"0")}`;return t.filter(t=>{const s=t.tripDetails?.date||t.date;return s&&s.startsWith(e)})}if(f){const e=f.toString();return t.filter(t=>{const s=t.tripDetails?.date||t.date;return s&&s.startsWith(e)})}return A(t)[h]||[]};P.useEffect(()=>{u(!0);const e=R(z(W,"reservations"),e=>{const t=e.docs.map(e=>{const t=e.data();return{id:e.id,...t}});s(t),u(!1)},e=>{s([]),u(!1)}),t=B(z(W,"users"),U("role","==",Z.DRIVER)),n=R(t,e=>{const t=e.docs.map(e=>({id:e.id,...e.data(),firstName:e.data().firstName||"",lastName:e.data().lastName||"",name:e.data().firstName&&e.data().lastName?`${e.data().firstName} ${e.data().lastName}`:e.data().name||e.data().email,phone:e.data().phone||"",licenseNumber:e.data().licenseNumber||"Belirtilmemiş",assignedVehicle:e.data().assignedVehicle||null,vehicle:e.data().assignedVehicle||"Atanmamış",status:!1!==e.data().isActive?"active":"inactive"}));a(t)},e=>{a([])}),r=B(z(W,"vehicles"),U("status","==","active")),i=R(r,e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));d(t)},e=>{d([])});return()=>{e(),n(),i()}},[]);if(c)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(y,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Rezervasyonlar yükleniyor..."})]})});const q=A(t),Q=(e=>{const t={};return e.forEach(e=>{const s=e.tripDetails?.date||e.date;if(s){const[n,r,i]=s.split("-");t[n]||(t[n]={}),t[n][r]||(t[n][r]={}),t[n][r][i]||(t[n][r]=t[n][r]||{},t[n][r][i]=[]),t[n][r][i].push(e)}}),t})(t),J=(e=>{const t=new Set,s=(new Date).getFullYear();return t.add(s),e.forEach(e=>{const s=e.tripDetails?.date||e.date;if(s){const e=parseInt(s.split("-")[0]);t.add(e)}}),Array.from(t).sort((e,t)=>e-t)})(t),X=Y(),ee=[{key:"today",label:"Bugün",count:q.today.length,color:"text-red-600 bg-red-50"},{key:"thisWeek",label:"Bu Hafta",count:q.thisWeek.length,color:"text-purple-600 bg-purple-50"},{key:"thisMonth",label:"Bu Ay",count:q.thisMonth.length,color:"text-indigo-600 bg-indigo-50"},{key:"assigned",label:"Şoför Atananlar",count:q.assigned.length,color:"text-orange-600 bg-orange-50"},{key:"calendar",label:"Yıllık Takvim",count:0,color:"text-blue-600 bg-blue-50",isSpecial:!0,icon:o},{key:"all",label:"Tüm Rezervasyonlar",count:q.all.length,color:"text-slate-600 bg-slate-50"},{key:"pending",label:"Bekleyen",count:q.pending.length,color:"text-yellow-600 bg-yellow-50"},{key:"completed",label:"Tamamlanan",count:q.completed.length,color:"text-green-600 bg-green-50"},{key:"cancelled",label:"İptal",count:q.cancelled.length,color:"text-gray-600 bg-gray-50"}];return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rezervasyon Yönetimi"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Toplam ",t.length," rezervasyon • ",X.length," ",ee.find(e=>e.key===h)?.label.toLowerCase()," rezervasyon"]})]}),e.jsxs("button",{onClick:()=>k(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(D,{className:"w-4 h-4"}),"Hızlı Rezervasyon Ekle"]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-1",children:e.jsx("div",{className:"flex flex-wrap gap-1",children:ee.map(t=>e.jsxs("button",{onClick:()=>{v(t.key),"calendar"!==t.key&&(x(null),j(null),L(null))},className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all "+(h===t.key?`${t.color} border-2 border-current`:"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[t.icon&&e.jsx(t.icon,{className:"w-4 h-4"}),e.jsx("span",{children:t.label}),!t.isSpecial&&e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold "+(h===t.key?"bg-white bg-opacity-80":"bg-gray-200"),children:t.count})]},t.key))})}),"calendar"===h&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-4",children:[!f&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(o,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Yıl Seçin"})]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 lg:grid-cols-8 gap-3",children:J.map(t=>{const s=Q[t]||{},n=Object.values(s).reduce((e,t)=>"object"==typeof t&&null!==t?e+Object.values(t).reduce((e,t)=>"object"==typeof t&&null!==t?e+Object.values(t).reduce((e,t)=>e+(Array.isArray(t)?t.length:0),0):e,0):e,0);return e.jsx("button",{onClick:()=>x(t),className:"group relative overflow-hidden bg-white border border-gray-200 rounded-xl p-4 hover:border-blue-300 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors",children:e.jsx(O,{className:"w-5 h-5 text-blue-600"})}),e.jsx("div",{className:"text-lg font-bold text-gray-900 group-hover:text-blue-600",children:t}),e.jsxs("div",{className:"text-xs text-gray-500 group-hover:text-blue-500 font-medium",children:[n||0," rezervasyon"]})]})},t)})})]}),f&&!b&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"w-5 h-5 text-blue-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[f," - Ay Seçin"]})]}),e.jsx("button",{onClick:()=>x(null),className:"text-blue-600 hover:text-blue-800 font-medium text-sm px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",children:"← Yıllara Dön"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:G.map((t,s)=>{const n=s+1,r=n.toString().padStart(2,"0"),i=Q[f]?.[r]||{},o=Object.values(i).reduce((e,t)=>e+(Array.isArray(t)?t.length:0),0);let a="bg-gray-100",l="text-gray-500",d="border-gray-200",c="bg-white",u="text-gray-900",p="text-gray-500";return o>0&&(o>=10?(a="bg-red-100",l="text-red-600",d="border-red-200",c="bg-red-50",u="text-red-800",p="text-red-600"):o>=5?(a="bg-yellow-100",l="text-yellow-600",d="border-yellow-200",c="bg-yellow-50",u="text-yellow-800",p="text-yellow-600"):(a="bg-green-100",l="text-green-600",d="border-green-200",c="bg-green-50",u="text-green-800",p="text-green-600")),e.jsx("button",{onClick:()=>j(n),className:`group relative overflow-hidden ${c} border ${d} rounded-xl p-4 hover:shadow-md transition-all duration-200`,children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:`p-2 ${a} rounded-lg transition-colors`,children:e.jsx(O,{className:`w-4 h-4 ${l}`})}),e.jsx("div",{className:`text-sm font-bold ${u} group-hover:text-blue-600`,children:t}),e.jsxs("div",{className:`text-xs font-semibold ${p} group-hover:text-blue-500`,children:[o||0," rezervasyon"]})]})},n)})})]}),f&&b&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-blue-600"}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[f," ",G[b-1]," - Gün Seçin"]})]}),e.jsx("button",{onClick:()=>j(null),className:"text-blue-600 hover:text-blue-800 font-medium text-sm px-3 py-1 rounded-lg hover:bg-blue-50 transition-colors",children:"← Aylara Dön"})]}),(()=>{const t=b.toString().padStart(2,"0"),s=Q[f]?.[t]||{},n=Object.keys(s).filter(e=>Array.isArray(s[e])&&s[e].length>0);return 0===n.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:e.jsx(o,{className:"w-12 h-12 text-gray-400"})})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Rezervasyon Bulunamadı"}),e.jsxs("p",{className:"text-gray-600",children:[G[b-1]," ",f," ayında rezervasyon bulunmuyor."]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:n.sort((e,t)=>parseInt(e)-parseInt(t)).map(n=>{const r=parseInt(n),i=s[n]||[],o=`${n}/${t}/${f}`;return e.jsx("button",{onClick:()=>L(r),className:"group relative overflow-hidden border rounded-xl p-4 transition-all duration-200 "+(w===r?"border-blue-300 bg-blue-50 shadow-md":"border-green-200 bg-green-50 hover:bg-green-100 hover:shadow-md"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${w===r?"bg-blue-100":"bg-green-100 group-hover:bg-green-200"} transition-colors`,children:e.jsx(p,{className:"w-4 h-4 "+(w===r?"text-blue-600":"text-green-600")})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o}),e.jsxs("div",{className:"text-xs font-semibold "+(w===r?"text-blue-600":"text-green-600"),children:[i.length," rezervasyon"]})]})]})},r)})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("button",{onClick:()=>{L(null)},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Tüm ",G[b-1]," Rezervasyonlarını Göster"]})})]})})()]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[("calendar"!==h||f&&(b||w))&&e.jsx(un,{reservations:Y(),drivers:i,vehicles:l,onEdit:e=>{g(e),M(!0)},onDriverAssign:e=>{g(e),S(!0)},onShowQR:e=>{g(e),T(!0)},onCompleteReservation:async e=>{try{const s=t.find(t=>t.id===e);if(!s)return void H.error("Rezervasyon bulunamadı");if("completed"===s.status)return void H.error("Bu rezervasyon zaten tamamlanmış");if(!(s.assignedDriver||s.assignedDriverId||s.driverId))return void H.error("Rezervasyona şoför atanmamış");await $(e,"admin-user");const n="cash"===s.paymentMethod?"Şoför komisyon borcu eklendi":"Şoför alacağı eklendi";H.success(`Rezervasyon tamamlandı! ${n}`)}catch(s){H.error("Rezervasyon tamamlanırken hata oluştu: "+s.message)}},onStatusChange:(e,t)=>{}}),"calendar"===h&&!f&&e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"p-6 bg-blue-100 rounded-full",children:e.jsx(o,{className:"w-16 h-16 text-blue-600"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Yıllık Rezervasyon Takvimi"}),e.jsxs("p",{className:"text-gray-600",children:["Rezervasyonlarınızı yıl, ay ve gün bazında görüntüleyebilirsiniz.",e.jsx("br",{}),"Başlamak için yukarıdan bir yıl seçin."]})]}),"calendar"===h&&f&&!b&&e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"p-4 bg-blue-100 rounded-full",children:e.jsx(O,{className:"w-12 h-12 text-blue-600"})})}),e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:[f," Yılı Seçildi"]}),e.jsx("p",{className:"text-gray-600",children:"Rezervasyonları görüntülemek için bir ay seçin."})]})]}),N&&e.jsx(ln,{onClose:()=>k(!1),onSubmit:async e=>{try{const t={...e,reservationId:`SBS-${Date.now()}`,status:"pending",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};await _(z(W,"reservations"),t);k(!1),H.success("Rezervasyon başarıyla eklendi!")}catch(t){H.error("Rezervasyon eklenirken bir hata oluştu: "+t.message)}},vehicles:l}),E&&m&&e.jsx(dn,{reservation:m,onClose:()=>{M(!1),g(null)},onUpdate:async(e,s)=>{try{if(!t.find(t=>t.id===e))return void H.error("Rezervasyon bulunamadı");await V(F(W,"reservations",e),{...s,updatedAt:(new Date).toISOString()}),M(!1),g(null),H.success("Rezervasyon başarıyla güncellendi!")}catch(n){H.error("Rezervasyon güncellenirken bir hata oluştu: "+n.message)}}}),C&&m&&e.jsx(vn,{reservation:m,drivers:i,vehicles:l,onClose:()=>{S(!1),g(null)},onAssign:async(e,s,n,r=null)=>{try{const a=t.find(t=>t.id===e);if(!a)return void H.error("Rezervasyon bulunamadı");if(g({id:a.id,reservationId:a.reservationId,currentStatus:a.status,currentAssignedDriver:a.assignedDriver,currentAssignedDriverId:a.assignedDriverId}),r){const t={assignedDriver:"manual",assignedDriverId:"manual",manualDriverInfo:r,assignedVehicle:r.plateNumber,status:"assigned",updatedAt:(new Date).toISOString()};await V(F(W,"reservations",e),t);try{const e=hn(a,r);gn(r.phone,e)}catch(i){H.error("WhatsApp gönderimi başarısız: "+i.message)}try{const e={name:"SBS TURKEY TURİZM SANAYİ VE TİCARET LİMİTED ŞİRKETİ",address:"GÜZELYURT MAH. SERİK CAD. NO: 138 /2 AKSU/ ANTALYA",phone:"+90 532 574 26 82",email:"sbstravel@gmail.com",website:"www.gatetransfer.com"};await(async(e,t,s)=>{try{const r=new K("p","mm","a4"),i=r.internal.pageSize.getWidth(),o=r.internal.pageSize.getHeight(),a={primary:[41,128,185],secondary:[52,152,219],success:[39,174,96],warning:[241,196,15],danger:[231,76,60],dark:[52,73,94],light:[236,240,241],white:[255,255,255]},l=e=>e?e.replace(/ğ/g,"g").replace(/Ğ/g,"G").replace(/ü/g,"u").replace(/Ü/g,"U").replace(/ş/g,"s").replace(/Ş/g,"S").replace(/ı/g,"i").replace(/İ/g,"I").replace(/ö/g,"o").replace(/Ö/g,"O").replace(/ç/g,"c").replace(/Ç/g,"C"):"Belirtilmemis",d=e=>e?l("string"==typeof e?e:"object"==typeof e?e.address||e.name||e.formatted_address||e.description||"Lokasyon bilgisi mevcut":String(e)):"Belirtilmemis",c=e=>{if(!e)return"Belirtilmemis";const[t,s,n]=e.split("-");return`${n}/${s}/${t}`};r.setFillColor(...a.primary),r.rect(0,0,i,20,"F"),r.setTextColor(...a.white),r.setFontSize(16),r.setFont("helvetica","bold"),r.text(l(s?.name||"SBS TRANSFER HIZMETLERI LTD. STI."),20,13),r.setFontSize(10),r.setFont("helvetica","normal"),r.text("PROFESYONEL TRANSFER HIZMETI",20,18),r.setFillColor(...a.secondary),r.rect(0,20,i,12,"F"),r.setTextColor(...a.white),r.setFontSize(8),r.text(`Tel: ${s?.phone||"+90 242 835 07 07"}`,20,25),r.text(`Email: ${s?.email||"info@sonsbs.com"}`,20,29),r.text("Aksu/Antalya",130,25),r.text(`Tarih: ${(new Date).toLocaleDateString("tr-TR")} - ${(new Date).toLocaleTimeString("tr-TR").slice(0,5)}`,130,29),r.setFillColor(...a.dark),r.rect(0,35,i,10,"F"),r.setTextColor(...a.white),r.setFontSize(12),r.setFont("helvetica","bold"),r.text("TRANSFER GOREVI - DIS SOFOR",20,42);let u=52;r.setFillColor(...a.warning),r.rect(10,u,i-20,6,"F"),r.setTextColor(...a.dark),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("REZERVASYON BILGILERI",15,u+4),u+=9;const p="roundtrip"===e.tripDetails?.direction?"Gidis-Donus":"oneway"===e.tripDetails?.direction?"Tek Yon":e.tripDetails?.isRoundTrip?"Gidis-Donus":"Tek Yon";[["Rezervasyon No:",e.reservationNumber||e.reservationId||"Belirtilmemis"],["Musteri:",l(`${e.customerInfo?.firstName||""} ${e.customerInfo?.lastName||""}`.trim()||"Belirtilmemis")],["Telefon:",e.customerInfo?.phone||"Belirtilmemis"],["Email:",e.customerInfo?.email||"Belirtilmemis"],["Transfer Tipi:",p],["Tarih:",c(e.tripDetails?.date)||"Belirtilmemis"],["Saat:",e.tripDetails?.time||"Belirtilmemis"],["Yolcu Sayisi:",`${e.customerInfo?.passengerCount||1} kisi`]].forEach((e,t)=>{t%2==0&&(r.setFillColor(...a.light),r.rect(15,u-1,i-30,8,"F")),r.setTextColor(...a.dark),r.setFontSize(10),r.setFont("helvetica","bold"),r.text(e[0],20,u+3),r.setFontSize(9),r.setFont("helvetica","normal"),r.text(e[1],85,u+3),u+=8}),u+=6,r.setFillColor(...a.danger),r.rect(10,u,i-20,6,"F"),r.setTextColor(...a.white),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("TRANSFER BILGILERI",15,u+4),u+=9,r.setFillColor(...a.light),r.rect(15,u,i-30,22,"F"),r.setTextColor(...a.dark),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("KALKIS:",20,u+6),r.setFontSize(9),r.setFont("helvetica","normal");const m=d(e.tripDetails?.pickupLocation),g=r.splitTextToSize(m,i-60);r.text(g,20,u+9),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("VARIS:",20,u+15),r.setFontSize(9),r.setFont("helvetica","normal");const h=d(e.tripDetails?.dropoffLocation),v=r.splitTextToSize(h,i-60);r.text(v,20,u+18),u+=27,r.setFillColor(...a.primary),r.rect(10,u,i-20,6,"F"),r.setTextColor(...a.white),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("ODEME BILGILERI",15,u+4),u+=9;const f="cash"===e.paymentMethod?"Nakit":"card"===e.paymentMethod?"Kredi Karti":"bank_transfer"===e.paymentMethod?"Havale":"Belirtilmemis",x="cash"===e.paymentMethod?`€${e.totalPrice||"0"}`:"Odeme Yapilmis";[["Odeme Sekli:",f],["Toplam Tutar:",`€${e.totalPrice||"0"}`],["Sofor Hak Edis:",`€${t.price||"0"}`],["Musteriden Alinacak:",x]].forEach((e,t)=>{t%2==0&&(r.setFillColor(...a.light),r.rect(15,u-1,i-30,8,"F")),r.setTextColor(...a.dark),r.setFontSize(10),r.setFont("helvetica","bold"),r.text(e[0],20,u+3),r.setFontSize(9),r.setFont("helvetica","normal"),r.text(e[1],85,u+3),u+=8}),u+=6,r.setFillColor(...a.warning),r.rect(10,u,i-20,6,"F"),r.setTextColor(...a.dark),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("ONEMLI NOTLAR",15,u+4),u+=8,r.setFillColor(...a.light),r.rect(15,u,i-30,20,"F"),r.setTextColor(...a.dark),r.setFontSize(8),r.setFont("helvetica","normal"),r.text("• Musteri ile iletisime gecerek tam lokasyonu teyit edin",20,u+5),r.text("• Zamaninda ve temiz aracla hizmet verin",20,u+10),r.text("• Herhangi bir problem durumunda sirketi arayin",20,u+15),r.text("• Bu belgeyi aracta bulundurun",20,u+20),r.setFillColor(...a.dark),r.rect(0,o-12,i,12,"F"),r.setTextColor(...a.white),r.setFontSize(7),r.setFont("helvetica","italic"),r.text("Bu belge elektronik ortamda olusturulmustur. Imza gerektirmez.",20,o-7),r.text(`Yazdirma Tarihi: ${(new Date).toLocaleDateString("tr-TR")} ${(new Date).toLocaleTimeString("tr-TR").slice(0,5)}`,20,o-3);try{const t=`Manuel_Sofor_${e.reservationNumber||"Transfer"}_${(new Date).getTime()}.pdf`,s=r.output("blob"),n=URL.createObjectURL(s),i=document.createElement("a");return i.href=n,i.download=t,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),setTimeout(()=>URL.revokeObjectURL(n),1e3),!0}catch(n){const t=`Manuel_Sofor_${e.reservationNumber||"Transfer"}_${(new Date).getTime()}.pdf`;return r.save(t),!0}}catch(r){throw r}})(a,r,e)}catch(o){alert("PDF oluşturulurken bir hata oluştu: "+o.message)}}else{const t={assignedDriver:s,assignedDriverId:s,assignedVehicle:n,status:"assigned",updatedAt:(new Date).toISOString()},r=Object.keys(t).reduce((e,s)=>(void 0!==t[s]&&null!==t[s]&&(e[s]=t[s]),e),{});await V(F(W,"reservations",e),r),H.success("Şoför başarıyla atandı!")}S(!1),g(null)}catch(a){H.error("Şoför atama sırasında bir hata oluştu: "+a.message)}}}),I&&m&&e.jsx(fn,{reservation:m,onClose:()=>{T(!1),g(null)}})]})};export{xn as default};
