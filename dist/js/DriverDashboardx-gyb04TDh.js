import{j as e,au as s,ao as t,m as a,U as i,P as r,u as n,am as l,d as c,r as o,h as d,N as m,a as h,a7 as x,c as u,t as g,e as p,f as y,aU as v,M as f,X as j}from"./chunk-Do_hQOja.js";import{r as b}from"./chunk-rj-8a6OE.js";import{V as N,d as w,c as _,u as k}from"./index-B4sOzZkQ.js";import{u as S,n as D,T as C,m as O,A as R,M as $,B as E,K as L}from"./chunk-SPeBi8oJ.js";import{u as I,p as T}from"./chunk-Dorn0VCo.js";import{Q as M}from"./chunk-zIOiuQdg.js";import{_ as P}from"./chunk-uNZoKFSG.js";import"./chunk-Bkkzv6j4.js";import"./chunk-BXGe81IW.js";class H{constructor(e,s,t,a,i){this._legacyCanvasSize=H.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=e,this.$canvas=document.createElement("canvas"),t&&"object"==typeof t?this._onDecode=s:this._legacyOnDecode=s,s="object"==typeof t?t:{},this._onDecodeError=s.onDecodeError||("function"==typeof t?t:this._onDecodeError),this._calculateScanRegion=s.calculateScanRegion||("function"==typeof a?a:this._calculateScanRegion),this._preferredCamera=s.preferredCamera||i||this._preferredCamera,this._legacyCanvasSize="number"==typeof t?t:"number"==typeof a?a:this._legacyCanvasSize,this._maxScansPerSecond=s.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),e.disablePictureInPicture=!0,e.playsInline=!0,e.muted=!0;let r=!1;if(e.hidden&&(e.hidden=!1,r=!0),document.body.contains(e)||(document.body.appendChild(e),r=!0),t=e.parentElement,s.highlightScanRegion||s.highlightCodeOutline){if(a=!!s.overlay,this.$overlay=s.overlay||document.createElement("div"),(i=this.$overlay.style).position="absolute",i.display="none",i.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!a&&s.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch(n){}t.insertBefore(this.$overlay,this.$video.nextSibling)}s.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(e),requestAnimationFrame(()=>{let s=window.getComputedStyle(e);"none"===s.display&&(e.style.setProperty("display","block","important"),r=!0),"visible"!==s.visibility&&(e.style.setProperty("visibility","visible","important"),r=!0),r&&(e.style.opacity="0",e.style.width="0",e.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),e.addEventListener("play",this._onPlay),e.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=H.createQrEngine()}static set WORKER_PATH(e){}static async hasCamera(){try{return!!(await H.listCameras(!1)).length}catch(e){return!1}}static async listCameras(e=!1){if(!navigator.mediaDevices)return[];let s,t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);try{e&&(await t()).every(e=>!e.label)&&(s=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch(a){}try{return(await t()).map((e,s)=>({id:e.deviceId,label:e.label||(0===s?"Default Camera":`Camera ${s+1}`)}))}finally{s&&H._stopVideoStream(s)}}async hasFlash(){let e;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;e=this.$video.srcObject}else e=(await this._getCameraStream()).stream;return"torch"in e.getVideoTracks()[0].getSettings()}catch(s){return!1}finally{e&&e!==this.$video.srcObject&&H._stopVideoStream(e)}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!(await this.hasFlash()))throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(e){throw this._flashOn=!1,e}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),H._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol,this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:e,facingMode:s}=await this._getCameraStream();!this._active||this._paused?H._stopVideoStream(e):(this._setVideoMirror(s),this.$video.srcObject=e,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(e){if(!this._paused)throw this._active=!1,e}}stop(){this.pause(),this._active=!1}async pause(e=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let s=()=>{this.$video.srcObject instanceof MediaStream&&(H._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return e?(s(),!0):(await new Promise(e=>setTimeout(e,300)),!!this._paused&&(s(),!0))}async setCamera(e){e!==this._preferredCamera&&(this._preferredCamera=e,await this._restartVideoStream())}static async scanImage(e,s,t,a,i=!1,r=!1){let n,l=!1;s&&("scanRegion"in s||"qrEngine"in s||"canvas"in s||"disallowCanvasResizing"in s||"alsoTryWithoutScanRegion"in s||"returnDetailedScanResult"in s)&&(n=s.scanRegion,t=s.qrEngine,a=s.canvas,i=s.disallowCanvasResizing||!1,r=s.alsoTryWithoutScanRegion||!1,l=!0),s=!!t;try{let c,o,d;if([t,c]=await Promise.all([t||H.createQrEngine(),H._loadImage(e)]),[a,o]=H._drawToCanvas(c,n,a,i),t instanceof Worker){let e=t;s||H._postWorkerMessageSync(e,"inversionMode","both"),d=await new Promise((s,t)=>{let i,r,l,c=-1;r=a=>{a.data.id===c&&(e.removeEventListener("message",r),e.removeEventListener("error",l),clearTimeout(i),null!==a.data.data?s({data:a.data.data,cornerPoints:H._convertPoints(a.data.cornerPoints,n)}):t(H.NO_QR_CODE_FOUND))},l=s=>{e.removeEventListener("message",r),e.removeEventListener("error",l),clearTimeout(i),t("Scanner error: "+(s?s.message||s:"Unknown Error"))},e.addEventListener("message",r),e.addEventListener("error",l),i=setTimeout(()=>l("timeout"),1e4);let d=o.getImageData(0,0,a.width,a.height);c=H._postWorkerMessageSync(e,"decode",d,[d.data.buffer])})}else d=await Promise.race([new Promise((e,s)=>window.setTimeout(()=>s("Scanner error: timeout"),1e4)),(async()=>{try{var[s]=await t.detect(a);if(!s)throw H.NO_QR_CODE_FOUND;return{data:s.rawValue,cornerPoints:H._convertPoints(s.cornerPoints,n)}}catch(l){if(s=l.message||l,/not implemented|service unavailable/.test(s))return H._disableBarcodeDetector=!0,H.scanImage(e,{scanRegion:n,canvas:a,disallowCanvasResizing:i,alsoTryWithoutScanRegion:r});throw`Scanner error: ${s}`}})()]);return l?d:d.data}catch(c){if(!n||!r)throw c;let s=await H.scanImage(e,{qrEngine:t,canvas:a,disallowCanvasResizing:i});return l?s:s.data}finally{s||H._postWorkerMessage(t,"close")}}setGrayscaleWeights(e,s,t,a=!0){H._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:e,green:s,blue:t,useIntegerApproximation:a})}setInversionMode(e){H._postWorkerMessage(this._qrEnginePromise,"inversionMode",e)}static async createQrEngine(e){if(e=()=>P(()=>import("./qr-scanner-worker.min-k9yJ__Ac.js"),[]).then(e=>e.createWorker()),H._disableBarcodeDetector||!("BarcodeDetector"in window)||!BarcodeDetector.getSupportedFormats||!(await BarcodeDetector.getSupportedFormats()).includes("qr_code"))return e();let s=navigator.userAgentData;return s&&s.brands.some(({brand:e})=>/Chromium/i.test(e))&&/mac ?OS/i.test(s.platform)&&await s.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:e,platformVersion:s})=>/arm/i.test(e||"arm")&&13<=parseInt(s||"13")).catch(()=>!0)?e():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(e){let s=Math.round(2/3*Math.min(e.videoWidth,e.videoHeight));return{x:Math.round((e.videoWidth-s)/2),y:Math.round((e.videoHeight-s)/2),width:s,height:s,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var e=this.$video,s=e.videoWidth,t=e.videoHeight,a=e.offsetWidth,i=e.offsetHeight,r=e.offsetLeft,n=e.offsetTop,l=window.getComputedStyle(e),c=l.objectFit,o=s/t,d=a/i;switch(c){case"none":var m=s,h=t;break;case"fill":m=a,h=i;break;default:("cover"===c?o>d:o<d)?m=(h=i)*o:h=(m=a)/o,"scale-down"===c&&(m=Math.min(m,s),h=Math.min(h,t))}var[x,u]=l.objectPosition.split(" ").map((e,s)=>{const t=parseFloat(e);return e.endsWith("%")?(s?i-h:a-m)*t/100:t});l=this._scanRegion.width||s,d=this._scanRegion.height||t,c=this._scanRegion.x||0;var g=this._scanRegion.y||0;(o=this.$overlay.style).width=l/s*m+"px",o.height=d/t*h+"px",o.top=`${n+u+g/t*h}px`,t=/scaleX\(-1\)/.test(e.style.transform),o.left=`${r+(t?a-x-m:x)+(t?s-c-l:c)/s*m}px`,o.transform=e.style.transform}})}static _convertPoints(e,s){if(!s)return e;let t=s.x||0,a=s.y||0,i=s.width&&s.downScaledWidth?s.width/s.downScaledWidth:1;s=s.height&&s.downScaledHeight?s.height/s.downScaledHeight:1;for(let r of e)r.x=r.x*i+t,r.y=r.y*s+a;return e}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var e=Date.now()-this._lastScanTimestamp,s=1e3/this._maxScansPerSecond;e<s&&await new Promise(t=>setTimeout(t,s-e)),this._lastScanTimestamp=Date.now();try{var t=await H.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(a){if(!this._active)return;this._onDecodeError(a)}!H._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=H.createQrEngine()),t?(this._onDecode?this._onDecode(t):this._legacyOnDecode&&this._legacyOnDecode(t.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",t.cornerPoints.map(({x:e,y:s})=>`${e},${s}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(e){H.NO_QR_CODE_FOUND}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let e=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",s=[{width:{min:1024}},{width:{min:768}},{}],t=s.map(s=>Object.assign({},s,{[e]:{exact:this._preferredCamera}}));for(let i of[...t,...s])try{let e=await navigator.mediaDevices.getUserMedia({video:i,audio:!1});return{stream:e,facingMode:this._getFacingMode(e)||(i.facingMode?this._preferredCamera:"environment"===this._preferredCamera?"user":"environment")}}catch(a){}throw"Camera not found."}async _restartVideoStream(){let e=this._paused;await this.pause(!0)&&!e&&this._active&&await this.start()}static _stopVideoStream(e){for(let s of e.getTracks())s.stop(),e.removeTrack(s)}_setVideoMirror(e){this.$video.style.transform="scaleX("+("user"===e?-1:1)+")"}_getFacingMode(e){return(e=e.getVideoTracks()[0])?/rear|back|environment/i.test(e.label)?"environment":/front|user|face/i.test(e.label)?"user":null:null}static _drawToCanvas(e,s,t,a=!1){t=t||document.createElement("canvas");let i=s&&s.x?s.x:0,r=s&&s.y?s.y:0,n=s&&s.width?s.width:e.videoWidth||e.width,l=s&&s.height?s.height:e.videoHeight||e.height;return a||(a=s&&s.downScaledWidth?s.downScaledWidth:n,s=s&&s.downScaledHeight?s.downScaledHeight:l,t.width!==a&&(t.width=a),t.height!==s&&(t.height=s)),(s=t.getContext("2d",{alpha:!1})).imageSmoothingEnabled=!1,s.drawImage(e,i,r,n,l,0,0,t.width,t.height),[t,s]}static async _loadImage(e){if(e instanceof Image)return await H._awaitImageLoad(e),e;if(e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement||e instanceof SVGImageElement||"OffscreenCanvas"in window&&e instanceof OffscreenCanvas||"ImageBitmap"in window&&e instanceof ImageBitmap)return e;if(!(e instanceof File||e instanceof Blob||e instanceof URL||"string"==typeof e))throw"Unsupported image type.";{let s=new Image;s.src=e instanceof File||e instanceof Blob?URL.createObjectURL(e):e.toString();try{return await H._awaitImageLoad(s),s}finally{(e instanceof File||e instanceof Blob)&&URL.revokeObjectURL(s.src)}}}static async _awaitImageLoad(e){e.complete&&0!==e.naturalWidth||await new Promise((s,t)=>{let a=i=>{e.removeEventListener("load",a),e.removeEventListener("error",a),i instanceof ErrorEvent?t("Image load error"):s()};e.addEventListener("load",a),e.addEventListener("error",a)})}static async _postWorkerMessage(e,s,t,a){return H._postWorkerMessageSync(await e,s,t,a)}static _postWorkerMessageSync(e,s,t,a){if(!(e instanceof Worker))return-1;let i=H._workerMessageId++;return e.postMessage({id:i,type:s,data:t},a),i}}H.DEFAULT_CANVAS_SIZE=400,H.NO_QR_CODE_FOUND="No QR code found",H._disableBarcodeDetector=!1,H._workerMessageId=0;const B=()=>{const[d,m]=b.useState(!1),[h,x]=b.useState(null),[u,g]=b.useState(null),[p,y]=b.useState(!1),[v,f]=b.useState("idle"),j=b.useRef(null),_=b.useRef(null);b.useEffect(()=>()=>{_.current&&_.current.destroy()},[]);const k=()=>{_.current&&(_.current.stop(),_.current.destroy(),_.current=null),m(!1)},R=async e=>{try{let t;y(!0),k();try{t=JSON.parse(e)}catch(s){if(!e.includes("/verify/"))throw new Error("Geçersiz QR kod formatı");t={reservationId:e.split("/verify/")[1]}}x(t);let a=t.reservationId;a.startsWith("SBS-")&&(a=a.substring(4));const i=await O(D(w,"reservations",a));if(!i.exists())return void N.error("Rezervasyon bulunamadı");const r={id:i.id,...i.data()};g(r),"completed"===r.status?(f("completed"),N.info("Bu yolculuk zaten tamamlanmış")):"in_progress"===r.status?(f("started"),N.info("Yolculuk devam ediyor - Tamamlamak için butona basın")):(f("idle"),N.success("Rezervasyon bulundu - Yolculuğu başlatabilirsiniz"))}catch(t){N.error("QR kod okunamadı: "+t.message)}finally{y(!1)}},$=e=>e?"string"==typeof e?e:e.address?e.address:e.name?e.name:"Konum bilgisi mevcut değil":"Belirtilmemiş";return e.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"QR Kod Tarayıcı"}),e.jsx("p",{className:"text-gray-600",children:"Rezervasyon QR kodunu okutarak yolculuğu yönetin"})]}),h?e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[u&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Rezervasyon Detayları"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("completed"===v?"bg-green-100 text-green-800":"started"===v?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"),children:"completed"===v?"Tamamlandı":"started"===v?"Devam Ediyor":"Beklemede"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4"}),"Müşteri Bilgileri"]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"font-medium",children:[u.customerInfo?.firstName," ",u.customerInfo?.lastName]}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center gap-1",children:[e.jsx(r,{className:"w-3 h-3"}),u.customerInfo?.phone]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(n,{className:"w-4 h-4"}),"Yolculuk Bilgileri"]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[u.tripDetails?.date," - ",u.tripDetails?.time]}),e.jsxs("p",{className:"text-sm font-medium",children:["Yolcu: ",u.passengerCount," kişi"]})]})]}),e.jsxs("div",{className:"md:col-span-2 space-y-3",children:[e.jsxs("h3",{className:"font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(l,{className:"w-4 h-4"}),"Güzergah"]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{className:"w-5 h-5 text-green-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Başlangıç"}),e.jsx("p",{className:"text-sm text-gray-600",children:$(u.tripDetails?.pickupLocation)})]})]}),e.jsx("div",{className:"my-2 ml-2 w-0.5 h-6 bg-gray-300"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{className:"w-5 h-5 text-red-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"Varış"}),e.jsx("p",{className:"text-sm text-gray-600",children:$(u.tripDetails?.dropoffLocation)})]})]})]})]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:["idle"===v&&e.jsxs("button",{onClick:async()=>{if(u)try{y(!0),await S(D(w,"reservations",u.id),{status:"in_progress",tripStartedAt:C.now(),updatedAt:C.now()}),f("started"),N.success("Yolculuk başlatıldı!")}catch(e){N.error("Yolculuk başlatılamadı")}finally{y(!1)}},disabled:p,className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white px-8 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[p?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(o,{className:"w-5 h-5"}),"Yolculuğu Başlat"]}),"started"===v&&e.jsxs("button",{onClick:async()=>{if(u)try{y(!0),await S(D(w,"reservations",u.id),{status:"completed",completedAt:C.now(),updatedAt:C.now()}),"manual"===u.assignedDriver&&u.manualDriverInfo&&await I(u.id,{...u,status:"completed",completedAt:C.now()}),f("completed"),N.success("Yolculuk tamamlandı! Finansal işlemler otomatik olarak güncellendi.")}catch(e){N.error("Yolculuk tamamlanamadı")}finally{y(!1)}},disabled:p,className:"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-8 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[p?e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(o,{className:"w-5 h-5"}),"Yolculuğu Tamamla"]}),"completed"===v&&e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-green-100 text-green-800 px-6 py-3 rounded-lg",children:[e.jsx(o,{className:"w-5 h-5"}),"Yolculuk Tamamlandı"]})}),e.jsxs("button",{onClick:()=>{x(null),g(null),f("idle")},className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors flex items-center gap-2 justify-center",children:[e.jsx(s,{className:"w-5 h-5"}),"Yeni QR Tarama"]})]})})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsx("div",{className:"text-center space-y-6",children:d?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative w-full max-w-md mx-auto",children:[e.jsx("video",{ref:j,className:"w-full rounded-lg border-4 border-blue-300",style:{aspectRatio:"1:1"}}),e.jsx("div",{className:"absolute inset-0 border-2 border-blue-500 rounded-lg pointer-events-none",children:e.jsx("div",{className:"absolute inset-4 border-2 border-blue-400 rounded-lg border-dashed"})})]}),e.jsx("p",{className:"text-gray-600",children:"QR kodu kamera görüş alanına getirin"}),e.jsx("button",{onClick:k,className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition-colors",children:"Taramayı Durdur"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(s,{className:"w-12 h-12 text-blue-600"})}),e.jsxs("button",{onClick:async()=>{try{if(m(!0),!j.current)return;_.current=new H(j.current,e=>{R(e.data)},{onDecodeError:e=>{},highlightScanRegion:!0,highlightCodeOutline:!0}),await _.current.start()}catch(e){N.error("Kamera erişimi sağlanamadı"),m(!1)}},className:"bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(t,{className:"w-5 h-5"}),"QR Kod Taramayı Başlat"]})]})})})]})},F=()=>{const{currentUser:t}=_(),{user:C,userProfile:O}=k(),[I,P]=b.useState([]),[H,F]=b.useState(!0),[V,W]=b.useState(null),[A,Y]=b.useState("dashboard"),[z,Q]=b.useState(!1),[q,U]=b.useState(null),K=e=>e?"string"==typeof e?e:"object"==typeof e?e.address?e.address:e.name?e.name:e.formatted_address?e.formatted_address:e.description?e.description:e.lat&&e.lng?`${e.lat}, ${e.lng}`:"Lokasyon bilgisi mevcut":String(e):"Belirtilmemiş";b.useEffect(()=>{if(!t?.uid&&!C?.uid)return;const e=t?.uid||C?.uid,s=R(E(w,"reservations"),$("assignedDriverId","==",e)),a=R(E(w,"reservations"),$("assignedDriver","==",e)),i=L(s,e=>{n(e,"assignedDriverId")},e=>{}),r=L(a,e=>{n(e,"assignedDriver")},e=>{});function n(e,s){const t=e.docs.map(e=>({id:e.id,...e.data()}));P(e=>{const s=[...e];t.forEach(e=>{const t=s.findIndex(s=>s.id===e.id);t>=0?s[t]=e:s.push(e)}),s.sort((e,s)=>{const t=e.tripDetails?.date||e.date,a=s.tripDetails?.date||s.date;return t&&a?new Date(a)-new Date(t):0});const a=s.find(e=>"trip-started"===e.status);return U(a),s}),F(!1)}return()=>{i(),r()}},[t,C,O]);const G=I.filter(e=>"assigned"===e.status||"confirmed"===e.status),X=()=>e.jsx(d,{children:z&&e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:e.jsxs(a.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"QR Kod Okut"}),e.jsx("button",{onClick:()=>Q(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(j,{className:"w-6 h-6 text-gray-500"})})]}),e.jsx(M,{isOpen:!0,onClose:()=>Q(!1),onScan:e=>{const s=e,t=I.find(e=>e.id===s||e.reservationId===s);t?((async e=>{try{const s=D(w,"reservations",e);await S(s,{status:"trip-started",tripStartTime:(new Date).toISOString()});const t=I.find(s=>s.id===e);U(t),N.success("Yolculuk başlatıldı!"),Y("active-trip")}catch(s){N.error("Yolculuk başlatılırken hata oluştu")}})(t.id),Q(!1),N.success(`QR kod başarıyla okundu! Rezervasyon: ${t.reservationId||t.id}`)):N.error(`Bu QR koda ait rezervasyon bulunamadı: ${s}`)}})]})})}),Z=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Merhaba ",O?.firstName||O?.name||"Şoför","!"]}),e.jsxs("p",{className:"text-blue-100",children:[G.length," atanmış göreviniz var"]})]}),q&&e.jsx(a.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-green-500 p-2 rounded-full",children:e.jsx(h,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900",children:"Aktif Yolculuk"}),e.jsxs("p",{className:"text-sm text-green-700",children:[q.customerInfo?.firstName," ",q.customerInfo?.lastName]})]})]}),e.jsx("button",{onClick:()=>Y("active-trip"),className:"bg-green-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-600 transition-colors",children:"Görüntüle"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Y("qr-scanner"),className:"bg-white border-2 border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx(s,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),e.jsx("p",{className:"font-semibold text-gray-900",children:"QR Kod Okut"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Yolculuk Yönet"})]}),e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Y("trip-details"),className:"bg-white border-2 border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[e.jsx(x,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),e.jsx("p",{className:"font-semibold text-gray-900",children:"Geçmiş İşler"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tamamlananlar"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Atanmış Görevler"}),H?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-3 bg-gray-300 rounded w-2/3"})]},s))}):0===G.length?e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[e.jsx(h,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Henüz atanmış görev yok"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Yeni görevler için bekleyin"})]}):e.jsx("div",{className:"space-y-3",children:G.map(s=>e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.customerInfo?.firstName," ",s.customerInfo?.lastName]}),e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:s.reservationId||s.id})]}),e.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-lg text-xs font-medium",children:"Atandı"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(c,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:K(s.tripDetails?.pickupLocation||s.pickupLocation)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(c,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:K(s.tripDetails?.dropoffLocation||s.dropoffLocation)})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:s.tripDetails?.date||s.date||"Belirtilmemiş"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{children:s.tripDetails?.time||s.time||"Belirtilmemiş"})]})]}),(s.tripDetails?.flightNumber||s.flightNumber)&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(g,{className:"w-4 h-4 text-blue-500"}),e.jsxs("span",{children:["Uçuş: ",s.tripDetails?.flightNumber||s.flightNumber]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(p,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.tripDetails?.passengerCount||s.passengerCount||1," Yolcu"]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.tripDetails?.luggageCount||s.luggageCount||0," Bavul"]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{W(s),Y("reservation-details")},className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Detaylar"}),e.jsx("button",{onClick:()=>Q(!0),className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"QR Okut"})]})]},s.id))})]})]}),J=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>Y("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-6 h-6 text-gray-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Aktif Yolculuk"})]}),q&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-green-500 p-4 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:e.jsx(h,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-bold text-green-900 mb-2",children:"Yolculuk Devam Ediyor"}),e.jsxs("p",{className:"text-green-700",children:[q.customerInfo?.firstName," ",q.customerInfo?.lastName]}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:q.reservationId||q.id})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Yolculuk Detayları"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(c,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Alış Noktası"}),e.jsx("p",{className:"text-gray-600",children:K(q.tripDetails?.pickupLocation||q.pickupLocation)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:e.jsx(c,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Varış Noktası"}),e.jsx("p",{className:"text-gray-600",children:K(q.tripDetails?.dropoffLocation||q.dropoffLocation)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx(i,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Müşteri"}),e.jsxs("p",{className:"text-gray-600",children:[q.customerInfo?.firstName," ",q.customerInfo?.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:q.customerInfo?.phone})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{const e=K(q.tripDetails?.pickupLocation||q.pickupLocation),s=K(q.tripDetails?.dropoffLocation||q.dropoffLocation),t=`https://www.google.com/maps/dir/?api=1&origin=${encodeURIComponent(e||"Başlangıç")}&destination=${encodeURIComponent(s||"Varış")}&travelmode=driving`;window.open(t,"_blank"),N.success("Google Maps navigasyon açıldı!")},className:"w-full bg-blue-500 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-3",children:[e.jsx(l,{className:"w-6 h-6"}),e.jsx("span",{children:"Google Maps'te Aç"}),e.jsx(v,{className:"w-5 h-5"})]}),e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>(async e=>{try{const s=t?.uid||C?.uid;if(!s)return void N.error("Kullanıcı bilgisi bulunamadı");await T(e,s),N.success("Yolculuk tamamlandı! Finansal işlemler güncellendi."),Y("dashboard"),U(null)}catch(s){N.error("Yolculuk tamamlanırken hata oluştu: "+s.message)}})(q.id),className:"w-full bg-green-500 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-3",children:[e.jsx(o,{className:"w-6 h-6"}),e.jsx("span",{children:"Yolculuğu Tamamla"})]})]})]})]}),ee=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>Y("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-6 h-6 text-gray-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rezervasyon Detayı"})]}),V&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Müşteri Bilgileri"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(i,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[V.customerInfo?.firstName," ",V.customerInfo?.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Müşteri"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(r,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.customerInfo?.phone}),e.jsx("p",{className:"text-sm text-gray-500",children:"Telefon"})]})]}),V.customerInfo?.email&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(f,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.customerInfo?.email}),e.jsx("p",{className:"text-sm text-gray-500",children:"E-posta"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Yolculuk Bilgileri"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:e.jsx(c,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Alış Noktası"}),e.jsx("p",{className:"text-gray-600",children:K(V.tripDetails?.pickupLocation||V.pickupLocation)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:e.jsx(c,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Varış Noktası"}),e.jsx("p",{className:"text-gray-600",children:K(V.tripDetails?.dropoffLocation||V.dropoffLocation)})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.tripDetails?.date||V.date}),e.jsx("p",{className:"text-sm text-gray-500",children:"Tarih"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.tripDetails?.time||V.time}),e.jsx("p",{className:"text-sm text-gray-500",children:"Saat"})]})]})]}),(V.tripDetails?.flightNumber||V.flightNumber)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(g,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:V.tripDetails?.flightNumber||V.flightNumber}),e.jsx("p",{className:"text-sm text-gray-500",children:"Uçuş Numarası"})]})]}),(V.tripDetails?.passengerCount||V.passengerCount)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(p,{className:"w-5 h-5 text-purple-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[V.tripDetails?.passengerCount||V.passengerCount," kişi"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Yolcu Sayısı"})]})]}),(V.tripDetails?.luggageCount||V.luggageCount)&&e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(y,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[V.tripDetails?.luggageCount||V.luggageCount," adet"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Bagaj"})]})]})]})]}),e.jsxs(a.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Q(!0),className:"w-full bg-blue-500 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-3",children:[e.jsx(s,{className:"w-6 h-6"}),e.jsx("span",{children:"QR Kod Okut ve Başlat"})]})]})]}),se=()=>{const s=I.filter(e=>"completed"===e.status);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>Y("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-6 h-6 text-gray-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Geçmiş İşler"})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Tamamlanan Yolculuklar"}),e.jsxs("p",{className:"text-green-100",children:["Toplam ",s.length," yolculuk tamamladınız"]})]}),e.jsx("div",{children:0===s.length?e.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[e.jsx(o,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Henüz tamamlanmış yolculuk yok"})]}):e.jsx("div",{className:"space-y-3",children:s.map(s=>e.jsxs(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:[s.customerInfo?.firstName," ",s.customerInfo?.lastName]}),e.jsx("p",{className:"text-sm text-green-600 font-medium",children:s.reservationId||s.id})]}),e.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-lg text-xs font-medium",children:"Tamamlandı"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(c,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{children:K(s.tripDetails?.pickupLocation||s.pickupLocation)})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(c,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{children:K(s.tripDetails?.dropoffLocation||s.dropoffLocation)})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsx("span",{children:s.tripDetails?.date||s.date})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(n,{className:"w-4 h-4"}),e.jsx("span",{children:s.tripDetails?.time||s.time})]})]})]})]},s.id))})})]})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 max-w-md mx-auto",children:[e.jsxs(d,{mode:"wait",children:["dashboard"===A&&e.jsx(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsx(Z,{})},"dashboard"),"active-trip"===A&&e.jsx(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsx(J,{})},"active-trip"),"reservation-details"===A&&e.jsx(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsx(ee,{})},"reservation-details"),"qr-scanner"===A&&e.jsxs(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("button",{onClick:()=>Y("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-6 h-6 text-gray-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"QR Kod Tarayıcı"})]}),e.jsx(B,{})]},"qr-scanner"),"trip-details"===A&&e.jsx(a.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:e.jsx(se,{})},"trip-details")]}),e.jsx(X,{})]})};export{F as default};
