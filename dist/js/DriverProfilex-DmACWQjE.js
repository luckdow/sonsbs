import{j as e,U as a,m as s,aF as t,az as l,X as i,a as r,_ as n,aS as c,t as d,ao as o,M as m,P as x,c as h,d as p,S as u,q as j,N as g}from"./chunk-FasyTjxO.js";import{r as y}from"./chunk-rj-8a6OE.js";import{c as N}from"./index-7qfwLuD9.js";import"./chunk-Bkkzv6j4.js";import"./chunk-C3rg1vA9.js";import"./chunk-CyZUTZX5.js";import"./chunk-CfVQzchV.js";const f=()=>{const{state:f,user:v,updateDriver:b,showNotification:w}=N(),{drivers:k,reservations:C,vehicles:D}=f,[B,T]=y.useState(null),[I,H]=y.useState(!1),[S,A]=y.useState({}),[P,E]=y.useState({totalTrips:0,completedTrips:0,totalEarnings:0,averageRating:0,totalDistance:0,joinDate:null});y.useEffect(()=>{const e=k.find(e=>e.email===v?.email);if(e){T(e),A(e);const a=C.filter(a=>a.driverId===e.id),s=a.filter(e=>"completed"===e.status),t=s.reduce((a,s)=>a+(s.totalPrice||0)*((e.commission||10)/100),0),l=s.reduce((e,a)=>e+(a.tripDetails?.distance||0),0);E({totalTrips:a.length,completedTrips:s.length,totalEarnings:t,averageRating:e.rating||5,totalDistance:l,joinDate:e.hireDate})}},[k,C,v]);const R=B?D.find(e=>e.driverId===B.id):null;return B?e.jsxs("div",{className:"space-y-8",children:[e.jsxs(s.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Profil Ayarları"}),e.jsx("p",{className:"text-gray-600 mt-2 text-lg",children:"Kişisel bilgilerinizi görüntüleyin ve düzenleyin"})]}),I?e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:async()=>{try{if(!B?.id)return;if(!S.firstName||!S.lastName||!S.phone)return void w("Lütfen tüm zorunlu alanları doldurun","error");if(!/^(\+90|0)?[5][0-9]{9}$/.test(S.phone.replace(/\s/g,"")))return void w("Geçerli bir telefon numarası girin","error");await b(B.id,S),T(S),H(!1),w("Profil başarıyla güncellendi","success")}catch(e){w("Profil güncellenirken bir hata oluştu","error")}},className:"btn btn-success",children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Kaydet"]}),e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{A(B||{}),H(!1)},className:"btn btn-outline",children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"İptal"]})]}):e.jsxs(s.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{H(!0)},className:"btn btn-primary",children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),"Düzenle"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(s.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-blue-50 hover:to-purple-50",children:e.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(r,{className:"w-10 h-10 text-blue-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:P.totalTrips}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Toplam Sefer"})]})}),e.jsx(s.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,delay:.1,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-green-50 hover:to-emerald-50",children:e.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(n,{className:"w-10 h-10 text-green-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:P.completedTrips}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Tamamlanan"})]})}),e.jsx(s.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,delay:.2,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-purple-50 hover:to-pink-50",children:e.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(c,{className:"w-10 h-10 text-purple-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:(Y=P.totalEarnings,new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(Y))}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Toplam Kazanç"})]})}),e.jsx(s.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,delay:.3,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-yellow-50 hover:to-orange-50",children:e.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx(d,{className:"w-10 h-10 text-yellow-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:["⭐ ",P.averageRating]}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Ortalama Puan"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"lg:col-span-2 card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Kişisel Bilgiler"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-400 to-purple-600 rounded-full flex items-center justify-center shadow-2xl transition-all duration-300 group-hover:scale-110",children:e.jsx(a,{className:"w-12 h-12 text-white"})}),I&&e.jsx(s.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute -bottom-1 -right-1 w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300",children:e.jsx(o,{className:"w-4 h-4"})}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-1",children:[B.firstName," ",B.lastName]}),e.jsx("p",{className:"text-blue-600 font-semibold mb-2",children:"Profesyonel Şoför"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center bg-gradient-to-r from-yellow-50 to-orange-50 px-3 py-1 rounded-full",children:[e.jsx(d,{className:"w-4 h-4 text-yellow-500 mr-2"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[P.averageRating," Puan"]})]}),e.jsxs("div",{className:"flex items-center bg-gradient-to-r from-green-50 to-emerald-50 px-3 py-1 rounded-full",children:[e.jsx(n,{className:"w-4 h-4 text-green-500 mr-2"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[P.completedTrips," Sefer"]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Ad *"}),I?e.jsx("input",{type:"text",className:"input",value:S.firstName||"",onChange:e=>A(a=>({...a,firstName:e.target.value}))}):e.jsx("p",{className:"input-display",children:B.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Soyad *"}),I?e.jsx("input",{type:"text",className:"input",value:S.lastName||"",onChange:e=>A(a=>({...a,lastName:e.target.value}))}):e.jsx("p",{className:"input-display",children:B.lastName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Email"}),e.jsxs("p",{className:"input-display flex items-center",children:[e.jsx(m,{className:"w-4 h-4 mr-2 text-gray-400"}),B.email]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Telefon *"}),I?e.jsx("input",{type:"tel",className:"input",value:S.phone||"",onChange:e=>A(a=>({...a,phone:e.target.value}))}):e.jsxs("p",{className:"input-display flex items-center",children:[e.jsx(x,{className:"w-4 h-4 mr-2 text-gray-400"}),B.phone]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Doğum Tarihi"}),I?e.jsx("input",{type:"date",className:"input",value:S.dateOfBirth||"",onChange:e=>A(a=>({...a,dateOfBirth:e.target.value}))}):e.jsxs("p",{className:"input-display flex items-center",children:[e.jsx(h,{className:"w-4 h-4 mr-2 text-gray-400"}),B.dateOfBirth?`${new Date(B.dateOfBirth).toLocaleDateString("tr-TR")} (${(e=>{if(!e)return null;const a=new Date,s=new Date(e);let t=a.getFullYear()-s.getFullYear();const l=a.getMonth()-s.getMonth();return(l<0||0===l&&a.getDate()<s.getDate())&&t--,t})(B.dateOfBirth)} yaş)`:"Belirtilmemiş"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Şehir"}),I?e.jsx("input",{type:"text",className:"input",value:S.city||"",onChange:e=>A(a=>({...a,city:e.target.value}))}):e.jsxs("p",{className:"input-display flex items-center",children:[e.jsx(p,{className:"w-4 h-4 mr-2 text-gray-400"}),B.city||"Belirtilmemiş"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Adres"}),I?e.jsx("textarea",{className:"input",rows:"3",value:S.address||"",onChange:e=>A(a=>({...a,address:e.target.value}))}):e.jsx("p",{className:"input-display",children:B.address||"Belirtilmemiş"})]})]})})]}),e.jsxs(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"space-y-6",children:[e.jsxs(s.div,{whileHover:{scale:1.02},className:"card group",children:[e.jsx("div",{className:"card-header bg-gradient-to-r from-blue-50 to-indigo-50 group-hover:from-blue-100 group-hover:to-indigo-100 transition-all duration-300",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-3 group-hover:scale-110 transition-transform duration-300",children:e.jsx(u,{className:"w-5 h-5 text-white"})}),"Ehliyet Bilgileri"]})}),e.jsxs("div",{className:"card-body space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Ehliyet No"}),I?e.jsx("input",{type:"text",className:"input",value:S.licenseNumber||"",onChange:e=>A(a=>({...a,licenseNumber:e.target.value}))}):e.jsx("p",{className:"input-display",children:B.licenseNumber||"Belirtilmemiş"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Geçerlilik Tarihi"}),I?e.jsx("input",{type:"date",className:"input",value:S.licenseExpiry||"",onChange:e=>A(a=>({...a,licenseExpiry:e.target.value}))}):e.jsx("p",{className:"input-display",children:B.licenseExpiry?new Date(B.licenseExpiry).toLocaleDateString("tr-TR"):"Belirtilmemiş"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Deneyim (Yıl)"}),I?e.jsx("input",{type:"number",className:"input",min:"0",max:"50",value:S.experienceYears||"",onChange:e=>A(a=>({...a,experienceYears:parseInt(e.target.value)||0}))}):e.jsxs("div",{className:"input-display flex items-center justify-between",children:[e.jsxs("span",{children:[B.experienceYears||0," yıl"]}),e.jsx("div",{className:"flex space-x-1",children:[...Array(Math.min(5,B.experienceYears||0))].map((a,s)=>e.jsx(d,{className:"w-3 h-3 text-yellow-400 fill-current"},s))})]})]})]})]}),R&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(r,{className:"w-5 h-5 mr-2"}),"Atanmış Araç"]})}),e.jsxs("div",{className:"card-body space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Araç:"}),e.jsxs("span",{className:"font-medium",children:[R.brand," ",R.model]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Plaka:"}),e.jsx("span",{className:"font-medium",children:R.plateNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Yıl:"}),e.jsx("span",{className:"font-medium",children:R.year})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Kapasite:"}),e.jsxs("span",{className:"font-medium",children:[R.capacity," kişi"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Durum:"}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("active"===R.status?"status-active":"status-inactive"),children:"active"===R.status?"Aktif":"Pasif"})]})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(j,{className:"w-5 h-5 mr-2"}),"İş İstatistikleri"]})}),e.jsxs("div",{className:"card-body space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"İşe Başlama:"}),e.jsx("span",{className:"font-medium",children:P.joinDate?new Date(P.joinDate).toLocaleDateString("tr-TR"):"Bilinmiyor"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Toplam Mesafe:"}),e.jsxs("span",{className:"font-medium",children:[P.totalDistance," km"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Komisyon Oranı:"}),e.jsxs("span",{className:"font-medium",children:["%",B.commission||10]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Durum:"}),e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+("active"===B.status?"status-active":"status-inactive"),children:"active"===B.status?"Aktif":"Pasif"})]})]})]})]})]}),(B.emergencyContact?.name||I)&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Acil Durum İletişim"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"İsim"}),I?e.jsx("input",{type:"text",className:"input",value:S.emergencyContact?.name||"",onChange:e=>A(a=>({...a,emergencyContact:{...a.emergencyContact,name:e.target.value}}))}):e.jsx("p",{className:"input-display",children:B.emergencyContact?.name||"Belirtilmemiş"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Telefon"}),I?e.jsx("input",{type:"tel",className:"input",value:S.emergencyContact?.phone||"",onChange:e=>A(a=>({...a,emergencyContact:{...a.emergencyContact,phone:e.target.value}}))}):e.jsx("p",{className:"input-display",children:B.emergencyContact?.phone||"Belirtilmemiş"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Yakınlık Derecesi"}),I?e.jsx("input",{type:"text",className:"input",value:S.emergencyContact?.relation||"",onChange:e=>A(a=>({...a,emergencyContact:{...a.emergencyContact,relation:e.target.value}}))}):e.jsx("p",{className:"input-display",children:B.emergencyContact?.relation||"Belirtilmemiş"})]})]})})]}),(B.bankInfo?.accountHolder||I)&&e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(g,{className:"w-5 h-5 mr-2"}),"Banka Bilgileri"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Hesap Sahibi"}),I?e.jsx("input",{type:"text",className:"input",value:S.bankInfo?.accountHolder||"",onChange:e=>A(a=>({...a,bankInfo:{...a.bankInfo,accountHolder:e.target.value}}))}):e.jsx("p",{className:"input-display",children:B.bankInfo?.accountHolder||"Belirtilmemiş"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Banka Adı"}),I?e.jsx("input",{type:"text",className:"input",value:S.bankInfo?.bankName||"",onChange:e=>A(a=>({...a,bankInfo:{...a.bankInfo,bankName:e.target.value}}))}):e.jsx("p",{className:"input-display",children:B.bankInfo?.bankName||"Belirtilmemiş"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"label",children:"IBAN"}),I?e.jsx("input",{type:"text",className:"input",placeholder:"TR00 0000 0000 0000 0000 0000 00",value:S.bankInfo?.iban||"",onChange:e=>A(a=>({...a,bankInfo:{...a.bankInfo,iban:e.target.value.toUpperCase()}}))}):e.jsx("p",{className:"input-display",children:B.bankInfo?.iban||"Belirtilmemiş"})]})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(a,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Profil Bulunamadı"}),e.jsx("p",{className:"text-gray-500",children:"Lütfen yöneticinizle iletişime geçin."})]})});var Y};export{f as default};
