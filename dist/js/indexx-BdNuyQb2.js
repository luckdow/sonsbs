import{j as e,P as s,M as a,u as r,a as l,a7 as t,ax as i,aG as n,e as o,aJ as d,o as c,U as m,X as x,d as u,N as b,c as p,a8 as h,az as g,D as f,R as j,z as N}from"./chunk-FasyTjxO.js";import{R as y,r as v}from"./chunk-rj-8a6OE.js";import{A as w,B as k,M as A,K as S,u as E,n as C,I as D,J as T}from"./chunk-CfVQzchV.js";import{d as B,U as K}from"./index-7qfwLuD9.js";import"./chunk-Bkkzv6j4.js";import"./chunk-C3rg1vA9.js";import"./chunk-CyZUTZX5.js";const $=({drivers:m=[],vehicles:x=[],onEdit:u,onDelete:b,onStatusChange:p,onViewDetails:h})=>{const g=e=>{const s=x.find(s=>s.id===e);return s?`${s.brand} ${s.model} (${s.plateNumber})`:"Araç atanmamış"},f=s=>{const a={active:{color:"bg-green-100 text-green-800 border-green-200",icon:c,label:"Aktif"},inactive:{color:"bg-red-100 text-red-800 border-red-200",icon:d,label:"Pasif"},suspended:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:r,label:"Askıya Alındı"}},l=a[s]||a.inactive,t=l.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${l.color}`,children:[e.jsx(t,{className:"w-3 h-3 mr-1"}),l.label]})},j=e=>{const s=new Date,a=new Date(e)-s,r=Math.ceil(a/864e5);return r<0?{color:"text-red-600",label:"Süresi Dolmuş",urgent:!0}:r<=30?{color:"text-orange-600",label:`${r} gün kaldı`,urgent:!0}:r<=90?{color:"text-yellow-600",label:`${r} gün kaldı`,urgent:!1}:{color:"text-green-600",label:"Geçerli",urgent:!1}};return e.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50 to-indigo-100 rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600/10 via-indigo-600/10 to-purple-600/10 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left font-bold text-slate-700 uppercase tracking-wider",children:"Şoför"}),e.jsx("th",{className:"px-2 py-2 text-left font-bold text-slate-700 uppercase tracking-wider",children:"İletişim"}),e.jsx("th",{className:"px-2 py-2 text-left font-bold text-slate-700 uppercase tracking-wider",children:"Ehliyet"}),e.jsx("th",{className:"px-2 py-2 text-left font-bold text-slate-700 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-2 py-2 text-left font-bold text-slate-700 uppercase tracking-wider",children:"Araç"}),e.jsx("th",{className:"px-2 py-2 text-left font-bold text-slate-700 uppercase tracking-wider",children:"Kom."}),e.jsx("th",{className:"px-2 py-2 text-left font-bold text-slate-700 uppercase tracking-wider",children:"İşlem"})]})}),e.jsx("tbody",{className:"bg-white/80 divide-y divide-slate-100",children:m&&m.length>0?m.map(o=>e.jsx(y.Fragment,{children:e.jsxs("tr",{className:"hover:bg-blue-50/60 transition-colors",children:[e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full flex items-center justify-center border border-blue-200",children:e.jsxs("span",{className:"text-base font-bold text-blue-700",children:[(o.firstName||"")[0]||"",(o.lastName||"")[0]||""]})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-800",children:[o.firstName||""," ",o.lastName||""]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[o.totalTrips||0," sefer"]})]})]})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-slate-800",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(s,{className:"w-4 h-4 text-blue-400 mr-2"}),o.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(a,{className:"w-4 h-4 text-blue-400 mr-2"}),o.email]})]})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-slate-800",children:[e.jsx("div",{className:"font-semibold",children:o.licenseNumber}),e.jsxs("div",{className:`text-xs ${j(o.licenseExpiry).color} flex items-center`,children:[j(o.licenseExpiry).label,j(o.licenseExpiry).urgent&&e.jsx(r,{className:"w-3 h-3 inline ml-1 text-orange-500"})]})]})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[f(o.status),e.jsxs("select",{value:o.status,onChange:e=>p(o.id,e.target.value),className:"text-xs border border-slate-300 rounded-lg px-2 py-1 bg-white/80 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition",children:[e.jsx("option",{value:"active",children:"Aktif"}),e.jsx("option",{value:"inactive",children:"Pasif"}),e.jsx("option",{value:"suspended",children:"Askıya Al"})]})]})}),e.jsx("td",{className:"px-2 py-2",children:e.jsxs("div",{className:"flex items-center text-sm text-slate-800",children:[e.jsx(l,{className:"w-4 h-4 text-blue-400 mr-2"}),e.jsx("div",{className:"max-w-xs",children:e.jsx("div",{className:"truncate "+(o.assignedVehicle?"text-slate-800":"text-slate-400"),children:g(o.assignedVehicle)})})]})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-green-700 font-bold",children:["%",o.commission||0,e.jsx("span",{className:"text-xs text-slate-400 ml-1 font-normal",children:"komisyon"})]})}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-xs font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>h(o),className:"p-2 text-blue-600 hover:text-white hover:bg-blue-600 rounded-lg transition-colors shadow",title:"Detayları Görüntüle",children:e.jsx(t,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u(o),className:"p-2 text-green-600 hover:text-white hover:bg-green-600 rounded-lg transition-colors shadow",title:"Düzenle",children:e.jsx(i,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(o.id),className:"p-2 text-red-600 hover:text-white hover:bg-red-600 rounded-lg transition-colors shadow",title:"Sil",children:e.jsx(n,{className:"w-4 h-4"})})]})})]})},o.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-2 py-2 text-center text-slate-400",children:"Henüz şoför bulunmuyor"})})})]})}),(!m||0===m.length)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(o,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Henüz şoför bulunmuyor"})]})]})},O=({isOpen:r,onClose:t,onSave:i,vehicles:n,loading:o=!1})=>{const[d,c]=v.useState({firstName:"",lastName:"",email:"",phone:"",address:"",licenseNumber:"",licenseExpiry:"",joinDate:(new Date).toISOString().split("T")[0],bloodType:"",emergencyContact:"",emergencyPhone:"",assignedVehicle:"",bankAccount:"",bankName:"",salary:"",commission:"",notes:""}),[f,j]=v.useState({}),N=e=>{const{name:s,value:a}=e.target;c(e=>({...e,[s]:a})),f[s]&&j(e=>({...e,[s]:""}))};return r?e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50 to-indigo-100 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[85vh] overflow-y-auto border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-blue-600/10 via-indigo-600/10 to-purple-600/10",children:[e.jsxs("h2",{className:"text-2xl font-bold text-blue-700 flex items-center gap-2",children:[e.jsx(m,{className:"w-6 h-6"})," Yeni Şoför Ekle"]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-blue-100 text-blue-600 rounded-full transition-colors border border-blue-100",children:e.jsx(x,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};if(d.firstName.trim()||(e.firstName="Ad alanı gereklidir"),d.lastName.trim()||(e.lastName="Soyad alanı gereklidir"),d.email.trim()?/\S+@\S+\.\S+/.test(d.email)||(e.email="Geçerli bir e-posta adresi girin"):e.email="E-posta alanı gereklidir",d.phone.trim()||(e.phone="Telefon alanı gereklidir"),d.licenseNumber.trim()||(e.licenseNumber="Ehliyet numarası gereklidir"),d.licenseExpiry||(e.licenseExpiry="Ehliyet bitiş tarihi gereklidir"),d.commission||(e.commission="Komisyon oranı gereklidir"),d.email&&!/\S+@\S+\.\S+/.test(d.email)&&(e.email="Geçerli bir e-posta adresi girin"),d.phone&&!/^[0-9+\-\s\(\)]+$/.test(d.phone)&&(e.phone="Geçerli bir telefon numarası girin"),d.licenseExpiry){const s=new Date;new Date(d.licenseExpiry)<=s&&(e.licenseExpiry="Ehliyet bitiş tarihi bugünden sonra olmalıdır")}if(d.salary&&(isNaN(d.salary)||parseFloat(d.salary)<0)&&(e.salary="Geçerli bir maaş miktarı girin"),d.commission){const s=parseFloat(d.commission);(isNaN(s)||s<0||s>100)&&(e.commission="Komisyon 0 ile 100 arasında olmalıdır")}return j(e),0===Object.keys(e).length})())return;const s={...d,status:"active",totalTrips:0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};i(s)},className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[e.jsx(m,{className:"w-5 h-5"}),"Kişisel Bilgiler"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),e.jsx("input",{type:"text",name:"firstName",value:d.firstName,onChange:N,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.firstName?"border-red-500":"border-gray-300"),placeholder:"Ad"}),f.firstName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),e.jsx("input",{type:"text",name:"lastName",value:d.lastName,onChange:N,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.lastName?"border-red-500":"border-gray-300"),placeholder:"Soyad"}),f.lastName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.lastName})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",name:"email",value:d.email,onChange:N,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.email?"border-red-500":"border-gray-300"),placeholder:"E-posta adresi"})]}),f.email&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),e.jsxs("div",{className:"relative",children:[e.jsx(s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",name:"phone",value:d.phone,onChange:N,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.phone?"border-red-500":"border-gray-300"),placeholder:"Telefon numarası"})]}),f.phone&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adres"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("textarea",{name:"address",value:d.address,onChange:N,rows:2,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adres"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kan Grubu"}),e.jsxs("select",{name:"bloodType",value:d.bloodType,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Kan grubu seçiniz"}),["A+","A-","B+","B-","AB+","AB-","0+","0-"].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İşe Başlama Tarihi"}),e.jsx("input",{type:"date",name:"joinDate",value:d.joinDate,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acil Durumda Aranacak Kişi"}),e.jsx("input",{type:"text",name:"emergencyContact",value:d.emergencyContact,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İsim ve telefon"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[e.jsx(b,{className:"w-5 h-5"}),"Lisans ve İş Bilgileri"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Numarası *"}),e.jsx("input",{type:"text",name:"licenseNumber",value:d.licenseNumber,onChange:N,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.licenseNumber?"border-red-500":"border-gray-300"),placeholder:"Ehliyet numarası"}),f.licenseNumber&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.licenseNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Bitiş Tarihi *"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"date",name:"licenseExpiry",value:d.licenseExpiry,onChange:N,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.licenseExpiry?"border-red-500":"border-gray-300")})]}),f.licenseExpiry&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.licenseExpiry})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atanacak Araç"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),n&&n.filter(e=>"active"===e.status).length>0?e.jsxs("select",{name:"assignedVehicle",value:d.assignedVehicle,onChange:N,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Araç seçiniz"}),n.filter(e=>"active"===e.status).map(s=>e.jsxs("option",{value:s.id,children:[s.brand," ",s.model," (",s.plateNumber,")"]},s.id))]}):e.jsx("div",{className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-400 flex items-center",children:"Uygun araç bulunamadı"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Adı"}),e.jsx("input",{type:"text",name:"bankName",value:d.bankName,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banka adı"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Hesap No"}),e.jsx("input",{type:"text",name:"bankAccount",value:d.bankAccount,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Hesap numarası"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maaş"}),e.jsx("input",{type:"number",name:"salary",value:d.salary,onChange:N,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.salary?"border-red-500":"border-gray-300"),placeholder:"0",min:"0"}),f.salary&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.salary})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Komisyon (%) *"}),e.jsx("input",{type:"number",name:"commission",value:d.commission,onChange:N,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.commission?"border-red-500":"border-gray-300"),placeholder:"25",min:"0",max:"100"}),f.commission&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:f.commission})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("textarea",{name:"notes",value:d.notes,onChange:N,rows:3,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şoför hakkında notlar..."})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t border-slate-200 bg-gradient-to-r from-blue-600/10 via-indigo-600/10 to-purple-600/10 -mx-6 -mb-6 px-6 py-6",children:[e.jsx("button",{type:"button",onClick:()=>{c({firstName:"",lastName:"",email:"",phone:"",address:"",licenseNumber:"",licenseExpiry:"",joinDate:(new Date).toISOString().split("T")[0],bloodType:"",emergencyContact:"",emergencyPhone:"",assignedVehicle:"",bankAccount:"",bankName:"",salary:"",commission:"",notes:""}),j({})},className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-xl hover:bg-slate-100 transition-colors font-semibold",children:"Temizle"}),e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-xl hover:bg-slate-100 transition-colors font-semibold",children:"İptal"}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all flex items-center gap-2 font-semibold shadow disabled:opacity-50 disabled:cursor-not-allowed",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4"}),"Şoför Ekle"]})})]})]})]})}):null},z=({isOpen:t,onClose:i,onSave:n,driver:o,vehicles:d,loading:c=!1})=>{const[f,j]=v.useState({firstName:"",lastName:"",email:"",phone:"",address:"",licenseNumber:"",licenseExpiry:"",joinDate:"",bloodType:"",emergencyContact:"",emergencyPhone:"",assignedVehicle:"",bankAccount:"",bankName:"",salary:"",commission:"",notes:""}),[N,y]=v.useState({}),[w,k]=v.useState(!1);v.useEffect(()=>{o&&t&&(j({firstName:o.firstName||"",lastName:o.lastName||"",email:o.email||"",phone:o.phone||"",address:o.address||"",licenseNumber:o.licenseNumber||"",licenseExpiry:o.licenseExpiry?o.licenseExpiry.split("T")[0]:"",joinDate:o.joinDate?o.joinDate.split("T")[0]:"",bloodType:o.bloodType||"",emergencyContact:o.emergencyContact||"",emergencyPhone:o.emergencyPhone||"",assignedVehicle:o.assignedVehicle||"",bankAccount:o.bankAccount||"",bankName:o.bankName||"",salary:o.salary||"",commission:o.commission||"",notes:o.notes||""}),k(!1),y({}))},[o,t]);const A=e=>{const{name:s,value:a}=e.target;j(e=>({...e,[s]:a})),k(!0),N[s]&&y(e=>({...e,[s]:""}))},S=()=>{w?window.confirm("Değişiklikler kaydedilmedi. Çıkmak istediğinizden emin misiniz?")&&i():i()};if(!t||!o)return null;const E=(e=>{const s=new Date,a=new Date(e)-s,r=Math.ceil(a/864e5);return r<0?{color:"text-red-600",message:"Ehliyet süresi dolmuş!",urgent:!0}:r<=30?{color:"text-orange-600",message:`${r} gün içinde dolacak`,urgent:!0}:r<=90?{color:"text-yellow-600",message:`${r} gün kaldı`,urgent:!1}:{color:"text-green-600",message:"Geçerli",urgent:!1}})(f.licenseExpiry);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Şoför Düzenle"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[o.firstName," ",o.lastName]})]}),e.jsx("button",{onClick:S,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(x,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!(()=>{const e={};if(f.firstName.trim()||(e.firstName="Ad alanı gereklidir"),f.lastName.trim()||(e.lastName="Soyad alanı gereklidir"),f.email.trim()?/\S+@\S+\.\S+/.test(f.email)||(e.email="Geçerli bir e-posta adresi girin"):e.email="E-posta alanı gereklidir",f.phone.trim()||(e.phone="Telefon alanı gereklidir"),f.licenseNumber.trim()||(e.licenseNumber="Ehliyet numarası gereklidir"),f.licenseExpiry||(e.licenseExpiry="Ehliyet bitiş tarihi gereklidir"),f.commission||(e.commission="Komisyon oranı gereklidir"),f.email&&!/\S+@\S+\.\S+/.test(f.email)&&(e.email="Geçerli bir e-posta adresi girin"),f.phone&&!/^[0-9+\-\s\(\)]+$/.test(f.phone)&&(e.phone="Geçerli bir telefon numarası girin"),f.licenseExpiry){const s=new Date;new Date(f.licenseExpiry)<=s&&(e.licenseExpiry="Ehliyet bitiş tarihi bugünden sonra olmalıdır")}if(f.salary&&(isNaN(f.salary)||parseFloat(f.salary)<0)&&(e.salary="Geçerli bir maaş miktarı girin"),f.commission){const s=parseFloat(f.commission);(isNaN(s)||s<0||s>100)&&(e.commission="Komisyon 0 ile 100 arasında olmalıdır")}return y(e),0===Object.keys(e).length})())return;if(!w)return void i();const s={...o,...f,updatedAt:(new Date).toISOString()};n(s)},className:"p-4",children:[f.licenseExpiry&&E.urgent&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:`font-medium ${E.color}`,children:["Ehliyet Uyarısı: ",E.message]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[e.jsx(m,{className:"w-5 h-5"}),"Kişisel Bilgiler"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),e.jsx("input",{type:"text",name:"firstName",value:f.firstName,onChange:A,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.firstName?"border-red-500":"border-gray-300"),placeholder:"Ad"}),N.firstName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.firstName})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),e.jsx("input",{type:"text",name:"lastName",value:f.lastName,onChange:A,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.lastName?"border-red-500":"border-gray-300"),placeholder:"Soyad"}),N.lastName&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.lastName})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),e.jsxs("div",{className:"relative",children:[e.jsx(a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"email",name:"email",value:f.email,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.email?"border-red-500":"border-gray-300"),placeholder:"ornek@email.com"})]}),N.email&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),e.jsxs("div",{className:"relative",children:[e.jsx(s,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"tel",name:"phone",value:f.phone,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.phone?"border-red-500":"border-gray-300"),placeholder:"0555 123 4567"})]}),N.phone&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adres"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("textarea",{name:"address",value:f.address,onChange:A,rows:2,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tam adres..."})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kan Grubu"}),e.jsxs("select",{name:"bloodType",value:f.bloodType,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seçiniz"}),["A+","A-","B+","B-","AB+","AB-","0+","0-"].map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İşe Başlama Tarihi"}),e.jsx("input",{type:"date",name:"joinDate",value:f.joinDate,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acil Durumda Aranacak Kişi"}),e.jsx("input",{type:"text",name:"emergencyContact",value:f.emergencyContact,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İsim ve telefon"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[e.jsx(b,{className:"w-5 h-5"}),"Lisans ve İş Bilgileri"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Numarası *"}),e.jsx("input",{type:"text",name:"licenseNumber",value:f.licenseNumber,onChange:A,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.licenseNumber?"border-red-500":"border-gray-300"),placeholder:"Ehliyet numarası"}),N.licenseNumber&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.licenseNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Bitiş Tarihi *"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"date",name:"licenseExpiry",value:f.licenseExpiry,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.licenseExpiry?"border-red-500":"border-gray-300")})]}),N.licenseExpiry&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.licenseExpiry})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atanan Araç"}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsxs("select",{name:"assignedVehicle",value:f.assignedVehicle,onChange:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Araç seçiniz"}),d&&d.length>0?d.map(s=>e.jsxs("option",{value:s.id,children:[s.brand," ",s.model," (",s.plateNumber,") - ",s.status||"Durum Belirtilmemiş"]},s.id)):e.jsx("option",{value:"",disabled:!0,children:"Araç bulunamadı"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Adı"}),e.jsx("input",{type:"text",name:"bankName",value:f.bankName,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banka adı"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Hesap No"}),e.jsx("input",{type:"text",name:"bankAccount",value:f.bankAccount,onChange:A,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Hesap numarası"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maaş"}),e.jsx("input",{type:"number",name:"salary",value:f.salary,onChange:A,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.salary?"border-red-500":"border-gray-300"),placeholder:"0",min:"0"}),N.salary&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.salary})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Komisyon (%) *"}),e.jsx("input",{type:"number",name:"commission",value:f.commission,onChange:A,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.commission?"border-red-500":"border-gray-300"),placeholder:"25",min:"0",max:"100"}),N.commission&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:N.commission})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("textarea",{name:"notes",value:f.notes,onChange:A,rows:3,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şoför hakkında notlar..."})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t bg-gray-50 -mx-4 -mb-4 px-4 py-4",children:[e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"İptal"}),e.jsx("button",{type:"submit",disabled:c||!w,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4"}),"Değişiklikleri Kaydet"]})})]})]})]})})},G=({isOpen:a,onClose:l,driver:t,vehicles:i=[]})=>{if(!a||!t)return null;const n=(e=>{const s=new Date,a=new Date(e)-s,r=Math.ceil(a/864e5);return r<0?{color:"text-red-600",label:"Süresi Dolmuş",urgent:!0}:r<=30?{color:"text-orange-600",label:`${r} gün kaldı`,urgent:!0}:r<=90?{color:"text-yellow-600",label:`${r} gün kaldı`,urgent:!1}:{color:"text-green-600",label:"Geçerli",urgent:!1}})(t.licenseExpiry);return e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-white via-blue-50 to-indigo-100 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[85vh] overflow-y-auto border border-slate-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-gradient-to-r from-blue-600/10 via-indigo-600/10 to-purple-600/10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500/10 to-purple-500/10 rounded-full flex items-center justify-center border border-blue-200",children:e.jsxs("span",{className:"text-2xl font-bold text-blue-700",children:[(t.firstName||"")[0]||"",(t.lastName||"")[0]||""]})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:[t.firstName||""," ",t.lastName||""]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:(s=>{const a={active:{color:"bg-green-100 text-green-800 border-green-200",icon:c,label:"Aktif"},inactive:{color:"bg-red-100 text-red-800 border-red-200",icon:d,label:"Pasif"},suspended:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:r,label:"Askıya Alındı"}},l=a[s]||a.inactive,t=l.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${l.color}`,children:[e.jsx(t,{className:"w-3 h-3 mr-1"}),l.label]})})(t.status)})]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-blue-100 text-blue-600 rounded-full transition-colors border border-blue-100",children:e.jsx(x,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[n.urgent&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:`font-semibold ${n.color}`,children:["Ehliyet Uyarısı: ",n.label]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-100/30 to-white/60 rounded-xl p-5 border border-blue-100 shadow",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"Kişisel Bilgiler"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Telefon:"}),e.jsx("p",{className:"font-medium",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"E-posta:"}),e.jsx("p",{className:"font-medium",children:t.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Kan Grubu:"}),e.jsx("p",{className:"font-medium",children:t.bloodType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"İşe Başlama:"}),e.jsx("p",{className:"font-medium",children:new Date(t.joinDate).toLocaleDateString("tr-TR")})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-100/30 to-white/60 rounded-xl p-5 border border-blue-100 shadow",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(s,{className:"w-4 h-4"}),"İletişim"]}),e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Adres:"}),e.jsx("p",{className:"font-medium",children:t.address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Acil Durum:"}),e.jsx("p",{className:"font-medium",children:t.emergencyContact})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-100/30 to-white/60 rounded-xl p-5 border border-blue-100 shadow",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"Lisans & Araç"]}),e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Ehliyet No:"}),e.jsx("p",{className:"font-medium",children:t.licenseNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Geçerlilik:"}),e.jsxs("p",{className:`font-medium ${n.color}`,children:[new Date(t.licenseExpiry).toLocaleDateString("tr-TR")," (",n.label,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Atanan Araç:"}),e.jsx("p",{className:"font-medium",children:(e=>{const s=i.find(s=>s.id===e);return s?`${s.brand} ${s.model} (${s.plateNumber})`:"Araç atanmamış"})(t.assignedVehicle)})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-100/30 to-white/60 rounded-xl p-5 border border-blue-100 shadow",children:[e.jsxs("h3",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"Finansal & Performans"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Komisyon:"}),e.jsxs("p",{className:"font-medium text-green-600",children:["%",t.commission||0]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Toplam Sefer:"}),e.jsx("p",{className:"font-medium",children:t.totalTrips})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Aylık Ort.:"}),e.jsx("p",{className:"font-medium",children:Math.round(t.totalTrips/12)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Durum:"}),e.jsx("p",{className:"font-medium",children:"active"===t.status?"Aktif":"Pasif"})]})]})]})]})]})]}),e.jsx("div",{className:"flex justify-end p-6 border-t border-slate-200 bg-gradient-to-r from-blue-600/10 via-indigo-600/10 to-purple-600/10",children:e.jsx("button",{onClick:l,className:"px-5 py-2 bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all font-semibold shadow",children:"Kapat"})})]})})},V=()=>{const[s,a]=v.useState([]),[r,l]=v.useState([]),[t,i]=v.useState(!0),[n,o]=v.useState(null),[d,c]=v.useState(!1),[m,x]=v.useState(!1),[u,b]=v.useState(!1);v.useEffect(()=>{(async()=>{i(!0);try{const e=w(k(B,"users"),A("role","==",K.DRIVER)),s=S(e,e=>{const s=e.docs.map(e=>({id:e.id,...e.data(),name:e.data().firstName&&e.data().lastName?`${e.data().firstName} ${e.data().lastName}`:e.data().name||e.data().email,phone:e.data().phone||"",licenseNumber:e.data().licenseNumber||"Belirtilmemiş",vehicle:e.data().assignedVehicle||"Atanmamış",status:e.data().isActive?"active":"inactive"}));a(s),i(!1)},e=>{i(!1)}),r=w(k(B,"vehicles"),A("status","==","active")),t=S(r,e=>{const s=e.docs.map(e=>({id:e.id,...e.data()}));l(s)},e=>{});return()=>{s(),t()}}catch(e){i(!1)}})()},[]);return t?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(j,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Şoförler yükleniyor..."})]})}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Şoförler"})}),e.jsxs("button",{onClick:()=>{c(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(N,{className:"w-4 h-4"}),"Yeni Şoför Ekle"]})]})}),e.jsx($,{drivers:s,vehicles:r,onEdit:e=>{o(e),x(!0)},onDelete:async e=>{if(window.confirm("Bu şoförü silmek istediğinizden emin misiniz?"))try{await D(C(B,"users",e)),alert("Şoför başarıyla silindi!")}catch(s){alert("Şoför silinirken bir hata oluştu: "+s.message)}},onStatusChange:async(e,s)=>{try{const a="active"===s;await E(C(B,"users",e),{isActive:a,status:s,updatedAt:(new Date).toISOString()})}catch(a){alert("Durum güncellenirken bir hata oluştu: "+a.message)}},onViewDetails:e=>{o(e),b(!0)}}),e.jsx(O,{isOpen:d,vehicles:r,onClose:()=>c(!1),onSave:async e=>{try{const s={...e,role:"driver",isActive:!0,totalTrips:0,joinDate:(new Date).toISOString().split("T")[0],createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};await T(k(B,"users"),s);c(!1),alert("Şoför başarıyla eklendi!")}catch(s){alert("Şoför eklenirken bir hata oluştu: "+s.message)}}}),e.jsx(z,{isOpen:m,driver:n,vehicles:r,onClose:()=>{x(!1),o(null)},onSave:e=>(async(e,s)=>{try{await E(C(B,"users",e),{...s,updatedAt:(new Date).toISOString()}),x(!1),o(null),alert("Şoför bilgileri başarıyla güncellendi!")}catch(a){alert("Şoför güncellenirken bir hata oluştu: "+a.message)}})(e.id,e)}),e.jsx(G,{isOpen:u,driver:n,vehicles:r,onClose:()=>{b(!1),o(null)}})]})};export{V as default};
