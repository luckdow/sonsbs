import{j as e,a as s,m as a,e as t,a7 as r,aF as l,g as i,aH as n,q as c,af as d,p as o,X as m,ae as x,D as p,ak as u,E as g,aG as b,az as h,d as y,aI as j,S as f,R as N}from"./chunk-BcaSFcXu.js";import{r as v}from"./chunk-rj-8a6OE.js";import{K as k,B as w,u as C,n as F,I as z,J as S}from"./chunk-BY_DoteD.js";import{d as B}from"./index-BST_SAjC.js";import{g as T,v as A}from"./chunk-Bqp865i9.js";import"./chunk-Bkkzv6j4.js";import"./chunk-CY8KpSnY.js";import"./chunk-D-dPr7Hw.js";const D=({vehicles:m,onShowDetails:x,onEditVehicle:p,onDeleteVehicle:u,onStatusChange:g,onManageFeatures:b})=>{const[h,y]=v.useState(null),[j,f]=v.useState(null),N=s=>{const a={active:{color:"bg-green-100 text-green-800",icon:o,text:"Aktif"},inactive:{color:"bg-red-100 text-red-800",icon:d,text:"Pasif"},maintenance:{color:"bg-yellow-100 text-yellow-800",icon:c,text:"Bakımda"}},t=a[s]||a.inactive,r=t.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${t.color}`,children:[e.jsx(r,{className:"w-3 h-3"}),t.text]})},k=async(e,s)=>{await g(e,s)&&y(null)};return 0===m.length?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(s,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz araç yok"}),e.jsx("p",{className:"text-gray-600",children:"İlk aracınızı ekleyerek başlayın."})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Araç Bilgileri"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kapasite"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"KM Ücreti"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Özellikler"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(s=>{return e.jsxs(a.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:e.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center text-2xl",children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:`${s.brand} ${s.model}`,className:"h-12 w-12 rounded-lg object-cover"}):(c=s.type,{sedan:"🚗",suv:"🚙",minibus:"🚐",midibus:"🚌",bus:"🚍",vip:"🏎️"}[c]||"🚗")})}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.brand," ",s.model]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[s.year," • ",s.plateNumber]}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[s.color," • ",s.fuelType]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(t,{className:"w-4 h-4 text-gray-400 mr-1"}),s.capacity," Kişi"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["€",s.kmRate?.toFixed(2)||"0.00"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"per km"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:N(s.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.features&&s.features.length>0?s.features.slice(0,3).map((s,a)=>e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s},a)):e.jsx("span",{className:"text-xs text-gray-400",children:"Özellik yok"}),s.features&&s.features.length>3&&e.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.features.length-3," daha"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>x(s),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Detayları Görüntüle",children:e.jsx(r,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(s),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded",title:"Düzenle",children:e.jsx(l,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>b(s),className:"text-purple-600 hover:text-purple-900 p-1 hover:bg-purple-50 rounded",title:"Özellikleri Yönet",children:e.jsx(i,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>y(h===s.id?null:s.id),className:"text-gray-600 hover:text-gray-900 p-1 hover:bg-gray-50 rounded",title:"Daha Fazla",children:e.jsx(n,{className:"w-4 h-4"})}),h===s.id&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsx("button",{onClick:()=>k(s.id,"active"===s.status?"inactive":"active"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"active"===s.status?"Pasif Et":"Aktif Et"}),e.jsx("button",{onClick:()=>k(s.id,"maintenance"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Bakıma Al"}),e.jsx("button",{onClick:()=>(async e=>{window.confirm("Bu aracı silmek istediğinizden emin misiniz?")&&(f(e),await u(e)&&f(null))})(s.id),disabled:j===s.id,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 disabled:opacity-50",children:j===s.id?"Siliniyor...":"Sil"})]})})]})]})})]},s.id);var c})})]})})})},K=({onClose:t,onSubmit:r})=>{const[l,n]=v.useState("basic"),[d,o]=v.useState({brand:"",model:"",year:(new Date).getFullYear(),plateNumber:"",capacity:"",kmRate:25,color:"",fuelType:"benzin",transmission:"otomatik",type:"sedan",imageUrl:"",features:[],description:"",pricing:{ranges:[{from:1,to:20,price:25,isFixed:!0},{from:20,to:40,price:1.5,isFixed:!1},{from:40,to:80,price:1,isFixed:!1},{from:80,to:150,price:.8,isFixed:!1}]}}),[y,j]=v.useState(!1),[f,N]=v.useState({}),[k,w]=v.useState(!1);v.useEffect(()=>{const e=T(d.type);o(s=>({...s,pricing:e,kmRate:e.ranges?.[1]?.price||25}))},[d.type]);const C=(e,s)=>{let a=s;["capacity","year","kmRate"].includes(e)&&(a=""===s?"":isNaN(parseFloat(s))?s:"year"===e?parseInt(s):parseFloat(s)),o(s=>({...s,[e]:a})),f[e]&&N(s=>({...s,[e]:""}))},F=(e,s,a)=>{let t;t="isFixed"===s?a:""===a?"":isNaN(parseFloat(a))?a:parseFloat(a),o(a=>({...a,pricing:{...a.pricing,ranges:a.pricing.ranges.map((a,r)=>r===e?{...a,[s]:t}:a)}})),f[`pricing.ranges.${e}.${s}`]&&N(a=>({...a,[`pricing.ranges.${e}.${s}`]:""}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(s,{className:"w-6 h-6 text-blue-600"}),"Yeni Araç Ekle"]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{type:"button",onClick:()=>n("basic"),className:"flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors "+("basic"===l?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[e.jsx(x,{className:"w-4 h-4"}),"Temel Bilgiler"]}),e.jsxs("button",{type:"button",onClick:()=>n("pricing"),className:"flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors "+("pricing"===l?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[e.jsx(p,{className:"w-4 h-4"}),"Fiyatlandırma"]}),e.jsxs("button",{type:"button",onClick:()=>n("features"),className:"flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors "+("features"===l?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[e.jsx(i,{className:"w-4 h-4"}),"Araç Özellikleri"]})]})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};d.brand.trim()||(e.brand="Marka gerekli"),d.model.trim()||(e.model="Model gerekli"),d.plateNumber.trim()||(e.plateNumber="Plaka gerekli"),(!d.capacity||""===d.capacity||d.capacity<1)&&(e.capacity="Geçerli kapasite gerekli"),d.color.trim()||(e.color="Renk gerekli");const s=A(d.pricing);return s.isValid||s.errors.forEach((s,a)=>{e[`pricing.general.${a}`]=s}),d.pricing.ranges.forEach((s,a)=>{(""===s.from||""===s.to||s.from>=s.to)&&(e[`pricing.ranges.${a}.to`]="Bitiş km başlangıçtan büyük olmalı"),(""===s.price||s.price<=0)&&(e[`pricing.ranges.${a}.price`]="Fiyat 0'dan büyük olmalı")}),d.plateNumber&&!/^[0-9]{2}[A-Z]{1,3}[0-9]{2,4}$/.test(d.plateNumber.replace(/\s/g,""))&&(e.plateNumber="Geçerli plaka formatı girin (örn: 06ABC123)"),N(e),0===Object.keys(e).length})()){j(!0);try{const e={...d,capacity:""===d.capacity?0:parseInt(d.capacity),kmRate:""===d.kmRate?25:parseFloat(d.kmRate),year:""===d.year?(new Date).getFullYear():parseInt(d.year),plateNumber:d.plateNumber.toUpperCase().replace(/\s/g,""),brand:d.brand.trim(),model:d.model.trim(),color:d.color.trim(),pricing:{ranges:d.pricing.ranges.map(e=>({from:parseInt(e.from),to:parseInt(e.to),price:parseFloat(e.price),isFixed:Boolean(e.isFixed)}))}};await r(e)&&t()}catch(s){}finally{j(!1)}}},className:"p-6",children:["basic"===l&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Marka ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.brand,onChange:e=>C("brand",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.brand?"border-red-300":"border-gray-300"),placeholder:"Marka giriniz"}),f.brand&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),f.brand]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Model ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.model,onChange:e=>C("model",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.model?"border-red-300":"border-gray-300"),placeholder:"Model giriniz"}),f.model&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),f.model]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yıl"}),e.jsx("input",{type:"number",value:d.year,onChange:e=>C("year",e.target.value),min:"1990",max:(new Date).getFullYear()+1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tip"}),e.jsxs("select",{value:d.type,onChange:e=>C("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"sedan",children:"Sedan"}),e.jsx("option",{value:"suv",children:"SUV"}),e.jsx("option",{value:"minibus",children:"Minibüs"}),e.jsx("option",{value:"midibus",children:"Midibüs"}),e.jsx("option",{value:"bus",children:"Otobüs"}),e.jsx("option",{value:"vip",children:"VIP"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Plaka ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.plateNumber,onChange:e=>C("plateNumber",e.target.value.toUpperCase()),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.plateNumber?"border-red-300":"border-gray-300"),placeholder:"06ABC123"}),f.plateNumber&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),f.plateNumber]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Renk ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:d.color,onChange:e=>C("color",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.color?"border-red-300":"border-gray-300"),placeholder:"Renk giriniz"}),f.color&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),f.color]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Teknik Bilgiler"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kapasite ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:d.capacity,onChange:e=>C("capacity",e.target.value),min:"1",max:"50",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(f.capacity?"border-red-300":"border-gray-300"),placeholder:"Kişi sayısı"}),f.capacity&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),f.capacity]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yakıt Türü"}),e.jsxs("select",{value:d.fuelType,onChange:e=>C("fuelType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"benzin",children:"Benzin"}),e.jsx("option",{value:"dizel",children:"Dizel"}),e.jsx("option",{value:"lpg",children:"LPG"}),e.jsx("option",{value:"elektrik",children:"Elektrik"}),e.jsx("option",{value:"hibrit",children:"Hibrit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şanzıman"}),e.jsxs("select",{value:d.transmission,onChange:e=>C("transmission",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"otomatik",children:"Otomatik"}),e.jsx("option",{value:"manuel",children:"Manuel"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Araç Resmi (URL)"}),e.jsx("input",{type:"url",value:d.imageUrl,onChange:e=>C("imageUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Araç fotoğrafının URL'ini girin (opsiyonel)"})]})]})]})}),"pricing"===l&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-green-600"}),"Dinamik Fiyatlandırma Sistemi (EUR)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{const e=d.pricing.ranges[d.pricing.ranges.length-1],s=e?e.to:1;o(e=>({...e,pricing:{...e.pricing,ranges:[...e.pricing.ranges,{from:s,to:s+20,price:1,isFixed:!1}]}}))},className:"flex items-center gap-1 text-sm text-green-600 hover:text-green-800 px-2 py-1 rounded border border-green-300 hover:bg-green-100",children:[e.jsx(g,{className:"w-4 h-4"}),"Aralık Ekle"]}),e.jsxs("button",{type:"button",onClick:()=>w(!k),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(x,{className:"w-4 h-4"}),"Örnek Hesaplama"]})]})]}),e.jsx("div",{className:"space-y-3",children:d.pricing.ranges.map((s,a)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end bg-white p-3 rounded border",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Başlangıç (km)"}),e.jsx("input",{type:"number",value:s.from,onChange:e=>F(a,"from",e.target.value),min:"0",className:"w-full px-2 py-1 text-sm border rounded",placeholder:"1"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bitiş (km)"}),e.jsx("input",{type:"number",value:s.to,onChange:e=>F(a,"to",e.target.value),min:"1",className:"w-full px-2 py-1 text-sm border rounded",placeholder:"20"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fiyat (€)"}),e.jsx("input",{type:"number",value:s.price,onChange:e=>F(a,"price",e.target.value),min:"0",step:"0.1",className:"w-full px-2 py-1 text-sm border rounded",placeholder:"25"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fiyat Tipi"}),e.jsxs("select",{value:s.isFixed?"fixed":"per_km",onChange:e=>F(a,"isFixed","fixed"===e.target.value),className:"w-full px-2 py-1 text-sm border rounded",children:[e.jsx("option",{value:"fixed",children:"Sabit Fiyat"}),e.jsx("option",{value:"per_km",children:"Km Başına"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Önizleme"}),e.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 px-2 py-1 rounded",children:[s.from,"-",s.to,"km: ",s.isFixed?`€${s.price}`:`€${s.price}/km`]})]}),e.jsx("div",{className:"col-span-1 flex justify-center",children:d.pricing.ranges.length>1&&e.jsx("button",{type:"button",onClick:()=>(e=>{d.pricing.ranges.length>1&&o(s=>({...s,pricing:{...s.pricing,ranges:s.pricing.ranges.filter((s,a)=>a!==e)}}))})(a),className:"text-red-500 hover:text-red-700 p-1",title:"Aralığı Sil",children:e.jsx(b,{className:"w-4 h-4"})})})]},a))}),Object.keys(f).filter(e=>e.startsWith("pricing.general")).map(s=>e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),f[s]]},s)),k&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Örnek Hesaplama: 35km mesafe"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{children:"• 1-20km: €25 (sabit)"}),e.jsx("p",{children:"• 20-35km: 15km × €1.5 = €22.5"}),e.jsx("p",{className:"font-medium border-t pt-1 mt-1",children:"Toplam: €47.5 → €48 (yuvarlama)"})]})]})]})}),"features"===l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-4",children:"Araç Özellikleri"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:["Klima","WiFi","USB Şarj","Su İkramı","Bebek Koltuğu","Çocuk Koltuğu","Tekerlekli Sandalye Desteği","Müzik Sistemi","TV/Monitör","Mikrobus","Büyük Bagaj","Hostesli Hizmet","Premium İç Tasarım","Deri Koltuk","Panoramik Cam","Bluetooth","Navigasyon","Kamera Sistemi"].map(s=>e.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.features.includes(s),onChange:()=>(e=>{o(s=>({...s,features:s.features.includes(e)?s.features.filter(s=>s!==e):[...s.features,e]}))})(s),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:s})]},s))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),e.jsx("textarea",{value:d.description,onChange:e=>C("description",e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Araç hakkında ek bilgiler..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),e.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4"}),"Kaydet"]})})]})]})]})})},M=({vehicle:t,onClose:r,onSubmit:l})=>{const[n,d]=v.useState("basic"),[o,y]=v.useState({brand:t?.brand||"",model:t?.model||"",year:t?.year||(new Date).getFullYear(),plateNumber:t?.plateNumber||"",capacity:t?.capacity||"",kmRate:t?.kmRate||25,color:t?.color||"",fuelType:t?.fuelType||"benzin",transmission:t?.transmission||"otomatik",type:t?.type||"sedan",imageUrl:t?.imageUrl||"",features:t?.features||[],description:t?.description||"",pricing:t?.pricing||{ranges:[{from:1,to:20,price:25,isFixed:!0},{from:20,to:40,price:1.5,isFixed:!1},{from:40,to:80,price:1,isFixed:!1},{from:80,to:150,price:.8,isFixed:!1}]}}),[j,f]=v.useState(!1),[N,k]=v.useState({}),[w,C]=v.useState(!1);v.useEffect(()=>{t&&y({brand:t.brand||"",model:t.model||"",year:t.year||(new Date).getFullYear(),plateNumber:t.plateNumber||"",capacity:t.capacity||"",kmRate:t.kmRate||25,color:t.color||"",fuelType:t.fuelType||"benzin",transmission:t.transmission||"otomatik",type:t.type||"sedan",imageUrl:t.imageUrl||"",features:t.features||[],description:t.description||"",pricing:t.pricing||{ranges:[{from:1,to:20,price:25,isFixed:!0},{from:20,to:40,price:1.5,isFixed:!1},{from:40,to:80,price:1,isFixed:!1},{from:80,to:150,price:.8,isFixed:!1}]}})},[t]),v.useEffect(()=>{if(!t?.id){const e=T(o.type);y(s=>({...s,pricing:e,kmRate:e.ranges?.[1]?.price||25}))}},[o.type,t?.id]);const F=(e,s)=>{let a=s;["capacity","year","kmRate"].includes(e)&&(a=""===s?"":isNaN(parseFloat(s))?s:"year"===e?parseInt(s):parseFloat(s)),y(s=>({...s,[e]:a})),N[e]&&k(s=>({...s,[e]:""}))},z=(e,s,a)=>{let t;t="isFixed"===s?a:""===a?"":isNaN(parseFloat(a))?a:parseFloat(a),y(a=>({...a,pricing:{...a.pricing,ranges:a.pricing.ranges.map((a,r)=>r===e?{...a,[s]:t}:a)}})),N[`pricing.ranges.${e}.${s}`]&&k(a=>({...a,[`pricing.ranges.${e}.${s}`]:""}))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(s,{className:"w-6 h-6 text-blue-600"}),"Araç Düzenle"]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("div",{className:"flex",children:[e.jsxs("button",{type:"button",onClick:()=>d("basic"),className:"flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors "+("basic"===n?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[e.jsx(x,{className:"w-4 h-4"}),"Temel Bilgiler"]}),e.jsxs("button",{type:"button",onClick:()=>d("pricing"),className:"flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors "+("pricing"===n?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[e.jsx(p,{className:"w-4 h-4"}),"Fiyatlandırma"]}),e.jsxs("button",{type:"button",onClick:()=>d("features"),className:"flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition-colors "+("features"===n?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[e.jsx(i,{className:"w-4 h-4"}),"Araç Özellikleri"]})]})}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};o.brand.trim()||(e.brand="Marka gerekli"),o.model.trim()||(e.model="Model gerekli"),o.plateNumber.trim()||(e.plateNumber="Plaka gerekli"),(!o.capacity||""===o.capacity||o.capacity<1)&&(e.capacity="Geçerli kapasite gerekli"),o.color.trim()||(e.color="Renk gerekli");const s=A(o.pricing);return s.isValid||s.errors.forEach((s,a)=>{e[`pricing.general.${a}`]=s}),o.pricing.ranges.forEach((s,a)=>{(""===s.from||""===s.to||s.from>=s.to)&&(e[`pricing.ranges.${a}.to`]="Bitiş km başlangıçtan büyük olmalı"),(""===s.price||s.price<=0)&&(e[`pricing.ranges.${a}.price`]="Fiyat 0'dan büyük olmalı")}),o.plateNumber&&!/^[0-9]{2}[A-Z]{1,3}[0-9]{2,4}$/.test(o.plateNumber.replace(/\s/g,""))&&(e.plateNumber="Geçerli plaka formatı girin (örn: 06ABC123)"),k(e),0===Object.keys(e).length})()){f(!0);try{const e={...o,capacity:""===o.capacity?0:parseInt(o.capacity),kmRate:""===o.kmRate?25:parseFloat(o.kmRate),year:""===o.year?(new Date).getFullYear():parseInt(o.year),plateNumber:o.plateNumber.toUpperCase().replace(/\s/g,""),brand:o.brand.trim(),model:o.model.trim(),color:o.color.trim(),pricing:{ranges:o.pricing.ranges.map(e=>({from:parseInt(e.from),to:parseInt(e.to),price:parseFloat(e.price),isFixed:Boolean(e.isFixed)}))}};await l(t.id,e)&&r()}catch(s){}finally{f(!1)}}},className:"p-6",children:["basic"===n&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Marka ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.brand,onChange:e=>F("brand",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.brand?"border-red-300":"border-gray-300"),placeholder:"Marka giriniz"}),N.brand&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),N.brand]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Model ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.model,onChange:e=>F("model",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.model?"border-red-300":"border-gray-300"),placeholder:"Model giriniz"}),N.model&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),N.model]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yıl"}),e.jsx("input",{type:"number",value:o.year,onChange:e=>F("year",e.target.value),min:"1990",max:(new Date).getFullYear()+1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tip"}),e.jsxs("select",{value:o.type,onChange:e=>F("type",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"sedan",children:"Sedan"}),e.jsx("option",{value:"suv",children:"SUV"}),e.jsx("option",{value:"minibus",children:"Minibüs"}),e.jsx("option",{value:"midibus",children:"Midibüs"}),e.jsx("option",{value:"bus",children:"Otobüs"}),e.jsx("option",{value:"vip",children:"VIP"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Plaka ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.plateNumber,onChange:e=>F("plateNumber",e.target.value.toUpperCase()),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.plateNumber?"border-red-300":"border-gray-300"),placeholder:"06ABC123"}),N.plateNumber&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),N.plateNumber]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Renk ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.color,onChange:e=>F("color",e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.color?"border-red-300":"border-gray-300"),placeholder:"Renk giriniz"}),N.color&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),N.color]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Teknik Bilgiler"}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kapasite ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:o.capacity,onChange:e=>F("capacity",e.target.value),min:"1",max:"50",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent "+(N.capacity?"border-red-300":"border-gray-300"),placeholder:"Kişi sayısı"}),N.capacity&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),N.capacity]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yakıt Türü"}),e.jsxs("select",{value:o.fuelType,onChange:e=>F("fuelType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"benzin",children:"Benzin"}),e.jsx("option",{value:"dizel",children:"Dizel"}),e.jsx("option",{value:"lpg",children:"LPG"}),e.jsx("option",{value:"elektrik",children:"Elektrik"}),e.jsx("option",{value:"hibrit",children:"Hibrit"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şanzıman"}),e.jsxs("select",{value:o.transmission,onChange:e=>F("transmission",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"otomatik",children:"Otomatik"}),e.jsx("option",{value:"manuel",children:"Manuel"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Araç Resmi (URL)"}),e.jsx("input",{type:"url",value:o.imageUrl,onChange:e=>F("imageUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Araç fotoğrafının URL'ini girin (opsiyonel)"})]})]})]})}),"pricing"===n&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-green-600"}),"Dinamik Fiyatlandırma Sistemi (EUR)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{const e=o.pricing.ranges[o.pricing.ranges.length-1],s=e?e.to:1;y(e=>({...e,pricing:{...e.pricing,ranges:[...e.pricing.ranges,{from:s,to:s+20,price:1,isFixed:!1}]}}))},className:"flex items-center gap-1 text-sm text-green-600 hover:text-green-800 px-2 py-1 rounded border border-green-300 hover:bg-green-100",children:[e.jsx(g,{className:"w-4 h-4"}),"Aralık Ekle"]}),e.jsxs("button",{type:"button",onClick:()=>C(!w),className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-800",children:[e.jsx(x,{className:"w-4 h-4"}),"Örnek Hesaplama"]})]})]}),e.jsx("div",{className:"space-y-3",children:o.pricing.ranges.map((s,a)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end bg-white p-3 rounded border",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Başlangıç (km)"}),e.jsx("input",{type:"number",value:s.from,onChange:e=>z(a,"from",e.target.value),min:"0",className:"w-full px-2 py-1 text-sm border rounded",placeholder:"1"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Bitiş (km)"}),e.jsx("input",{type:"number",value:s.to,onChange:e=>z(a,"to",e.target.value),min:"1",className:"w-full px-2 py-1 text-sm border rounded",placeholder:"20"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fiyat (€)"}),e.jsx("input",{type:"number",value:s.price,onChange:e=>z(a,"price",e.target.value),min:"0",step:"0.1",className:"w-full px-2 py-1 text-sm border rounded",placeholder:"25"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Fiyat Tipi"}),e.jsxs("select",{value:s.isFixed?"fixed":"per_km",onChange:e=>z(a,"isFixed","fixed"===e.target.value),className:"w-full px-2 py-1 text-sm border rounded",children:[e.jsx("option",{value:"fixed",children:"Sabit Fiyat"}),e.jsx("option",{value:"per_km",children:"Km Başına"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Önizleme"}),e.jsxs("div",{className:"text-xs text-gray-600 bg-gray-50 px-2 py-1 rounded",children:[s.from,"-",s.to,"km: ",s.isFixed?`€${s.price}`:`€${s.price}/km`]})]}),e.jsx("div",{className:"col-span-1 flex justify-center",children:o.pricing.ranges.length>1&&e.jsx("button",{type:"button",onClick:()=>(e=>{o.pricing.ranges.length>1&&y(s=>({...s,pricing:{...s.pricing,ranges:s.pricing.ranges.filter((s,a)=>a!==e)}}))})(a),className:"text-red-500 hover:text-red-700 p-1",title:"Aralığı Sil",children:e.jsx(b,{className:"w-4 h-4"})})})]},a))}),Object.keys(N).filter(e=>e.startsWith("pricing.general")).map(s=>e.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[e.jsx(c,{className:"w-4 h-4"}),N[s]]},s)),w&&e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Örnek Hesaplama: 35km mesafe"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{children:"• 1-20km: €25 (sabit)"}),e.jsx("p",{children:"• 20-35km: 15km × €1.5 = €22.5"}),e.jsx("p",{className:"font-medium border-t pt-1 mt-1",children:"Toplam: €47.5 → €48 (yuvarlama)"})]})]})]})}),"features"===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-4",children:"Araç Özellikleri"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:["Klima","WiFi","USB Şarj","Su İkramı","Bebek Koltuğu","Çocuk Koltuğu","Tekerlekli Sandalye Desteği","Müzik Sistemi","TV/Monitör","Mikrobus","Büyük Bagaj","Hostesli Hizmet","Premium İç Tasarım","Deri Koltuk","Panoramik Cam","Bluetooth","Navigasyon","Kamera Sistemi"].map(s=>e.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:o.features.includes(s),onChange:()=>(e=>{y(s=>({...s,features:s.features.includes(e)?s.features.filter(s=>s!==e):[...s.features,e]}))})(s),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-700",children:s})]},s))})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),e.jsx("textarea",{value:o.description,onChange:e=>F("description",e.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Araç hakkında ek bilgiler..."})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),e.jsx("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Güncelleniyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4"}),"Güncelle"]})})]})]})]})})},R=({vehicle:r,onClose:l})=>{const i=e=>{if(!e)return"Belirtilmemiş";try{return(e.toDate?e.toDate():new Date(e)).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(s){return"Geçersiz tarih"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(s,{className:"w-6 h-6 text-blue-600"}),"Araç Detayları"]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center mb-4",children:r.imageUrl?e.jsx("img",{src:r.imageUrl,alt:`${r.brand} ${r.model}`,className:"w-full h-full object-cover rounded-lg"}):e.jsx("div",{className:"text-6xl",children:(n=r.type,{sedan:"🚗",suv:"🚙",minibus:"🚐",midibus:"🚌",bus:"🚍",vip:"🏎️"}[n]||"🚗")})}),e.jsx("div",{className:"flex justify-center mb-4",children:(s=>{const a={active:{color:"bg-green-100 text-green-800",text:"Aktif"},inactive:{color:"bg-red-100 text-red-800",text:"Pasif"},maintenance:{color:"bg-yellow-100 text-yellow-800",text:"Bakımda"}},t=a[s]||a.inactive;return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${t.color}`,children:t.text})})(r.status)}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(t,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Kapasite"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.capacity," Kişi"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[e.jsx(y,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"KM Ücreti"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["€",r.kmRate?.toFixed(2)," / km"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 rounded-lg",children:[e.jsx(j,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Yakıt Türü"}),e.jsx("p",{className:"text-sm text-gray-600 capitalize",children:r.fuelType})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Temel Bilgiler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Marka"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.brand})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Model"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.model})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Yıl"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Plaka"}),e.jsx("p",{className:"text-sm text-gray-900 font-mono",children:r.plateNumber})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Renk"}),e.jsx("p",{className:"text-sm text-gray-900",children:r.color})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tip"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:r.type})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Teknik Bilgiler"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Kapasite"}),e.jsxs("p",{className:"text-sm text-gray-900",children:[r.capacity," Kişi"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"KM Başı Ücret"}),e.jsxs("p",{className:"text-sm text-gray-900",children:["€",r.kmRate?.toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Yakıt Türü"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:r.fuelType})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Şanzıman"}),e.jsx("p",{className:"text-sm text-gray-900 capitalize",children:r.transmission})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Oluşturma Tarihi"}),e.jsx("p",{className:"text-sm text-gray-900",children:i(r.createdAt)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Son Güncelleme"}),e.jsx("p",{className:"text-sm text-gray-900",children:i(r.updatedAt)})]})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4",children:"Araç Özellikleri"}),r.features&&r.features.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.features.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[e.jsx(f,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-900",children:s})]},a))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"Henüz özellik eklenmemiş"})]}),r.description&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4",children:"Açıklama"}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded-lg",children:r.description})]})]})]})}),e.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:e.jsx("button",{onClick:l,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Kapat"})})]})});var n},U=({vehicle:s,onClose:t,onUpdate:r})=>{const[l,n]=v.useState(s.features||[]),[c,d]=v.useState(""),[o,x]=v.useState(!1),p=e=>{e.trim()&&!l.includes(e.trim())&&(n([...l,e.trim()]),d(""))},u=["Klima","WiFi","USB Şarj","Su İkramı","Bebek Koltuğu","Çocuk Koltuğu","Tekerlekli Sandalye Desteği","Müzik Sistemi","TV/Monitör","Mikrobus","Büyük Bagaj","Hostesli Hizmet","Premium İç Tasarım","Deri Koltuk","Panoramik Cam","Bluetooth","Navigasyon","Kamera Sistemi","Elektrikli Kapılar","Masaj Koltuğu","Mini Bar","Gazete/Dergi","Havlu Hizmeti","Şemsiye","Telefon Şarj Kablosu","Tablet/iPad","Çocuk Oyuncağı","Battaniye","Maske/Dezenfektan","VIP Lounge Erişim"].filter(e=>!l.includes(e));return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(a.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(i,{className:"w-6 h-6 text-blue-600"}),"Araç Özelliklerini Yönet"]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(m,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("h3",{className:"font-medium text-blue-900 mb-2",children:[s.brand," ",s.model]}),e.jsxs("p",{className:"text-sm text-blue-700",children:[s.year," • ",s.plateNumber," • ",s.capacity," Kişi"]})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),x(!0);try{await r(s.id,{...s,features:l})&&t()}catch(a){}finally{x(!1)}},children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Mevcut Özellikler (",l.length,")"]}),l.length>0?e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-900",children:s})]}),e.jsx("button",{type:"button",onClick:()=>{return e=s,void n(l.filter(s=>s!==e));var e},className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",children:e.jsx(b,{className:"w-4 h-4"})})]},a))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Henüz özellik eklenmemiş"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Özellik Ekle"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Özel Özellik Ekle"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),p(c))},placeholder:"Özellik adı girin...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:()=>p(c),disabled:!c.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(g,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hazır Özellikler"}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:u.map(s=>e.jsx("button",{type:"button",onClick:()=>(e=>{l.includes(e)||n([...l,e])})(s),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm text-gray-900",children:s})]})},s))}),0===u.length&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Tüm hazır özellikler eklendi"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),e.jsx("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4"}),"Özellikleri Kaydet"]})})]})]})]})]})})},E=()=>{const[a,t]=v.useState([]),[r,l]=v.useState(!0),[i,n]=v.useState(null),[c,d]=v.useState(!1),[o,m]=v.useState(!1),[x,p]=v.useState(!1),[u,b]=v.useState(!1);v.useEffect(()=>{l(!0);const e=k(w(B,"vehicles"),e=>{const s=e.docs.map(e=>({id:e.id,...e.data()}));t(s),l(!1)},e=>{l(!1)});return()=>e()},[]);const h=async(e,s)=>{try{const a={...s,updatedAt:new Date};return await C(F(B,"vehicles",e),a),m(!1),n(null),!0}catch(a){return!1}};return r?e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx(N,{className:"w-8 h-8 animate-spin text-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Araçlar yükleniyor..."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(s,{className:"w-7 h-7 text-blue-600"}),"Araç Yönetimi"]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[a.length," araç kayıtlı"]})]}),e.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4"}),"Yeni Araç Ekle"]})]}),e.jsx(D,{vehicles:a,onShowDetails:e=>{n(e),p(!0)},onEditVehicle:e=>{n(e),m(!0)},onDeleteVehicle:async e=>{try{return await z(F(B,"vehicles",e)),!0}catch(s){return!1}},onStatusChange:async(e,s)=>{try{return await C(F(B,"vehicles",e),{status:s,updatedAt:new Date}),!0}catch(a){return!1}},onManageFeatures:e=>{n(e),b(!0)}}),c&&e.jsx(K,{onClose:()=>d(!1),onSubmit:async e=>{try{const s={...e,createdAt:new Date,updatedAt:new Date,status:"active"};return await S(w(B,"vehicles"),s),d(!1),!0}catch(s){return!1}}}),o&&i&&e.jsx(M,{vehicle:i,onClose:()=>{m(!1),n(null)},onSubmit:h}),x&&i&&e.jsx(R,{vehicle:i,onClose:()=>{p(!1),n(null)}}),u&&i&&e.jsx(U,{vehicle:i,onClose:()=>{b(!1),n(null)},onUpdate:h})]})};export{E as default};
