var lA=Object.defineProperty;var cA=(t,e,s)=>e in t?lA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Jv=(t,e,s)=>cA(t,typeof e!="symbol"?e+"":e,s);function uA(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function dA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var SE={exports:{}},em={},TE={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yc=Symbol.for("react.element"),hA=Symbol.for("react.portal"),mA=Symbol.for("react.fragment"),fA=Symbol.for("react.strict_mode"),pA=Symbol.for("react.profiler"),gA=Symbol.for("react.provider"),xA=Symbol.for("react.context"),yA=Symbol.for("react.forward_ref"),vA=Symbol.for("react.suspense"),bA=Symbol.for("react.memo"),wA=Symbol.for("react.lazy"),eb=Symbol.iterator;function NA(t){return t===null||typeof t!="object"?null:(t=eb&&t[eb]||t["@@iterator"],typeof t=="function"?t:null)}var CE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},IE=Object.assign,AE={};function Fo(t,e,s){this.props=t,this.context=e,this.refs=AE,this.updater=s||CE}Fo.prototype.isReactComponent={};Fo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PE(){}PE.prototype=Fo.prototype;function E0(t,e,s){this.props=t,this.context=e,this.refs=AE,this.updater=s||CE}var k0=E0.prototype=new PE;k0.constructor=E0;IE(k0,Fo.prototype);k0.isPureReactComponent=!0;var tb=Array.isArray,RE=Object.prototype.hasOwnProperty,_0={current:null},DE={key:!0,ref:!0,__self:!0,__source:!0};function LE(t,e,s){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)RE.call(e,n)&&!DE.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Yc,type:t,key:a,ref:o,props:i,_owner:_0.current}}function jA(t,e){return{$$typeof:Yc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function S0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yc}function EA(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var sb=/\/+/g;function wf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?EA(""+t.key):e.toString(36)}function xd(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yc:case hA:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+wf(o,0):n,tb(i)?(s="",t!=null&&(s=t.replace(sb,"$&/")+"/"),xd(i,e,s,"",function(u){return u})):i!=null&&(S0(i)&&(i=jA(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",tb(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+wf(a,l);o+=xd(a,e,s,c,i)}else if(c=NA(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+wf(a,l++),o+=xd(a,e,s,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ou(t,e,s){if(t==null)return t;var n=[],i=0;return xd(t,n,"","",function(a){return e.call(s,a,i++)}),n}function kA(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ls={current:null},yd={transition:null},_A={ReactCurrentDispatcher:ls,ReactCurrentBatchConfig:yd,ReactCurrentOwner:_0};function ME(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Ou,forEach:function(t,e,s){Ou(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Ou(t,function(){e++}),e},toArray:function(t){return Ou(t,function(e){return e})||[]},only:function(t){if(!S0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Fo;Ee.Fragment=mA;Ee.Profiler=pA;Ee.PureComponent=E0;Ee.StrictMode=fA;Ee.Suspense=vA;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_A;Ee.act=ME;Ee.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=IE({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=_0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)RE.call(e,c)&&!DE.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Yc,type:t.type,key:i,ref:a,props:n,_owner:o}};Ee.createContext=function(t){return t={$$typeof:xA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:gA,_context:t},t.Consumer=t};Ee.createElement=LE;Ee.createFactory=function(t){var e=LE.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:yA,render:t}};Ee.isValidElement=S0;Ee.lazy=function(t){return{$$typeof:wA,_payload:{_status:-1,_result:t},_init:kA}};Ee.memo=function(t,e){return{$$typeof:bA,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};Ee.unstable_act=ME;Ee.useCallback=function(t,e){return ls.current.useCallback(t,e)};Ee.useContext=function(t){return ls.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return ls.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return ls.current.useEffect(t,e)};Ee.useId=function(){return ls.current.useId()};Ee.useImperativeHandle=function(t,e,s){return ls.current.useImperativeHandle(t,e,s)};Ee.useInsertionEffect=function(t,e){return ls.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return ls.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return ls.current.useMemo(t,e)};Ee.useReducer=function(t,e,s){return ls.current.useReducer(t,e,s)};Ee.useRef=function(t){return ls.current.useRef(t)};Ee.useState=function(t){return ls.current.useState(t)};Ee.useSyncExternalStore=function(t,e,s){return ls.current.useSyncExternalStore(t,e,s)};Ee.useTransition=function(){return ls.current.useTransition()};Ee.version="18.3.1";TE.exports=Ee;var g=TE.exports;const ga=dA(g),SA=uA({__proto__:null,default:ga},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TA=g,CA=Symbol.for("react.element"),IA=Symbol.for("react.fragment"),AA=Object.prototype.hasOwnProperty,PA=TA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RA={key:!0,ref:!0,__self:!0,__source:!0};function OE(t,e,s){var n,i={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)AA.call(e,n)&&!RA.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:CA,type:t,key:a,ref:o,props:i,_owner:PA.current}}em.Fragment=IA;em.jsx=OE;em.jsxs=OE;SE.exports=em;var r=SE.exports,Ap={},VE={exports:{}},As={},zE={exports:{}},BE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,K){var z=O.length;O.push(K);e:for(;0<z;){var M=z-1>>>1,U=O[M];if(0<i(U,K))O[M]=K,O[z]=U,z=M;else break e}}function s(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var K=O[0],z=O.pop();if(z!==K){O[0]=z;e:for(var M=0,U=O.length,W=U>>>1;M<W;){var Z=2*(M+1)-1,G=O[Z],ne=Z+1,te=O[ne];if(0>i(G,z))ne<U&&0>i(te,G)?(O[M]=te,O[ne]=z,M=ne):(O[M]=G,O[Z]=z,M=Z);else if(ne<U&&0>i(te,z))O[M]=te,O[ne]=z,M=ne;else break e}}return K}function i(O,K){var z=O.sortIndex-K.sortIndex;return z!==0?z:O.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,m=null,p=3,f=!1,x=!1,S=!1,k=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var K=s(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=O)n(u),K.sortIndex=K.expirationTime,e(c,K);else break;K=s(u)}}function E(O){if(S=!1,w(O),!x)if(s(c)!==null)x=!0,Y(T);else{var K=s(u);K!==null&&B(E,K.startTime-O)}}function T(O,K){x=!1,S&&(S=!1,v(y),y=-1),f=!0;var z=p;try{for(w(K),m=s(c);m!==null&&(!(m.expirationTime>K)||O&&!R());){var M=m.callback;if(typeof M=="function"){m.callback=null,p=m.priorityLevel;var U=M(m.expirationTime<=K);K=t.unstable_now(),typeof U=="function"?m.callback=U:m===s(c)&&n(c),w(K)}else n(c);m=s(c)}if(m!==null)var W=!0;else{var Z=s(u);Z!==null&&B(E,Z.startTime-K),W=!1}return W}finally{m=null,p=z,f=!1}}var P=!1,b=null,y=-1,j=5,C=-1;function R(){return!(t.unstable_now()-C<j)}function D(){if(b!==null){var O=t.unstable_now();C=O;var K=!0;try{K=b(!0,O)}finally{K?A():(P=!1,b=null)}}else P=!1}var A;if(typeof _=="function")A=function(){_(D)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=D,A=function(){$.postMessage(null)}}else A=function(){k(D,0)};function Y(O){b=O,P||(P=!0,A())}function B(O,K){y=k(function(){O(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){x||f||(x=!0,Y(T))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var z=p;p=K;try{return O()}finally{p=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,K){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var z=p;p=O;try{return K()}finally{p=z}},t.unstable_scheduleCallback=function(O,K,z){var M=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?M+z:M):z=M,O){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=z+U,O={id:d++,callback:K,priorityLevel:O,startTime:z,expirationTime:U,sortIndex:-1},z>M?(O.sortIndex=z,e(u,O),s(c)===null&&O===s(u)&&(S?(v(y),y=-1):S=!0,B(E,z-M))):(O.sortIndex=U,e(c,O),x||f||(x=!0,Y(T))),O},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(O){var K=p;return function(){var z=p;p=K;try{return O.apply(this,arguments)}finally{p=z}}}})(BE);zE.exports=BE;var DA=zE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=g,Ts=DA;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UE=new Set,uc={};function xa(t,e){yo(t,e),yo(t+"Capture",e)}function yo(t,e){for(uc[t]=e,t=0;t<e.length;t++)UE.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=Object.prototype.hasOwnProperty,MA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nb={},rb={};function OA(t){return Pp.call(rb,t)?!0:Pp.call(nb,t)?!1:MA.test(t)?rb[t]=!0:(nb[t]=!0,!1)}function VA(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function zA(t,e,s,n){if(e===null||typeof e>"u"||VA(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function cs(t,e,s,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ut[t]=new cs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ut[e]=new cs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ut[t]=new cs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ut[t]=new cs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ut[t]=new cs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ut[t]=new cs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ut[t]=new cs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ut[t]=new cs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ut[t]=new cs(t,5,!1,t.toLowerCase(),null,!1,!1)});var T0=/[\-:]([a-z])/g;function C0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(T0,C0);Ut[e]=new cs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(T0,C0);Ut[e]=new cs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(T0,C0);Ut[e]=new cs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ut[t]=new cs(t,1,!1,t.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new cs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ut[t]=new cs(t,1,!1,t.toLowerCase(),null,!0,!0)});function I0(t,e,s,n){var i=Ut.hasOwnProperty(e)?Ut[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(zA(e,s,i,n)&&(s=null),n||i===null?OA(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var dr=LA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vu=Symbol.for("react.element"),Fa=Symbol.for("react.portal"),$a=Symbol.for("react.fragment"),A0=Symbol.for("react.strict_mode"),Rp=Symbol.for("react.profiler"),FE=Symbol.for("react.provider"),$E=Symbol.for("react.context"),P0=Symbol.for("react.forward_ref"),Dp=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),R0=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),HE=Symbol.for("react.offscreen"),ib=Symbol.iterator;function xl(t){return t===null||typeof t!="object"?null:(t=ib&&t[ib]||t["@@iterator"],typeof t=="function"?t:null)}var ot=Object.assign,Nf;function Il(t){if(Nf===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Nf=e&&e[1]||""}return`
`+Nf+t}var jf=!1;function Ef(t,e){if(!t||jf)return"";jf=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{jf=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Il(t):""}function BA(t){switch(t.tag){case 5:return Il(t.type);case 16:return Il("Lazy");case 13:return Il("Suspense");case 19:return Il("SuspenseList");case 0:case 2:case 15:return t=Ef(t.type,!1),t;case 11:return t=Ef(t.type.render,!1),t;case 1:return t=Ef(t.type,!0),t;default:return""}}function Mp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $a:return"Fragment";case Fa:return"Portal";case Rp:return"Profiler";case A0:return"StrictMode";case Dp:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case $E:return(t.displayName||"Context")+".Consumer";case FE:return(t._context.displayName||"Context")+".Provider";case P0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R0:return e=t.displayName||null,e!==null?e:Mp(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return Mp(t(e))}catch{}}return null}function UA(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mp(e);case 8:return e===A0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function KE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FA(t){var e=KE(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zu(t){t._valueTracker||(t._valueTracker=FA(t))}function GE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=KE(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Fd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Op(t,e){var s=e.checked;return ot({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function ab(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=ri(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WE(t,e){e=e.checked,e!=null&&I0(t,"checked",e,!1)}function Vp(t,e){WE(t,e);var s=ri(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zp(t,e.type,s):e.hasOwnProperty("defaultValue")&&zp(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ob(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function zp(t,e,s){(e!=="number"||Fd(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Al=Array.isArray;function ao(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+ri(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Bp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return ot({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function lb(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(ee(92));if(Al(s)){if(1<s.length)throw Error(ee(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:ri(s)}}function qE(t,e){var s=ri(e.value),n=ri(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function cb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function YE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Up(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?YE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bu,QE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bu=Bu||document.createElement("div"),Bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function dc(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var $l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$A=["Webkit","ms","Moz","O"];Object.keys($l).forEach(function(t){$A.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$l[e]=$l[t]})});function XE(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||$l.hasOwnProperty(t)&&$l[t]?(""+e).trim():e+"px"}function ZE(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=XE(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var HA=ot({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fp(t,e){if(e){if(HA[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function $p(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hp=null;function D0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kp=null,oo=null,lo=null;function ub(t){if(t=Zc(t)){if(typeof Kp!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=im(e),Kp(t.stateNode,t.type,e))}}function JE(t){oo?lo?lo.push(t):lo=[t]:oo=t}function ek(){if(oo){var t=oo,e=lo;if(lo=oo=null,ub(t),e)for(t=0;t<e.length;t++)ub(e[t])}}function tk(t,e){return t(e)}function sk(){}var kf=!1;function nk(t,e,s){if(kf)return t(e,s);kf=!0;try{return tk(t,e,s)}finally{kf=!1,(oo!==null||lo!==null)&&(sk(),ek())}}function hc(t,e){var s=t.stateNode;if(s===null)return null;var n=im(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(ee(231,e,typeof s));return s}var Gp=!1;if(Zn)try{var yl={};Object.defineProperty(yl,"passive",{get:function(){Gp=!0}}),window.addEventListener("test",yl,yl),window.removeEventListener("test",yl,yl)}catch{Gp=!1}function KA(t,e,s,n,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(d){this.onError(d)}}var Hl=!1,$d=null,Hd=!1,Wp=null,GA={onError:function(t){Hl=!0,$d=t}};function WA(t,e,s,n,i,a,o,l,c){Hl=!1,$d=null,KA.apply(GA,arguments)}function qA(t,e,s,n,i,a,o,l,c){if(WA.apply(this,arguments),Hl){if(Hl){var u=$d;Hl=!1,$d=null}else throw Error(ee(198));Hd||(Hd=!0,Wp=u)}}function ya(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function rk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function db(t){if(ya(t)!==t)throw Error(ee(188))}function YA(t){var e=t.alternate;if(!e){if(e=ya(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return db(i),t;if(a===n)return db(i),e;a=a.sibling}throw Error(ee(188))}if(s.return!==n.return)s=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o)throw Error(ee(189))}}if(s.alternate!==n)throw Error(ee(190))}if(s.tag!==3)throw Error(ee(188));return s.stateNode.current===s?t:e}function ik(t){return t=YA(t),t!==null?ak(t):null}function ak(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ak(t);if(e!==null)return e;t=t.sibling}return null}var ok=Ts.unstable_scheduleCallback,hb=Ts.unstable_cancelCallback,QA=Ts.unstable_shouldYield,XA=Ts.unstable_requestPaint,gt=Ts.unstable_now,ZA=Ts.unstable_getCurrentPriorityLevel,L0=Ts.unstable_ImmediatePriority,lk=Ts.unstable_UserBlockingPriority,Kd=Ts.unstable_NormalPriority,JA=Ts.unstable_LowPriority,ck=Ts.unstable_IdlePriority,tm=null,bn=null;function eP(t){if(bn&&typeof bn.onCommitFiberRoot=="function")try{bn.onCommitFiberRoot(tm,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:nP,tP=Math.log,sP=Math.LN2;function nP(t){return t>>>=0,t===0?32:31-(tP(t)/sP|0)|0}var Uu=64,Fu=4194304;function Pl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gd(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~i;l!==0?n=Pl(l):(a&=o,a!==0&&(n=Pl(a)))}else o=s&~i,o!==0?n=Pl(o):a!==0&&(n=Pl(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-nn(e),i=1<<s,n|=t[s],e&=~i;return n}function rP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iP(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-nn(a),l=1<<o,c=i[o];c===-1?(!(l&s)||l&n)&&(i[o]=rP(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uk(){var t=Uu;return Uu<<=1,!(Uu&4194240)&&(Uu=64),t}function _f(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Qc(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=s}function aP(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-nn(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function M0(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-nn(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var $e=0;function dk(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hk,O0,mk,fk,pk,Yp=!1,$u=[],Kr=null,Gr=null,Wr=null,mc=new Map,fc=new Map,Rr=[],oP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mb(t,e){switch(t){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":mc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(e.pointerId)}}function vl(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Zc(e),e!==null&&O0(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function lP(t,e,s,n,i){switch(e){case"focusin":return Kr=vl(Kr,t,e,s,n,i),!0;case"dragenter":return Gr=vl(Gr,t,e,s,n,i),!0;case"mouseover":return Wr=vl(Wr,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return mc.set(a,vl(mc.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,fc.set(a,vl(fc.get(a)||null,t,e,s,n,i)),!0}return!1}function gk(t){var e=Fi(t.target);if(e!==null){var s=ya(e);if(s!==null){if(e=s.tag,e===13){if(e=rk(s),e!==null){t.blockedOn=e,pk(t.priority,function(){mk(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Qp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Hp=n,s.target.dispatchEvent(n),Hp=null}else return e=Zc(s),e!==null&&O0(e),t.blockedOn=s,!1;e.shift()}return!0}function fb(t,e,s){vd(t)&&s.delete(e)}function cP(){Yp=!1,Kr!==null&&vd(Kr)&&(Kr=null),Gr!==null&&vd(Gr)&&(Gr=null),Wr!==null&&vd(Wr)&&(Wr=null),mc.forEach(fb),fc.forEach(fb)}function bl(t,e){t.blockedOn===e&&(t.blockedOn=null,Yp||(Yp=!0,Ts.unstable_scheduleCallback(Ts.unstable_NormalPriority,cP)))}function pc(t){function e(i){return bl(i,t)}if(0<$u.length){bl($u[0],t);for(var s=1;s<$u.length;s++){var n=$u[s];n.blockedOn===t&&(n.blockedOn=null)}}for(Kr!==null&&bl(Kr,t),Gr!==null&&bl(Gr,t),Wr!==null&&bl(Wr,t),mc.forEach(e),fc.forEach(e),s=0;s<Rr.length;s++)n=Rr[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Rr.length&&(s=Rr[0],s.blockedOn===null);)gk(s),s.blockedOn===null&&Rr.shift()}var co=dr.ReactCurrentBatchConfig,Wd=!0;function uP(t,e,s,n){var i=$e,a=co.transition;co.transition=null;try{$e=1,V0(t,e,s,n)}finally{$e=i,co.transition=a}}function dP(t,e,s,n){var i=$e,a=co.transition;co.transition=null;try{$e=4,V0(t,e,s,n)}finally{$e=i,co.transition=a}}function V0(t,e,s,n){if(Wd){var i=Qp(t,e,s,n);if(i===null)Mf(t,e,n,qd,s),mb(t,n);else if(lP(i,t,e,s,n))n.stopPropagation();else if(mb(t,n),e&4&&-1<oP.indexOf(t)){for(;i!==null;){var a=Zc(i);if(a!==null&&hk(a),a=Qp(t,e,s,n),a===null&&Mf(t,e,n,qd,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else Mf(t,e,n,null,s)}}var qd=null;function Qp(t,e,s,n){if(qd=null,t=D0(n),t=Fi(t),t!==null)if(e=ya(t),e===null)t=null;else if(s=e.tag,s===13){if(t=rk(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qd=t,null}function xk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZA()){case L0:return 1;case lk:return 4;case Kd:case JA:return 16;case ck:return 536870912;default:return 16}default:return 16}}var zr=null,z0=null,bd=null;function yk(){if(bd)return bd;var t,e=z0,s=e.length,n,i="value"in zr?zr.value:zr.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===i[a-n];n++);return bd=i.slice(t,1<n?1-n:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hu(){return!0}function pb(){return!1}function Ps(t){function e(s,n,i,a,o){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Hu:pb,this.isPropagationStopped=pb,this}return ot(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Hu)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Hu)},persist:function(){},isPersistent:Hu}),e}var $o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B0=Ps($o),Xc=ot({},$o,{view:0,detail:0}),hP=Ps(Xc),Sf,Tf,wl,sm=ot({},Xc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wl&&(wl&&t.type==="mousemove"?(Sf=t.screenX-wl.screenX,Tf=t.screenY-wl.screenY):Tf=Sf=0,wl=t),Sf)},movementY:function(t){return"movementY"in t?t.movementY:Tf}}),gb=Ps(sm),mP=ot({},sm,{dataTransfer:0}),fP=Ps(mP),pP=ot({},Xc,{relatedTarget:0}),Cf=Ps(pP),gP=ot({},$o,{animationName:0,elapsedTime:0,pseudoElement:0}),xP=Ps(gP),yP=ot({},$o,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vP=Ps(yP),bP=ot({},$o,{data:0}),xb=Ps(bP),wP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jP[t])?!!e[t]:!1}function U0(){return EP}var kP=ot({},Xc,{key:function(t){if(t.key){var e=wP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U0,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_P=Ps(kP),SP=ot({},sm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yb=Ps(SP),TP=ot({},Xc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U0}),CP=Ps(TP),IP=ot({},$o,{propertyName:0,elapsedTime:0,pseudoElement:0}),AP=Ps(IP),PP=ot({},sm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RP=Ps(PP),DP=[9,13,27,32],F0=Zn&&"CompositionEvent"in window,Kl=null;Zn&&"documentMode"in document&&(Kl=document.documentMode);var LP=Zn&&"TextEvent"in window&&!Kl,vk=Zn&&(!F0||Kl&&8<Kl&&11>=Kl),vb=" ",bb=!1;function bk(t,e){switch(t){case"keyup":return DP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ha=!1;function MP(t,e){switch(t){case"compositionend":return wk(e);case"keypress":return e.which!==32?null:(bb=!0,vb);case"textInput":return t=e.data,t===vb&&bb?null:t;default:return null}}function OP(t,e){if(Ha)return t==="compositionend"||!F0&&bk(t,e)?(t=yk(),bd=z0=zr=null,Ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vk&&e.locale!=="ko"?null:e.data;default:return null}}var VP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!VP[t.type]:e==="textarea"}function Nk(t,e,s,n){JE(n),e=Yd(e,"onChange"),0<e.length&&(s=new B0("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Gl=null,gc=null;function zP(t){Rk(t,0)}function nm(t){var e=Wa(t);if(GE(e))return t}function BP(t,e){if(t==="change")return e}var jk=!1;if(Zn){var If;if(Zn){var Af="oninput"in document;if(!Af){var Nb=document.createElement("div");Nb.setAttribute("oninput","return;"),Af=typeof Nb.oninput=="function"}If=Af}else If=!1;jk=If&&(!document.documentMode||9<document.documentMode)}function jb(){Gl&&(Gl.detachEvent("onpropertychange",Ek),gc=Gl=null)}function Ek(t){if(t.propertyName==="value"&&nm(gc)){var e=[];Nk(e,gc,t,D0(t)),nk(zP,e)}}function UP(t,e,s){t==="focusin"?(jb(),Gl=e,gc=s,Gl.attachEvent("onpropertychange",Ek)):t==="focusout"&&jb()}function FP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nm(gc)}function $P(t,e){if(t==="click")return nm(e)}function HP(t,e){if(t==="input"||t==="change")return nm(e)}function KP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:KP;function xc(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!Pp.call(e,i)||!on(t[i],e[i]))return!1}return!0}function Eb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kb(t,e){var s=Eb(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Eb(s)}}function kk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _k(){for(var t=window,e=Fd();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Fd(t.document)}return e}function $0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GP(t){var e=_k(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&kk(s.ownerDocument.documentElement,s)){if(n!==null&&$0(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=kb(s,a);var o=kb(s,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WP=Zn&&"documentMode"in document&&11>=document.documentMode,Ka=null,Xp=null,Wl=null,Zp=!1;function _b(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Zp||Ka==null||Ka!==Fd(n)||(n=Ka,"selectionStart"in n&&$0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wl&&xc(Wl,n)||(Wl=n,n=Yd(Xp,"onSelect"),0<n.length&&(e=new B0("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Ka)))}function Ku(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Ga={animationend:Ku("Animation","AnimationEnd"),animationiteration:Ku("Animation","AnimationIteration"),animationstart:Ku("Animation","AnimationStart"),transitionend:Ku("Transition","TransitionEnd")},Pf={},Sk={};Zn&&(Sk=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function rm(t){if(Pf[t])return Pf[t];if(!Ga[t])return t;var e=Ga[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Sk)return Pf[t]=e[s];return t}var Tk=rm("animationend"),Ck=rm("animationiteration"),Ik=rm("animationstart"),Ak=rm("transitionend"),Pk=new Map,Sb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hi(t,e){Pk.set(t,e),xa(e,[t])}for(var Rf=0;Rf<Sb.length;Rf++){var Df=Sb[Rf],qP=Df.toLowerCase(),YP=Df[0].toUpperCase()+Df.slice(1);hi(qP,"on"+YP)}hi(Tk,"onAnimationEnd");hi(Ck,"onAnimationIteration");hi(Ik,"onAnimationStart");hi("dblclick","onDoubleClick");hi("focusin","onFocus");hi("focusout","onBlur");hi(Ak,"onTransitionEnd");yo("onMouseEnter",["mouseout","mouseover"]);yo("onMouseLeave",["mouseout","mouseover"]);yo("onPointerEnter",["pointerout","pointerover"]);yo("onPointerLeave",["pointerout","pointerover"]);xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function Tb(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,qA(n,e,void 0,t),t.currentTarget=null}function Rk(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Tb(i,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Tb(i,l,u),a=c}}}if(Hd)throw t=Wp,Hd=!1,Wp=null,t}function Ze(t,e){var s=e[ng];s===void 0&&(s=e[ng]=new Set);var n=t+"__bubble";s.has(n)||(Dk(e,t,2,!1),s.add(n))}function Lf(t,e,s){var n=0;e&&(n|=4),Dk(s,t,n,e)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function yc(t){if(!t[Gu]){t[Gu]=!0,UE.forEach(function(s){s!=="selectionchange"&&(QP.has(s)||Lf(s,!1,t),Lf(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gu]||(e[Gu]=!0,Lf("selectionchange",!1,e))}}function Dk(t,e,s,n){switch(xk(e)){case 1:var i=uP;break;case 4:i=dP;break;default:i=V0}s=i.bind(null,e,s,t),i=void 0,!Gp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Mf(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Fi(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}nk(function(){var u=a,d=D0(s),m=[];e:{var p=Pk.get(t);if(p!==void 0){var f=B0,x=t;switch(t){case"keypress":if(wd(s)===0)break e;case"keydown":case"keyup":f=_P;break;case"focusin":x="focus",f=Cf;break;case"focusout":x="blur",f=Cf;break;case"beforeblur":case"afterblur":f=Cf;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=gb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=fP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=CP;break;case Tk:case Ck:case Ik:f=xP;break;case Ak:f=AP;break;case"scroll":f=hP;break;case"wheel":f=RP;break;case"copy":case"cut":case"paste":f=vP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=yb}var S=(e&4)!==0,k=!S&&t==="scroll",v=S?p!==null?p+"Capture":null:p;S=[];for(var _=u,w;_!==null;){w=_;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=hc(_,v),E!=null&&S.push(vc(_,E,w)))),k)break;_=_.return}0<S.length&&(p=new f(p,x,null,s,d),m.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",p&&s!==Hp&&(x=s.relatedTarget||s.fromElement)&&(Fi(x)||x[Jn]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(x=s.relatedTarget||s.toElement,f=u,x=x?Fi(x):null,x!==null&&(k=ya(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=u),f!==x)){if(S=gb,E="onMouseLeave",v="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=yb,E="onPointerLeave",v="onPointerEnter",_="pointer"),k=f==null?p:Wa(f),w=x==null?p:Wa(x),p=new S(E,_+"leave",f,s,d),p.target=k,p.relatedTarget=w,E=null,Fi(d)===u&&(S=new S(v,_+"enter",x,s,d),S.target=w,S.relatedTarget=k,E=S),k=E,f&&x)t:{for(S=f,v=x,_=0,w=S;w;w=Oa(w))_++;for(w=0,E=v;E;E=Oa(E))w++;for(;0<_-w;)S=Oa(S),_--;for(;0<w-_;)v=Oa(v),w--;for(;_--;){if(S===v||v!==null&&S===v.alternate)break t;S=Oa(S),v=Oa(v)}S=null}else S=null;f!==null&&Cb(m,p,f,S,!1),x!==null&&k!==null&&Cb(m,k,x,S,!0)}}e:{if(p=u?Wa(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var T=BP;else if(wb(p))if(jk)T=HP;else{T=FP;var P=UP}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=$P);if(T&&(T=T(t,u))){Nk(m,T,s,d);break e}P&&P(t,p,u),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&zp(p,"number",p.value)}switch(P=u?Wa(u):window,t){case"focusin":(wb(P)||P.contentEditable==="true")&&(Ka=P,Xp=u,Wl=null);break;case"focusout":Wl=Xp=Ka=null;break;case"mousedown":Zp=!0;break;case"contextmenu":case"mouseup":case"dragend":Zp=!1,_b(m,s,d);break;case"selectionchange":if(WP)break;case"keydown":case"keyup":_b(m,s,d)}var b;if(F0)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ha?bk(t,s)&&(y="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(y="onCompositionStart");y&&(vk&&s.locale!=="ko"&&(Ha||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ha&&(b=yk()):(zr=d,z0="value"in zr?zr.value:zr.textContent,Ha=!0)),P=Yd(u,y),0<P.length&&(y=new xb(y,t,null,s,d),m.push({event:y,listeners:P}),b?y.data=b:(b=wk(s),b!==null&&(y.data=b)))),(b=LP?MP(t,s):OP(t,s))&&(u=Yd(u,"onBeforeInput"),0<u.length&&(d=new xb("onBeforeInput","beforeinput",null,s,d),m.push({event:d,listeners:u}),d.data=b))}Rk(m,e)})}function vc(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Yd(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=hc(t,s),a!=null&&n.unshift(vc(t,a,i)),a=hc(t,e),a!=null&&n.push(vc(t,a,i))),t=t.return}return n}function Oa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Cb(t,e,s,n,i){for(var a=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=hc(s,a),c!=null&&o.unshift(vc(s,c,l))):i||(c=hc(s,a),c!=null&&o.push(vc(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var XP=/\r\n?/g,ZP=/\u0000|\uFFFD/g;function Ib(t){return(typeof t=="string"?t:""+t).replace(XP,`
`).replace(ZP,"")}function Wu(t,e,s){if(e=Ib(e),Ib(t)!==e&&s)throw Error(ee(425))}function Qd(){}var Jp=null,eg=null;function tg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sg=typeof setTimeout=="function"?setTimeout:void 0,JP=typeof clearTimeout=="function"?clearTimeout:void 0,Ab=typeof Promise=="function"?Promise:void 0,eR=typeof queueMicrotask=="function"?queueMicrotask:typeof Ab<"u"?function(t){return Ab.resolve(null).then(t).catch(tR)}:sg;function tR(t){setTimeout(function(){throw t})}function Of(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),pc(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);pc(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Ho=Math.random().toString(36).slice(2),yn="__reactFiber$"+Ho,bc="__reactProps$"+Ho,Jn="__reactContainer$"+Ho,ng="__reactEvents$"+Ho,sR="__reactListeners$"+Ho,nR="__reactHandles$"+Ho;function Fi(t){var e=t[yn];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Jn]||s[yn]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Pb(t);t!==null;){if(s=t[yn])return s;t=Pb(t)}return e}t=s,s=t.parentNode}return null}function Zc(t){return t=t[yn]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function im(t){return t[bc]||null}var rg=[],qa=-1;function mi(t){return{current:t}}function et(t){0>qa||(t.current=rg[qa],rg[qa]=null,qa--)}function We(t,e){qa++,rg[qa]=t.current,t.current=e}var ii={},ts=mi(ii),ms=mi(!1),na=ii;function vo(t,e){var s=t.type.contextTypes;if(!s)return ii;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function fs(t){return t=t.childContextTypes,t!=null}function Xd(){et(ms),et(ts)}function Rb(t,e,s){if(ts.current!==ii)throw Error(ee(168));We(ts,e),We(ms,s)}function Lk(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ee(108,UA(t)||"Unknown",i));return ot({},s,n)}function Zd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ii,na=ts.current,We(ts,t),We(ms,ms.current),!0}function Db(t,e,s){var n=t.stateNode;if(!n)throw Error(ee(169));s?(t=Lk(t,e,na),n.__reactInternalMemoizedMergedChildContext=t,et(ms),et(ts),We(ts,t)):et(ms),We(ms,s)}var zn=null,am=!1,Vf=!1;function Mk(t){zn===null?zn=[t]:zn.push(t)}function rR(t){am=!0,Mk(t)}function fi(){if(!Vf&&zn!==null){Vf=!0;var t=0,e=$e;try{var s=zn;for($e=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}zn=null,am=!1}catch(i){throw zn!==null&&(zn=zn.slice(t+1)),ok(L0,fi),i}finally{$e=e,Vf=!1}}return null}var Ya=[],Qa=0,Jd=null,eh=0,Os=[],Vs=0,ra=null,Un=1,Fn="";function Mi(t,e){Ya[Qa++]=eh,Ya[Qa++]=Jd,Jd=t,eh=e}function Ok(t,e,s){Os[Vs++]=Un,Os[Vs++]=Fn,Os[Vs++]=ra,ra=t;var n=Un;t=Fn;var i=32-nn(n)-1;n&=~(1<<i),s+=1;var a=32-nn(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Un=1<<32-nn(e)+i|s<<i|n,Fn=a+t}else Un=1<<a|s<<i|n,Fn=t}function H0(t){t.return!==null&&(Mi(t,1),Ok(t,1,0))}function K0(t){for(;t===Jd;)Jd=Ya[--Qa],Ya[Qa]=null,eh=Ya[--Qa],Ya[Qa]=null;for(;t===ra;)ra=Os[--Vs],Os[Vs]=null,Fn=Os[--Vs],Os[Vs]=null,Un=Os[--Vs],Os[Vs]=null}var _s=null,Es=null,st=!1,en=null;function Vk(t,e){var s=zs(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Lb(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_s=t,Es=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_s=t,Es=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=ra!==null?{id:Un,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=zs(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,_s=t,Es=null,!0):!1;default:return!1}}function ig(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ag(t){if(st){var e=Es;if(e){var s=e;if(!Lb(t,e)){if(ig(t))throw Error(ee(418));e=qr(s.nextSibling);var n=_s;e&&Lb(t,e)?Vk(n,s):(t.flags=t.flags&-4097|2,st=!1,_s=t)}}else{if(ig(t))throw Error(ee(418));t.flags=t.flags&-4097|2,st=!1,_s=t}}}function Mb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_s=t}function qu(t){if(t!==_s)return!1;if(!st)return Mb(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tg(t.type,t.memoizedProps)),e&&(e=Es)){if(ig(t))throw zk(),Error(ee(418));for(;e;)Vk(t,e),e=qr(e.nextSibling)}if(Mb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Es=qr(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Es=null}}else Es=_s?qr(t.stateNode.nextSibling):null;return!0}function zk(){for(var t=Es;t;)t=qr(t.nextSibling)}function bo(){Es=_s=null,st=!1}function G0(t){en===null?en=[t]:en.push(t)}var iR=dr.ReactCurrentBatchConfig;function Nl(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ee(309));var n=s.stateNode}if(!n)throw Error(ee(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ee(284));if(!s._owner)throw Error(ee(290,t))}return t}function Yu(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ob(t){var e=t._init;return e(t._payload)}function Bk(t){function e(v,_){if(t){var w=v.deletions;w===null?(v.deletions=[_],v.flags|=16):w.push(_)}}function s(v,_){if(!t)return null;for(;_!==null;)e(v,_),_=_.sibling;return null}function n(v,_){for(v=new Map;_!==null;)_.key!==null?v.set(_.key,_):v.set(_.index,_),_=_.sibling;return v}function i(v,_){return v=Zr(v,_),v.index=0,v.sibling=null,v}function a(v,_,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<_?(v.flags|=2,_):w):(v.flags|=2,_)):(v.flags|=1048576,_)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,_,w,E){return _===null||_.tag!==6?(_=Kf(w,v.mode,E),_.return=v,_):(_=i(_,w),_.return=v,_)}function c(v,_,w,E){var T=w.type;return T===$a?d(v,_,w.props.children,E,w.key):_!==null&&(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ir&&Ob(T)===_.type)?(E=i(_,w.props),E.ref=Nl(v,_,w),E.return=v,E):(E=Td(w.type,w.key,w.props,null,v.mode,E),E.ref=Nl(v,_,w),E.return=v,E)}function u(v,_,w,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=Gf(w,v.mode,E),_.return=v,_):(_=i(_,w.children||[]),_.return=v,_)}function d(v,_,w,E,T){return _===null||_.tag!==7?(_=Xi(w,v.mode,E,T),_.return=v,_):(_=i(_,w),_.return=v,_)}function m(v,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Kf(""+_,v.mode,w),_.return=v,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vu:return w=Td(_.type,_.key,_.props,null,v.mode,w),w.ref=Nl(v,null,_),w.return=v,w;case Fa:return _=Gf(_,v.mode,w),_.return=v,_;case Ir:var E=_._init;return m(v,E(_._payload),w)}if(Al(_)||xl(_))return _=Xi(_,v.mode,w,null),_.return=v,_;Yu(v,_)}return null}function p(v,_,w,E){var T=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:l(v,_,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Vu:return w.key===T?c(v,_,w,E):null;case Fa:return w.key===T?u(v,_,w,E):null;case Ir:return T=w._init,p(v,_,T(w._payload),E)}if(Al(w)||xl(w))return T!==null?null:d(v,_,w,E,null);Yu(v,w)}return null}function f(v,_,w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,l(_,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Vu:return v=v.get(E.key===null?w:E.key)||null,c(_,v,E,T);case Fa:return v=v.get(E.key===null?w:E.key)||null,u(_,v,E,T);case Ir:var P=E._init;return f(v,_,w,P(E._payload),T)}if(Al(E)||xl(E))return v=v.get(w)||null,d(_,v,E,T,null);Yu(_,E)}return null}function x(v,_,w,E){for(var T=null,P=null,b=_,y=_=0,j=null;b!==null&&y<w.length;y++){b.index>y?(j=b,b=null):j=b.sibling;var C=p(v,b,w[y],E);if(C===null){b===null&&(b=j);break}t&&b&&C.alternate===null&&e(v,b),_=a(C,_,y),P===null?T=C:P.sibling=C,P=C,b=j}if(y===w.length)return s(v,b),st&&Mi(v,y),T;if(b===null){for(;y<w.length;y++)b=m(v,w[y],E),b!==null&&(_=a(b,_,y),P===null?T=b:P.sibling=b,P=b);return st&&Mi(v,y),T}for(b=n(v,b);y<w.length;y++)j=f(b,v,y,w[y],E),j!==null&&(t&&j.alternate!==null&&b.delete(j.key===null?y:j.key),_=a(j,_,y),P===null?T=j:P.sibling=j,P=j);return t&&b.forEach(function(R){return e(v,R)}),st&&Mi(v,y),T}function S(v,_,w,E){var T=xl(w);if(typeof T!="function")throw Error(ee(150));if(w=T.call(w),w==null)throw Error(ee(151));for(var P=T=null,b=_,y=_=0,j=null,C=w.next();b!==null&&!C.done;y++,C=w.next()){b.index>y?(j=b,b=null):j=b.sibling;var R=p(v,b,C.value,E);if(R===null){b===null&&(b=j);break}t&&b&&R.alternate===null&&e(v,b),_=a(R,_,y),P===null?T=R:P.sibling=R,P=R,b=j}if(C.done)return s(v,b),st&&Mi(v,y),T;if(b===null){for(;!C.done;y++,C=w.next())C=m(v,C.value,E),C!==null&&(_=a(C,_,y),P===null?T=C:P.sibling=C,P=C);return st&&Mi(v,y),T}for(b=n(v,b);!C.done;y++,C=w.next())C=f(b,v,y,C.value,E),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?y:C.key),_=a(C,_,y),P===null?T=C:P.sibling=C,P=C);return t&&b.forEach(function(D){return e(v,D)}),st&&Mi(v,y),T}function k(v,_,w,E){if(typeof w=="object"&&w!==null&&w.type===$a&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Vu:e:{for(var T=w.key,P=_;P!==null;){if(P.key===T){if(T=w.type,T===$a){if(P.tag===7){s(v,P.sibling),_=i(P,w.props.children),_.return=v,v=_;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ir&&Ob(T)===P.type){s(v,P.sibling),_=i(P,w.props),_.ref=Nl(v,P,w),_.return=v,v=_;break e}s(v,P);break}else e(v,P);P=P.sibling}w.type===$a?(_=Xi(w.props.children,v.mode,E,w.key),_.return=v,v=_):(E=Td(w.type,w.key,w.props,null,v.mode,E),E.ref=Nl(v,_,w),E.return=v,v=E)}return o(v);case Fa:e:{for(P=w.key;_!==null;){if(_.key===P)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){s(v,_.sibling),_=i(_,w.children||[]),_.return=v,v=_;break e}else{s(v,_);break}else e(v,_);_=_.sibling}_=Gf(w,v.mode,E),_.return=v,v=_}return o(v);case Ir:return P=w._init,k(v,_,P(w._payload),E)}if(Al(w))return x(v,_,w,E);if(xl(w))return S(v,_,w,E);Yu(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(s(v,_.sibling),_=i(_,w),_.return=v,v=_):(s(v,_),_=Kf(w,v.mode,E),_.return=v,v=_),o(v)):s(v,_)}return k}var wo=Bk(!0),Uk=Bk(!1),th=mi(null),sh=null,Xa=null,W0=null;function q0(){W0=Xa=sh=null}function Y0(t){var e=th.current;et(th),t._currentValue=e}function og(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function uo(t,e){sh=t,W0=Xa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hs=!0),t.firstContext=null)}function $s(t){var e=t._currentValue;if(W0!==t)if(t={context:t,memoizedValue:e,next:null},Xa===null){if(sh===null)throw Error(ee(308));Xa=t,sh.dependencies={lanes:0,firstContext:t}}else Xa=Xa.next=t;return e}var $i=null;function Q0(t){$i===null?$i=[t]:$i.push(t)}function Fk(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,Q0(e)):(s.next=i.next,i.next=s),e.interleaved=s,er(t,n)}function er(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Ar=!1;function X0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $k(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yr(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,De&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,er(t,s)}return i=n.interleaved,i===null?(e.next=e,Q0(n)):(e.next=i.next,i.next=e),n.interleaved=e,er(t,s)}function Nd(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,M0(t,s)}}function Vb(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function nh(t,e,s,n){var i=t.updateQueue;Ar=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;o=0,d=u=c=null,l=a;do{var p=l.lane,f=l.eventTime;if((n&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,S=l;switch(p=e,f=s,S.tag){case 1:if(x=S.payload,typeof x=="function"){m=x.call(f,m,p);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=S.payload,p=typeof x=="function"?x.call(f,m,p):x,p==null)break e;m=ot({},m,p);break e;case 2:Ar=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else f={eventTime:f,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=m):d=d.next=f,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(d===null&&(c=m),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);aa|=o,t.lanes=o,t.memoizedState=m}}function zb(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(ee(191,i));i.call(n)}}}var Jc={},wn=mi(Jc),wc=mi(Jc),Nc=mi(Jc);function Hi(t){if(t===Jc)throw Error(ee(174));return t}function Z0(t,e){switch(We(Nc,e),We(wc,t),We(wn,Jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Up(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Up(e,t)}et(wn),We(wn,e)}function No(){et(wn),et(wc),et(Nc)}function Hk(t){Hi(Nc.current);var e=Hi(wn.current),s=Up(e,t.type);e!==s&&(We(wc,t),We(wn,s))}function J0(t){wc.current===t&&(et(wn),et(wc))}var rt=mi(0);function rh(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zf=[];function ex(){for(var t=0;t<zf.length;t++)zf[t]._workInProgressVersionPrimary=null;zf.length=0}var jd=dr.ReactCurrentDispatcher,Bf=dr.ReactCurrentBatchConfig,ia=0,at=null,Et=null,It=null,ih=!1,ql=!1,jc=0,aR=0;function Gt(){throw Error(ee(321))}function tx(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!on(t[s],e[s]))return!1;return!0}function sx(t,e,s,n,i,a){if(ia=a,at=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jd.current=t===null||t.memoizedState===null?uR:dR,t=s(n,i),ql){a=0;do{if(ql=!1,jc=0,25<=a)throw Error(ee(301));a+=1,It=Et=null,e.updateQueue=null,jd.current=hR,t=s(n,i)}while(ql)}if(jd.current=ah,e=Et!==null&&Et.next!==null,ia=0,It=Et=at=null,ih=!1,e)throw Error(ee(300));return t}function nx(){var t=jc!==0;return jc=0,t}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?at.memoizedState=It=t:It=It.next=t,It}function Hs(){if(Et===null){var t=at.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=It===null?at.memoizedState:It.next;if(e!==null)It=e,Et=t;else{if(t===null)throw Error(ee(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},It===null?at.memoizedState=It=t:It=It.next=t}return It}function Ec(t,e){return typeof e=="function"?e(t):e}function Uf(t){var e=Hs(),s=e.queue;if(s===null)throw Error(ee(311));s.lastRenderedReducer=t;var n=Et,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((ia&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,at.lanes|=d,aa|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,on(n,e.memoizedState)||(hs=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,at.lanes|=a,aa|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Ff(t){var e=Hs(),s=e.queue;if(s===null)throw Error(ee(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);on(a,e.memoizedState)||(hs=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function Kk(){}function Gk(t,e){var s=at,n=Hs(),i=e(),a=!on(n.memoizedState,i);if(a&&(n.memoizedState=i,hs=!0),n=n.queue,rx(Yk.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||It!==null&&It.memoizedState.tag&1){if(s.flags|=2048,kc(9,qk.bind(null,s,n,i,e),void 0,null),At===null)throw Error(ee(349));ia&30||Wk(s,e,i)}return i}function Wk(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function qk(t,e,s,n){e.value=s,e.getSnapshot=n,Qk(e)&&Xk(t)}function Yk(t,e,s){return s(function(){Qk(e)&&Xk(t)})}function Qk(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!on(t,s)}catch{return!0}}function Xk(t){var e=er(t,1);e!==null&&rn(e,t,1,-1)}function Bb(t){var e=gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ec,lastRenderedState:t},e.queue=t,t=t.dispatch=cR.bind(null,at,t),[e.memoizedState,t]}function kc(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=at.updateQueue,e===null?(e={lastEffect:null,stores:null},at.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Zk(){return Hs().memoizedState}function Ed(t,e,s,n){var i=gn();at.flags|=t,i.memoizedState=kc(1|e,s,void 0,n===void 0?null:n)}function om(t,e,s,n){var i=Hs();n=n===void 0?null:n;var a=void 0;if(Et!==null){var o=Et.memoizedState;if(a=o.destroy,n!==null&&tx(n,o.deps)){i.memoizedState=kc(e,s,a,n);return}}at.flags|=t,i.memoizedState=kc(1|e,s,a,n)}function Ub(t,e){return Ed(8390656,8,t,e)}function rx(t,e){return om(2048,8,t,e)}function Jk(t,e){return om(4,2,t,e)}function e2(t,e){return om(4,4,t,e)}function t2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function s2(t,e,s){return s=s!=null?s.concat([t]):null,om(4,4,t2.bind(null,e,t),s)}function ix(){}function n2(t,e){var s=Hs();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&tx(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function r2(t,e){var s=Hs();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&tx(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function i2(t,e,s){return ia&21?(on(s,e)||(s=uk(),at.lanes|=s,aa|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hs=!0),t.memoizedState=s)}function oR(t,e){var s=$e;$e=s!==0&&4>s?s:4,t(!0);var n=Bf.transition;Bf.transition={};try{t(!1),e()}finally{$e=s,Bf.transition=n}}function a2(){return Hs().memoizedState}function lR(t,e,s){var n=Xr(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},o2(t))l2(e,s);else if(s=Fk(t,e,s,n),s!==null){var i=as();rn(s,t,n,i),c2(s,e,n)}}function cR(t,e,s){var n=Xr(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(o2(t))l2(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,s);if(i.hasEagerState=!0,i.eagerState=l,on(l,o)){var c=e.interleaved;c===null?(i.next=i,Q0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=Fk(t,e,i,n),s!==null&&(i=as(),rn(s,t,n,i),c2(s,e,n))}}function o2(t){var e=t.alternate;return t===at||e!==null&&e===at}function l2(t,e){ql=ih=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function c2(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,M0(t,s)}}var ah={readContext:$s,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},uR={readContext:$s,useCallback:function(t,e){return gn().memoizedState=[t,e===void 0?null:e],t},useContext:$s,useEffect:Ub,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Ed(4194308,4,t2.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Ed(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ed(4,2,t,e)},useMemo:function(t,e){var s=gn();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=gn();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=lR.bind(null,at,t),[n.memoizedState,t]},useRef:function(t){var e=gn();return t={current:t},e.memoizedState=t},useState:Bb,useDebugValue:ix,useDeferredValue:function(t){return gn().memoizedState=t},useTransition:function(){var t=Bb(!1),e=t[0];return t=oR.bind(null,t[1]),gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=at,i=gn();if(st){if(s===void 0)throw Error(ee(407));s=s()}else{if(s=e(),At===null)throw Error(ee(349));ia&30||Wk(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,Ub(Yk.bind(null,n,a,t),[t]),n.flags|=2048,kc(9,qk.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=gn(),e=At.identifierPrefix;if(st){var s=Fn,n=Un;s=(n&~(1<<32-nn(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=jc++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=aR++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},dR={readContext:$s,useCallback:n2,useContext:$s,useEffect:rx,useImperativeHandle:s2,useInsertionEffect:Jk,useLayoutEffect:e2,useMemo:r2,useReducer:Uf,useRef:Zk,useState:function(){return Uf(Ec)},useDebugValue:ix,useDeferredValue:function(t){var e=Hs();return i2(e,Et.memoizedState,t)},useTransition:function(){var t=Uf(Ec)[0],e=Hs().memoizedState;return[t,e]},useMutableSource:Kk,useSyncExternalStore:Gk,useId:a2,unstable_isNewReconciler:!1},hR={readContext:$s,useCallback:n2,useContext:$s,useEffect:rx,useImperativeHandle:s2,useInsertionEffect:Jk,useLayoutEffect:e2,useMemo:r2,useReducer:Ff,useRef:Zk,useState:function(){return Ff(Ec)},useDebugValue:ix,useDeferredValue:function(t){var e=Hs();return Et===null?e.memoizedState=t:i2(e,Et.memoizedState,t)},useTransition:function(){var t=Ff(Ec)[0],e=Hs().memoizedState;return[t,e]},useMutableSource:Kk,useSyncExternalStore:Gk,useId:a2,unstable_isNewReconciler:!1};function Zs(t,e){if(t&&t.defaultProps){e=ot({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function lg(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:ot({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var lm={isMounted:function(t){return(t=t._reactInternals)?ya(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=as(),i=Xr(t),a=Gn(n,i);a.payload=e,s!=null&&(a.callback=s),e=Yr(t,a,i),e!==null&&(rn(e,t,i,n),Nd(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=as(),i=Xr(t),a=Gn(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Yr(t,a,i),e!==null&&(rn(e,t,i,n),Nd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=as(),n=Xr(t),i=Gn(s,n);i.tag=2,e!=null&&(i.callback=e),e=Yr(t,i,n),e!==null&&(rn(e,t,n,s),Nd(e,t,n))}};function Fb(t,e,s,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!xc(s,n)||!xc(i,a):!0}function u2(t,e,s){var n=!1,i=ii,a=e.contextType;return typeof a=="object"&&a!==null?a=$s(a):(i=fs(e)?na:ts.current,n=e.contextTypes,a=(n=n!=null)?vo(t,i):ii),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function $b(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&lm.enqueueReplaceState(e,e.state,null)}function cg(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},X0(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=$s(a):(a=fs(e)?na:ts.current,i.context=vo(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(lg(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lm.enqueueReplaceState(i,i.state,null),nh(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function jo(t,e){try{var s="",n=e;do s+=BA(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function $f(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function ug(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var mR=typeof WeakMap=="function"?WeakMap:Map;function d2(t,e,s){s=Gn(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){lh||(lh=!0,bg=n),ug(t,e)},s}function h2(t,e,s){s=Gn(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){ug(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){ug(t,e),typeof n!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Hb(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new mR;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=SR.bind(null,t,e,s),e.then(t,t))}function Kb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gb(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Gn(-1,1),e.tag=2,Yr(s,e,1))),s.lanes|=1),t)}var fR=dr.ReactCurrentOwner,hs=!1;function rs(t,e,s,n){e.child=t===null?Uk(e,null,s,n):wo(e,t.child,s,n)}function Wb(t,e,s,n,i){s=s.render;var a=e.ref;return uo(e,i),n=sx(t,e,s,n,a,i),s=nx(),t!==null&&!hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tr(t,e,i)):(st&&s&&H0(e),e.flags|=1,rs(t,e,n,i),e.child)}function qb(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!mx(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,m2(t,e,a,n,i)):(t=Td(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:xc,s(o,n)&&t.ref===e.ref)return tr(t,e,i)}return e.flags|=1,t=Zr(a,n),t.ref=e.ref,t.return=e,e.child=t}function m2(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(xc(a,n)&&t.ref===e.ref)if(hs=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(hs=!0);else return e.lanes=t.lanes,tr(t,e,i)}return dg(t,e,s,n,i)}function f2(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(Ja,ws),ws|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,We(Ja,ws),ws|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,We(Ja,ws),ws|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,We(Ja,ws),ws|=n;return rs(t,e,i,s),e.child}function p2(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function dg(t,e,s,n,i){var a=fs(s)?na:ts.current;return a=vo(e,a),uo(e,i),s=sx(t,e,s,n,a,i),n=nx(),t!==null&&!hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,tr(t,e,i)):(st&&n&&H0(e),e.flags|=1,rs(t,e,s,i),e.child)}function Yb(t,e,s,n,i){if(fs(s)){var a=!0;Zd(e)}else a=!1;if(uo(e,i),e.stateNode===null)kd(t,e),u2(e,s,n),cg(e,s,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=s.contextType;typeof u=="object"&&u!==null?u=$s(u):(u=fs(s)?na:ts.current,u=vo(e,u));var d=s.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&$b(e,o,n,u),Ar=!1;var p=e.memoizedState;o.state=p,nh(e,n,o,i),c=e.memoizedState,l!==n||p!==c||ms.current||Ar?(typeof d=="function"&&(lg(e,s,d,n),c=e.memoizedState),(l=Ar||Fb(e,s,l,n,p,c,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,$k(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Zs(e.type,l),o.props=u,m=e.pendingProps,p=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=$s(c):(c=fs(s)?na:ts.current,c=vo(e,c));var f=s.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==c)&&$b(e,o,n,c),Ar=!1,p=e.memoizedState,o.state=p,nh(e,n,o,i);var x=e.memoizedState;l!==m||p!==x||ms.current||Ar?(typeof f=="function"&&(lg(e,s,f,n),x=e.memoizedState),(u=Ar||Fb(e,s,u,n,p,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),n=!1)}return hg(t,e,s,n,a,i)}function hg(t,e,s,n,i,a){p2(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Db(e,s,!1),tr(t,e,a);n=e.stateNode,fR.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=wo(e,t.child,null,a),e.child=wo(e,null,l,a)):rs(t,e,l,a),e.memoizedState=n.state,i&&Db(e,s,!0),e.child}function g2(t){var e=t.stateNode;e.pendingContext?Rb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rb(t,e.context,!1),Z0(t,e.containerInfo)}function Qb(t,e,s,n,i){return bo(),G0(i),e.flags|=256,rs(t,e,s,n),e.child}var mg={dehydrated:null,treeContext:null,retryLane:0};function fg(t){return{baseLanes:t,cachePool:null,transitions:null}}function x2(t,e,s){var n=e.pendingProps,i=rt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),We(rt,i&1),t===null)return ag(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=dm(o,n,0,null),t=Xi(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=fg(s),e.memoizedState=mg,t):ax(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return pR(t,e,o,n,l,i,s);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Zr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Zr(l,a):(a=Xi(a,o,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?fg(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~s,e.memoizedState=mg,n}return a=t.child,t=a.sibling,n=Zr(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function ax(t,e){return e=dm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,s,n){return n!==null&&G0(n),wo(e,t.child,null,s),t=ax(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pR(t,e,s,n,i,a,o){if(s)return e.flags&256?(e.flags&=-257,n=$f(Error(ee(422))),Qu(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=dm({mode:"visible",children:n.children},i,0,null),a=Xi(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&wo(e,t.child,null,o),e.child.memoizedState=fg(o),e.memoizedState=mg,a);if(!(e.mode&1))return Qu(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ee(419)),n=$f(a,n,void 0),Qu(t,e,o,n)}if(l=(o&t.childLanes)!==0,hs||l){if(n=At,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,er(t,i),rn(n,t,i,-1))}return hx(),n=$f(Error(ee(421))),Qu(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TR.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,Es=qr(i.nextSibling),_s=e,st=!0,en=null,t!==null&&(Os[Vs++]=Un,Os[Vs++]=Fn,Os[Vs++]=ra,Un=t.id,Fn=t.overflow,ra=e),e=ax(e,n.children),e.flags|=4096,e)}function Xb(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),og(t.return,e,s)}function Hf(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function y2(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(rs(t,e,n.children,s),n=rt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xb(t,s,e);else if(t.tag===19)Xb(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(We(rt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&rh(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),Hf(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rh(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}Hf(e,!0,s,null,a);break;case"together":Hf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function tr(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),aa|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,s=Zr(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Zr(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function gR(t,e,s){switch(e.tag){case 3:g2(e),bo();break;case 5:Hk(e);break;case 1:fs(e.type)&&Zd(e);break;case 4:Z0(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;We(th,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(We(rt,rt.current&1),e.flags|=128,null):s&e.child.childLanes?x2(t,e,s):(We(rt,rt.current&1),t=tr(t,e,s),t!==null?t.sibling:null);We(rt,rt.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return y2(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(rt,rt.current),n)break;return null;case 22:case 23:return e.lanes=0,f2(t,e,s)}return tr(t,e,s)}var v2,pg,b2,w2;v2=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};pg=function(){};b2=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Hi(wn.current);var a=null;switch(s){case"input":i=Op(t,i),n=Op(t,n),a=[];break;case"select":i=ot({},i,{value:void 0}),n=ot({},n,{value:void 0}),a=[];break;case"textarea":i=Bp(t,i),n=Bp(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Qd)}Fp(s,n);var o;s=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(uc.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(uc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ze("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}s&&(a=a||[]).push("style",s);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};w2=function(t,e,s,n){s!==n&&(e.flags|=4)};function jl(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function xR(t,e,s){var n=e.pendingProps;switch(K0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return fs(e.type)&&Xd(),Wt(e),null;case 3:return n=e.stateNode,No(),et(ms),et(ts),ex(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(qu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,en!==null&&(jg(en),en=null))),pg(t,e),Wt(e),null;case 5:J0(e);var i=Hi(Nc.current);if(s=e.type,t!==null&&e.stateNode!=null)b2(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ee(166));return Wt(e),null}if(t=Hi(wn.current),qu(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[yn]=e,n[bc]=a,t=(e.mode&1)!==0,s){case"dialog":Ze("cancel",n),Ze("close",n);break;case"iframe":case"object":case"embed":Ze("load",n);break;case"video":case"audio":for(i=0;i<Rl.length;i++)Ze(Rl[i],n);break;case"source":Ze("error",n);break;case"img":case"image":case"link":Ze("error",n),Ze("load",n);break;case"details":Ze("toggle",n);break;case"input":ab(n,a),Ze("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ze("invalid",n);break;case"textarea":lb(n,a),Ze("invalid",n)}Fp(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Wu(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Wu(n.textContent,l,t),i=["children",""+l]):uc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ze("scroll",n)}switch(s){case"input":zu(n),ob(n,a,!0);break;case"textarea":zu(n),cb(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Qd)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=YE(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[yn]=e,t[bc]=n,v2(t,e,!1,!1),e.stateNode=t;e:{switch(o=$p(s,n),s){case"dialog":Ze("cancel",t),Ze("close",t),i=n;break;case"iframe":case"object":case"embed":Ze("load",t),i=n;break;case"video":case"audio":for(i=0;i<Rl.length;i++)Ze(Rl[i],t);i=n;break;case"source":Ze("error",t),i=n;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),i=n;break;case"details":Ze("toggle",t),i=n;break;case"input":ab(t,n),i=Op(t,n),Ze("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ot({},n,{value:void 0}),Ze("invalid",t);break;case"textarea":lb(t,n),i=Bp(t,n),Ze("invalid",t);break;default:i=n}Fp(s,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?ZE(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&QE(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&dc(t,c):typeof c=="number"&&dc(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(uc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ze("scroll",t):c!=null&&I0(t,a,c,o))}switch(s){case"input":zu(t),ob(t,n,!1);break;case"textarea":zu(t),cb(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ri(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?ao(t,!!n.multiple,a,!1):n.defaultValue!=null&&ao(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Qd)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)w2(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ee(166));if(s=Hi(Nc.current),Hi(wn.current),qu(e)){if(n=e.stateNode,s=e.memoizedProps,n[yn]=e,(a=n.nodeValue!==s)&&(t=_s,t!==null))switch(t.tag){case 3:Wu(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wu(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[yn]=e,e.stateNode=n}return Wt(e),null;case 13:if(et(rt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Es!==null&&e.mode&1&&!(e.flags&128))zk(),bo(),e.flags|=98560,a=!1;else if(a=qu(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(ee(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ee(317));a[yn]=e}else bo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),a=!1}else en!==null&&(jg(en),en=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?kt===0&&(kt=3):hx())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return No(),pg(t,e),t===null&&yc(e.stateNode.containerInfo),Wt(e),null;case 10:return Y0(e.type._context),Wt(e),null;case 17:return fs(e.type)&&Xd(),Wt(e),null;case 19:if(et(rt),a=e.memoizedState,a===null)return Wt(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)jl(a,!1);else{if(kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rh(t),o!==null){for(e.flags|=128,jl(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return We(rt,rt.current&1|2),e.child}t=t.sibling}a.tail!==null&&gt()>Eo&&(e.flags|=128,n=!0,jl(a,!1),e.lanes=4194304)}else{if(!n)if(t=rh(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),jl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!st)return Wt(e),null}else 2*gt()-a.renderingStartTime>Eo&&s!==1073741824&&(e.flags|=128,n=!0,jl(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(s=a.last,s!==null?s.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=gt(),e.sibling=null,s=rt.current,We(rt,n?s&1|2:s&1),e):(Wt(e),null);case 22:case 23:return dx(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ws&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function yR(t,e){switch(K0(e),e.tag){case 1:return fs(e.type)&&Xd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return No(),et(ms),et(ts),ex(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return J0(e),null;case 13:if(et(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));bo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(rt),null;case 4:return No(),null;case 10:return Y0(e.type._context),null;case 22:case 23:return dx(),null;case 24:return null;default:return null}}var Xu=!1,Xt=!1,vR=typeof WeakSet=="function"?WeakSet:Set,le=null;function Za(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){dt(t,e,n)}else s.current=null}function gg(t,e,s){try{s()}catch(n){dt(t,e,n)}}var Zb=!1;function bR(t,e){if(Jp=Wd,t=_k(),$0(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,u=0,d=0,m=t,p=null;t:for(;;){for(var f;m!==s||i!==0&&m.nodeType!==3||(l=o+i),m!==a||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(f=m.firstChild)!==null;)p=m,m=f;for(;;){if(m===t)break t;if(p===s&&++u===i&&(l=o),p===a&&++d===n&&(c=o),(f=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=f}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(eg={focusedElem:t,selectionRange:s},Wd=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var S=x.memoizedProps,k=x.memoizedState,v=e.stateNode,_=v.getSnapshotBeforeUpdate(e.elementType===e.type?S:Zs(e.type,S),k);v.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(E){dt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return x=Zb,Zb=!1,x}function Yl(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&gg(e,s,a)}i=i.next}while(i!==n)}}function cm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function xg(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function N2(t){var e=t.alternate;e!==null&&(t.alternate=null,N2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yn],delete e[bc],delete e[ng],delete e[sR],delete e[nR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j2(t){return t.tag===5||t.tag===3||t.tag===4}function Jb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yg(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Qd));else if(n!==4&&(t=t.child,t!==null))for(yg(t,e,s),t=t.sibling;t!==null;)yg(t,e,s),t=t.sibling}function vg(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(vg(t,e,s),t=t.sibling;t!==null;)vg(t,e,s),t=t.sibling}var Dt=null,Js=!1;function _r(t,e,s){for(s=s.child;s!==null;)E2(t,e,s),s=s.sibling}function E2(t,e,s){if(bn&&typeof bn.onCommitFiberUnmount=="function")try{bn.onCommitFiberUnmount(tm,s)}catch{}switch(s.tag){case 5:Xt||Za(s,e);case 6:var n=Dt,i=Js;Dt=null,_r(t,e,s),Dt=n,Js=i,Dt!==null&&(Js?(t=Dt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):Dt.removeChild(s.stateNode));break;case 18:Dt!==null&&(Js?(t=Dt,s=s.stateNode,t.nodeType===8?Of(t.parentNode,s):t.nodeType===1&&Of(t,s),pc(t)):Of(Dt,s.stateNode));break;case 4:n=Dt,i=Js,Dt=s.stateNode.containerInfo,Js=!0,_r(t,e,s),Dt=n,Js=i;break;case 0:case 11:case 14:case 15:if(!Xt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&gg(s,e,o),i=i.next}while(i!==n)}_r(t,e,s);break;case 1:if(!Xt&&(Za(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){dt(s,e,l)}_r(t,e,s);break;case 21:_r(t,e,s);break;case 22:s.mode&1?(Xt=(n=Xt)||s.memoizedState!==null,_r(t,e,s),Xt=n):_r(t,e,s);break;default:_r(t,e,s)}}function ew(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new vR),e.forEach(function(n){var i=CR.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function Ys(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Dt=l.stateNode,Js=!1;break e;case 3:Dt=l.stateNode.containerInfo,Js=!0;break e;case 4:Dt=l.stateNode.containerInfo,Js=!0;break e}l=l.return}if(Dt===null)throw Error(ee(160));E2(a,o,i),Dt=null,Js=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){dt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k2(e,t),e=e.sibling}function k2(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ys(e,t),pn(t),n&4){try{Yl(3,t,t.return),cm(3,t)}catch(S){dt(t,t.return,S)}try{Yl(5,t,t.return)}catch(S){dt(t,t.return,S)}}break;case 1:Ys(e,t),pn(t),n&512&&s!==null&&Za(s,s.return);break;case 5:if(Ys(e,t),pn(t),n&512&&s!==null&&Za(s,s.return),t.flags&32){var i=t.stateNode;try{dc(i,"")}catch(S){dt(t,t.return,S)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=s!==null?s.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&WE(i,a),$p(l,o);var u=$p(l,a);for(o=0;o<c.length;o+=2){var d=c[o],m=c[o+1];d==="style"?ZE(i,m):d==="dangerouslySetInnerHTML"?QE(i,m):d==="children"?dc(i,m):I0(i,d,m,u)}switch(l){case"input":Vp(i,a);break;case"textarea":qE(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var f=a.value;f!=null?ao(i,!!a.multiple,f,!1):p!==!!a.multiple&&(a.defaultValue!=null?ao(i,!!a.multiple,a.defaultValue,!0):ao(i,!!a.multiple,a.multiple?[]:"",!1))}i[bc]=a}catch(S){dt(t,t.return,S)}}break;case 6:if(Ys(e,t),pn(t),n&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(S){dt(t,t.return,S)}}break;case 3:if(Ys(e,t),pn(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{pc(e.containerInfo)}catch(S){dt(t,t.return,S)}break;case 4:Ys(e,t),pn(t);break;case 13:Ys(e,t),pn(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(cx=gt())),n&4&&ew(t);break;case 22:if(d=s!==null&&s.memoizedState!==null,t.mode&1?(Xt=(u=Xt)||d,Ys(e,t),Xt=u):Ys(e,t),pn(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(le=t,d=t.child;d!==null;){for(m=le=d;le!==null;){switch(p=le,f=p.child,p.tag){case 0:case 11:case 14:case 15:Yl(4,p,p.return);break;case 1:Za(p,p.return);var x=p.stateNode;if(typeof x.componentWillUnmount=="function"){n=p,s=p.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(S){dt(n,s,S)}}break;case 5:Za(p,p.return);break;case 22:if(p.memoizedState!==null){sw(m);continue}}f!==null?(f.return=p,le=f):sw(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{i=m.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=XE("display",o))}catch(S){dt(t,t.return,S)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(S){dt(t,t.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ys(e,t),pn(t),n&4&&ew(t);break;case 21:break;default:Ys(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(j2(s)){var n=s;break e}s=s.return}throw Error(ee(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(dc(i,""),n.flags&=-33);var a=Jb(t);vg(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Jb(t);yg(t,l,o);break;default:throw Error(ee(161))}}catch(c){dt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function wR(t,e,s){le=t,_2(t)}function _2(t,e,s){for(var n=(t.mode&1)!==0;le!==null;){var i=le,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Xu;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Xt;l=Xu;var u=Xt;if(Xu=o,(Xt=c)&&!u)for(le=i;le!==null;)o=le,c=o.child,o.tag===22&&o.memoizedState!==null?nw(i):c!==null?(c.return=o,le=c):nw(i);for(;a!==null;)le=a,_2(a),a=a.sibling;le=i,Xu=l,Xt=u}tw(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,le=a):tw(t)}}function tw(t){for(;le!==null;){var e=le;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xt||cm(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Xt)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:Zs(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&zb(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}zb(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&pc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Xt||e.flags&512&&xg(e)}catch(p){dt(e,e.return,p)}}if(e===t){le=null;break}if(s=e.sibling,s!==null){s.return=e.return,le=s;break}le=e.return}}function sw(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var s=e.sibling;if(s!==null){s.return=e.return,le=s;break}le=e.return}}function nw(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{cm(4,e)}catch(c){dt(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){dt(e,i,c)}}var a=e.return;try{xg(e)}catch(c){dt(e,a,c)}break;case 5:var o=e.return;try{xg(e)}catch(c){dt(e,o,c)}}}catch(c){dt(e,e.return,c)}if(e===t){le=null;break}var l=e.sibling;if(l!==null){l.return=e.return,le=l;break}le=e.return}}var NR=Math.ceil,oh=dr.ReactCurrentDispatcher,ox=dr.ReactCurrentOwner,Bs=dr.ReactCurrentBatchConfig,De=0,At=null,wt=null,Vt=0,ws=0,Ja=mi(0),kt=0,_c=null,aa=0,um=0,lx=0,Ql=null,us=null,cx=0,Eo=1/0,Vn=null,lh=!1,bg=null,Qr=null,Zu=!1,Br=null,ch=0,Xl=0,wg=null,_d=-1,Sd=0;function as(){return De&6?gt():_d!==-1?_d:_d=gt()}function Xr(t){return t.mode&1?De&2&&Vt!==0?Vt&-Vt:iR.transition!==null?(Sd===0&&(Sd=uk()),Sd):(t=$e,t!==0||(t=window.event,t=t===void 0?16:xk(t.type)),t):1}function rn(t,e,s,n){if(50<Xl)throw Xl=0,wg=null,Error(ee(185));Qc(t,s,n),(!(De&2)||t!==At)&&(t===At&&(!(De&2)&&(um|=s),kt===4&&Dr(t,Vt)),ps(t,n),s===1&&De===0&&!(e.mode&1)&&(Eo=gt()+500,am&&fi()))}function ps(t,e){var s=t.callbackNode;iP(t,e);var n=Gd(t,t===At?Vt:0);if(n===0)s!==null&&hb(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&hb(s),e===1)t.tag===0?rR(rw.bind(null,t)):Mk(rw.bind(null,t)),eR(function(){!(De&6)&&fi()}),s=null;else{switch(dk(n)){case 1:s=L0;break;case 4:s=lk;break;case 16:s=Kd;break;case 536870912:s=ck;break;default:s=Kd}s=D2(s,S2.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function S2(t,e){if(_d=-1,Sd=0,De&6)throw Error(ee(327));var s=t.callbackNode;if(ho()&&t.callbackNode!==s)return null;var n=Gd(t,t===At?Vt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=uh(t,n);else{e=n;var i=De;De|=2;var a=C2();(At!==t||Vt!==e)&&(Vn=null,Eo=gt()+500,Qi(t,e));do try{kR();break}catch(l){T2(t,l)}while(!0);q0(),oh.current=a,De=i,wt!==null?e=0:(At=null,Vt=0,e=kt)}if(e!==0){if(e===2&&(i=qp(t),i!==0&&(n=i,e=Ng(t,i))),e===1)throw s=_c,Qi(t,0),Dr(t,n),ps(t,gt()),s;if(e===6)Dr(t,n);else{if(i=t.current.alternate,!(n&30)&&!jR(i)&&(e=uh(t,n),e===2&&(a=qp(t),a!==0&&(n=a,e=Ng(t,a))),e===1))throw s=_c,Qi(t,0),Dr(t,n),ps(t,gt()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(ee(345));case 2:Oi(t,us,Vn);break;case 3:if(Dr(t,n),(n&130023424)===n&&(e=cx+500-gt(),10<e)){if(Gd(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){as(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sg(Oi.bind(null,t,us,Vn),e);break}Oi(t,us,Vn);break;case 4:if(Dr(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-nn(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=gt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NR(n/1960))-n,10<n){t.timeoutHandle=sg(Oi.bind(null,t,us,Vn),n);break}Oi(t,us,Vn);break;case 5:Oi(t,us,Vn);break;default:throw Error(ee(329))}}}return ps(t,gt()),t.callbackNode===s?S2.bind(null,t):null}function Ng(t,e){var s=Ql;return t.current.memoizedState.isDehydrated&&(Qi(t,e).flags|=256),t=uh(t,e),t!==2&&(e=us,us=s,e!==null&&jg(e)),t}function jg(t){us===null?us=t:us.push.apply(us,t)}function jR(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!on(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dr(t,e){for(e&=~lx,e&=~um,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-nn(e),n=1<<s;t[s]=-1,e&=~n}}function rw(t){if(De&6)throw Error(ee(327));ho();var e=Gd(t,0);if(!(e&1))return ps(t,gt()),null;var s=uh(t,e);if(t.tag!==0&&s===2){var n=qp(t);n!==0&&(e=n,s=Ng(t,n))}if(s===1)throw s=_c,Qi(t,0),Dr(t,e),ps(t,gt()),s;if(s===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oi(t,us,Vn),ps(t,gt()),null}function ux(t,e){var s=De;De|=1;try{return t(e)}finally{De=s,De===0&&(Eo=gt()+500,am&&fi())}}function oa(t){Br!==null&&Br.tag===0&&!(De&6)&&ho();var e=De;De|=1;var s=Bs.transition,n=$e;try{if(Bs.transition=null,$e=1,t)return t()}finally{$e=n,Bs.transition=s,De=e,!(De&6)&&fi()}}function dx(){ws=Ja.current,et(Ja)}function Qi(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,JP(s)),wt!==null)for(s=wt.return;s!==null;){var n=s;switch(K0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xd();break;case 3:No(),et(ms),et(ts),ex();break;case 5:J0(n);break;case 4:No();break;case 13:et(rt);break;case 19:et(rt);break;case 10:Y0(n.type._context);break;case 22:case 23:dx()}s=s.return}if(At=t,wt=t=Zr(t.current,null),Vt=ws=e,kt=0,_c=null,lx=um=aa=0,us=Ql=null,$i!==null){for(e=0;e<$i.length;e++)if(s=$i[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}s.pending=n}$i=null}return t}function T2(t,e){do{var s=wt;try{if(q0(),jd.current=ah,ih){for(var n=at.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ih=!1}if(ia=0,It=Et=at=null,ql=!1,jc=0,ox.current=null,s===null||s.return===null){kt=1,_c=e,wt=null;break}e:{var a=t,o=s.return,l=s,c=e;if(e=Vt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=Kb(o);if(f!==null){f.flags&=-257,Gb(f,o,l,a,e),f.mode&1&&Hb(a,u,e),e=f,c=u;var x=e.updateQueue;if(x===null){var S=new Set;S.add(c),e.updateQueue=S}else x.add(c);break e}else{if(!(e&1)){Hb(a,u,e),hx();break e}c=Error(ee(426))}}else if(st&&l.mode&1){var k=Kb(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Gb(k,o,l,a,e),G0(jo(c,l));break e}}a=c=jo(c,l),kt!==4&&(kt=2),Ql===null?Ql=[a]:Ql.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=d2(a,c,e);Vb(a,v);break e;case 1:l=c;var _=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Qr===null||!Qr.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var E=h2(a,l,e);Vb(a,E);break e}}a=a.return}while(a!==null)}A2(s)}catch(T){e=T,wt===s&&s!==null&&(wt=s=s.return);continue}break}while(!0)}function C2(){var t=oh.current;return oh.current=ah,t===null?ah:t}function hx(){(kt===0||kt===3||kt===2)&&(kt=4),At===null||!(aa&268435455)&&!(um&268435455)||Dr(At,Vt)}function uh(t,e){var s=De;De|=2;var n=C2();(At!==t||Vt!==e)&&(Vn=null,Qi(t,e));do try{ER();break}catch(i){T2(t,i)}while(!0);if(q0(),De=s,oh.current=n,wt!==null)throw Error(ee(261));return At=null,Vt=0,kt}function ER(){for(;wt!==null;)I2(wt)}function kR(){for(;wt!==null&&!QA();)I2(wt)}function I2(t){var e=R2(t.alternate,t,ws);t.memoizedProps=t.pendingProps,e===null?A2(t):wt=e,ox.current=null}function A2(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=yR(s,e),s!==null){s.flags&=32767,wt=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kt=6,wt=null;return}}else if(s=xR(s,e,ws),s!==null){wt=s;return}if(e=e.sibling,e!==null){wt=e;return}wt=e=t}while(e!==null);kt===0&&(kt=5)}function Oi(t,e,s){var n=$e,i=Bs.transition;try{Bs.transition=null,$e=1,_R(t,e,s,n)}finally{Bs.transition=i,$e=n}return null}function _R(t,e,s,n){do ho();while(Br!==null);if(De&6)throw Error(ee(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(aP(t,a),t===At&&(wt=At=null,Vt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Zu||(Zu=!0,D2(Kd,function(){return ho(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Bs.transition,Bs.transition=null;var o=$e;$e=1;var l=De;De|=4,ox.current=null,bR(t,s),k2(s,t),GP(eg),Wd=!!Jp,eg=Jp=null,t.current=s,wR(s),XA(),De=l,$e=o,Bs.transition=a}else t.current=s;if(Zu&&(Zu=!1,Br=t,ch=i),a=t.pendingLanes,a===0&&(Qr=null),eP(s.stateNode),ps(t,gt()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(lh)throw lh=!1,t=bg,bg=null,t;return ch&1&&t.tag!==0&&ho(),a=t.pendingLanes,a&1?t===wg?Xl++:(Xl=0,wg=t):Xl=0,fi(),null}function ho(){if(Br!==null){var t=dk(ch),e=Bs.transition,s=$e;try{if(Bs.transition=null,$e=16>t?16:t,Br===null)var n=!1;else{if(t=Br,Br=null,ch=0,De&6)throw Error(ee(331));var i=De;for(De|=4,le=t.current;le!==null;){var a=le,o=a.child;if(le.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(le=u;le!==null;){var d=le;switch(d.tag){case 0:case 11:case 15:Yl(8,d,a)}var m=d.child;if(m!==null)m.return=d,le=m;else for(;le!==null;){d=le;var p=d.sibling,f=d.return;if(N2(d),d===u){le=null;break}if(p!==null){p.return=f,le=p;break}le=f}}}var x=a.alternate;if(x!==null){var S=x.child;if(S!==null){x.child=null;do{var k=S.sibling;S.sibling=null,S=k}while(S!==null)}}le=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,le=o;else e:for(;le!==null;){if(a=le,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Yl(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,le=v;break e}le=a.return}}var _=t.current;for(le=_;le!==null;){o=le;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,le=w;else e:for(o=_;le!==null;){if(l=le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:cm(9,l)}}catch(T){dt(l,l.return,T)}if(l===o){le=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,le=E;break e}le=l.return}}if(De=i,fi(),bn&&typeof bn.onPostCommitFiberRoot=="function")try{bn.onPostCommitFiberRoot(tm,t)}catch{}n=!0}return n}finally{$e=s,Bs.transition=e}}return!1}function iw(t,e,s){e=jo(s,e),e=d2(t,e,1),t=Yr(t,e,1),e=as(),t!==null&&(Qc(t,1,e),ps(t,e))}function dt(t,e,s){if(t.tag===3)iw(t,t,s);else for(;e!==null;){if(e.tag===3){iw(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Qr===null||!Qr.has(n))){t=jo(s,t),t=h2(e,t,1),e=Yr(e,t,1),t=as(),e!==null&&(Qc(e,1,t),ps(e,t));break}}e=e.return}}function SR(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=as(),t.pingedLanes|=t.suspendedLanes&s,At===t&&(Vt&s)===s&&(kt===4||kt===3&&(Vt&130023424)===Vt&&500>gt()-cx?Qi(t,0):lx|=s),ps(t,e)}function P2(t,e){e===0&&(t.mode&1?(e=Fu,Fu<<=1,!(Fu&130023424)&&(Fu=4194304)):e=1);var s=as();t=er(t,e),t!==null&&(Qc(t,e,s),ps(t,s))}function TR(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),P2(t,s)}function CR(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(e),P2(t,s)}var R2;R2=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||ms.current)hs=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return hs=!1,gR(t,e,s);hs=!!(t.flags&131072)}else hs=!1,st&&e.flags&1048576&&Ok(e,eh,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;kd(t,e),t=e.pendingProps;var i=vo(e,ts.current);uo(e,s),i=sx(null,e,n,t,i,s);var a=nx();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,fs(n)?(a=!0,Zd(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X0(e),i.updater=lm,e.stateNode=i,i._reactInternals=e,cg(e,n,t,s),e=hg(null,e,n,!0,a,s)):(e.tag=0,st&&a&&H0(e),rs(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch(kd(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=AR(n),t=Zs(n,t),i){case 0:e=dg(null,e,n,t,s);break e;case 1:e=Yb(null,e,n,t,s);break e;case 11:e=Wb(null,e,n,t,s);break e;case 14:e=qb(null,e,n,Zs(n.type,t),s);break e}throw Error(ee(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zs(n,i),dg(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zs(n,i),Yb(t,e,n,i,s);case 3:e:{if(g2(e),t===null)throw Error(ee(387));n=e.pendingProps,a=e.memoizedState,i=a.element,$k(t,e),nh(e,n,null,s);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=jo(Error(ee(423)),e),e=Qb(t,e,n,s,i);break e}else if(n!==i){i=jo(Error(ee(424)),e),e=Qb(t,e,n,s,i);break e}else for(Es=qr(e.stateNode.containerInfo.firstChild),_s=e,st=!0,en=null,s=Uk(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(bo(),n===i){e=tr(t,e,s);break e}rs(t,e,n,s)}e=e.child}return e;case 5:return Hk(e),t===null&&ag(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,tg(n,i)?o=null:a!==null&&tg(n,a)&&(e.flags|=32),p2(t,e),rs(t,e,o,s),e.child;case 6:return t===null&&ag(e),null;case 13:return x2(t,e,s);case 4:return Z0(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=wo(e,null,n,s):rs(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zs(n,i),Wb(t,e,n,i,s);case 7:return rs(t,e,e.pendingProps,s),e.child;case 8:return rs(t,e,e.pendingProps.children,s),e.child;case 12:return rs(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,We(th,n._currentValue),n._currentValue=o,a!==null)if(on(a.value,o)){if(a.children===i.children&&!ms.current){e=tr(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Gn(-1,s&-s),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),og(a.return,s,e),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ee(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),og(o,s,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}rs(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,uo(e,s),i=$s(i),n=n(i),e.flags|=1,rs(t,e,n,s),e.child;case 14:return n=e.type,i=Zs(n,e.pendingProps),i=Zs(n.type,i),qb(t,e,n,i,s);case 15:return m2(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Zs(n,i),kd(t,e),e.tag=1,fs(n)?(t=!0,Zd(e)):t=!1,uo(e,s),u2(e,n,i),cg(e,n,i,s),hg(null,e,n,!0,t,s);case 19:return y2(t,e,s);case 22:return f2(t,e,s)}throw Error(ee(156,e.tag))};function D2(t,e){return ok(t,e)}function IR(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(t,e,s,n){return new IR(t,e,s,n)}function mx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AR(t){if(typeof t=="function")return mx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===P0)return 11;if(t===R0)return 14}return 2}function Zr(t,e){var s=t.alternate;return s===null?(s=zs(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Td(t,e,s,n,i,a){var o=2;if(n=t,typeof t=="function")mx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $a:return Xi(s.children,i,a,e);case A0:o=8,i|=8;break;case Rp:return t=zs(12,s,e,i|2),t.elementType=Rp,t.lanes=a,t;case Dp:return t=zs(13,s,e,i),t.elementType=Dp,t.lanes=a,t;case Lp:return t=zs(19,s,e,i),t.elementType=Lp,t.lanes=a,t;case HE:return dm(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FE:o=10;break e;case $E:o=9;break e;case P0:o=11;break e;case R0:o=14;break e;case Ir:o=16,n=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=zs(o,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Xi(t,e,s,n){return t=zs(7,t,n,e),t.lanes=s,t}function dm(t,e,s,n){return t=zs(22,t,n,e),t.elementType=HE,t.lanes=s,t.stateNode={isHidden:!1},t}function Kf(t,e,s){return t=zs(6,t,null,e),t.lanes=s,t}function Gf(t,e,s){return e=zs(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PR(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_f(0),this.expirationTimes=_f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_f(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fx(t,e,s,n,i,a,o,l,c){return t=new PR(t,e,s,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=zs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},X0(a),t}function RR(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fa,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function L2(t){if(!t)return ii;t=t._reactInternals;e:{if(ya(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(fs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var s=t.type;if(fs(s))return Lk(t,s,e)}return e}function M2(t,e,s,n,i,a,o,l,c){return t=fx(s,n,!0,t,i,a,o,l,c),t.context=L2(null),s=t.current,n=as(),i=Xr(s),a=Gn(n,i),a.callback=e??null,Yr(s,a,i),t.current.lanes=i,Qc(t,i,n),ps(t,n),t}function hm(t,e,s,n){var i=e.current,a=as(),o=Xr(i);return s=L2(s),e.context===null?e.context=s:e.pendingContext=s,e=Gn(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Yr(i,e,o),t!==null&&(rn(t,i,o,a),Nd(t,i,o)),o}function dh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function px(t,e){aw(t,e),(t=t.alternate)&&aw(t,e)}function DR(){return null}var O2=typeof reportError=="function"?reportError:function(t){console.error(t)};function gx(t){this._internalRoot=t}mm.prototype.render=gx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));hm(t,e,null,null)};mm.prototype.unmount=gx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oa(function(){hm(null,t,null,null)}),e[Jn]=null}};function mm(t){this._internalRoot=t}mm.prototype.unstable_scheduleHydration=function(t){if(t){var e=fk();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Rr.length&&e!==0&&e<Rr[s].priority;s++);Rr.splice(s,0,t),s===0&&gk(t)}};function xx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ow(){}function LR(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=dh(o);a.call(u)}}var o=M2(e,n,t,0,null,!1,!1,"",ow);return t._reactRootContainer=o,t[Jn]=o.current,yc(t.nodeType===8?t.parentNode:t),oa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=dh(c);l.call(u)}}var c=fx(t,0,!1,null,null,!1,!1,"",ow);return t._reactRootContainer=c,t[Jn]=c.current,yc(t.nodeType===8?t.parentNode:t),oa(function(){hm(e,c,s,n)}),c}function pm(t,e,s,n,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=dh(o);l.call(c)}}hm(e,o,t,i)}else o=LR(s,e,t,i,n);return dh(o)}hk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Pl(e.pendingLanes);s!==0&&(M0(e,s|1),ps(e,gt()),!(De&6)&&(Eo=gt()+500,fi()))}break;case 13:oa(function(){var n=er(t,1);if(n!==null){var i=as();rn(n,t,1,i)}}),px(t,1)}};O0=function(t){if(t.tag===13){var e=er(t,134217728);if(e!==null){var s=as();rn(e,t,134217728,s)}px(t,134217728)}};mk=function(t){if(t.tag===13){var e=Xr(t),s=er(t,e);if(s!==null){var n=as();rn(s,t,e,n)}px(t,e)}};fk=function(){return $e};pk=function(t,e){var s=$e;try{return $e=t,e()}finally{$e=s}};Kp=function(t,e,s){switch(e){case"input":if(Vp(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=im(n);if(!i)throw Error(ee(90));GE(n),Vp(n,i)}}}break;case"textarea":qE(t,s);break;case"select":e=s.value,e!=null&&ao(t,!!s.multiple,e,!1)}};tk=ux;sk=oa;var MR={usingClientEntryPoint:!1,Events:[Zc,Wa,im,JE,ek,ux]},El={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OR={bundleType:El.bundleType,version:El.version,rendererPackageName:El.rendererPackageName,rendererConfig:El.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ik(t),t===null?null:t.stateNode},findFiberByHostInstance:El.findFiberByHostInstance||DR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{tm=Ju.inject(OR),bn=Ju}catch{}}As.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MR;As.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xx(e))throw Error(ee(200));return RR(t,e,null,s)};As.createRoot=function(t,e){if(!xx(t))throw Error(ee(299));var s=!1,n="",i=O2;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fx(t,1,!1,null,null,s,!1,n,i),t[Jn]=e.current,yc(t.nodeType===8?t.parentNode:t),new gx(e)};As.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=ik(e),t=t===null?null:t.stateNode,t};As.flushSync=function(t){return oa(t)};As.hydrate=function(t,e,s){if(!fm(e))throw Error(ee(200));return pm(null,t,e,!0,s)};As.hydrateRoot=function(t,e,s){if(!xx(t))throw Error(ee(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",o=O2;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=M2(e,null,t,1,s??null,i,!1,a,o),t[Jn]=e.current,yc(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new mm(e)};As.render=function(t,e,s){if(!fm(e))throw Error(ee(200));return pm(null,t,e,!1,s)};As.unmountComponentAtNode=function(t){if(!fm(t))throw Error(ee(40));return t._reactRootContainer?(oa(function(){pm(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};As.unstable_batchedUpdates=ux;As.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!fm(s))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return pm(t,e,s,!1,n)};As.version="18.3.1-next-f1338f8080-20240426";function V2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(V2)}catch(t){console.error(t)}}V2(),VE.exports=As;var va=VE.exports,lw=va;Ap.createRoot=lw.createRoot,Ap.hydrateRoot=lw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sc(){return Sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Sc.apply(this,arguments)}var Ur;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ur||(Ur={}));const cw="popstate";function VR(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:o,hash:l}=n.location;return Eg("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:hh(i)}return BR(e,s,null,t)}function xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function z2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zR(){return Math.random().toString(36).substr(2,8)}function uw(t,e){return{usr:t.state,key:t.key,idx:e}}function Eg(t,e,s,n){return s===void 0&&(s=null),Sc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ko(e):e,{state:s,key:e&&e.key||n||zR()})}function hh(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ko(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function BR(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=Ur.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Sc({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function m(){l=Ur.Pop;let k=d(),v=k==null?null:k-u;u=k,c&&c({action:l,location:S.location,delta:v})}function p(k,v){l=Ur.Push;let _=Eg(S.location,k,v);u=d()+1;let w=uw(_,u),E=S.createHref(_);try{o.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}a&&c&&c({action:l,location:S.location,delta:1})}function f(k,v){l=Ur.Replace;let _=Eg(S.location,k,v);u=d();let w=uw(_,u),E=S.createHref(_);o.replaceState(w,"",E),a&&c&&c({action:l,location:S.location,delta:0})}function x(k){let v=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof k=="string"?k:hh(k);return _=_.replace(/ $/,"%20"),xt(v,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,v)}let S={get action(){return l},get location(){return t(i,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(cw,m),c=k,()=>{i.removeEventListener(cw,m),c=null}},createHref(k){return e(i,k)},createURL:x,encodeLocation(k){let v=x(k);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:f,go(k){return o.go(k)}};return S}var dw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dw||(dw={}));function UR(t,e,s){return s===void 0&&(s="/"),FR(t,e,s)}function FR(t,e,s,n){let i=typeof e=="string"?Ko(e):e,a=yx(i.pathname||"/",s);if(a==null)return null;let o=B2(t);$R(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=tD(a);l=ZR(o[c],u)}return l}function B2(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Jr([n,c.relativePath]),d=s.concat(c);a.children&&a.children.length>0&&(xt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),B2(a.children,e,d,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:QR(u,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of U2(a.path))i(a,o,c)}),e}function U2(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=U2(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function $R(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:XR(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const HR=/^:[\w-]+$/,KR=3,GR=2,WR=1,qR=10,YR=-2,hw=t=>t==="*";function QR(t,e){let s=t.split("/"),n=s.length;return s.some(hw)&&(n+=YR),e&&(n+=GR),s.filter(i=>!hw(i)).reduce((i,a)=>i+(HR.test(a)?KR:a===""?WR:qR),n)}function XR(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function ZR(t,e,s){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?e:e.slice(a.length)||"/",m=JR({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),p=c.route;if(!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Jr([a,m.pathname]),pathnameBase:iD(Jr([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Jr([a,m.pathnameBase]))}return o}function JR(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=eD(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,d,m)=>{let{paramName:p,isOptional:f}=d;if(p==="*"){let S=l[m]||"";o=a.slice(0,a.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[m];return f&&!x?u[p]=void 0:u[p]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function eD(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),z2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function tD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return z2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function sD(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?Ko(t):t;return{pathname:s?s.startsWith("/")?s:nD(s,e):e,search:aD(n),hash:oD(i)}}function nD(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Wf(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rD(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function vx(t,e){let s=rD(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function bx(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Ko(t):(i=Sc({},t),xt(!i.pathname||!i.pathname.includes("?"),Wf("?","pathname","search",i)),xt(!i.pathname||!i.pathname.includes("#"),Wf("#","pathname","hash",i)),xt(!i.search||!i.search.includes("#"),Wf("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=s;else{let m=e.length-1;if(!n&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;i.pathname=p.join("/")}l=m>=0?e[m]:"/"}let c=sD(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Jr=t=>t.join("/").replace(/\/\/+/g,"/"),iD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),aD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function lD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const F2=["post","put","patch","delete"];new Set(F2);const cD=["get",...F2];new Set(cD);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Tc.apply(this,arguments)}const wx=g.createContext(null),uD=g.createContext(null),pi=g.createContext(null),gm=g.createContext(null),hr=g.createContext({outlet:null,matches:[],isDataRoute:!1}),$2=g.createContext(null);function dD(t,e){let{relative:s}=e===void 0?{}:e;Go()||xt(!1);let{basename:n,navigator:i}=g.useContext(pi),{hash:a,pathname:o,search:l}=K2(t,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:Jr([n,o])),i.createHref({pathname:c,search:l,hash:a})}function Go(){return g.useContext(gm)!=null}function mn(){return Go()||xt(!1),g.useContext(gm).location}function H2(t){g.useContext(pi).static||g.useLayoutEffect(t)}function ys(){let{isDataRoute:t}=g.useContext(hr);return t?_D():hD()}function hD(){Go()||xt(!1);let t=g.useContext(wx),{basename:e,future:s,navigator:n}=g.useContext(pi),{matches:i}=g.useContext(hr),{pathname:a}=mn(),o=JSON.stringify(vx(i,s.v7_relativeSplatPath)),l=g.useRef(!1);return H2(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let m=bx(u,JSON.parse(o),a,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Jr([e,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[e,n,o,a,t])}const mD=g.createContext(null);function fD(t){let e=g.useContext(hr).outlet;return e&&g.createElement(mD.Provider,{value:t},e)}function K2(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=g.useContext(pi),{matches:i}=g.useContext(hr),{pathname:a}=mn(),o=JSON.stringify(vx(i,n.v7_relativeSplatPath));return g.useMemo(()=>bx(t,JSON.parse(o),a,s==="path"),[t,o,a,s])}function pD(t,e){return gD(t,e)}function gD(t,e,s,n){Go()||xt(!1);let{navigator:i}=g.useContext(pi),{matches:a}=g.useContext(hr),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=mn(),d;if(e){var m;let k=typeof e=="string"?Ko(e):e;c==="/"||(m=k.pathname)!=null&&m.startsWith(c)||xt(!1),d=k}else d=u;let p=d.pathname||"/",f=p;if(c!=="/"){let k=c.replace(/^\//,"").split("/");f="/"+p.replace(/^\//,"").split("/").slice(k.length).join("/")}let x=UR(t,{pathname:f}),S=wD(x&&x.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:Jr([c,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:Jr([c,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),a,s,n);return e&&S?g.createElement(gm.Provider,{value:{location:Tc({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Ur.Pop}},S):S}function xD(){let t=kD(),e=lD(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},e),s?g.createElement("pre",{style:i},s):null,null)}const yD=g.createElement(xD,null);class vD extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?g.createElement(hr.Provider,{value:this.props.routeContext},g.createElement($2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bD(t){let{routeContext:e,match:s,children:n}=t,i=g.useContext(wx);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),g.createElement(hr.Provider,{value:e},n)}function wD(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var a;if(!s)return null;if(s.errors)t=s.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,l=(i=s)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);d>=0||xt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:p,errors:f}=s,x=m.route.loader&&p[m.route.id]===void 0&&(!f||f[m.route.id]===void 0);if(m.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,m,p)=>{let f,x=!1,S=null,k=null;s&&(f=l&&m.route.id?l[m.route.id]:void 0,S=m.route.errorElement||yD,c&&(u<0&&p===0?(SD("route-fallback"),x=!0,k=null):u===p&&(x=!0,k=m.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),_=()=>{let w;return f?w=S:x?w=k:m.route.Component?w=g.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=d,g.createElement(bD,{match:m,routeContext:{outlet:d,matches:v,isDataRoute:s!=null},children:w})};return s&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?g.createElement(vD,{location:s.location,revalidation:s.revalidation,component:S,error:f,children:_(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):_()},null)}var G2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(G2||{}),W2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(W2||{});function ND(t){let e=g.useContext(wx);return e||xt(!1),e}function jD(t){let e=g.useContext(uD);return e||xt(!1),e}function ED(t){let e=g.useContext(hr);return e||xt(!1),e}function q2(t){let e=ED(),s=e.matches[e.matches.length-1];return s.route.id||xt(!1),s.route.id}function kD(){var t;let e=g.useContext($2),s=jD(),n=q2();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function _D(){let{router:t}=ND(G2.UseNavigateStable),e=q2(W2.UseNavigateStable),s=g.useRef(!1);return H2(()=>{s.current=!0}),g.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Tc({fromRouteId:e},a)))},[t,e])}const mw={};function SD(t,e,s){mw[t]||(mw[t]=!0)}function TD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vn(t){let{to:e,replace:s,state:n,relative:i}=t;Go()||xt(!1);let{future:a,static:o}=g.useContext(pi),{matches:l}=g.useContext(hr),{pathname:c}=mn(),u=ys(),d=bx(e,vx(l,a.v7_relativeSplatPath),c,i==="path"),m=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(m),{replace:s,state:n,relative:i}),[u,m,i,s,n]),null}function xm(t){return fD(t.context)}function Oe(t){xt(!1)}function CD(t){let{basename:e="/",children:s=null,location:n,navigationType:i=Ur.Pop,navigator:a,static:o=!1,future:l}=t;Go()&&xt(!1);let c=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:a,static:o,future:Tc({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=Ko(n));let{pathname:d="/",search:m="",hash:p="",state:f=null,key:x="default"}=n,S=g.useMemo(()=>{let k=yx(d,c);return k==null?null:{location:{pathname:k,search:m,hash:p,state:f,key:x},navigationType:i}},[c,d,m,p,f,x,i]);return S==null?null:g.createElement(pi.Provider,{value:u},g.createElement(gm.Provider,{children:s,value:S}))}function ID(t){let{children:e,location:s}=t;return pD(kg(e),s)}new Promise(()=>{});function kg(t,e){e===void 0&&(e=[]);let s=[];return g.Children.forEach(t,(n,i)=>{if(!g.isValidElement(n))return;let a=[...e,i];if(n.type===g.Fragment){s.push.apply(s,kg(n.props.children,a));return}n.type!==Oe&&xt(!1),!n.props.index||!n.props.children||xt(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=kg(n.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _g(){return _g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},_g.apply(this,arguments)}function AD(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function PD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function RD(t,e){return t.button===0&&(!e||e==="_self")&&!PD(t)}const DD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],LD="6";try{window.__reactRouterVersion=LD}catch{}const MD="startTransition",fw=SA[MD];function OD(t){let{basename:e,children:s,future:n,window:i}=t,a=g.useRef();a.current==null&&(a.current=VR({window:i,v5Compat:!0}));let o=a.current,[l,c]=g.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=g.useCallback(m=>{u&&fw?fw(()=>c(m)):c(m)},[c,u]);return g.useLayoutEffect(()=>o.listen(d),[o,d]),g.useEffect(()=>TD(n),[n]),g.createElement(CD,{basename:e,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const VD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qe=g.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:m}=e,p=AD(e,DD),{basename:f}=g.useContext(pi),x,S=!1;if(typeof u=="string"&&zD.test(u)&&(x=u,VD))try{let w=new URL(window.location.href),E=u.startsWith("//")?new URL(w.protocol+u):new URL(u),T=yx(E.pathname,f);E.origin===w.origin&&T!=null?u=T+E.search+E.hash:S=!0}catch{}let k=dD(u,{relative:i}),v=BD(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:m});function _(w){n&&n(w),w.defaultPrevented||v(w)}return g.createElement("a",_g({},p,{href:x||k,onClick:S||a?n:_,ref:s,target:c}))});var pw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(pw||(pw={}));var gw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gw||(gw={}));function BD(t,e){let{target:s,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=ys(),u=mn(),d=K2(t,{relative:o});return g.useCallback(m=>{if(RD(m,s)){m.preventDefault();let p=n!==void 0?n:hh(u)===hh(d);c(t,{replace:p,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,n,i,s,t,a,o,l])}let UD={data:""},FD=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||UD,$D=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,HD=/\/\*[^]*?\*\/|  +/g,xw=/\n+/g,Lr=(t,e)=>{let s="",n="",i="";for(let a in t){let o=t[a];a[0]=="@"?a[1]=="i"?s=a+" "+o+";":n+=a[1]=="f"?Lr(o,a):a+"{"+Lr(o,a[1]=="k"?"":e)+"}":typeof o=="object"?n+=Lr(o,e?e.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):o!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Lr.p?Lr.p(a,o):a+":"+o+";")}return s+(e&&i?e+"{"+i+"}":i)+n},On={},Y2=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+Y2(t[s]);return e}return t},KD=(t,e,s,n,i)=>{let a=Y2(t),o=On[a]||(On[a]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(a));if(!On[o]){let c=a!==t?t:(u=>{let d,m,p=[{}];for(;d=$D.exec(u.replace(HD,""));)d[4]?p.shift():d[3]?(m=d[3].replace(xw," ").trim(),p.unshift(p[0][m]=p[0][m]||{})):p[0][d[1]]=d[2].replace(xw," ").trim();return p[0]})(t);On[o]=Lr(i?{["@keyframes "+o]:c}:c,s?"":"."+o)}let l=s&&On.g?On.g:null;return s&&(On.g=On[o]),((c,u,d,m)=>{m?u.data=u.data.replace(m,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(On[o],e,n,l),o},GD=(t,e,s)=>t.reduce((n,i,a)=>{let o=e[a];if(o&&o.call){let l=o(s),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Lr(l,""):l===!1?"":l}return n+i+(o??"")},"");function ym(t){let e=this||{},s=t.call?t(e.p):t;return KD(s.unshift?s.raw?GD(s,[].slice.call(arguments,1),e.p):s.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):s,FD(e.target),e.g,e.o,e.k)}let Q2,Sg,Tg;ym.bind({g:1});let sr=ym.bind({k:1});function WD(t,e,s,n){Lr.p=e,Q2=t,Sg=s,Tg=n}function gi(t,e){let s=this||{};return function(){let n=arguments;function i(a,o){let l=Object.assign({},a),c=l.className||i.className;s.p=Object.assign({theme:Sg&&Sg()},l),s.o=/ *go\d+/.test(c),l.className=ym.apply(s,n)+(c?" "+c:"");let u=t;return t[0]&&(u=l.as||t,delete l.as),Tg&&u[0]&&Tg(l),Q2(u,l)}return i}}var qD=t=>typeof t=="function",mh=(t,e)=>qD(t)?t(e):t,YD=(()=>{let t=0;return()=>(++t).toString()})(),X2=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),QD=20,Z2=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,QD)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:s}=e;return Z2(t,{type:t.toasts.find(a=>a.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=e;return{...t,toasts:t.toasts.map(a=>a.id===n||n===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let i=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+i}))}}},Cd=[],Ki={toasts:[],pausedAt:void 0},ba=t=>{Ki=Z2(Ki,t),Cd.forEach(e=>{e(Ki)})},XD={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ZD=(t={})=>{let[e,s]=g.useState(Ki),n=g.useRef(Ki);g.useEffect(()=>(n.current!==Ki&&s(Ki),Cd.push(s),()=>{let a=Cd.indexOf(s);a>-1&&Cd.splice(a,1)}),[]);let i=e.toasts.map(a=>{var o,l,c;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((o=t[a.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((l=t[a.type])==null?void 0:l.duration)||(t==null?void 0:t.duration)||XD[a.type],style:{...t.style,...(c=t[a.type])==null?void 0:c.style,...a.style}}});return{...e,toasts:i}},JD=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||YD()}),eu=t=>(e,s)=>{let n=JD(e,t,s);return ba({type:2,toast:n}),n.id},is=(t,e)=>eu("blank")(t,e);is.error=eu("error");is.success=eu("success");is.loading=eu("loading");is.custom=eu("custom");is.dismiss=t=>{ba({type:3,toastId:t})};is.remove=t=>ba({type:4,toastId:t});is.promise=(t,e,s)=>{let n=is.loading(e.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let a=e.success?mh(e.success,i):void 0;return a?is.success(a,{id:n,...s,...s==null?void 0:s.success}):is.dismiss(n),i}).catch(i=>{let a=e.error?mh(e.error,i):void 0;a?is.error(a,{id:n,...s,...s==null?void 0:s.error}):is.dismiss(n)}),t};var eL=(t,e)=>{ba({type:1,toast:{id:t,height:e}})},tL=()=>{ba({type:5,time:Date.now()})},Zl=new Map,sL=1e3,nL=(t,e=sL)=>{if(Zl.has(t))return;let s=setTimeout(()=>{Zl.delete(t),ba({type:4,toastId:t})},e);Zl.set(t,s)},rL=t=>{let{toasts:e,pausedAt:s}=ZD(t);g.useEffect(()=>{if(s)return;let a=Date.now(),o=e.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&is.dismiss(l.id);return}return setTimeout(()=>is.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[e,s]);let n=g.useCallback(()=>{s&&ba({type:6,time:Date.now()})},[s]),i=g.useCallback((a,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=e.filter(f=>(f.position||u)===(a.position||u)&&f.height),m=d.findIndex(f=>f.id===a.id),p=d.filter((f,x)=>x<m&&f.visible).length;return d.filter(f=>f.visible).slice(...l?[p+1]:[0,p]).reduce((f,x)=>f+(x.height||0)+c,0)},[e]);return g.useEffect(()=>{e.forEach(a=>{if(a.dismissed)nL(a.id,a.removeDelay);else{let o=Zl.get(a.id);o&&(clearTimeout(o),Zl.delete(a.id))}})},[e]),{toasts:e,handlers:{updateHeight:eL,startPause:tL,endPause:n,calculateOffset:i}}},iL=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,aL=sr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,oL=sr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,lL=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${iL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${aL} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${oL} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,cL=sr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,uL=gi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${cL} 1s linear infinite;
`,dL=sr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,hL=sr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,mL=gi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${dL} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${hL} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,fL=gi("div")`
  position: absolute;
`,pL=gi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,gL=sr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xL=gi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${gL} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,yL=({toast:t})=>{let{icon:e,type:s,iconTheme:n}=t;return e!==void 0?typeof e=="string"?g.createElement(xL,null,e):e:s==="blank"?null:g.createElement(pL,null,g.createElement(uL,{...n}),s!=="loading"&&g.createElement(fL,null,s==="error"?g.createElement(lL,{...n}):g.createElement(mL,{...n})))},vL=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,bL=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,wL="0%{opacity:0;} 100%{opacity:1;}",NL="0%{opacity:1;} 100%{opacity:0;}",jL=gi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,EL=gi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,kL=(t,e)=>{let s=t.includes("top")?1:-1,[n,i]=X2()?[wL,NL]:[vL(s),bL(s)];return{animation:e?`${sr(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${sr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},_L=g.memo(({toast:t,position:e,style:s,children:n})=>{let i=t.height?kL(t.position||e||"top-center",t.visible):{opacity:0},a=g.createElement(yL,{toast:t}),o=g.createElement(EL,{...t.ariaProps},mh(t.message,t));return g.createElement(jL,{className:t.className,style:{...i,...s,...t.style}},typeof n=="function"?n({icon:a,message:o}):g.createElement(g.Fragment,null,a,o))});WD(g.createElement);var SL=({id:t,className:e,style:s,onHeightUpdate:n,children:i})=>{let a=g.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(t,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return g.createElement("div",{ref:a,className:e,style:s},i)},TL=(t,e)=>{let s=t.includes("top"),n=s?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:X2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(s?1:-1)}px)`,...n,...i}},CL=ym`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,ed=16,IL=({reverseOrder:t,position:e="top-center",toastOptions:s,gutter:n,children:i,containerStyle:a,containerClassName:o})=>{let{toasts:l,handlers:c}=rL(s);return g.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:ed,left:ed,right:ed,bottom:ed,pointerEvents:"none",...a},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||e,m=c.calculateOffset(u,{reverseOrder:t,gutter:n,defaultPosition:e}),p=TL(d,m);return g.createElement(SL,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?CL:"",style:p},u.type==="custom"?mh(u.message,u):i?i(u):g.createElement(_L,{toast:u,position:d}))}))},ce=is,yw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e[s++]=i:i<2048?(e[s++]=i>>6|192,e[s++]=i&63|128):(i&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=i>>18|240,e[s++]=i>>12&63|128,e[s++]=i>>6&63|128,e[s++]=i&63|128):(e[s++]=i>>12|224,e[s++]=i>>6&63|128,e[s++]=i&63|128)}return e},AL=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const i=t[s++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[s++];e[n++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[s++],o=t[s++],l=t[s++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const a=t[s++],o=t[s++];e[n++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},e_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=a>>2,m=(a&3)<<4|l>>4;let p=(l&15)<<2|u>>6,f=u&63;c||(f=64,o||(p=64)),n.push(s[d],s[m],s[p],s[f])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(J2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<t.length;){const a=s[t.charAt(i++)],l=i<t.length?s[t.charAt(i)]:0;++i;const u=i<t.length?s[t.charAt(i)]:64;++i;const m=i<t.length?s[t.charAt(i)]:64;if(++i,a==null||l==null||u==null||m==null)throw new PL;const p=a<<2|l>>4;if(n.push(p),u!==64){const f=l<<4&240|u>>2;if(n.push(f),m!==64){const x=u<<6&192|m;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class PL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RL=function(t){const e=J2(t);return e_.encodeByteArray(e,!0)},fh=function(t){return RL(t).replace(/\./g,"")},t_=function(t){try{return e_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=()=>DL().__FIREBASE_DEFAULTS__,ML=()=>{if(typeof process>"u"||typeof yw>"u")return;const t=yw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},OL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&t_(t[1]);return e&&JSON.parse(e)},vm=()=>{try{return LL()||ML()||OL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s_=t=>{var e,s;return(s=(e=vm())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},n_=t=>{const e=s_(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},r_=()=>{var t;return(t=vm())===null||t===void 0?void 0:t.config},i_=t=>{var e;return(e=vm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[fh(JSON.stringify(s)),fh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ss(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ss())}function BL(){var t;const e=(t=vm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $L(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HL(){const t=ss();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KL(){return!BL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function GL(){try{return typeof indexedDB=="object"}catch{return!1}}function WL(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL="FirebaseError";class In extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=qL,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tu.prototype.create)}}class tu{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?YL(a,n):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new In(i,l,n)}}function YL(t,e){return t.replace(QL,(s,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const QL=/\{\$([^}]+)}/g;function XL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ph(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const i of s){if(!n.includes(i))return!1;const a=t[i],o=e[i];if(vw(a)&&vw(o)){if(!ph(a,o))return!1}else if(a!==o)return!1}for(const i of n)if(!s.includes(i))return!1;return!0}function vw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t){const e=[];for(const[s,n]of Object.entries(t))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Dl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,a]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Ll(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function ZL(t,e){const s=new JL(t,e);return s.subscribe.bind(s)}class JL{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,n){let i;if(e===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");e4(e,["next","error","complete"])?i=e:i={next:e,error:s,complete:n},i.next===void 0&&(i.next=qf),i.error===void 0&&(i.error=qf),i.complete===void 0&&(i.complete=qf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e4(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function qf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class ai{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new VL;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n4(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const a=this.getOrInitializeService({instanceIdentifier:i});n.resolve(a)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);n===l&&o.resolve(i)}return i}onInit(e,s){var n;const i=this.normalizeInstanceIdentifier(s),a=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const i of n)try{i(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:s4(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function s4(t){return t===Vi?void 0:t}function n4(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new t4(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const i4={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},a4=Te.INFO,o4={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},l4=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),i=o4[e];if(i)console[i](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Nx{constructor(e){this.name=e,this._logLevel=a4,this._logHandler=l4,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i4[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const c4=(t,e)=>e.some(s=>t instanceof s);let bw,ww;function u4(){return bw||(bw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function d4(){return ww||(ww=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const o_=new WeakMap,Cg=new WeakMap,l_=new WeakMap,Yf=new WeakMap,jx=new WeakMap;function h4(t){const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{s(ei(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(s=>{s instanceof IDBCursor&&o_.set(s,t)}).catch(()=>{}),jx.set(e,t),e}function m4(t){if(Cg.has(t))return;const e=new Promise((s,n)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{s(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Cg.set(t,e)}let Ig={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return Cg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||l_.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ei(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f4(t){Ig=t(Ig)}function p4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Qf(this),e,...s);return l_.set(n,e.sort?e.sort():[e]),ei(n)}:d4().includes(t)?function(...e){return t.apply(Qf(this),e),ei(o_.get(this))}:function(...e){return ei(t.apply(Qf(this),e))}}function g4(t){return typeof t=="function"?p4(t):(t instanceof IDBTransaction&&m4(t),c4(t,u4())?new Proxy(t,Ig):t)}function ei(t){if(t instanceof IDBRequest)return h4(t);if(Yf.has(t))return Yf.get(t);const e=g4(t);return e!==t&&(Yf.set(t,e),jx.set(e,t)),e}const Qf=t=>jx.get(t);function x4(t,e,{blocked:s,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=ei(o);return n&&o.addEventListener("upgradeneeded",c=>{n(ei(o.result),c.oldVersion,c.newVersion,ei(o.transaction),c)}),s&&o.addEventListener("blocked",c=>s(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const y4=["get","getKey","getAll","getAllKeys","count"],v4=["put","add","delete","clear"],Xf=new Map;function Nw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xf.get(e))return Xf.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,i=v4.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(i||y4.includes(s)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[s](...l),i&&c.done]))[0]};return Xf.set(e,a),a}f4(t=>({...t,get:(e,s,n)=>Nw(e,s)||t.get(e,s,n),has:(e,s)=>!!Nw(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(w4(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function w4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ag="@firebase/app",jw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Nx("@firebase/app"),N4="@firebase/app-compat",j4="@firebase/analytics-compat",E4="@firebase/analytics",k4="@firebase/app-check-compat",_4="@firebase/app-check",S4="@firebase/auth",T4="@firebase/auth-compat",C4="@firebase/database",I4="@firebase/data-connect",A4="@firebase/database-compat",P4="@firebase/functions",R4="@firebase/functions-compat",D4="@firebase/installations",L4="@firebase/installations-compat",M4="@firebase/messaging",O4="@firebase/messaging-compat",V4="@firebase/performance",z4="@firebase/performance-compat",B4="@firebase/remote-config",U4="@firebase/remote-config-compat",F4="@firebase/storage",$4="@firebase/storage-compat",H4="@firebase/firestore",K4="@firebase/vertexai-preview",G4="@firebase/firestore-compat",W4="firebase",q4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="[DEFAULT]",Y4={[Ag]:"fire-core",[N4]:"fire-core-compat",[E4]:"fire-analytics",[j4]:"fire-analytics-compat",[_4]:"fire-app-check",[k4]:"fire-app-check-compat",[S4]:"fire-auth",[T4]:"fire-auth-compat",[C4]:"fire-rtdb",[I4]:"fire-data-connect",[A4]:"fire-rtdb-compat",[P4]:"fire-fn",[R4]:"fire-fn-compat",[D4]:"fire-iid",[L4]:"fire-iid-compat",[M4]:"fire-fcm",[O4]:"fire-fcm-compat",[V4]:"fire-perf",[z4]:"fire-perf-compat",[B4]:"fire-rc",[U4]:"fire-rc-compat",[F4]:"fire-gcs",[$4]:"fire-gcs-compat",[H4]:"fire-fst",[G4]:"fire-fst-compat",[K4]:"fire-vertex","fire-js":"fire-js",[W4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map,Q4=new Map,Rg=new Map;function Ew(t,e){try{t.container.addComponent(e)}catch(s){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function la(t){const e=t.name;if(Rg.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,t);for(const s of gh.values())Ew(s,t);for(const s of Q4.values())Ew(s,t);return!0}function bm(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new tu("app","Firebase",X4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4{constructor(e,s,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ai("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=q4;function c_(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Pg,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw ti.create("bad-app-name",{appName:String(i)});if(s||(s=r_()),!s)throw ti.create("no-options");const a=gh.get(i);if(a){if(ph(s,a.options)&&ph(n,a.config))return a;throw ti.create("duplicate-app",{appName:i})}const o=new r4(i);for(const c of Rg.values())o.addComponent(c);const l=new Z4(s,n,o);return gh.set(i,l),l}function Ex(t=Pg){const e=gh.get(t);if(!e&&t===Pg&&r_())return c_();if(!e)throw ti.create("no-app",{appName:t});return e}function Nn(t,e,s){var n;let i=(n=Y4[t])!==null&&n!==void 0?n:t;s&&(i+=`-${s}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${i}" with version "${e}":`];a&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(l.join(" "));return}la(new ai(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="firebase-heartbeat-database",e5=1,Cc="firebase-heartbeat-store";let Zf=null;function u_(){return Zf||(Zf=x4(J4,e5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cc)}catch(s){console.warn(s)}}}}).catch(t=>{throw ti.create("idb-open",{originalErrorMessage:t.message})})),Zf}async function t5(t){try{const s=(await u_()).transaction(Cc),n=await s.objectStore(Cc).get(d_(t));return await s.done,n}catch(e){if(e instanceof In)nr.warn(e.message);else{const s=ti.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nr.warn(s.message)}}}async function kw(t,e){try{const n=(await u_()).transaction(Cc,"readwrite");await n.objectStore(Cc).put(e,d_(t)),await n.done}catch(s){if(s instanceof In)nr.warn(s.message);else{const n=ti.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});nr.warn(n.message)}}}function d_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s5=1024,n5=30*24*60*60*1e3;class r5{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new a5(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,s;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=_w();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=n5}),this._storage.overwrite(this._heartbeatsCache))}catch(n){nr.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=_w(),{heartbeatsToSend:n,unsentEntries:i}=i5(this._heartbeatsCache.heartbeats),a=fh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(s){return nr.warn(s),""}}}function _w(){return new Date().toISOString().substring(0,10)}function i5(t,e=s5){const s=[];let n=t.slice();for(const i of t){const a=s.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),Sw(s)>e){a.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Sw(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class a5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return GL()?WL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await t5(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return kw(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return kw(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Sw(t){return fh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){la(new ai("platform-logger",e=>new b4(e),"PRIVATE")),la(new ai("heartbeat",e=>new r5(e),"PRIVATE")),Nn(Ag,jw,t),Nn(Ag,jw,"esm2017"),Nn("fire-js","")}o5("");function kx(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s}function h_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l5=h_,m_=new tu("auth","Firebase",h_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=new Nx("@firebase/auth");function c5(t,...e){xh.logLevel<=Te.WARN&&xh.warn(`Auth (${wa}): ${t}`,...e)}function Id(t,...e){xh.logLevel<=Te.ERROR&&xh.error(`Auth (${wa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(t,...e){throw Sx(t,...e)}function an(t,...e){return Sx(t,...e)}function _x(t,e,s){const n=Object.assign(Object.assign({},l5()),{[e]:s});return new tu("auth","Firebase",n).create(e,{appName:t.name})}function Wn(t){return _x(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function u5(t,e,s){const n=s;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ks(t,"argument-error"),_x(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sx(t,...e){if(typeof t!="string"){const s=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(s,...n)}return m_.create(t,...e)}function pe(t,e,...s){if(!t)throw Sx(e,...s)}function $n(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Id(e),new Error(e)}function rr(t,e){t||$n(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function d5(){return Tw()==="http:"||Tw()==="https:"}function Tw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(d5()||FL()||"connection"in navigator)?navigator.onLine:!0}function m5(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,s){this.shortDelay=e,this.longDelay=s,rr(s>e,"Short delay should be less than long delay!"),this.isMobile=zL()||$L()}get(){return h5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t,e){rr(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{static initialize(e,s,n){this.fetchImpl=e,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=new nu(3e4,6e4);function mr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function An(t,e,s,n,i={}){return p_(t,i,async()=>{let a={},o={};n&&(e==="GET"?o=n:a={body:JSON.stringify(n)});const l=su(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},a);return UL()||(u.referrerPolicy="no-referrer"),f_.fetch()(g_(t,t.config.apiHost,s,l),u)})}async function p_(t,e,s){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},f5),e);try{const i=new x5(t),a=await Promise.race([s(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw td(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw td(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw td(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw td(t,"user-disabled",o);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _x(t,d,u);Ks(t,d)}}catch(i){if(i instanceof In)throw i;Ks(t,"network-request-failed",{message:String(i)})}}async function ru(t,e,s,n,i={}){const a=await An(t,e,s,n,i);return"mfaPendingCredential"in a&&Ks(t,"multi-factor-auth-required",{_serverResponse:a}),a}function g_(t,e,s,n){const i=`${e}${s}?${n}`;return t.config.emulator?Tx(t.config,i):`${t.config.apiScheme}://${i}`}function g5(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class x5{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(an(this.auth,"network-request-failed")),p5.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function td(t,e,s){const n={appName:t.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const i=an(t,e,n);return i.customData._tokenResponse=s,i}function Cw(t){return t!==void 0&&t.enterprise!==void 0}class y5{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return g5(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function v5(t,e){return An(t,"GET","/v2/recaptchaConfig",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b5(t,e){return An(t,"POST","/v1/accounts:delete",e)}async function x_(t,e){return An(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function w5(t,e=!1){const s=ht(t),n=await s.getIdToken(e),i=Cx(n);pe(i&&i.exp&&i.auth_time&&i.iat,s.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:i,token:n,authTime:Jl(Jf(i.auth_time)),issuedAtTime:Jl(Jf(i.iat)),expirationTime:Jl(Jf(i.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Jf(t){return Number(t)*1e3}function Cx(t){const[e,s,n]=t.split(".");if(e===void 0||s===void 0||n===void 0)return Id("JWT malformed, contained fewer than 3 sections"),null;try{const i=t_(s);return i?JSON.parse(i):(Id("Failed to decode base64 JWT payload"),null)}catch(i){return Id("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Iw(t){const e=Cx(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e,s=!1){if(s)return e;try{return await e}catch(n){throw n instanceof In&&N5(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function N5({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(t){var e;const s=t.auth,n=await t.getIdToken(),i=await ko(t,x_(s,{idToken:n}));pe(i==null?void 0:i.users.length,s,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?y_(a.providerUserInfo):[],l=k5(t.providerData,o),c=t.isAnonymous,u=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Lg(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function E5(t){const e=ht(t);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function k5(t,e){return[...t.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function y_(t){return t.map(e=>{var{providerId:s}=e,n=kx(e,["providerId"]);return{providerId:s,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _5(t,e){const s=await p_(t,{},async()=>{const n=su({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=g_(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",f_.fetch()(o,{method:"POST",headers:l,body:n})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function S5(t,e){return An(t,"POST","/v2/accounts:revokeToken",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const s=Iw(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:n,refreshToken:i,expiresIn:a}=await _5(e,s);this.updateTokensAndExpiration(n,i,Number(a))}updateTokensAndExpiration(e,s,n){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,s){const{refreshToken:n,accessToken:i,expirationTime:a}=s,o=new mo;return n&&(pe(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),i&&(pe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(pe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return $n("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Hn{constructor(e){var{uid:s,auth:n,stsTokenManager:i}=e,a=kx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Lg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const s=await ko(this,this.stsTokenManager.getToken(this.auth,e));return pe(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return w5(this,e)}reload(){return E5(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Hn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),s&&await yh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(Wn(this.auth));const e=await this.getIdToken();return await ko(this,b5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var n,i,a,o,l,c,u,d;const m=(n=s.displayName)!==null&&n!==void 0?n:void 0,p=(i=s.email)!==null&&i!==void 0?i:void 0,f=(a=s.phoneNumber)!==null&&a!==void 0?a:void 0,x=(o=s.photoURL)!==null&&o!==void 0?o:void 0,S=(l=s.tenantId)!==null&&l!==void 0?l:void 0,k=(c=s._redirectEventId)!==null&&c!==void 0?c:void 0,v=(u=s.createdAt)!==null&&u!==void 0?u:void 0,_=(d=s.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:P,stsTokenManager:b}=s;pe(w&&b,e,"internal-error");const y=mo.fromJSON(this.name,b);pe(typeof w=="string",e,"internal-error"),Sr(m,e.name),Sr(p,e.name),pe(typeof E=="boolean",e,"internal-error"),pe(typeof T=="boolean",e,"internal-error"),Sr(f,e.name),Sr(x,e.name),Sr(S,e.name),Sr(k,e.name),Sr(v,e.name),Sr(_,e.name);const j=new Hn({uid:w,auth:e,email:p,emailVerified:E,displayName:m,isAnonymous:T,photoURL:x,phoneNumber:f,tenantId:S,stsTokenManager:y,createdAt:v,lastLoginAt:_});return P&&Array.isArray(P)&&(j.providerData=P.map(C=>Object.assign({},C))),k&&(j._redirectEventId=k),j}static async _fromIdTokenResponse(e,s,n=!1){const i=new mo;i.updateFromServerResponse(s);const a=new Hn({uid:s.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await yh(a),a}static async _fromGetAccountInfoResponse(e,s,n){const i=s.users[0];pe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?y_(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new mo;l.updateFromIdToken(n);const c=new Hn({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Lg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new Map;function Kn(t){rr(t instanceof Function,"Expected a class definition");let e=Aw.get(t);return e?(rr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Aw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}v_.type="NONE";const Pw=v_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(t,e,s){return`firebase:${t}:${e}:${s}`}class fo{constructor(e,s,n){this.persistence=e,this.auth=s,this.userKey=n;const{config:i,name:a}=this.auth;this.fullUserKey=Ad(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ad("persistence",i.apiKey,a),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Hn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,n="authUser"){if(!s.length)return new fo(Kn(Pw),e,n);const i=(await Promise.all(s.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=i[0]||Kn(Pw);const o=Ad(n,e.config.apiKey,e.name);let l=null;for(const u of s)try{const d=await u._get(o);if(d){const m=Hn._fromJSON(e,d);u!==a&&(l=m),a=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new fo(a,e,n):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(s.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new fo(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(j_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k_(e))return"Blackberry";if(__(e))return"Webos";if(w_(e))return"Safari";if((e.includes("chrome/")||N_(e))&&!e.includes("edge/"))return"Chrome";if(E_(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(s);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function b_(t=ss()){return/firefox\//i.test(t)}function w_(t=ss()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N_(t=ss()){return/crios\//i.test(t)}function j_(t=ss()){return/iemobile/i.test(t)}function E_(t=ss()){return/android/i.test(t)}function k_(t=ss()){return/blackberry/i.test(t)}function __(t=ss()){return/webos/i.test(t)}function Ix(t=ss()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function T5(t=ss()){var e;return Ix(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function C5(){return HL()&&document.documentMode===10}function S_(t=ss()){return Ix(t)||E_(t)||__(t)||k_(t)||/windows phone/i.test(t)||j_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(t,e=[]){let s;switch(t){case"Browser":s=Rw(ss());break;case"Worker":s=`${Rw(ss())}-${t}`;break;default:s=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${wa}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const n=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});n.onAbort=s,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const n of this.queue)await n(e),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const i of s)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(t,e={}){return An(t,"GET","/v2/passwordPolicy",mr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=6;class R5{constructor(e){var s,n,i,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=o.minPasswordLength)!==null&&s!==void 0?s:P5,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,n,i,a,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(s=c.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsUppercaseLetter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,s){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(s.meetsMinPasswordLength=e.length>=n),i&&(s.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(s,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,s,n,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D5{constructor(e,s,n,i){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dw(this),this.idTokenSubscription=new Dw(this),this.beforeStateQueue=new I5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=Kn(s)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await fo.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await x_(this,{idToken:e}),n=await Hn._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(n)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(tn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(i=c.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=m5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(Wn(this));const s=e?ht(e):null;return s&&pe(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(Wn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(Wn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await A5(this),s=new R5(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new tu("auth","Firebase",e())}onAuthStateChanged(e,s,n){return this.registerStateListener(this.authStateSubscription,e,s,n)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,n){return this.registerStateListener(this.idTokenSubscription,e,s,n)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(n.tenantId=this.tenantId),await S5(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const n=await this.getOrInitRedirectPersistenceManager(s);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&Kn(e)||this._popupRedirectResolver;pe(s,this,"argument-error"),this.redirectPersistenceManager=await fo.create(this,[Kn(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,n,i){if(this._deleted)return()=>{};const a=typeof s=="function"?s:s.next.bind(s);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof s=="function"){const c=e.addObserver(s,n,i);return()=>{o=!0,c()}}else{const c=e.addObserver(s);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(s["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(s["X-Firebase-AppCheck"]=i),s}async _getAppCheckToken(){var e;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&c5(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function fr(t){return ht(t)}class Dw{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZL(s=>this.observer=s)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function L5(t){wm=t}function C_(t){return wm.loadJS(t)}function M5(){return wm.recaptchaEnterpriseScript}function O5(){return wm.gapiScript}function V5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const z5="recaptcha-enterprise",B5="NO_RECAPTCHA";class U5{constructor(e){this.type=z5,this.auth=fr(e)}async verify(e="verify",s=!1){async function n(a){if(!s){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{v5(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new y5(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function i(a,o,l){const c=window.grecaptcha;Cw(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(B5)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{n(this.auth).then(l=>{if(!s&&Cw(window.grecaptcha))i(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=M5();c.length!==0&&(c+=l),C_(c).then(()=>{i(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Lw(t,e,s,n=!1){const i=new U5(t);let a;try{a=await i.verify(s)}catch{a=await i.verify(s,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function vh(t,e,s,n){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Lw(t,e,s,s==="getOobCode");return n(t,a)}else return n(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Lw(t,e,s,s==="getOobCode");return n(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(t,e){const s=bm(t,"auth");if(s.isInitialized()){const i=s.getImmediate(),a=s.getOptions();if(ph(a,e??{}))return i;Ks(i,"already-initialized")}return s.initialize({options:e})}function $5(t,e){const s=(e==null?void 0:e.persistence)||[],n=(Array.isArray(s)?s:[s]).map(Kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function H5(t,e,s){const n=fr(t);pe(n._canInitEmulator,n,"emulator-config-failed"),pe(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,a=I_(e),{host:o,port:l}=K5(e),c=l===null?"":`:${l}`;n.config.emulator={url:`${a}//${o}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),G5()}function I_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function K5(t){const e=I_(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const a=i[1];return{host:a,port:Mw(n.substr(a.length+1))}}else{const[a,o]=n.split(":");return{host:a,port:Mw(o)}}}function Mw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function G5(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return $n("not implemented")}_getIdTokenResponse(e){return $n("not implemented")}_linkToIdToken(e,s){return $n("not implemented")}_getReauthenticationResolver(e){return $n("not implemented")}}async function W5(t,e){return An(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q5(t,e){return ru(t,"POST","/v1/accounts:signInWithPassword",mr(t,e))}async function A_(t,e){return An(t,"POST","/v1/accounts:sendOobCode",mr(t,e))}async function Y5(t,e){return A_(t,e)}async function Q5(t,e){return A_(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X5(t,e){return ru(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}async function Z5(t,e){return ru(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends Ax{constructor(e,s,n,i=null){super("password",n),this._email=e,this._password=s,this._tenantId=i}static _fromEmailAndPassword(e,s){return new Ic(e,s,"password")}static _fromEmailAndCode(e,s,n=null){return new Ic(e,s,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,s,"signInWithPassword",q5);case"emailLink":return X5(e,{email:this._email,oobCode:this._password});default:Ks(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const n={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vh(e,n,"signUpPassword",W5);case"emailLink":return Z5(e,{idToken:s,email:this._email,oobCode:this._password});default:Ks(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(t,e){return ru(t,"POST","/v1/accounts:signInWithIdp",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5="http://localhost";class ca extends Ax{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):Ks("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=s,a=kx(s,["providerId","signInMethod"]);if(!n||!i)return null;const o=new ca(n,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const s=this.buildRequest();return po(e,s)}_linkToIdToken(e,s){const n=this.buildRequest();return n.idToken=s,po(e,n)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,po(e,s)}buildRequest(){const e={requestUri:J5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=su(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tM(t){const e=Dl(Ll(t)).link,s=e?Dl(Ll(e)).deep_link_id:null,n=Dl(Ll(t)).deep_link_id;return(n?Dl(Ll(n)).link:null)||n||s||e||t}class Px{constructor(e){var s,n,i,a,o,l;const c=Dl(Ll(e)),u=(s=c.apiKey)!==null&&s!==void 0?s:null,d=(n=c.oobCode)!==null&&n!==void 0?n:null,m=eM((i=c.mode)!==null&&i!==void 0?i:null);pe(u&&d&&m,"argument-error"),this.apiKey=u,this.operation=m,this.code=d,this.continueUrl=(a=c.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const s=tM(e);try{return new Px(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(){this.providerId=Wo.PROVIDER_ID}static credential(e,s){return Ic._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const n=Px.parseLink(s);return pe(n,"argument-error"),Ic._fromEmailAndCode(e,n.code,n.tenantId)}}Wo.PROVIDER_ID="password";Wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu extends Rx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends iu{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends iu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return ca._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:n}=e;if(!s&&!n)return null;try{return Bn.credential(s,n)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends iu{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Or.credential(e.oauthAccessToken)}catch{return null}}}Or.GITHUB_SIGN_IN_METHOD="github.com";Or.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends iu{constructor(){super("twitter.com")}static credential(e,s){return ca._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=e;if(!s||!n)return null;try{return Vr.credential(s,n)}catch{return null}}}Vr.TWITTER_SIGN_IN_METHOD="twitter.com";Vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t,e){return ru(t,"POST","/v1/accounts:signUp",mr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,n,i=!1){const a=await Hn._fromIdTokenResponse(e,n,i),o=Ow(n);return new ua({user:a,providerId:o,_tokenResponse:n,operationType:s})}static async _forOperation(e,s,n){await e._updateTokensIfNecessary(n,!0);const i=Ow(n);return new ua({user:e,providerId:i,_tokenResponse:n,operationType:s})}}function Ow(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh extends In{constructor(e,s,n,i){var a;super(s.code,s.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,bh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,s,n,i){return new bh(e,s,n,i)}}function P_(t,e,s,n){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?bh._fromErrorAndOperation(t,a,e,n):a})}async function nM(t,e,s=!1){const n=await ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return ua._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e,s=!1){const{auth:n}=t;if(tn(n.app))return Promise.reject(Wn(n));const i="reauthenticate";try{const a=await ko(t,P_(n,i,e,t),s);pe(a.idToken,n,"internal-error");const o=Cx(a.idToken);pe(o,n,"internal-error");const{sub:l}=o;return pe(t.uid===l,n,"user-mismatch"),ua._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Ks(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R_(t,e,s=!1){if(tn(t.app))return Promise.reject(Wn(t));const n="signIn",i=await P_(t,n,e),a=await ua._fromIdTokenResponse(t,n,i);return s||await t._updateCurrentUser(a.user),a}async function iM(t,e){return R_(fr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D_(t){const e=fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aM(t,e,s){const n=fr(t);await vh(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Q5)}async function Mg(t,e,s){if(tn(t.app))return Promise.reject(Wn(t));const n=fr(t),o=await vh(n,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sM).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&D_(t),c}),l=await ua._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}function oM(t,e,s){return tn(t.app)?Promise.reject(Wn(t)):iM(ht(t),Wo.credential(e,s)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&D_(t),n})}async function lM(t,e){const s=ht(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()},{email:a}=await Y5(s.auth,i);a!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(t,e){return An(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vw(t,{displayName:e,photoURL:s}){if(e===void 0&&s===void 0)return;const n=ht(t),a={idToken:await n.getIdToken(),displayName:e,photoUrl:s,returnSecureToken:!0},o=await ko(n,cM(n.auth,a));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const l=n.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function uM(t,e,s,n){return ht(t).onIdTokenChanged(e,s,n)}function dM(t,e,s){return ht(t).beforeAuthStateChanged(e,s)}function hM(t,e,s,n){return ht(t).onAuthStateChanged(e,s,n)}function L_(t){return ht(t).signOut()}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mM=1e3,fM=10;class O_ extends M_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=S_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),i=this.localCache[s];n!==i&&e(s,i,n)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const n=e.key;s?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(n);!s&&this.localCache[n]===o||this.notifyListeners(n,o)},a=this.storage.getItem(n);C5()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,fM):i()}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:n}),!0)})},mM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}O_.type="LOCAL";const pM=O_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_ extends M_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}V_.type="SESSION";const z_=V_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(i=>i.isListeningto(e));if(s)return s;const n=new Nm(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:n,eventType:i,data:a}=s.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const l=Array.from(o).map(async u=>u(s.origin,a)),c=await gM(l);s.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t="",e=10){let s="";for(let n=0;n<e;n++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=Dx("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:i,onMessage(m){const p=m;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(d),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:s},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(){return window}function yM(t){jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(){return typeof jn().WorkerGlobalScope<"u"&&typeof jn().importScripts=="function"}async function vM(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function bM(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wM(){return B_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="firebaseLocalStorageDb",NM=1,Nh="firebaseLocalStorage",F_="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function jm(t,e){return t.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function jM(){const t=indexedDB.deleteDatabase(U_);return new au(t).toPromise()}function Og(){const t=indexedDB.open(U_,NM);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Nh,{keyPath:F_})}catch(i){s(i)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Nh)?e(n):(n.close(),await jM(),e(await Og()))})})}async function zw(t,e,s){const n=jm(t,!0).put({[F_]:e,value:s});return new au(n).toPromise()}async function EM(t,e){const s=jm(t,!1).get(e),n=await new au(s).toPromise();return n===void 0?null:n.value}function Bw(t,e){const s=jm(t,!0).delete(e);return new au(s).toPromise()}const kM=800,_M=3;class $_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(e){let s=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(s++>_M)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nm._getInstance(wM()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await vM(),!this.activeServiceWorker)return;this.sender=new xM(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((s=n[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||bM()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Og();return await zw(e,wh,"1"),await Bw(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>zw(n,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(n=>EM(n,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Bw(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=jm(i,!1).getAll();return new au(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),s.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),s.push(i));return s}notifyListeners(e,s){this.localCache[e]=s;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$_.type="LOCAL";const SM=$_;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e){return e?Kn(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx extends Ax{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return po(e,this._buildIdpRequest())}_linkToIdToken(e,s){return po(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return po(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function TM(t){return R_(t.auth,new Lx(t),t.bypassAuthState)}function CM(t){const{auth:e,user:s}=t;return pe(s,e,"internal-error"),rM(s,new Lx(t),t.bypassAuthState)}async function IM(t){const{auth:e,user:s}=t;return pe(s,e,"internal-error"),nM(s,new Lx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,s,n,i,a=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:n,postBody:i,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:s,sessionId:n,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return TM;case"linkViaPopup":case"linkViaRedirect":return IM;case"reauthViaPopup":case"reauthViaRedirect":return CM;default:Ks(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new nu(2e3,1e4);async function PM(t,e,s){if(tn(t.app))return Promise.reject(an(t,"operation-not-supported-in-this-environment"));const n=fr(t);u5(t,e,Rx);const i=H_(n,s);return new Gi(n,"signInViaPopup",e,i).executeNotNull()}class Gi extends K_{constructor(e,s,n,i,a){super(e,s,i,a),this.provider=n,this.authWindow=null,this.pollId=null,Gi.currentPopupAction&&Gi.currentPopupAction.cancel(),Gi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=Dx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(an(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(an(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,n;if(!((n=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(an(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,AM.get())};e()}}Gi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="pendingRedirect",Pd=new Map;class DM extends K_{constructor(e,s,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let e=Pd.get(this.auth._key());if(!e){try{const n=await LM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(s){e=()=>Promise.reject(s)}Pd.set(this.auth._key(),e)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LM(t,e){const s=VM(e),n=OM(t);if(!await n._isAvailable())return!1;const i=await n._get(s)==="true";return await n._remove(s),i}function MM(t,e){Pd.set(t._key(),e)}function OM(t){return Kn(t._redirectPersistence)}function VM(t){return Ad(RM,t.config.apiKey,t.name)}async function zM(t,e,s=!1){if(tn(t.app))return Promise.reject(Wn(t));const n=fr(t),i=H_(n,e),o=await new DM(n,i,s).execute();return o&&!s&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=10*60*1e3;class UM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(s=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FM(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var n;if(e.error&&!G_(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";s.onError(an(this.auth,i))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const n=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=BM&&this.cachedEventUids.clear(),this.cachedEventUids.has(Uw(e))}saveEventToCache(e){this.cachedEventUids.add(Uw(e)),this.lastProcessedEventTime=Date.now()}}function Uw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function G_({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return G_(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e={}){return An(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KM=/^https?/;async function GM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $M(t);for(const s of e)try{if(WM(s))return}catch{}Ks(t,"unauthorized-domain")}function WM(t){const e=Dg(),{protocol:s,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===n}if(!KM.test(s))return!1;if(HM.test(t))return n===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=new nu(3e4,6e4);function Fw(){const t=jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function YM(t){return new Promise((e,s)=>{var n,i,a;function o(){Fw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Fw(),s(an(t,"network-request-failed"))},timeout:qM.get()})}if(!((i=(n=jn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=jn().gapi)===null||a===void 0)&&a.load)o();else{const l=V5("iframefcb");return jn()[l]=()=>{gapi.load?o():s(an(t,"network-request-failed"))},C_(`${O5()}?onload=${l}`).catch(c=>s(c))}}).catch(e=>{throw Rd=null,e})}let Rd=null;function QM(t){return Rd=Rd||YM(t),Rd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=new nu(5e3,15e3),ZM="__/auth/iframe",JM="emulator/auth/iframe",e3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},t3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function s3(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?Tx(e,JM):`https://${t.config.authDomain}/${ZM}`,n={apiKey:e.apiKey,appName:t.name,v:wa},i=t3.get(t.config.apiHost);i&&(n.eid=i);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${s}?${su(n).slice(1)}`}async function n3(t){const e=await QM(t),s=jn().gapi;return pe(s,t,"internal-error"),e.open({where:document.body,url:s3(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:e3,dontclear:!0},n=>new Promise(async(i,a)=>{await n.restyle({setHideOnLeave:!1});const o=an(t,"network-request-failed"),l=jn().setTimeout(()=>{a(o)},XM.get());function c(){jn().clearTimeout(l),i(n)}n.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i3=500,a3=600,o3="_blank",l3="http://localhost";class $w{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function c3(t,e,s,n=i3,i=a3){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const c=Object.assign(Object.assign({},r3),{width:n.toString(),height:i.toString(),top:a,left:o}),u=ss().toLowerCase();s&&(l=N_(u)?o3:s),b_(u)&&(e=e||l3,c.scrollbars="yes");const d=Object.entries(c).reduce((p,[f,x])=>`${p}${f}=${x},`,"");if(T5(u)&&l!=="_self")return u3(e||"",l),new $w(null);const m=window.open(e||"",l,d);pe(m,t,"popup-blocked");try{m.focus()}catch{}return new $w(m)}function u3(t,e){const s=document.createElement("a");s.href=t,s.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="__/auth/handler",h3="emulator/auth/handler",m3=encodeURIComponent("fac");async function Hw(t,e,s,n,i,a){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:n,v:wa,eventId:i};if(e instanceof Rx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",XL(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof iu){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${m3}=${encodeURIComponent(c)}`:"";return`${f3(t)}?${su(l).slice(1)}${u}`}function f3({config:t}){return t.emulator?Tx(t,h3):`https://${t.authDomain}/${d3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="webStorageSupport";class p3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=z_,this._completeRedirectFn=zM,this._overrideRedirectResult=MM}async _openPopup(e,s,n,i){var a;rr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Hw(e,s,n,Dg(),i);return c3(e,o,Dx())}async _openRedirect(e,s,n,i){await this._originValidation(e);const a=await Hw(e,s,n,Dg(),i);return yM(a),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:i,promise:a}=this.eventManagers[s];return i?Promise.resolve(i):(rr(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(e){const s=await n3(e),n=new UM(e);return s.register("authEvent",i=>(pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=s,n}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(ep,{type:ep},i=>{var a;const o=(a=i==null?void 0:i[0])===null||a===void 0?void 0:a[ep];o!==void 0&&s(!!o),Ks(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=GM(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return S_()||w_()||Ix()}}const g3=p3;var Kw="@firebase/auth",Gw="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v3(t){la(new ai("auth",(e,{options:s})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T_(t)},u=new D5(n,i,a,c);return $5(u,s),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,n)=>{e.getProvider("auth-internal").initialize()})),la(new ai("auth-internal",e=>{const s=fr(e.getProvider("auth").getImmediate());return(n=>new x3(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nn(Kw,Gw,y3(t)),Nn(Kw,Gw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=5*60,w3=i_("authIdTokenMaxAge")||b3;let Ww=null;const N3=t=>async e=>{const s=e&&await e.getIdTokenResult(),n=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>w3)return;const i=s==null?void 0:s.token;Ww!==i&&(Ww=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function j3(t=Ex()){const e=bm(t,"auth");if(e.isInitialized())return e.getImmediate();const s=F5(t,{popupRedirectResolver:g3,persistence:[SM,pM,z_]}),n=i_("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const o=N3(a.toString());dM(s,o,()=>o(s.currentUser)),uM(s,l=>o(l))}}const i=s_("auth");return i&&H5(s,`http://${i}`),s}function E3(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}L5({loadJS(t){return new Promise((e,s)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=i=>{const a=an("internal-error");a.customData=i,s(a)},n.type="text/javascript",n.charset="UTF-8",E3().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v3("Browser");var qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zi,W_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,y){function j(){}j.prototype=y.prototype,b.D=y.prototype,b.prototype=new j,b.prototype.constructor=b,b.C=function(C,R,D){for(var A=Array(arguments.length-2),V=2;V<arguments.length;V++)A[V-2]=arguments[V];return y.prototype[R].apply(C,A)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,s),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,y,j){j||(j=0);var C=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)C[R]=y.charCodeAt(j++)|y.charCodeAt(j++)<<8|y.charCodeAt(j++)<<16|y.charCodeAt(j++)<<24;else for(R=0;16>R;++R)C[R]=y[j++]|y[j++]<<8|y[j++]<<16|y[j++]<<24;y=b.g[0],j=b.g[1],R=b.g[2];var D=b.g[3],A=y+(D^j&(R^D))+C[0]+3614090360&4294967295;y=j+(A<<7&4294967295|A>>>25),A=D+(R^y&(j^R))+C[1]+3905402710&4294967295,D=y+(A<<12&4294967295|A>>>20),A=R+(j^D&(y^j))+C[2]+606105819&4294967295,R=D+(A<<17&4294967295|A>>>15),A=j+(y^R&(D^y))+C[3]+3250441966&4294967295,j=R+(A<<22&4294967295|A>>>10),A=y+(D^j&(R^D))+C[4]+4118548399&4294967295,y=j+(A<<7&4294967295|A>>>25),A=D+(R^y&(j^R))+C[5]+1200080426&4294967295,D=y+(A<<12&4294967295|A>>>20),A=R+(j^D&(y^j))+C[6]+2821735955&4294967295,R=D+(A<<17&4294967295|A>>>15),A=j+(y^R&(D^y))+C[7]+4249261313&4294967295,j=R+(A<<22&4294967295|A>>>10),A=y+(D^j&(R^D))+C[8]+1770035416&4294967295,y=j+(A<<7&4294967295|A>>>25),A=D+(R^y&(j^R))+C[9]+2336552879&4294967295,D=y+(A<<12&4294967295|A>>>20),A=R+(j^D&(y^j))+C[10]+4294925233&4294967295,R=D+(A<<17&4294967295|A>>>15),A=j+(y^R&(D^y))+C[11]+2304563134&4294967295,j=R+(A<<22&4294967295|A>>>10),A=y+(D^j&(R^D))+C[12]+1804603682&4294967295,y=j+(A<<7&4294967295|A>>>25),A=D+(R^y&(j^R))+C[13]+4254626195&4294967295,D=y+(A<<12&4294967295|A>>>20),A=R+(j^D&(y^j))+C[14]+2792965006&4294967295,R=D+(A<<17&4294967295|A>>>15),A=j+(y^R&(D^y))+C[15]+1236535329&4294967295,j=R+(A<<22&4294967295|A>>>10),A=y+(R^D&(j^R))+C[1]+4129170786&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^R&(y^j))+C[6]+3225465664&4294967295,D=y+(A<<9&4294967295|A>>>23),A=R+(y^j&(D^y))+C[11]+643717713&4294967295,R=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(R^D))+C[0]+3921069994&4294967295,j=R+(A<<20&4294967295|A>>>12),A=y+(R^D&(j^R))+C[5]+3593408605&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^R&(y^j))+C[10]+38016083&4294967295,D=y+(A<<9&4294967295|A>>>23),A=R+(y^j&(D^y))+C[15]+3634488961&4294967295,R=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(R^D))+C[4]+3889429448&4294967295,j=R+(A<<20&4294967295|A>>>12),A=y+(R^D&(j^R))+C[9]+568446438&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^R&(y^j))+C[14]+3275163606&4294967295,D=y+(A<<9&4294967295|A>>>23),A=R+(y^j&(D^y))+C[3]+4107603335&4294967295,R=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(R^D))+C[8]+1163531501&4294967295,j=R+(A<<20&4294967295|A>>>12),A=y+(R^D&(j^R))+C[13]+2850285829&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^R&(y^j))+C[2]+4243563512&4294967295,D=y+(A<<9&4294967295|A>>>23),A=R+(y^j&(D^y))+C[7]+1735328473&4294967295,R=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(R^D))+C[12]+2368359562&4294967295,j=R+(A<<20&4294967295|A>>>12),A=y+(j^R^D)+C[5]+4294588738&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^R)+C[8]+2272392833&4294967295,D=y+(A<<11&4294967295|A>>>21),A=R+(D^y^j)+C[11]+1839030562&4294967295,R=D+(A<<16&4294967295|A>>>16),A=j+(R^D^y)+C[14]+4259657740&4294967295,j=R+(A<<23&4294967295|A>>>9),A=y+(j^R^D)+C[1]+2763975236&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^R)+C[4]+1272893353&4294967295,D=y+(A<<11&4294967295|A>>>21),A=R+(D^y^j)+C[7]+4139469664&4294967295,R=D+(A<<16&4294967295|A>>>16),A=j+(R^D^y)+C[10]+3200236656&4294967295,j=R+(A<<23&4294967295|A>>>9),A=y+(j^R^D)+C[13]+681279174&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^R)+C[0]+3936430074&4294967295,D=y+(A<<11&4294967295|A>>>21),A=R+(D^y^j)+C[3]+3572445317&4294967295,R=D+(A<<16&4294967295|A>>>16),A=j+(R^D^y)+C[6]+76029189&4294967295,j=R+(A<<23&4294967295|A>>>9),A=y+(j^R^D)+C[9]+3654602809&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^R)+C[12]+3873151461&4294967295,D=y+(A<<11&4294967295|A>>>21),A=R+(D^y^j)+C[15]+530742520&4294967295,R=D+(A<<16&4294967295|A>>>16),A=j+(R^D^y)+C[2]+3299628645&4294967295,j=R+(A<<23&4294967295|A>>>9),A=y+(R^(j|~D))+C[0]+4096336452&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~R))+C[7]+1126891415&4294967295,D=y+(A<<10&4294967295|A>>>22),A=R+(y^(D|~j))+C[14]+2878612391&4294967295,R=D+(A<<15&4294967295|A>>>17),A=j+(D^(R|~y))+C[5]+4237533241&4294967295,j=R+(A<<21&4294967295|A>>>11),A=y+(R^(j|~D))+C[12]+1700485571&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~R))+C[3]+2399980690&4294967295,D=y+(A<<10&4294967295|A>>>22),A=R+(y^(D|~j))+C[10]+4293915773&4294967295,R=D+(A<<15&4294967295|A>>>17),A=j+(D^(R|~y))+C[1]+2240044497&4294967295,j=R+(A<<21&4294967295|A>>>11),A=y+(R^(j|~D))+C[8]+1873313359&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~R))+C[15]+4264355552&4294967295,D=y+(A<<10&4294967295|A>>>22),A=R+(y^(D|~j))+C[6]+2734768916&4294967295,R=D+(A<<15&4294967295|A>>>17),A=j+(D^(R|~y))+C[13]+1309151649&4294967295,j=R+(A<<21&4294967295|A>>>11),A=y+(R^(j|~D))+C[4]+4149444226&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~R))+C[11]+3174756917&4294967295,D=y+(A<<10&4294967295|A>>>22),A=R+(y^(D|~j))+C[2]+718787259&4294967295,R=D+(A<<15&4294967295|A>>>17),A=j+(D^(R|~y))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+R&4294967295,b.g[3]=b.g[3]+D&4294967295}n.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var j=y-this.blockSize,C=this.B,R=this.h,D=0;D<y;){if(R==0)for(;D<=j;)i(this,b,D),D+=this.blockSize;if(typeof b=="string"){for(;D<y;)if(C[R++]=b.charCodeAt(D++),R==this.blockSize){i(this,C),R=0;break}}else for(;D<y;)if(C[R++]=b[D++],R==this.blockSize){i(this,C),R=0;break}}this.h=R,this.o+=y},n.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var j=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=j&255,j/=256;for(this.u(b),b=Array(16),y=j=0;4>y;++y)for(var C=0;32>C;C+=8)b[j++]=this.g[y]>>>C&255;return b};function a(b,y){var j=l;return Object.prototype.hasOwnProperty.call(j,b)?j[b]:j[b]=y(b)}function o(b,y){this.h=y;for(var j=[],C=!0,R=b.length-1;0<=R;R--){var D=b[R]|0;C&&D==y||(j[R]=D,C=!1)}this.g=j}var l={};function c(b){return-128<=b&&128>b?a(b,function(y){return new o([y|0],0>y?-1:0)}):new o([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return m;if(0>b)return k(u(-b));for(var y=[],j=1,C=0;b>=j;C++)y[C]=b/j|0,j*=4294967296;return new o(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return k(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=u(Math.pow(y,8)),C=m,R=0;R<b.length;R+=8){var D=Math.min(8,b.length-R),A=parseInt(b.substring(R,R+D),y);8>D?(D=u(Math.pow(y,D)),C=C.j(D).add(u(A))):(C=C.j(j),C=C.add(u(A)))}return C}var m=c(0),p=c(1),f=c(16777216);t=o.prototype,t.m=function(){if(S(this))return-k(this).m();for(var b=0,y=1,j=0;j<this.g.length;j++){var C=this.i(j);b+=(0<=C?C:4294967296+C)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(x(this))return"0";if(S(this))return"-"+k(this).toString(b);for(var y=u(Math.pow(b,6)),j=this,C="";;){var R=E(j,y).g;j=v(j,R.j(y));var D=((0<j.g.length?j.g[0]:j.h)>>>0).toString(b);if(j=R,x(j))return D+C;for(;6>D.length;)D="0"+D;C=D+C}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function x(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function S(b){return b.h==-1}t.l=function(b){return b=v(this,b),S(b)?-1:x(b)?0:1};function k(b){for(var y=b.g.length,j=[],C=0;C<y;C++)j[C]=~b.g[C];return new o(j,~b.h).add(p)}t.abs=function(){return S(this)?k(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),j=[],C=0,R=0;R<=y;R++){var D=C+(this.i(R)&65535)+(b.i(R)&65535),A=(D>>>16)+(this.i(R)>>>16)+(b.i(R)>>>16);C=A>>>16,D&=65535,A&=65535,j[R]=A<<16|D}return new o(j,j[j.length-1]&-2147483648?-1:0)};function v(b,y){return b.add(k(y))}t.j=function(b){if(x(this)||x(b))return m;if(S(this))return S(b)?k(this).j(k(b)):k(k(this).j(b));if(S(b))return k(this.j(k(b)));if(0>this.l(f)&&0>b.l(f))return u(this.m()*b.m());for(var y=this.g.length+b.g.length,j=[],C=0;C<2*y;C++)j[C]=0;for(C=0;C<this.g.length;C++)for(var R=0;R<b.g.length;R++){var D=this.i(C)>>>16,A=this.i(C)&65535,V=b.i(R)>>>16,$=b.i(R)&65535;j[2*C+2*R]+=A*$,_(j,2*C+2*R),j[2*C+2*R+1]+=D*$,_(j,2*C+2*R+1),j[2*C+2*R+1]+=A*V,_(j,2*C+2*R+1),j[2*C+2*R+2]+=D*V,_(j,2*C+2*R+2)}for(C=0;C<y;C++)j[C]=j[2*C+1]<<16|j[2*C];for(C=y;C<2*y;C++)j[C]=0;return new o(j,0)};function _(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function w(b,y){this.g=b,this.h=y}function E(b,y){if(x(y))throw Error("division by zero");if(x(b))return new w(m,m);if(S(b))return y=E(k(b),y),new w(k(y.g),k(y.h));if(S(y))return y=E(b,k(y)),new w(k(y.g),y.h);if(30<b.g.length){if(S(b)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var j=p,C=y;0>=C.l(b);)j=T(j),C=T(C);var R=P(j,1),D=P(C,1);for(C=P(C,2),j=P(j,2);!x(C);){var A=D.add(C);0>=A.l(b)&&(R=R.add(j),D=A),C=P(C,1),j=P(j,1)}return y=v(b,R.j(y)),new w(R,y)}for(R=m;0<=b.l(y);){for(j=Math.max(1,Math.floor(b.m()/y.m())),C=Math.ceil(Math.log(j)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),D=u(j),A=D.j(y);S(A)||0<A.l(b);)j-=C,D=u(j),A=D.j(y);x(D)&&(D=p),R=R.add(D),b=v(b,A)}return new w(R,b)}t.A=function(b){return E(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),j=[],C=0;C<y;C++)j[C]=this.i(C)&b.i(C);return new o(j,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),j=[],C=0;C<y;C++)j[C]=this.i(C)|b.i(C);return new o(j,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),j=[],C=0;C<y;C++)j[C]=this.i(C)^b.i(C);return new o(j,this.h^b.h)};function T(b){for(var y=b.g.length+1,j=[],C=0;C<y;C++)j[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(j,b.h)}function P(b,y){var j=y>>5;y%=32;for(var C=b.g.length-j,R=[],D=0;D<C;D++)R[D]=0<y?b.i(D+j)>>>y|b.i(D+j+1)<<32-y:b.i(D+j);return new o(R,b.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,W_=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Zi=o}).apply(typeof qw<"u"?qw:typeof self<"u"?self:typeof window<"u"?window:{});var sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q_,Ml,Y_,Dd,Vg,Q_,X_,Z_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,N,I){return h==Array.prototype||h==Object.prototype||(h[N]=I.value),h};function s(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof sd=="object"&&sd];for(var N=0;N<h.length;++N){var I=h[N];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var n=s(this);function i(h,N){if(N)e:{var I=n;h=h.split(".");for(var L=0;L<h.length-1;L++){var H=h[L];if(!(H in I))break e;I=I[H]}h=h[h.length-1],L=I[h],N=N(L),N!=L&&N!=null&&e(I,h,{configurable:!0,writable:!0,value:N})}}function a(h,N){h instanceof String&&(h+="");var I=0,L=!1,H={next:function(){if(!L&&I<h.length){var q=I++;return{value:N(q,h[q]),done:!1}}return L=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(h){return h||function(){return a(this,function(N,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(h){var N=typeof h;return N=N!="object"?N:h?Array.isArray(h)?"array":N:"null",N=="array"||N=="object"&&typeof h.length=="number"}function u(h){var N=typeof h;return N=="object"&&h!=null||N=="function"}function d(h,N,I){return h.call.apply(h.bind,arguments)}function m(h,N,I){if(!h)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,L),h.apply(N,H)}}return function(){return h.apply(N,arguments)}}function p(h,N,I){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,p.apply(null,arguments)}function f(h,N){var I=Array.prototype.slice.call(arguments,1);return function(){var L=I.slice();return L.push.apply(L,arguments),h.apply(this,L)}}function x(h,N){function I(){}I.prototype=N.prototype,h.aa=N.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(L,H,q){for(var re=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)re[Ge-2]=arguments[Ge];return N.prototype[H].apply(L,re)}}function S(h){const N=h.length;if(0<N){const I=Array(N);for(let L=0;L<N;L++)I[L]=h[L];return I}return[]}function k(h,N){for(let I=1;I<arguments.length;I++){const L=arguments[I];if(c(L)){const H=h.length||0,q=L.length||0;h.length=H+q;for(let re=0;re<q;re++)h[H+re]=L[re]}else h.push(L)}}class v{constructor(N,I){this.i=N,this.j=I,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function _(h){return/^[\s\xa0]*$/.test(h)}function w(){var h=l.navigator;return h&&(h=h.userAgent)?h:""}function E(h){return E[" "](h),h}E[" "]=function(){};var T=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function P(h,N,I){for(const L in h)N.call(I,h[L],L,h)}function b(h,N){for(const I in h)N.call(void 0,h[I],I,h)}function y(h){const N={};for(const I in h)N[I]=h[I];return N}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,N){let I,L;for(let H=1;H<arguments.length;H++){L=arguments[H];for(I in L)h[I]=L[I];for(let q=0;q<j.length;q++)I=j[q],Object.prototype.hasOwnProperty.call(L,I)&&(h[I]=L[I])}}function R(h){var N=1;h=h.split(":");const I=[];for(;0<N&&h.length;)I.push(h.shift()),N--;return h.length&&I.push(h.join(":")),I}function D(h){l.setTimeout(()=>{throw h},0)}function A(){var h=K;let N=null;return h.g&&(N=h.g,h.g=h.g.next,h.g||(h.h=null),N.next=null),N}class V{constructor(){this.h=this.g=null}add(N,I){const L=$.get();L.set(N,I),this.h?this.h.next=L:this.g=L,this.h=L}}var $=new v(()=>new Y,h=>h.reset());class Y{constructor(){this.next=this.g=this.h=null}set(N,I){this.h=N,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let B,O=!1,K=new V,z=()=>{const h=l.Promise.resolve(void 0);B=()=>{h.then(M)}};var M=()=>{for(var h;h=A();){try{h.h.call(h.g)}catch(I){D(I)}var N=$;N.j(h),100>N.h&&(N.h++,h.next=N.g,N.g=h)}O=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(h,N){this.type=h,this.g=this.target=N,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var Z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var h=!1,N=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};l.addEventListener("test",I,N),l.removeEventListener("test",I,N)}catch{}return h}();function G(h,N){if(W.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,L=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=N,N=h.relatedTarget){if(T){e:{try{E(N.nodeName);var H=!0;break e}catch{}H=!1}H||(N=null)}}else I=="mouseover"?N=h.fromElement:I=="mouseout"&&(N=h.toElement);this.relatedTarget=N,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:ne[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&G.aa.h.call(this)}}x(G,W);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),ie=0;function Re(h,N,I,L,H){this.listener=h,this.proxy=null,this.src=N,this.type=I,this.capture=!!L,this.ha=H,this.key=++ie,this.da=this.fa=!1}function he(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function be(h){this.src=h,this.g={},this.h=0}be.prototype.add=function(h,N,I,L,H){var q=h.toString();h=this.g[q],h||(h=this.g[q]=[],this.h++);var re=vs(h,N,L,H);return-1<re?(N=h[re],I||(N.fa=!1)):(N=new Re(N,this.src,q,!!L,H),N.fa=I,h.push(N)),N};function Tt(h,N){var I=N.type;if(I in h.g){var L=h.g[I],H=Array.prototype.indexOf.call(L,N,void 0),q;(q=0<=H)&&Array.prototype.splice.call(L,H,1),q&&(he(N),h.g[I].length==0&&(delete h.g[I],h.h--))}}function vs(h,N,I,L){for(var H=0;H<h.length;++H){var q=h[H];if(!q.da&&q.listener==N&&q.capture==!!I&&q.ha==L)return H}return-1}var Dn="closure_lm_"+(1e6*Math.random()|0),Le={};function sl(h,N,I,L,H){if(Array.isArray(N)){for(var q=0;q<N.length;q++)sl(h,N[q],I,L,H);return null}return I=nl(I),h&&h[te]?h.K(N,I,u(L)?!!L.capture:!1,H):_a(h,N,I,!1,L,H)}function _a(h,N,I,L,H,q){if(!N)throw Error("Invalid event type");var re=u(H)?!!H.capture:!!H,Ge=xr(h);if(Ge||(h[Dn]=Ge=new be(h)),I=Ge.add(N,I,L,re,q),I.proxy)return I;if(L=vu(),I.proxy=L,L.src=h,L.listener=I,h.addEventListener)Z||(H=re),H===void 0&&(H=!1),h.addEventListener(N.toString(),L,H);else if(h.attachEvent)h.attachEvent(ji(N.toString()),L);else if(h.addListener&&h.removeListener)h.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return I}function vu(){function h(I){return N.call(h.src,h.listener,I)}const N=bu;return h}function Ni(h,N,I,L,H){if(Array.isArray(N))for(var q=0;q<N.length;q++)Ni(h,N[q],I,L,H);else L=u(L)?!!L.capture:!!L,I=nl(I),h&&h[te]?(h=h.i,N=String(N).toString(),N in h.g&&(q=h.g[N],I=vs(q,I,L,H),-1<I&&(he(q[I]),Array.prototype.splice.call(q,I,1),q.length==0&&(delete h.g[N],h.h--)))):h&&(h=xr(h))&&(N=h.g[N.toString()],h=-1,N&&(h=vs(N,I,L,H)),(I=-1<h?N[h]:null)&&Sa(I))}function Sa(h){if(typeof h!="number"&&h&&!h.da){var N=h.src;if(N&&N[te])Tt(N.i,h);else{var I=h.type,L=h.proxy;N.removeEventListener?N.removeEventListener(I,L,h.capture):N.detachEvent?N.detachEvent(ji(I),L):N.addListener&&N.removeListener&&N.removeListener(L),(I=xr(N))?(Tt(I,h),I.h==0&&(I.src=null,N[Dn]=null)):he(h)}}}function ji(h){return h in Le?Le[h]:Le[h]="on"+h}function bu(h,N){if(h.da)h=!0;else{N=new G(N,this);var I=h.listener,L=h.ha||h.src;h.fa&&Sa(h),h=I.call(L,N)}return h}function xr(h){return h=h[Dn],h instanceof be?h:null}var Ta="__closure_events_fn_"+(1e9*Math.random()>>>0);function nl(h){return typeof h=="function"?h:(h[Ta]||(h[Ta]=function(N){return h.handleEvent(N)}),h[Ta])}function jt(){U.call(this),this.i=new be(this),this.M=this,this.F=null}x(jt,U),jt.prototype[te]=!0,jt.prototype.removeEventListener=function(h,N,I,L){Ni(this,h,N,I,L)};function yt(h,N){var I,L=h.F;if(L)for(I=[];L;L=L.F)I.push(L);if(h=h.M,L=N.type||N,typeof N=="string")N=new W(N,h);else if(N instanceof W)N.target=N.target||h;else{var H=N;N=new W(L,h),C(N,H)}if(H=!0,I)for(var q=I.length-1;0<=q;q--){var re=N.g=I[q];H=Ei(re,L,!0,N)&&H}if(re=N.g=h,H=Ei(re,L,!0,N)&&H,H=Ei(re,L,!1,N)&&H,I)for(q=0;q<I.length;q++)re=N.g=I[q],H=Ei(re,L,!1,N)&&H}jt.prototype.N=function(){if(jt.aa.N.call(this),this.i){var h=this.i,N;for(N in h.g){for(var I=h.g[N],L=0;L<I.length;L++)he(I[L]);delete h.g[N],h.h--}}this.F=null},jt.prototype.K=function(h,N,I,L){return this.i.add(String(h),N,!1,I,L)},jt.prototype.L=function(h,N,I,L){return this.i.add(String(h),N,!0,I,L)};function Ei(h,N,I,L){if(N=h.i.g[String(N)],!N)return!0;N=N.concat();for(var H=!0,q=0;q<N.length;++q){var re=N[q];if(re&&!re.da&&re.capture==I){var Ge=re.listener,Rt=re.ha||re.src;re.fa&&Tt(h.i,re),H=Ge.call(Rt,L)!==!1&&H}}return H&&!L.defaultPrevented}function ki(h,N,I){if(typeof h=="function")I&&(h=p(h,I));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:l.setTimeout(h,N||0)}function rl(h){h.g=ki(()=>{h.g=null,h.i&&(h.i=!1,rl(h))},h.l);const N=h.h;h.h=null,h.m.apply(null,N)}class Ca extends U{constructor(N,I){super(),this.m=N,this.l=I,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:rl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(h){U.call(this),this.h=h,this.g={}}x(yr,U);var _i=[];function il(h){P(h.g,function(N,I){this.g.hasOwnProperty(I)&&Sa(N)},h),h.g={}}yr.prototype.N=function(){yr.aa.N.call(this),il(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=l.JSON.stringify,wu=l.JSON.parse,Ia=class{stringify(h){return l.JSON.stringify(h,void 0)}parse(h){return l.JSON.parse(h,void 0)}};function Aa(){}Aa.prototype.h=null;function Si(h){return h.h||(h.h=h.i())}function al(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pa(){W.call(this,"d")}x(Pa,W);function wr(){W.call(this,"c")}x(wr,W);var fn={},Ti=null;function Ci(){return Ti=Ti||new jt}fn.La="serverreachability";function Ii(h){W.call(this,fn.La,h)}x(Ii,W);function Nr(h){const N=Ci();yt(N,new Ii(N))}fn.STAT_EVENT="statevent";function Nu(h,N){W.call(this,fn.STAT_EVENT,h),this.stat=N}x(Nu,W);function mt(h){const N=Ci();yt(N,new Nu(N,h))}fn.Ma="timingevent";function xe(h,N){W.call(this,fn.Ma,h),this.size=N}x(xe,W);function ol(h,N){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){h()},N)}function ll(){this.g=!0}ll.prototype.xa=function(){this.g=!1};function zI(h,N,I,L,H,q){h.info(function(){if(h.g)if(q)for(var re="",Ge=q.split("&"),Rt=0;Rt<Ge.length;Rt++){var Me=Ge[Rt].split("=");if(1<Me.length){var Ht=Me[0];Me=Me[1];var Kt=Ht.split("_");re=2<=Kt.length&&Kt[1]=="type"?re+(Ht+"="+Me+"&"):re+(Ht+"=redacted&")}}else re=null;else re=q;return"XMLHTTP REQ ("+L+") [attempt "+H+"]: "+N+`
`+I+`
`+re})}function BI(h,N,I,L,H,q,re){h.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+H+"]: "+N+`
`+I+`
`+q+" "+re})}function Ra(h,N,I,L){h.info(function(){return"XMLHTTP TEXT ("+N+"): "+FI(h,I)+(L?" "+L:"")})}function UI(h,N){h.info(function(){return"TIMEOUT: "+N})}ll.prototype.info=function(){};function FI(h,N){if(!h.g)return N;if(!N)return null;try{var I=JSON.parse(N);if(I){for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var L=I[h];if(!(2>L.length)){var H=L[1];if(Array.isArray(H)&&!(1>H.length)){var q=H[0];if(q!="noop"&&q!="stop"&&q!="close")for(var re=1;re<H.length;re++)H[re]=""}}}}return vr(I)}catch{return N}}var ju={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cf;function Eu(){}x(Eu,Aa),Eu.prototype.g=function(){return new XMLHttpRequest},Eu.prototype.i=function(){return{}},cf=new Eu;function jr(h,N,I,L){this.j=h,this.i=N,this.l=I,this.R=L||1,this.U=new yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pv}function pv(){this.i=null,this.g="",this.h=!1}var gv={},uf={};function df(h,N,I){h.L=1,h.v=Tu(Ln(N)),h.m=I,h.P=!0,xv(h,null)}function xv(h,N){h.F=Date.now(),ku(h),h.A=Ln(h.v);var I=h.A,L=h.R;Array.isArray(L)||(L=[String(L)]),Av(I.i,"t",L),h.C=0,I=h.j.J,h.h=new pv,h.g=Yv(h.j,I?N:null,!h.m),0<h.O&&(h.M=new Ca(p(h.Y,h,h.g),h.O)),N=h.U,I=h.g,L=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(_i[0]=H.toString()),H=_i);for(var q=0;q<H.length;q++){var re=sl(I,H[q],L||N.handleEvent,!1,N.h||N);if(!re)break;N.g[re.key]=re}N=h.H?y(h.H):{},h.m?(h.u||(h.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,N)):(h.u="GET",h.g.ea(h.A,h.u,null,N)),Nr(),zI(h.i,h.u,h.A,h.l,h.R,h.m)}jr.prototype.ca=function(h){h=h.target;const N=this.M;N&&Mn(h)==3?N.j():this.Y(h)},jr.prototype.Y=function(h){try{if(h==this.g)e:{const Kt=Mn(this.g);var N=this.g.Ba();const Ma=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||Vv(this.g)))){this.J||Kt!=4||N==7||(N==8||0>=Ma?Nr(3):Nr(2)),hf(this);var I=this.g.Z();this.X=I;t:if(yv(this)){var L=Vv(this.g);h="";var H=L.length,q=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ai(this),cl(this);var re="";break t}this.h.i=new l.TextDecoder}for(N=0;N<H;N++)this.h.h=!0,h+=this.h.i.decode(L[N],{stream:!(q&&N==H-1)});L.length=0,this.h.g+=h,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=I==200,BI(this.i,this.u,this.A,this.l,this.R,Kt,I),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Rt=this.g;if((Ge=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(Ge)){var Me=Ge;break t}}Me=null}if(I=Me)Ra(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mf(this,I);else{this.o=!1,this.s=3,mt(12),Ai(this),cl(this);break e}}if(this.P){I=!0;let qs;for(;!this.J&&this.C<re.length;)if(qs=$I(this,re),qs==uf){Kt==4&&(this.s=4,mt(14),I=!1),Ra(this.i,this.l,null,"[Incomplete Response]");break}else if(qs==gv){this.s=4,mt(15),Ra(this.i,this.l,re,"[Invalid Chunk]"),I=!1;break}else Ra(this.i,this.l,qs,null),mf(this,qs);if(yv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||re.length!=0||this.h.h||(this.s=1,mt(16),I=!1),this.o=this.o&&I,!I)Ra(this.i,this.l,re,"[Invalid Chunked Response]"),Ai(this),cl(this);else if(0<re.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),vf(Ht),Ht.M=!0,mt(11))}}else Ra(this.i,this.l,re,null),mf(this,re);Kt==4&&Ai(this),this.o&&!this.J&&(Kt==4?Kv(this.j,this):(this.o=!1,ku(this)))}else aA(this.g),I==400&&0<re.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Ai(this),cl(this)}}}catch{}finally{}};function yv(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function $I(h,N){var I=h.C,L=N.indexOf(`
`,I);return L==-1?uf:(I=Number(N.substring(I,L)),isNaN(I)?gv:(L+=1,L+I>N.length?uf:(N=N.slice(L,L+I),h.C=L+I,N)))}jr.prototype.cancel=function(){this.J=!0,Ai(this)};function ku(h){h.S=Date.now()+h.I,vv(h,h.I)}function vv(h,N){if(h.B!=null)throw Error("WatchDog timer not null");h.B=ol(p(h.ba,h),N)}function hf(h){h.B&&(l.clearTimeout(h.B),h.B=null)}jr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(UI(this.i,this.A),this.L!=2&&(Nr(),mt(17)),Ai(this),this.s=2,cl(this)):vv(this,this.S-h)};function cl(h){h.j.G==0||h.J||Kv(h.j,h)}function Ai(h){hf(h);var N=h.M;N&&typeof N.ma=="function"&&N.ma(),h.M=null,il(h.U),h.g&&(N=h.g,h.g=null,N.abort(),N.ma())}function mf(h,N){try{var I=h.j;if(I.G!=0&&(I.g==h||ff(I.h,h))){if(!h.K&&ff(I.h,h)&&I.G==3){try{var L=I.Da.g.parse(N)}catch{L=null}if(Array.isArray(L)&&L.length==3){var H=L;if(H[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<h.F)Du(I),Pu(I);else break e;yf(I),mt(18)}}else I.za=H[1],0<I.za-I.T&&37500>H[2]&&I.F&&I.v==0&&!I.C&&(I.C=ol(p(I.Za,I),6e3));if(1>=Nv(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Ri(I,11)}else if((h.K||I.g==h)&&Du(I),!_(N))for(H=I.Da.g.parse(N),N=0;N<H.length;N++){let Me=H[N];if(I.T=Me[0],Me=Me[1],I.G==2)if(Me[0]=="c"){I.K=Me[1],I.ia=Me[2];const Ht=Me[3];Ht!=null&&(I.la=Ht,I.j.info("VER="+I.la));const Kt=Me[4];Kt!=null&&(I.Aa=Kt,I.j.info("SVER="+I.Aa));const Ma=Me[5];Ma!=null&&typeof Ma=="number"&&0<Ma&&(L=1.5*Ma,I.L=L,I.j.info("backChannelRequestTimeoutMs_="+L)),L=I;const qs=h.g;if(qs){const Mu=qs.g?qs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mu){var q=L.h;q.g||Mu.indexOf("spdy")==-1&&Mu.indexOf("quic")==-1&&Mu.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(pf(q,q.h),q.h=null))}if(L.D){const bf=qs.g?qs.g.getResponseHeader("X-HTTP-Session-Id"):null;bf&&(L.ya=bf,Xe(L.I,L.D,bf))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms")),L=I;var re=h;if(L.qa=qv(L,L.J?L.ia:null,L.W),re.K){jv(L.h,re);var Ge=re,Rt=L.L;Rt&&(Ge.I=Rt),Ge.B&&(hf(Ge),ku(Ge)),L.g=re}else $v(L);0<I.i.length&&Ru(I)}else Me[0]!="stop"&&Me[0]!="close"||Ri(I,7);else I.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Ri(I,7):xf(I):Me[0]!="noop"&&I.l&&I.l.ta(Me),I.v=0)}}Nr(4)}catch{}}var HI=class{constructor(h,N){this.g=h,this.map=N}};function bv(h){this.l=h||10,l.PerformanceNavigationTiming?(h=l.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wv(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nv(h){return h.h?1:h.g?h.g.size:0}function ff(h,N){return h.h?h.h==N:h.g?h.g.has(N):!1}function pf(h,N){h.g?h.g.add(N):h.h=N}function jv(h,N){h.h&&h.h==N?h.h=null:h.g&&h.g.has(N)&&h.g.delete(N)}bv.prototype.cancel=function(){if(this.i=Ev(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ev(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let N=h.i;for(const I of h.g.values())N=N.concat(I.D);return N}return S(h.i)}function KI(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var N=[],I=h.length,L=0;L<I;L++)N.push(h[L]);return N}N=[],I=0;for(L in h)N[I++]=h[L];return N}function GI(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var N=[];h=h.length;for(var I=0;I<h;I++)N.push(I);return N}N=[],I=0;for(const L in h)N[I++]=L;return N}}}function kv(h,N){if(h.forEach&&typeof h.forEach=="function")h.forEach(N,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,N,void 0);else for(var I=GI(h),L=KI(h),H=L.length,q=0;q<H;q++)N.call(void 0,L[q],I&&I[q],h)}var _v=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WI(h,N){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var L=h[I].indexOf("="),H=null;if(0<=L){var q=h[I].substring(0,L);H=h[I].substring(L+1)}else q=h[I];N(q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Pi(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pi){this.h=h.h,_u(this,h.j),this.o=h.o,this.g=h.g,Su(this,h.s),this.l=h.l;var N=h.i,I=new hl;I.i=N.i,N.g&&(I.g=new Map(N.g),I.h=N.h),Sv(this,I),this.m=h.m}else h&&(N=String(h).match(_v))?(this.h=!1,_u(this,N[1]||"",!0),this.o=ul(N[2]||""),this.g=ul(N[3]||"",!0),Su(this,N[4]),this.l=ul(N[5]||"",!0),Sv(this,N[6]||"",!0),this.m=ul(N[7]||"")):(this.h=!1,this.i=new hl(null,this.h))}Pi.prototype.toString=function(){var h=[],N=this.j;N&&h.push(dl(N,Tv,!0),":");var I=this.g;return(I||N=="file")&&(h.push("//"),(N=this.o)&&h.push(dl(N,Tv,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&h.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&h.push("/"),h.push(dl(I,I.charAt(0)=="/"?QI:YI,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",dl(I,ZI)),h.join("")};function Ln(h){return new Pi(h)}function _u(h,N,I){h.j=I?ul(N,!0):N,h.j&&(h.j=h.j.replace(/:$/,""))}function Su(h,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);h.s=N}else h.s=null}function Sv(h,N,I){N instanceof hl?(h.i=N,JI(h.i,h.h)):(I||(N=dl(N,XI)),h.i=new hl(N,h.h))}function Xe(h,N,I){h.i.set(N,I)}function Tu(h){return Xe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ul(h,N){return h?N?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dl(h,N,I){return typeof h=="string"?(h=encodeURI(h).replace(N,qI),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function qI(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Tv=/[#\/\?@]/g,YI=/[#\?:]/g,QI=/[#\?]/g,XI=/[#\?@]/g,ZI=/#/g;function hl(h,N){this.h=this.g=null,this.i=h||null,this.j=!!N}function Er(h){h.g||(h.g=new Map,h.h=0,h.i&&WI(h.i,function(N,I){h.add(decodeURIComponent(N.replace(/\+/g," ")),I)}))}t=hl.prototype,t.add=function(h,N){Er(this),this.i=null,h=Da(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(N),this.h+=1,this};function Cv(h,N){Er(h),N=Da(h,N),h.g.has(N)&&(h.i=null,h.h-=h.g.get(N).length,h.g.delete(N))}function Iv(h,N){return Er(h),N=Da(h,N),h.g.has(N)}t.forEach=function(h,N){Er(this),this.g.forEach(function(I,L){I.forEach(function(H){h.call(N,H,L,this)},this)},this)},t.na=function(){Er(this);const h=Array.from(this.g.values()),N=Array.from(this.g.keys()),I=[];for(let L=0;L<N.length;L++){const H=h[L];for(let q=0;q<H.length;q++)I.push(N[L])}return I},t.V=function(h){Er(this);let N=[];if(typeof h=="string")Iv(this,h)&&(N=N.concat(this.g.get(Da(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)N=N.concat(h[I])}return N},t.set=function(h,N){return Er(this),this.i=null,h=Da(this,h),Iv(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[N]),this.h+=1,this},t.get=function(h,N){return h?(h=this.V(h),0<h.length?String(h[0]):N):N};function Av(h,N,I){Cv(h,N),0<I.length&&(h.i=null,h.g.set(Da(h,N),S(I)),h.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],N=Array.from(this.g.keys());for(var I=0;I<N.length;I++){var L=N[I];const q=encodeURIComponent(String(L)),re=this.V(L);for(L=0;L<re.length;L++){var H=q;re[L]!==""&&(H+="="+encodeURIComponent(String(re[L]))),h.push(H)}}return this.i=h.join("&")};function Da(h,N){return N=String(N),h.j&&(N=N.toLowerCase()),N}function JI(h,N){N&&!h.j&&(Er(h),h.i=null,h.g.forEach(function(I,L){var H=L.toLowerCase();L!=H&&(Cv(this,L),Av(this,H,I))},h)),h.j=N}function eA(h,N){const I=new ll;if(l.Image){const L=new Image;L.onload=f(kr,I,"TestLoadImage: loaded",!0,N,L),L.onerror=f(kr,I,"TestLoadImage: error",!1,N,L),L.onabort=f(kr,I,"TestLoadImage: abort",!1,N,L),L.ontimeout=f(kr,I,"TestLoadImage: timeout",!1,N,L),l.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=h}else N(!1)}function tA(h,N){const I=new ll,L=new AbortController,H=setTimeout(()=>{L.abort(),kr(I,"TestPingServer: timeout",!1,N)},1e4);fetch(h,{signal:L.signal}).then(q=>{clearTimeout(H),q.ok?kr(I,"TestPingServer: ok",!0,N):kr(I,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(H),kr(I,"TestPingServer: error",!1,N)})}function kr(h,N,I,L,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),L(I)}catch{}}function sA(){this.g=new Ia}function nA(h,N,I){const L=I||"";try{kv(h,function(H,q){let re=H;u(H)&&(re=vr(H)),N.push(L+q+"="+encodeURIComponent(re))})}catch(H){throw N.push(L+"type="+encodeURIComponent("_badmap")),H}}function Cu(h){this.l=h.Ub||null,this.j=h.eb||!1}x(Cu,Aa),Cu.prototype.g=function(){return new Iu(this.l,this.j)},Cu.prototype.i=function(h){return function(){return h}}({});function Iu(h,N){jt.call(this),this.D=h,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Iu,jt),t=Iu.prototype,t.open=function(h,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=N,this.readyState=1,fl(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(N.body=h),(this.D||l).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ml(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,fl(this)),this.g&&(this.readyState=3,fl(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pv(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pv(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var N=h.value?h.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!h.done}))&&(this.response=this.responseText+=N)}h.done?ml(this):fl(this),this.readyState==3&&Pv(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ml(this))},t.Qa=function(h){this.g&&(this.response=h,ml(this))},t.ga=function(){this.g&&ml(this)};function ml(h){h.readyState=4,h.l=null,h.j=null,h.v=null,fl(h)}t.setRequestHeader=function(h,N){this.u.append(h,N)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],N=this.h.entries();for(var I=N.next();!I.done;)I=I.value,h.push(I[0]+": "+I[1]),I=N.next();return h.join(`\r
`)};function fl(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Rv(h){let N="";return P(h,function(I,L){N+=L,N+=":",N+=I,N+=`\r
`}),N}function gf(h,N,I){e:{for(L in I){var L=!1;break e}L=!0}L||(I=Rv(I),typeof h=="string"?I!=null&&encodeURIComponent(String(I)):Xe(h,N,I))}function ct(h){jt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(ct,jt);var rA=/^https?$/i,iA=["POST","PUT"];t=ct.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,N,I,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);N=N?N.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cf.g(),this.v=this.o?Si(this.o):Si(cf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(N,String(h),!0),this.B=!1}catch(q){Dv(this,q);return}if(h=I||"",I=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var H in L)I.set(H,L[H]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const q of L.keys())I.set(q,L.get(q));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(I.keys()).find(q=>q.toLowerCase()=="content-type"),H=l.FormData&&h instanceof l.FormData,!(0<=Array.prototype.indexOf.call(iA,N,void 0))||L||H||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,re]of I)this.g.setRequestHeader(q,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ov(this),this.u=!0,this.g.send(h),this.u=!1}catch(q){Dv(this,q)}};function Dv(h,N){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=N,h.m=5,Lv(h),Au(h)}function Lv(h){h.A||(h.A=!0,yt(h,"complete"),yt(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,yt(this,"complete"),yt(this,"abort"),Au(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Au(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mv(this):this.bb())},t.bb=function(){Mv(this)};function Mv(h){if(h.h&&typeof o<"u"&&(!h.v[1]||Mn(h)!=4||h.Z()!=2)){if(h.u&&Mn(h)==4)ki(h.Ea,0,h);else if(yt(h,"readystatechange"),Mn(h)==4){h.h=!1;try{const re=h.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var I;if(!(I=N)){var L;if(L=re===0){var H=String(h.D).match(_v)[1]||null;!H&&l.self&&l.self.location&&(H=l.self.location.protocol.slice(0,-1)),L=!rA.test(H?H.toLowerCase():"")}I=L}if(I)yt(h,"complete"),yt(h,"success");else{h.m=6;try{var q=2<Mn(h)?h.g.statusText:""}catch{q=""}h.l=q+" ["+h.Z()+"]",Lv(h)}}finally{Au(h)}}}}function Au(h,N){if(h.g){Ov(h);const I=h.g,L=h.v[0]?()=>{}:null;h.g=null,h.v=null,N||yt(h,"ready");try{I.onreadystatechange=L}catch{}}}function Ov(h){h.I&&(l.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function Mn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var N=this.g.responseText;return h&&N.indexOf(h)==0&&(N=N.substring(h.length)),wu(N)}};function Vv(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function aA(h){const N={};h=(h.g&&2<=Mn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<h.length;L++){if(_(h[L]))continue;var I=R(h[L]);const H=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const q=N[H]||[];N[H]=q,q.push(I)}b(N,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pl(h,N,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||N}function zv(h){this.Aa=0,this.i=[],this.j=new ll,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pl("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pl("baseRetryDelayMs",5e3,h),this.cb=pl("retryDelaySeedMs",1e4,h),this.Wa=pl("forwardChannelMaxRetries",2,h),this.wa=pl("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new bv(h&&h.concurrentRequestLimit),this.Da=new sA,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zv.prototype,t.la=8,t.G=1,t.connect=function(h,N,I,L){mt(0),this.W=h,this.H=N||{},I&&L!==void 0&&(this.H.OSID=I,this.H.OAID=L),this.F=this.X,this.I=qv(this,null,this.W),Ru(this)};function xf(h){if(Bv(h),h.G==3){var N=h.U++,I=Ln(h.I);if(Xe(I,"SID",h.K),Xe(I,"RID",N),Xe(I,"TYPE","terminate"),gl(h,I),N=new jr(h,h.j,N),N.L=2,N.v=Tu(Ln(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(N.v.toString(),"")}catch{}!I&&l.Image&&(new Image().src=N.v,I=!0),I||(N.g=Yv(N.j,null),N.g.ea(N.v)),N.F=Date.now(),ku(N)}Wv(h)}function Pu(h){h.g&&(vf(h),h.g.cancel(),h.g=null)}function Bv(h){Pu(h),h.u&&(l.clearTimeout(h.u),h.u=null),Du(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&l.clearTimeout(h.s),h.s=null)}function Ru(h){if(!wv(h.h)&&!h.s){h.s=!0;var N=h.Ga;B||z(),O||(B(),O=!0),K.add(N,h),h.B=0}}function oA(h,N){return Nv(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=N.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=ol(p(h.Ga,h,N),Gv(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new jr(this,this.j,h);let q=this.o;if(this.S&&(q?(q=y(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(H.H=q,q=null),this.P)e:{for(var N=0,I=0;I<this.i.length;I++){t:{var L=this.i[I];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(N+=L,4096<N){N=I;break e}if(N===4096||I===this.i.length-1){N=I+1;break e}}N=1e3}else N=1e3;N=Fv(this,H,N),I=Ln(this.I),Xe(I,"RID",h),Xe(I,"CVER",22),this.D&&Xe(I,"X-HTTP-Session-Id",this.D),gl(this,I),q&&(this.O?N="headers="+encodeURIComponent(String(Rv(q)))+"&"+N:this.m&&gf(I,this.m,q)),pf(this.h,H),this.Ua&&Xe(I,"TYPE","init"),this.P?(Xe(I,"$req",N),Xe(I,"SID","null"),H.T=!0,df(H,I,null)):df(H,I,N),this.G=2}}else this.G==3&&(h?Uv(this,h):this.i.length==0||wv(this.h)||Uv(this))};function Uv(h,N){var I;N?I=N.l:I=h.U++;const L=Ln(h.I);Xe(L,"SID",h.K),Xe(L,"RID",I),Xe(L,"AID",h.T),gl(h,L),h.m&&h.o&&gf(L,h.m,h.o),I=new jr(h,h.j,I,h.B+1),h.m===null&&(I.H=h.o),N&&(h.i=N.D.concat(h.i)),N=Fv(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),pf(h.h,I),df(I,L,N)}function gl(h,N){h.H&&P(h.H,function(I,L){Xe(N,L,I)}),h.l&&kv({},function(I,L){Xe(N,L,I)})}function Fv(h,N,I){I=Math.min(h.i.length,I);var L=h.l?p(h.l.Na,h.l,h):null;e:{var H=h.i;let q=-1;for(;;){const re=["count="+I];q==-1?0<I?(q=H[0].g,re.push("ofs="+q)):q=0:re.push("ofs="+q);let Ge=!0;for(let Rt=0;Rt<I;Rt++){let Me=H[Rt].g;const Ht=H[Rt].map;if(Me-=q,0>Me)q=Math.max(0,H[Rt].g-100),Ge=!1;else try{nA(Ht,re,"req"+Me+"_")}catch{L&&L(Ht)}}if(Ge){L=re.join("&");break e}}}return h=h.i.splice(0,I),N.D=h,L}function $v(h){if(!h.g&&!h.u){h.Y=1;var N=h.Fa;B||z(),O||(B(),O=!0),K.add(N,h),h.v=0}}function yf(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=ol(p(h.Fa,h),Gv(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Hv(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=ol(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),Pu(this),Hv(this))};function vf(h){h.A!=null&&(l.clearTimeout(h.A),h.A=null)}function Hv(h){h.g=new jr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var N=Ln(h.qa);Xe(N,"RID","rpc"),Xe(N,"SID",h.K),Xe(N,"AID",h.T),Xe(N,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xe(N,"TO",h.ja),Xe(N,"TYPE","xmlhttp"),gl(h,N),h.m&&h.o&&gf(N,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=Tu(Ln(N)),I.m=null,I.P=!0,xv(I,h)}t.Za=function(){this.C!=null&&(this.C=null,Pu(this),yf(this),mt(19))};function Du(h){h.C!=null&&(l.clearTimeout(h.C),h.C=null)}function Kv(h,N){var I=null;if(h.g==N){Du(h),vf(h),h.g=null;var L=2}else if(ff(h.h,N))I=N.D,jv(h.h,N),L=1;else return;if(h.G!=0){if(N.o)if(L==1){I=N.m?N.m.length:0,N=Date.now()-N.F;var H=h.B;L=Ci(),yt(L,new xe(L,I)),Ru(h)}else $v(h);else if(H=N.s,H==3||H==0&&0<N.X||!(L==1&&oA(h,N)||L==2&&yf(h)))switch(I&&0<I.length&&(N=h.h,N.i=N.i.concat(I)),H){case 1:Ri(h,5);break;case 4:Ri(h,10);break;case 3:Ri(h,6);break;default:Ri(h,2)}}}function Gv(h,N){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*N}function Ri(h,N){if(h.j.info("Error code "+N),N==2){var I=p(h.fb,h),L=h.Xa;const H=!L;L=new Pi(L||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_u(L,"https"),Tu(L),H?eA(L.toString(),I):tA(L.toString(),I)}else mt(2);h.G=0,h.l&&h.l.sa(N),Wv(h),Bv(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Wv(h){if(h.G=0,h.ka=[],h.l){const N=Ev(h.h);(N.length!=0||h.i.length!=0)&&(k(h.ka,N),k(h.ka,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.ra()}}function qv(h,N,I){var L=I instanceof Pi?Ln(I):new Pi(I);if(L.g!="")N&&(L.g=N+"."+L.g),Su(L,L.s);else{var H=l.location;L=H.protocol,N=N?N+"."+H.hostname:H.hostname,H=+H.port;var q=new Pi(null);L&&_u(q,L),N&&(q.g=N),H&&Su(q,H),I&&(q.l=I),L=q}return I=h.D,N=h.ya,I&&N&&Xe(L,I,N),Xe(L,"VER",h.la),gl(h,L),L}function Yv(h,N,I){if(N&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=h.Ca&&!h.pa?new ct(new Cu({eb:I})):new ct(h.pa),N.Ha(h.J),N}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qv(){}t=Qv.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lu(){}Lu.prototype.g=function(h,N){return new bs(h,N)};function bs(h,N){jt.call(this),this.g=new zv(N),this.l=h,this.h=N&&N.messageUrlParams||null,h=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(h?h["X-WebChannel-Content-Type"]=N.messageContentType:h={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(h?h["X-WebChannel-Client-Profile"]=N.va:h={"X-WebChannel-Client-Profile":N.va}),this.g.S=h,(h=N&&N.Sb)&&!_(h)&&(this.g.m=h),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!_(N)&&(this.g.D=N,h=this.h,h!==null&&N in h&&(h=this.h,N in h&&delete h[N])),this.j=new La(this)}x(bs,jt),bs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bs.prototype.close=function(){xf(this.g)},bs.prototype.o=function(h){var N=this.g;if(typeof h=="string"){var I={};I.__data__=h,h=I}else this.u&&(I={},I.__data__=vr(h),h=I);N.i.push(new HI(N.Ya++,h)),N.G==3&&Ru(N)},bs.prototype.N=function(){this.g.l=null,delete this.j,xf(this.g),delete this.g,bs.aa.N.call(this)};function Xv(h){Pa.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var N=h.__sm__;if(N){e:{for(const I in N){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,N=N!==null&&h in N?N[h]:void 0),this.data=N}else this.data=h}x(Xv,Pa);function Zv(){wr.call(this),this.status=1}x(Zv,wr);function La(h){this.g=h}x(La,Qv),La.prototype.ua=function(){yt(this.g,"a")},La.prototype.ta=function(h){yt(this.g,new Xv(h))},La.prototype.sa=function(h){yt(this.g,new Zv)},La.prototype.ra=function(){yt(this.g,"b")},Lu.prototype.createWebChannel=Lu.prototype.g,bs.prototype.send=bs.prototype.o,bs.prototype.open=bs.prototype.m,bs.prototype.close=bs.prototype.close,Z_=function(){return new Lu},X_=function(){return Ci()},Q_=fn,Vg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ju.NO_ERROR=0,ju.TIMEOUT=8,ju.HTTP_ERROR=6,Dd=ju,fv.COMPLETE="complete",Y_=fv,al.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",jt.prototype.listen=jt.prototype.K,Ml=al,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,q_=ct}).apply(typeof sd<"u"?sd:typeof self<"u"?self:typeof window<"u"?window:{});const Yw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new Nx("@firebase/firestore");function kl(){return da.logLevel}function ue(t,...e){if(da.logLevel<=Te.DEBUG){const s=e.map(Mx);da.debug(`Firestore (${qo}): ${t}`,...s)}}function ir(t,...e){if(da.logLevel<=Te.ERROR){const s=e.map(Mx);da.error(`Firestore (${qo}): ${t}`,...s)}}function _o(t,...e){if(da.logLevel<=Te.WARN){const s=e.map(Mx);da.warn(`Firestore (${qo}): ${t}`,...s)}}function Mx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(t="Unexpected state"){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function He(t,e){t||ge()}function ve(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends In{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Qt.UNAUTHENTICATED))}shutdown(){}}class _3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class S3{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){He(this.o===void 0);let n=this.i;const i=c=>this.i!==n?(n=this.i,s(c)):Promise.resolve();let a=new qn;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new qn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qn)}},0),o()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(n=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(He(typeof n.accessToken=="string"),new J_(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new Qt(e)}}class T3{constructor(e,s,n){this.l=e,this.h=s,this.P=n,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C3{constructor(e,s,n){this.l=e,this.h=s,this.P=n}getToken(){return Promise.resolve(new T3(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class A3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){He(this.o===void 0);const n=a=>{a.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?s(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const i=a=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?i(a):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(He(typeof s.token=="string"),this.R=s.token,new I3(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=P3(40);for(let a=0;a<i.length;++a)n.length<20&&i[a]<s&&(n+=e.charAt(i[a]%e.length))}return n}}function ze(t,e){return t<e?-1:t>e?1:0}function So(t,e,s){return t.length===e.length&&t.every((n,i)=>s(n,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _t.fromMillis(Date.now())}static fromDate(e){return _t.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*s));return new _t(s,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new _t(0,0))}static max(){return new ye(new _t(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,s,n){s===void 0?s=0:s>e.length&&ge(),n===void 0?n=e.length-s:n>e.length-s&&ge(),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return Ac.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Ac?e.forEach(n=>{s.push(n)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let i=0;i<n;i++){const a=e.get(i),o=s.get(i);if(a<o)return-1;if(a>o)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class Je extends Ac{construct(e,s,n){return new Je(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new oe(X.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter(i=>i.length>0))}return new Je(s)}static emptyPath(){return new Je([])}}const R3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ot extends Ac{construct(e,s,n){return new Ot(e,s,n)}static isValidIdentifier(e){return R3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ot(["__name__"])}static fromServerFormat(e){const s=[];let n="",i=0;const a=()=>{if(n.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new oe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new oe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(n+=l,i++):(a(),i++)}if(a(),o)throw new oe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ot(s)}static emptyPath(){return new Ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Je.fromString(e))}static fromName(e){return new me(Je.fromString(e).popFirst(5))}static empty(){return new me(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Je.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Je(e.slice()))}}function D3(t,e){const s=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(n===1e9?new _t(s+1,0):new _t(s,n));return new oi(i,me.empty(),e)}function L3(t){return new oi(t.readTime,t.key,-1)}class oi{constructor(e,s,n){this.readTime=e,this.documentKey=s,this.largestBatchId=n}static min(){return new oi(ye.min(),me.empty(),-1)}static max(){return new oi(ye.max(),me.empty(),-1)}}function M3(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=me.comparator(t.documentKey,e.documentKey),s!==0?s:ze(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class V3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==O3)throw t;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new J((n,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,i)},this.catchCallback=a=>{this.wrapFailure(s,a).next(n,i)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof J?s:J.resolve(s)}catch(s){return J.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):J.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):J.reject(s)}static resolve(e){return new J((s,n)=>{s(e)})}static reject(e){return new J((s,n)=>{n(e)})}static waitFor(e){return new J((s,n)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&s()},c=>n(c))}),o=!0,a===i&&s()})}static or(e){let s=J.resolve(!1);for(const n of e)s=s.next(i=>i?J.resolve(i):n());return s}static forEach(e,s){const n=[];return e.forEach((i,a)=>{n.push(s.call(this,i,a))}),this.waitFor(n)}static mapArray(e,s){return new J((n,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;s(e[u]).next(d=>{o[u]=d,++l,l===a&&n(o)},d=>i(d))}})}static doWhile(e,s){return new J((n,i)=>{const a=()=>{e()===!0?s().next(()=>{a()},i):n()};a()})}}function z3(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function lu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=n=>this.ie(n),this.se=n=>s.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Ox.oe=-1;function Em(t){return t==null}function jh(t){return t===0&&1/t==-1/0}function B3(t){return typeof t=="number"&&Number.isInteger(t)&&!jh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qw(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Na(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function tS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,s){this.comparator=e,this.root=s||Mt.EMPTY}insert(e,s){return new lt(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(e){let s=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return s+n.left.size;i<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,n)=>(e(s,n),!1))}toString(){const e=[];return this.inorderTraversal((s,n)=>(e.push(`${s}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nd(this.root,e,this.comparator,!0)}}class nd{constructor(e,s,n,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=s?n(e.key,s):1,s&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,s,n,i,a){this.key=e,this.value=s,this.color=n??Mt.RED,this.left=i??Mt.EMPTY,this.right=a??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,n,i,a){return new Mt(e??this.key,s??this.value,n??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let i=this;const a=n(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,s,n),null):a===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(e,s,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let n,i=this;if(s(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(e,i.key)===0){if(i.right.isEmpty())return Mt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();const e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,s,n,i,a){return this}insert(e,s,n){return new Mt(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,n)=>(e(s),!1))}forEachInRange(e,s){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;s(i.key)}}forEachWhile(e,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Xw(this.data.getIterator())}getIteratorFrom(e){return new Xw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(n=>{s=s.add(n)}),s}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const s=this.data.getIterator(),n=e.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=n.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new zt(this.comparator);return s.data=e,s}}class Xw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.fields=e,e.sort(Ot.comparator)}static empty(){return new ks([])}unionWith(e){let s=new zt(Ot.comparator);for(const n of this.fields)s=s.add(n);for(const n of e)s=s.add(n);return new ks(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,(s,n)=>s.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new sS("Invalid base64 string: "+a):a}}(e);return new Ft(s)}static fromUint8Array(e){const s=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Ft(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const n=new Uint8Array(s.length);for(let i=0;i<s.length;i++)n[i]=s.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ft.EMPTY_BYTE_STRING=new Ft("");const U3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(He(!!t),typeof t=="string"){let e=0;const s=U3.exec(t);if(He(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ha(t){return typeof t=="string"?Ft.fromBase64String(t):Ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function zx(t){const e=t.mapValue.fields.__previous_value__;return Vx(e)?zx(e):e}function Pc(t){const e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new _t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,s,n,i,a,o,l,c,u){this.databaseId=e,this.appId=s,this.persistenceKey=n,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class Rc{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new Rc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd={mapValue:{}};function ma(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vx(t)?4:H3(t)?9007199254740991:$3(t)?10:11:ge()}function Tn(t,e){if(t===e)return!0;const s=ma(t);if(s!==ma(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pc(t).isEqual(Pc(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=li(i.timestampValue),l=li(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return ha(i.bytesValue).isEqual(ha(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return pt(i.geoPointValue.latitude)===pt(a.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return pt(i.integerValue)===pt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=pt(i.doubleValue),l=pt(a.doubleValue);return o===l?jh(o)===jh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return So(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Qw(o)!==Qw(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Tn(o[c],l[c])))return!1;return!0}(t,e);default:return ge()}}function Dc(t,e){return(t.values||[]).find(s=>Tn(s,e))!==void 0}function To(t,e){if(t===e)return 0;const s=ma(t),n=ma(e);if(s!==n)return ze(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return ze(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=pt(a.integerValue||a.doubleValue),c=pt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Zw(t.timestampValue,e.timestampValue);case 4:return Zw(Pc(t),Pc(e));case 5:return ze(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ha(a),c=ha(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=ze(l[u],c[u]);if(d!==0)return d}return ze(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=ze(pt(a.latitude),pt(o.latitude));return l!==0?l:ze(pt(a.longitude),pt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jw(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,c,u,d;const m=a.fields||{},p=o.fields||{},f=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=(c=p.value)===null||c===void 0?void 0:c.arrayValue,S=ze(((u=f==null?void 0:f.values)===null||u===void 0?void 0:u.length)||0,((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0);return S!==0?S:Jw(f,x)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===rd.mapValue&&o===rd.mapValue)return 0;if(a===rd.mapValue)return 1;if(o===rd.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const p=ze(c[m],d[m]);if(p!==0)return p;const f=To(l[c[m]],u[d[m]]);if(f!==0)return f}return ze(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ge()}}function Zw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ze(t,e);const s=li(t),n=li(e),i=ze(s.seconds,n.seconds);return i!==0?i:ze(s.nanos,n.nanos)}function Jw(t,e){const s=t.values||[],n=e.values||[];for(let i=0;i<s.length&&i<n.length;++i){const a=To(s[i],n[i]);if(a)return a}return ze(s.length,n.length)}function Co(t){return zg(t)}function zg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const n=li(s);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return ha(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return me.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let n="[",i=!0;for(const a of s.values||[])i?i=!1:n+=",",n+=zg(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(s){const n=Object.keys(s.fields||{}).sort();let i="{",a=!0;for(const o of n)a?a=!1:i+=",",i+=`${o}:${zg(s.fields[o])}`;return i+"}"}(t.mapValue):ge()}function eN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Bg(t){return!!t&&"integerValue"in t}function Bx(t){return!!t&&"arrayValue"in t}function tN(t){return!!t&&"nullValue"in t}function sN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ld(t){return!!t&&"mapValue"in t}function $3(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function ec(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Na(t.mapValue.fields,(s,n)=>e.mapValue.fields[s]=ec(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=ec(t.arrayValue.values[s]);return e}return Object.assign({},t)}function H3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.value=e}static empty(){return new ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let n=0;n<e.length-1;++n)if(s=(s.mapValue.fields||{})[e.get(n)],!Ld(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=ec(s)}setAll(e){let s=Ot.emptyPath(),n={},i=[];e.forEach((o,l)=>{if(!s.isImmediateParentOf(l)){const c=this.getFieldsMap(s);this.applyChanges(c,n,i),n={},i=[],s=l.popLast()}o?n[l.lastSegment()]=ec(o):i.push(l.lastSegment())});const a=this.getFieldsMap(s);this.applyChanges(a,n,i)}delete(e){const s=this.field(e.popLast());Ld(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=s.mapValue.fields[e.get(n)];Ld(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[e.get(n)]=i),s=i}return s.mapValue.fields}applyChanges(e,s,n){Na(s,(i,a)=>e[i]=a);for(const i of n)delete e[i]}clone(){return new ds(ec(this.value))}}function nS(t){const e=[];return Na(t.fields,(s,n)=>{const i=new Ot([s]);if(Ld(n)){const a=nS(n.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,s,n,i,a,o,l){this.key=e,this.documentType=s,this.version=n,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Zt(e,0,ye.min(),ye.min(),ye.min(),ds.empty(),0)}static newFoundDocument(e,s,n,i){return new Zt(e,1,s,ye.min(),n,i,0)}static newNoDocument(e,s){return new Zt(e,2,s,ye.min(),ye.min(),ds.empty(),0)}static newUnknownDocument(e,s){return new Zt(e,3,s,ye.min(),ye.min(),ds.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Zt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,s){this.position=e,this.inclusive=s}}function nN(t,e,s){let n=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?n=me.comparator(me.fromName(o.referenceValue),s.key):n=To(o,s.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function rN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!Tn(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,s="asc"){this.field=e,this.dir=s}}function K3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rS=class{};class Nt extends rS{constructor(e,s,n){super(),this.field=e,this.op=s,this.value=n}static create(e,s,n){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,n):new W3(e,s,n):s==="array-contains"?new Q3(e,n):s==="in"?new X3(e,n):s==="not-in"?new Z3(e,n):s==="array-contains-any"?new J3(e,n):new Nt(e,s,n)}static createKeyFieldInFilter(e,s,n){return s==="in"?new q3(e,n):new Y3(e,n)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(To(s,this.value)):s!==null&&ma(this.value)===ma(s)&&this.matchesComparison(To(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ln extends rS{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new ln(e,s)}matches(e){return iS(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function iS(t){return t.op==="and"}function aS(t){return G3(t)&&iS(t)}function G3(t){for(const e of t.filters)if(e instanceof ln)return!1;return!0}function Ug(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+Co(t.value);if(aS(t))return t.filters.map(e=>Ug(e)).join(",");{const e=t.filters.map(s=>Ug(s)).join(",");return`${t.op}(${e})`}}function oS(t,e){return t instanceof Nt?function(n,i){return i instanceof Nt&&n.op===i.op&&n.field.isEqual(i.field)&&Tn(n.value,i.value)}(t,e):t instanceof ln?function(n,i){return i instanceof ln&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((a,o,l)=>a&&oS(o,i.filters[l]),!0):!1}(t,e):void ge()}function lS(t){return t instanceof Nt?function(s){return`${s.field.canonicalString()} ${s.op} ${Co(s.value)}`}(t):t instanceof ln?function(s){return s.op.toString()+" {"+s.getFilters().map(lS).join(" ,")+"}"}(t):"Filter"}class W3 extends Nt{constructor(e,s,n){super(e,s,n),this.key=me.fromName(n.referenceValue)}matches(e){const s=me.comparator(e.key,this.key);return this.matchesComparison(s)}}class q3 extends Nt{constructor(e,s){super(e,"in",s),this.keys=cS("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class Y3 extends Nt{constructor(e,s){super(e,"not-in",s),this.keys=cS("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function cS(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(n=>me.fromName(n.referenceValue))}class Q3 extends Nt{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return Bx(s)&&Dc(s.arrayValue,this.value)}}class X3 extends Nt{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&Dc(this.value.arrayValue,s)}}class Z3 extends Nt{constructor(e,s){super(e,"not-in",s)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!Dc(this.value.arrayValue,s)}}class J3 extends Nt{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!Bx(s)||!s.arrayValue.values)&&s.arrayValue.values.some(n=>Dc(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,s=null,n=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=s,this.orderBy=n,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.ue=null}}function iN(t,e=null,s=[],n=[],i=null,a=null,o=null){return new e6(t,e,s,n,i,a,o)}function Ux(t){const e=ve(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(n=>Ug(n)).join(","),s+="|ob:",s+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Em(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>Co(n)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>Co(n)).join(",")),e.ue=s}return e.ue}function Fx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!K3(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!oS(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rN(t.startAt,e.startAt)&&rN(t.endAt,e.endAt)}function Fg(t){return me.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,s=null,n=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function t6(t,e,s,n,i,a,o,l){return new Yo(t,e,s,n,i,a,o,l)}function km(t){return new Yo(t)}function aN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uS(t){return t.collectionGroup!==null}function tc(t){const e=ve(t);if(e.ce===null){e.ce=[];const s=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),s.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new zt(Ot.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{s.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Lc(a,n))}),s.has(Ot.keyField().canonicalString())||e.ce.push(new Lc(Ot.keyField(),n))}return e.ce}function En(t){const e=ve(t);return e.le||(e.le=s6(e,tc(t))),e.le}function s6(t,e){if(t.limitType==="F")return iN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Lc(i.field,a)});const s=t.endAt?new Eh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Eh(t.startAt.position,t.startAt.inclusive):null;return iN(t.path,t.collectionGroup,e,t.filters,t.limit,s,n)}}function $g(t,e){const s=t.filters.concat([e]);return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Hg(t,e,s){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function _m(t,e){return Fx(En(t),En(e))&&t.limitType===e.limitType}function dS(t){return`${Ux(En(t))}|lt:${t.limitType}`}function za(t){return`Query(target=${function(s){let n=s.path.canonicalString();return s.collectionGroup!==null&&(n+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(n+=`, filters: [${s.filters.map(i=>lS(i)).join(", ")}]`),Em(s.limit)||(n+=", limit: "+s.limit),s.orderBy.length>0&&(n+=`, orderBy: [${s.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),s.startAt&&(n+=", startAt: ",n+=s.startAt.inclusive?"b:":"a:",n+=s.startAt.position.map(i=>Co(i)).join(",")),s.endAt&&(n+=", endAt: ",n+=s.endAt.inclusive?"a:":"b:",n+=s.endAt.position.map(i=>Co(i)).join(",")),`Target(${n})`}(En(t))}; limitType=${t.limitType})`}function Sm(t,e){return e.isFoundDocument()&&function(n,i){const a=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):me.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,i){for(const a of tc(n))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,i){for(const a of n.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(n,i){return!(n.startAt&&!function(o,l,c){const u=nN(o,l,c);return o.inclusive?u<=0:u<0}(n.startAt,tc(n),i)||n.endAt&&!function(o,l,c){const u=nN(o,l,c);return o.inclusive?u>=0:u>0}(n.endAt,tc(n),i))}(t,e)}function n6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hS(t){return(e,s)=>{let n=!1;for(const i of tc(t)){const a=r6(i,e,s);if(a!==0)return a;n=n||i.field.isKeyField()}return 0}}function r6(t,e,s){const n=t.field.isKeyField()?me.comparator(e.key,s.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?To(c,u):ge()}(t.field,e,s);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ge()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n!==void 0){for(const[i,a]of n)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,s){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,s]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,s]);i.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[s]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,(s,n)=>{for(const[i,a]of n)e(i,a)})}isEmpty(){return tS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6=new lt(me.comparator);function ar(){return i6}const mS=new lt(me.comparator);function Ol(...t){let e=mS;for(const s of t)e=e.insert(s.key,s);return e}function fS(t){let e=mS;return t.forEach((s,n)=>e=e.insert(s,n.overlayedDocument)),e}function Wi(){return sc()}function pS(){return sc()}function sc(){return new Qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const a6=new lt(me.comparator),o6=new zt(me.comparator);function ke(...t){let e=o6;for(const s of t)e=e.add(s);return e}const l6=new zt(ze);function c6(){return l6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function gS(t){return{integerValue:""+t}}function u6(t,e){return B3(e)?gS(e):$x(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm{constructor(){this._=void 0}}function d6(t,e,s){return t instanceof kh?function(i,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Vx(a)&&(a=zx(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(s,e):t instanceof Mc?yS(t,e):t instanceof Oc?vS(t,e):function(i,a){const o=xS(i,a),l=oN(o)+oN(i.Pe);return Bg(o)&&Bg(i.Pe)?gS(l):$x(i.serializer,l)}(t,e)}function h6(t,e,s){return t instanceof Mc?yS(t,e):t instanceof Oc?vS(t,e):s}function xS(t,e){return t instanceof _h?function(n){return Bg(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class kh extends Tm{}class Mc extends Tm{constructor(e){super(),this.elements=e}}function yS(t,e){const s=bS(e);for(const n of t.elements)s.some(i=>Tn(i,n))||s.push(n);return{arrayValue:{values:s}}}class Oc extends Tm{constructor(e){super(),this.elements=e}}function vS(t,e){let s=bS(e);for(const n of t.elements)s=s.filter(i=>!Tn(i,n));return{arrayValue:{values:s}}}class _h extends Tm{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function oN(t){return pt(t.integerValue||t.doubleValue)}function bS(t){return Bx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function m6(t,e){return t.field.isEqual(e.field)&&function(n,i){return n instanceof Mc&&i instanceof Mc||n instanceof Oc&&i instanceof Oc?So(n.elements,i.elements,Tn):n instanceof _h&&i instanceof _h?Tn(n.Pe,i.Pe):n instanceof kh&&i instanceof kh}(t.transform,e.transform)}class f6{constructor(e,s){this.version=e,this.transformResults=s}}class Us{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Us}static exists(e){return new Us(void 0,e)}static updateTime(e){return new Us(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Md(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cm{}function wS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hx(t.key,Us.none()):new cu(t.key,t.data,Us.none());{const s=t.data,n=ds.empty();let i=new zt(Ot.comparator);for(let a of e.fields)if(!i.has(a)){let o=s.field(a);o===null&&a.length>1&&(a=a.popLast(),o=s.field(a)),o===null?n.delete(a):n.set(a,o),i=i.add(a)}return new xi(t.key,n,new ks(i.toArray()),Us.none())}}function p6(t,e,s){t instanceof cu?function(i,a,o){const l=i.value.clone(),c=cN(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,s):t instanceof xi?function(i,a,o){if(!Md(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=cN(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(NS(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,s):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,s)}function nc(t,e,s,n){return t instanceof cu?function(a,o,l,c){if(!Md(a.precondition,o))return l;const u=a.value.clone(),d=uN(a.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,s,n):t instanceof xi?function(a,o,l,c){if(!Md(a.precondition,o))return l;const u=uN(a.fieldTransforms,c,o),d=o.data;return d.setAll(NS(a)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,s,n):function(a,o,l){return Md(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,s)}function g6(t,e){let s=null;for(const n of t.fieldTransforms){const i=e.data.field(n.field),a=xS(n.transform,i||null);a!=null&&(s===null&&(s=ds.empty()),s.set(n.field,a))}return s||null}function lN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&So(n,i,(a,o)=>m6(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cu extends Cm{constructor(e,s,n,i=[]){super(),this.key=e,this.value=s,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xi extends Cm{constructor(e,s,n,i,a=[]){super(),this.key=e,this.data=s,this.fieldMask=n,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function NS(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=t.data.field(s);e.set(s,n)}}),e}function cN(t,e,s){const n=new Map;He(t.length===s.length);for(let i=0;i<s.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);n.set(a.field,h6(o,l,s[i]))}return n}function uN(t,e,s){const n=new Map;for(const i of t){const a=i.transform,o=s.data.field(i.field);n.set(i.field,d6(a,o,e))}return n}class Hx extends Cm{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x6 extends Cm{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,s,n,i){this.batchId=e,this.localWriteTime=s,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,s){const n=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&p6(a,e,n[i])}}applyToLocalView(e,s){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(s=nc(n,e,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(s=nc(n,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const n=pS();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=s.has(i.key)?null:l;const c=wS(o,l);c!==null&&n.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),ke())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,(s,n)=>lN(s,n))&&So(this.baseMutations,e.baseMutations,(s,n)=>lN(s,n))}}class Kx{constructor(e,s,n,i){this.batch=e,this.commitVersion=s,this.mutationResults=n,this.docVersions=i}static from(e,s,n){He(e.mutations.length===n.length);let i=function(){return a6}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,n[o].version);return new Kx(e,s,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,Pe;function w6(t){switch(t){default:return ge();case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0}}function jS(t){if(t===void 0)return ir("GRPC error has no .code"),X.UNKNOWN;switch(t){case vt.OK:return X.OK;case vt.CANCELLED:return X.CANCELLED;case vt.UNKNOWN:return X.UNKNOWN;case vt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case vt.INTERNAL:return X.INTERNAL;case vt.UNAVAILABLE:return X.UNAVAILABLE;case vt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case vt.NOT_FOUND:return X.NOT_FOUND;case vt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case vt.ABORTED:return X.ABORTED;case vt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case vt.DATA_LOSS:return X.DATA_LOSS;default:return ge()}}(Pe=vt||(vt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=new Zi([4294967295,4294967295],0);function dN(t){const e=N6().encode(t),s=new W_;return s.update(e),new Uint8Array(s.digest())}function hN(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zi([s,n],0),new Zi([i,a],0)]}class Gx{constructor(e,s,n){if(this.bitmap=e,this.padding=s,this.hashCount=n,s<0||s>=8)throw new Vl(`Invalid padding: ${s}`);if(n<0)throw new Vl(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${n}`);if(e.length===0&&s!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=Zi.fromNumber(this.Ie)}Ee(e,s,n){let i=e.add(s.multiply(Zi.fromNumber(n)));return i.compare(j6)===1&&(i=new Zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=dN(e),[n,i]=hN(s);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);if(!this.de(o))return!1}return!0}static create(e,s,n){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Gx(a,i,s);return n.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const s=dN(e),[n,i]=hN(s);for(let a=0;a<this.hashCount;a++){const o=this.Ee(n,i,a);this.Ae(o)}}Ae(e){const s=Math.floor(e/8),n=e%8;this.bitmap[s]|=1<<n}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,s,n,i,a){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,s,n){const i=new Map;return i.set(e,uu.createSynthesizedTargetChangeForCurrentChange(e,s,n)),new Im(ye.min(),i,new lt(ze),ar(),ke())}}class uu{constructor(e,s,n,i,a){this.resumeToken=e,this.current=s,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,s,n){return new uu(n,s,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,s,n,i){this.Re=e,this.removedTargetIds=s,this.key=n,this.Ve=i}}class ES{constructor(e,s){this.targetId=e,this.me=s}}class kS{constructor(e,s,n=Ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=s,this.resumeToken=n,this.cause=i}}class mN{constructor(){this.fe=0,this.ge=pN(),this.pe=Ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),s=ke(),n=ke();return this.ge.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:s=s.add(i);break;case 1:n=n.add(i);break;default:ge()}}),new uu(this.pe,this.ye,e,s,n)}Ce(){this.we=!1,this.ge=pN()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class E6{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=fN(),this.Qe=new lt(ze)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,s=>{const n=this.Ge(s);switch(e.state){case 0:this.ze(s)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),n.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach((n,i)=>{this.ze(i)&&s(i)})}He(e){const s=e.targetId,n=e.me.count,i=this.Je(s);if(i){const a=i.target;if(Fg(a))if(n===0){const o=new me(a.path);this.Ue(s,o,Zt.newNoDocument(o,ye.min()))}else He(n===1);else{const o=this.Ye(s);if(o!==n){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(s);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,u)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:a=0}=s;let o,l;try{o=ha(n).toUint8Array()}catch(c){if(c instanceof sS)return _o("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Gx(o,i,a)}catch(c){return _o(c instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,s,n){return s.me.count===n-this.nt(e,s.targetId)?0:2}nt(e,s){const n=this.Le.getRemoteKeysForTarget(s);let i=0;return n.forEach(a=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.Ue(s,a,null),i++)}),i}rt(e){const s=new Map;this.Be.forEach((a,o)=>{const l=this.Je(o);if(l){if(a.current&&Fg(l.target)){const c=new me(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Zt.newNoDocument(c,e))}a.be&&(s.set(o,a.ve()),a.Ce())}});let n=ke();this.qe.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const i=new Im(e,s,this.Qe,this.ke,n);return this.ke=ar(),this.qe=fN(),this.Qe=new lt(ze),i}$e(e,s){if(!this.ze(e))return;const n=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,n),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,s)?i.Fe(s,1):i.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),n&&(this.ke=this.ke.insert(s,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new mN,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new zt(ze),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||ue("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mN),this.Le.getRemoteKeysForTarget(e).forEach(s=>{this.Ue(e,s,null)})}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function fN(){return new lt(me.comparator)}function pN(){return new lt(me.comparator)}const k6={asc:"ASCENDING",desc:"DESCENDING"},_6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S6={and:"AND",or:"OR"};class T6{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Kg(t,e){return t.useProto3Json||Em(e)?e:{value:e}}function Sh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _S(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function C6(t,e){return Sh(t,e.toTimestamp())}function kn(t){return He(!!t),ye.fromTimestamp(function(s){const n=li(s);return new _t(n.seconds,n.nanos)}(t))}function Wx(t,e){return Gg(t,e).canonicalString()}function Gg(t,e){const s=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?s:s.child(e)}function SS(t){const e=Je.fromString(t);return He(PS(e)),e}function Wg(t,e){return Wx(t.databaseId,e.path)}function tp(t,e){const s=SS(e);if(s.get(1)!==t.databaseId.projectId)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new me(CS(s))}function TS(t,e){return Wx(t.databaseId,e)}function I6(t){const e=SS(t);return e.length===4?Je.emptyPath():CS(e)}function qg(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CS(t){return He(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gN(t,e,s){return{name:Wg(t,e),fields:s.value.mapValue.fields}}function A6(t,e){let s;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(He(d===void 0||typeof d=="string"),Ft.fromBase64String(d||"")):(He(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ft.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?X.UNKNOWN:jS(u.code);return new oe(d,u.message||"")}(o);s=new kS(n,i,a,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=tp(t,n.document.name),a=kn(n.document.updateTime),o=n.document.createTime?kn(n.document.createTime):ye.min(),l=new ds({mapValue:{fields:n.document.fields}}),c=Zt.newFoundDocument(i,a,o,l),u=n.targetIds||[],d=n.removedTargetIds||[];s=new Od(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=tp(t,n.document),a=n.readTime?kn(n.readTime):ye.min(),o=Zt.newNoDocument(i,a),l=n.removedTargetIds||[];s=new Od([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=tp(t,n.document),a=n.removedTargetIds||[];s=new Od([],a,i,null)}else{if(!("filter"in e))return ge();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:a}=n,o=new b6(i,a),l=n.targetId;s=new ES(l,o)}}return s}function P6(t,e){let s;if(e instanceof cu)s={update:gN(t,e.key,e.value)};else if(e instanceof Hx)s={delete:Wg(t,e.key)};else if(e instanceof xi)s={update:gN(t,e.key,e.data),updateMask:U6(e.fieldMask)};else{if(!(e instanceof x6))return ge();s={verify:Wg(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(n=>function(a,o){const l=o.transform;if(l instanceof kh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Mc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Oc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof _h)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ge()}(0,n))),e.precondition.isNone||(s.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:C6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ge()}(t,e.precondition)),s}function R6(t,e){return t&&t.length>0?(He(e!==void 0),t.map(s=>function(i,a){let o=i.updateTime?kn(i.updateTime):kn(a);return o.isEqual(ye.min())&&(o=kn(a)),new f6(o,i.transformResults||[])}(s,e))):[]}function D6(t,e){return{documents:[TS(t,e.path)]}}function L6(t,e){const s={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=TS(t,i);const a=function(u){if(u.length!==0)return AS(ln.create(u,"and"))}(e.filters);a&&(s.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:Ba(p.field),direction:V6(p.dir)}}(d))}(e.orderBy);o&&(s.structuredQuery.orderBy=o);const l=Kg(t,e.limit);return l!==null&&(s.structuredQuery.limit=l),e.startAt&&(s.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:s,parent:i}}function M6(t){let e=I6(t.parent);const s=t.structuredQuery,n=s.from?s.from.length:0;let i=null;if(n>0){He(n===1);const d=s.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let a=[];s.where&&(a=function(m){const p=IS(m);return p instanceof ln&&aS(p)?p.getFilters():[p]}(s.where));let o=[];s.orderBy&&(o=function(m){return m.map(p=>function(x){return new Lc(Ua(x.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(p))}(s.orderBy));let l=null;s.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,Em(p)?null:p}(s.limit));let c=null;s.startAt&&(c=function(m){const p=!!m.before,f=m.values||[];return new Eh(f,p)}(s.startAt));let u=null;return s.endAt&&(u=function(m){const p=!m.before,f=m.values||[];return new Eh(f,p)}(s.endAt)),t6(e,i,o,a,l,"F",c,u)}function O6(t,e){const s=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function IS(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const n=Ua(s.unaryFilter.field);return Nt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Ua(s.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ua(s.unaryFilter.field);return Nt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ua(s.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(s){return Nt.create(Ua(s.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return ln.create(s.compositeFilter.filters.map(n=>IS(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(s.compositeFilter.op))}(t):ge()}function V6(t){return k6[t]}function z6(t){return _6[t]}function B6(t){return S6[t]}function Ba(t){return{fieldPath:t.canonicalString()}}function Ua(t){return Ot.fromServerFormat(t.fieldPath)}function AS(t){return t instanceof Nt?function(s){if(s.op==="=="){if(sN(s.value))return{unaryFilter:{field:Ba(s.field),op:"IS_NAN"}};if(tN(s.value))return{unaryFilter:{field:Ba(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(sN(s.value))return{unaryFilter:{field:Ba(s.field),op:"IS_NOT_NAN"}};if(tN(s.value))return{unaryFilter:{field:Ba(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ba(s.field),op:z6(s.op),value:s.value}}}(t):t instanceof ln?function(s){const n=s.getFilters().map(i=>AS(i));return n.length===1?n[0]:{compositeFilter:{op:B6(s.op),filters:n}}}(t):ge()}function U6(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function PS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,s,n,i,a=ye.min(),o=ye.min(),l=Ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=s,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.ct=e}}function $6(t){const e=M6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(){this.un=new K6}addToCollectionParentIndex(e,s){return this.un.add(s),J.resolve()}getCollectionParents(e,s){return J.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return J.resolve()}deleteFieldIndex(e,s){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,s){return J.resolve()}getDocumentsMatchingTarget(e,s){return J.resolve(null)}getIndexType(e,s){return J.resolve(0)}getFieldIndexes(e,s){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,s){return J.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,s){return J.resolve(oi.min())}updateCollectionGroup(e,s,n){return J.resolve()}updateIndexEntries(e,s){return J.resolve()}}class K6{constructor(){this.index={}}add(e){const s=e.lastSegment(),n=e.popLast(),i=this.index[s]||new zt(Je.comparator),a=!i.has(n);return this.index[s]=i.add(n),a}has(e){const s=e.lastSegment(),n=e.popLast(),i=this.index[s];return i&&i.has(n)}getEntries(e){return(this.index[e]||new zt(Je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Io(0)}static kn(){return new Io(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this.changes=new Qo(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?J.resolve(n):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,s,n,i){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,s){let n=null;return this.documentOverlayCache.getOverlay(e,s).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,s))).next(i=>(n!==null&&nc(n.mutation,i,ks.empty(),_t.now()),i))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.getLocalViewOfDocuments(e,n,ke()).next(()=>n))}getLocalViewOfDocuments(e,s,n=ke()){const i=Wi();return this.populateOverlays(e,i,s).next(()=>this.computeViews(e,s,i,n).next(a=>{let o=Ol();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,s){const n=Wi();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,ke()))}populateOverlays(e,s,n){const i=[];return n.forEach(a=>{s.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{s.set(o,l)})})}computeViews(e,s,n,i){let a=ar();const o=sc(),l=function(){return sc()}();return s.forEach((c,u)=>{const d=n.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof xi)?a=a.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),nc(d.mutation,u,d.mutation.getFieldMask(),_t.now())):o.set(u.key,ks.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,d)=>o.set(u,d)),s.forEach((u,d)=>{var m;return l.set(u,new W6(d,(m=o.get(u))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,s){const n=sc();let i=new lt((o,l)=>o-l),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=s.get(c);if(u===null)return;let d=n.get(c)||ks.empty();d=l.applyToLocalView(u,d),n.set(c,d);const m=(i.get(l.batchId)||ke()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,m=pS();d.forEach(p=>{if(!a.has(p)){const f=wS(s.get(p),n.get(p));f!==null&&m.set(p,f),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return J.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,s,n,i){return function(o){return me.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):uS(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,n,i):this.getDocumentsMatchingCollectionQuery(e,s,n,i)}getNextDocuments(e,s,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,n,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,n.largestBatchId,i-a.size):J.resolve(Wi());let l=-1,c=a;return o.next(u=>J.forEach(u,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(d)?J.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,ke())).next(d=>({batchId:l,changes:fS(d)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new me(s)).next(n=>{let i=Ol();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,s,n,i){const a=s.collectionGroup;let o=Ol();return this.indexManager.getCollectionParents(e,a).next(l=>J.forEach(l,c=>{const u=function(m,p){return new Yo(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(s,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(d=>{d.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,s,n,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,n.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,n,a,i))).next(o=>{a.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Zt.newInvalidDocument(d)))});let l=Ol();return o.forEach((c,u)=>{const d=a.get(c);d!==void 0&&nc(d.mutation,u,ks.empty(),_t.now()),Sm(s,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return J.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,function(i){return{id:i.id,version:i.version,createTime:kn(i.createTime)}}(s)),J.resolve()}getNamedQuery(e,s){return J.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,function(i){return{name:i.name,query:$6(i.bundledQuery),readTime:kn(i.readTime)}}(s)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.overlays=new lt(me.comparator),this.Ir=new Map}getOverlay(e,s){return J.resolve(this.overlays.get(s))}getOverlays(e,s){const n=Wi();return J.forEach(s,i=>this.getOverlay(e,i).next(a=>{a!==null&&n.set(i,a)})).next(()=>n)}saveOverlays(e,s,n){return n.forEach((i,a)=>{this.ht(e,s,a)}),J.resolve()}removeOverlaysForBatchId(e,s,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(n)),J.resolve()}getOverlaysForCollection(e,s,n){const i=Wi(),a=s.length+1,o=new me(s.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!s.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>n&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,s,n,i){let a=new lt((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===s&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=Wi(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Wi(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return J.resolve(l)}ht(e,s,n){const i=this.overlays.get(n.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new v6(s,n));let a=this.Ir.get(s);a===void 0&&(a=ke(),this.Ir.set(s,a)),this.Ir.set(s,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.sessionToken=Ft.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.Tr=new zt(Ct.Er),this.dr=new zt(Ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const n=new Ct(e,s);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,s){e.forEach(n=>this.addReference(n,s))}removeReference(e,s){this.Vr(new Ct(e,s))}mr(e,s){e.forEach(n=>this.removeReference(n,s))}gr(e){const s=new me(new Je([])),n=new Ct(s,e),i=new Ct(s,e+1),a=[];return this.dr.forEachInRange([n,i],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new me(new Je([])),n=new Ct(s,e),i=new Ct(s,e+1);let a=ke();return this.dr.forEachInRange([n,i],o=>{a=a.add(o.key)}),a}containsKey(e){const s=new Ct(e,0),n=this.Tr.firstAfterOrEqual(s);return n!==null&&e.isEqual(n.key)}}class Ct{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return me.comparator(e.key,s.key)||ze(e.wr,s.wr)}static Ar(e,s){return ze(e.wr,s.wr)||me.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new zt(Ct.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,n,i){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new y6(a,s,n,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new Ct(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,s){return J.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const n=s+1,i=this.vr(n),a=i<0?0:i;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const n=new Ct(s,0),i=new Ct(s,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([n,i],o=>{const l=this.Dr(o.wr);a.push(l)}),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,s){let n=new zt(ze);return s.forEach(i=>{const a=new Ct(i,0),o=new Ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],l=>{n=n.add(l.wr)})}),J.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,s){const n=s.path,i=n.length+1;let a=n;me.isDocumentKey(a)||(a=a.child(""));const o=new Ct(new me(a),0);let l=new zt(ze);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.wr)),!0)},o),J.resolve(this.Cr(l))}Cr(e){const s=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&s.push(i)}),s}removeMutationBatch(e,s){He(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return J.forEach(s.mutations,i=>{const a=new Ct(i.key,s.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,s){const n=new Ct(s,0),i=this.br.firstAfterOrEqual(n);return J.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.Mr=e,this.docs=function(){return new lt(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const n=s.key,i=this.docs.get(n),a=i?i.size:0,o=this.Mr(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const n=this.docs.get(s);return J.resolve(n?n.document.mutableCopy():Zt.newInvalidDocument(s))}getEntries(e,s){let n=ar();return s.forEach(i=>{const a=this.docs.get(i);n=n.insert(i,a?a.document.mutableCopy():Zt.newInvalidDocument(i))}),J.resolve(n)}getDocumentsMatchingQuery(e,s,n,i){let a=ar();const o=s.path,l=new me(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||M3(L3(d),n)<=0||(i.has(d.key)||Sm(s,d))&&(a=a.insert(d.key,d.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,s,n,i){ge()}Or(e,s){return J.forEach(this.docs,n=>s(n))}newChangeBuffer(e){return new eO(this)}getSize(e){return J.resolve(this.size)}}class eO extends G6{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?s.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),J.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.persistence=e,this.Nr=new Qo(s=>Ux(s),Fx),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qx,this.targetCount=0,this.kr=Io.Bn()}forEachTarget(e,s){return this.Nr.forEach((n,i)=>s(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.Lr&&(this.Lr=s),J.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new Io(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,J.resolve()}updateTargetData(e,s){return this.Kn(s),J.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,s,n){let i=0;const a=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=s&&n.get(l.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),J.waitFor(a).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,s){const n=this.Nr.get(s)||null;return J.resolve(n)}addMatchingKeys(e,s,n){return this.Br.Rr(s,n),J.resolve()}removeMatchingKeys(e,s,n){this.Br.mr(s,n);const i=this.persistence.referenceDelegate,a=[];return i&&s.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),J.waitFor(a)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),J.resolve()}getMatchingKeysForTargetId(e,s){const n=this.Br.yr(s);return J.resolve(n)}containsKey(e,s){return J.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,s){this.qr={},this.overlays={},this.Qr=new Ox(0),this.Kr=!1,this.Kr=!0,this.$r=new X6,this.referenceDelegate=e(this),this.Ur=new tO(this),this.indexManager=new H6,this.remoteDocumentCache=function(i){return new J6(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new F6(s),this.Gr=new Y6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new Q6,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let n=this.qr[e.toKey()];return n||(n=new Z6(s,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,n){ue("MemoryPersistence","Starting transaction:",e);const i=new nO(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(a=>this.referenceDelegate.jr(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Hr(e,s){return J.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,s)))}}class nO extends V3{constructor(e){super(),this.currentSequenceNumber=e}}class Yx{constructor(e){this.persistence=e,this.Jr=new qx,this.Yr=null}static Zr(e){return new Yx(e)}get Xr(){if(this.Yr)return this.Yr;throw ge()}addReference(e,s,n){return this.Jr.addReference(n,s),this.Xr.delete(n.toString()),J.resolve()}removeReference(e,s,n){return this.Jr.removeReference(n,s),this.Xr.add(n.toString()),J.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),J.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,s.targetId).next(i=>{i.forEach(a=>this.Xr.add(a.toString()))}).next(()=>n.removeTargetData(e,s))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,n=>{const i=me.fromPath(n);return this.ei(e,i).next(a=>{a||s.removeEntry(i,ye.min())})}).next(()=>(this.Yr=null,s.apply(e)))}updateLimboDocument(e,s){return this.ei(e,s).next(n=>{n?this.Xr.delete(s.toString()):this.Xr.add(s.toString())})}Wr(e){return 0}ei(e,s){return J.or([()=>J.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e,s,n,i){this.targetId=e,this.fromCache=s,this.$i=n,this.Ui=i}static Wi(e,s){let n=ke(),i=ke();for(const a of s.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Qx(e,s.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return KL()?8:z3(ss())>0?6:4}()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,n,i){const a={result:null};return this.Yi(e,s).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,s,i,n).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new rO;return this.Xi(e,s,o).next(l=>{if(a.result=l,this.zi)return this.es(e,s,o,l.size)})}).next(()=>a.result)}es(e,s,n,i){return n.documentReadCount<this.ji?(kl()<=Te.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",za(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(kl()<=Te.DEBUG&&ue("QueryEngine","Query:",za(s),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(kl()<=Te.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",za(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(s))):J.resolve())}Yi(e,s){if(aN(s))return J.resolve(null);let n=En(s);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(s.limit!==null&&i===1&&(s=Hg(s,null,"F"),n=En(s)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const o=ke(...a);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(s,l);return this.ns(s,u,o,c.readTime)?this.Yi(e,Hg(s,null,"F")):this.rs(e,u,s,c)}))})))}Zi(e,s,n,i){return aN(s)||i.isEqual(ye.min())?J.resolve(null):this.Ji.getDocuments(e,n).next(a=>{const o=this.ts(s,a);return this.ns(s,o,n,i)?J.resolve(null):(kl()<=Te.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),za(s)),this.rs(e,o,s,D3(i,-1)).next(l=>l))})}ts(e,s){let n=new zt(hS(e));return s.forEach((i,a)=>{Sm(e,a)&&(n=n.add(a))}),n}ns(e,s,n,i){if(e.limit===null)return!1;if(n.size!==s.size)return!0;const a=e.limitType==="F"?s.last():s.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Xi(e,s,n){return kl()<=Te.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",za(s)),this.Ji.getDocumentsMatchingQuery(e,s,oi.min(),n)}rs(e,s,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(a=>(s.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,s,n,i){this.persistence=e,this.ss=s,this.serializer=i,this.os=new lt(ze),this._s=new Qo(a=>Ux(a),Fx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new q6(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.os))}}function oO(t,e,s,n){return new aO(t,e,s,n)}async function RS(t,e){const s=ve(t);return await s.persistence.runTransaction("Handle user change","readonly",n=>{let i;return s.mutationQueue.getAllMutationBatches(n).next(a=>(i=a,s.ls(e),s.mutationQueue.getAllMutationBatches(n))).next(a=>{const o=[],l=[];let c=ke();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of a){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return s.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:l}))})})}function lO(t,e){const s=ve(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),a=s.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const m=u.batch,p=m.keys();let f=J.resolve();return p.forEach(x=>{f=f.next(()=>d.getEntry(c,x)).next(S=>{const k=u.docVersions.get(x);He(k!==null),S.version.compareTo(k)<0&&(m.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),d.addEntry(S)))})}),f.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(s,n,e,a).next(()=>a.apply(n)).next(()=>s.mutationQueue.performConsistencyCheck(n)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let c=ke();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>s.localDocuments.getDocuments(n,i))})}function DS(t){const e=ve(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Ur.getLastRemoteSnapshotVersion(s))}function cO(t,e){const s=ve(t),n=e.snapshotVersion;let i=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=s.cs.newChangeBuffer({trackRemovals:!0});i=s.os;const l=[];e.targetChanges.forEach((d,m)=>{const p=i.get(m);if(!p)return;l.push(s.Ur.removeMatchingKeys(a,d.removedDocuments,m).next(()=>s.Ur.addMatchingKeys(a,d.addedDocuments,m)));let f=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?f=f.withResumeToken(Ft.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,n)),i=i.insert(m,f),function(S,k,v){return S.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,f,d)&&l.push(s.Ur.updateTargetData(a,f))});let c=ar(),u=ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(s.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(uO(a,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!n.isEqual(ye.min())){const d=s.Ur.getLastRemoteSnapshotVersion(a).next(m=>s.Ur.setTargetsMetadata(a,a.currentSequenceNumber,n));l.push(d)}return J.waitFor(l).next(()=>o.apply(a)).next(()=>s.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(s.os=i,a))}function uO(t,e,s){let n=ke(),i=ke();return s.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let o=ar();return s.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ye.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ue("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function dO(t,e){const s=ve(t);return s.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function hO(t,e){const s=ve(t);return s.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return s.Ur.getTargetData(n,e).next(a=>a?(i=a,J.resolve(i)):s.Ur.allocateTargetId(n).next(o=>(i=new Fr(e,o,"TargetPurposeListen",n.currentSequenceNumber),s.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=s.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.os=s.os.insert(n.targetId,n),s._s.set(e,n.targetId)),n})}async function Yg(t,e,s){const n=ve(t),i=n.os.get(e),a=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",a,o=>n.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!lu(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function xN(t,e,s){const n=ve(t);let i=ye.min(),a=ke();return n.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const m=ve(c),p=m._s.get(d);return p!==void 0?J.resolve(m.os.get(p)):m.Ur.getTargetData(u,d)}(n,o,En(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,s?i:ye.min(),s?a:ke())).next(l=>(mO(n,n6(e),l),{documents:l,Ts:a})))}function mO(t,e,s){let n=t.us.get(e)||ye.min();s.forEach((i,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.us.set(e,n)}class yN{constructor(){this.activeTargetIds=c6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fO{constructor(){this.so=new yN,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,n){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,n){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yN,Promise.resolve()}handleUserChange(e,s,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id=null;function sp(){return id===null?id=function(){return 268435456+Math.round(2147483648*Math.random())}():id++,"0x"+id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class yO extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const n=s.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+s.host,this.vo=`projects/${i}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${a}`}get Fo(){return!1}Mo(s,n,i,a,o){const l=sp(),c=this.xo(s,n.toUriEncodedString());ue("RestConnection",`Sending RPC '${s}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,a,o),this.No(s,c,u,i).then(d=>(ue("RestConnection",`Received RPC '${s}' ${l}: `,d),d),d=>{throw _o("RestConnection",`RPC '${s}' ${l} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(s,n,i,a,o,l){return this.Mo(s,n,i,a,o)}Oo(s,n,i){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,o)=>s[o]=a),i&&i.headers.forEach((a,o)=>s[o]=a)}xo(s,n){const i=gO[s];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,n,i){const a=sp();return new Promise((o,l)=>{const c=new q_;c.setWithCredentials(!0),c.listenOnce(Y_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Dd.NO_ERROR:const d=c.getResponseJson();ue(qt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case Dd.TIMEOUT:ue(qt,`RPC '${e}' ${a} timed out`),l(new oe(X.DEADLINE_EXCEEDED,"Request time out"));break;case Dd.HTTP_ERROR:const m=c.getStatus();if(ue(qt,`RPC '${e}' ${a} failed with status:`,m,"response text:",c.getResponseText()),m>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const f=p==null?void 0:p.error;if(f&&f.status&&f.message){const x=function(k){const v=k.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(v)>=0?v:X.UNKNOWN}(f.status);l(new oe(x,f.message))}else l(new oe(X.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new oe(X.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ue(qt,`RPC '${e}' ${a} completed.`)}});const u=JSON.stringify(i);ue(qt,`RPC '${e}' ${a} sending request:`,i),c.send(s,"POST",u,n,15)})}Bo(e,s,n){const i=sp(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Z_(),l=X_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,s,n),c.encodeInitMessageHeaders=!0;const d=a.join("");ue(qt,`Creating RPC '${e}' stream ${i}: ${d}`,c);const m=o.createWebChannel(d,c);let p=!1,f=!1;const x=new xO({Io:k=>{f?ue(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(p||(ue(qt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),ue(qt,`RPC '${e}' stream ${i} sending:`,k),m.send(k))},To:()=>m.close()}),S=(k,v,_)=>{k.listen(v,w=>{try{_(w)}catch(E){setTimeout(()=>{throw E},0)}})};return S(m,Ml.EventType.OPEN,()=>{f||(ue(qt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),S(m,Ml.EventType.CLOSE,()=>{f||(f=!0,ue(qt,`RPC '${e}' stream ${i} transport closed`),x.So())}),S(m,Ml.EventType.ERROR,k=>{f||(f=!0,_o(qt,`RPC '${e}' stream ${i} transport errored:`,k),x.So(new oe(X.UNAVAILABLE,"The operation could not be completed")))}),S(m,Ml.EventType.MESSAGE,k=>{var v;if(!f){const _=k.data[0];He(!!_);const w=_,E=w.error||((v=w[0])===null||v===void 0?void 0:v.error);if(E){ue(qt,`RPC '${e}' stream ${i} received error:`,E);const T=E.status;let P=function(j){const C=vt[j];if(C!==void 0)return jS(C)}(T),b=E.message;P===void 0&&(P=X.INTERNAL,b="Unknown error status: "+T+" with message "+E.message),f=!0,x.So(new oe(P,b)),m.close()}else ue(qt,`RPC '${e}' stream ${i} received:`,_),x.bo(_)}}),S(l,Q_.STAT_EVENT,k=>{k.stat===Vg.PROXY?ue(qt,`RPC '${e}' stream ${i} detected buffering proxy`):k.stat===Vg.NOPROXY&&ue(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t){return new T6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(e,s,n=1e3,i=1.5,a=6e4){this.ui=e,this.timerId=s,this.ko=n,this.qo=i,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,s-n);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,s,n,i,a,o,l,c){this.ui=e,this.Ho=n,this.Jo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new LS(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===X.RESOURCE_EXHAUSTED?(ir(s.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===s&&this.P_(n,i)},n=>{e(()=>{const i=new oe(X.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,s){const n=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget(()=>this.Yo===e?s():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vO extends MS{constructor(e,s,n,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,i,o),this.serializer=a}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=A6(this.serializer,e),n=function(a){if(!("targetChange"in a))return ye.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ye.min():o.readTime?kn(o.readTime):ye.min()}(e);return this.listener.d_(s,n)}A_(e){const s={};s.database=qg(this.serializer),s.addTarget=function(a,o){let l;const c=o.target;if(l=Fg(c)?{documents:D6(a,c)}:{query:L6(a,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=_S(a,o.resumeToken);const u=Kg(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ye.min())>0){l.readTime=Sh(a,o.snapshotVersion.toTimestamp());const u=Kg(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const n=O6(this.serializer,e);n&&(s.labels=n),this.a_(s)}R_(e){const s={};s.database=qg(this.serializer),s.removeTarget=e,this.a_(s)}}class bO extends MS{constructor(e,s,n,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,i,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return He(!!e.streamToken),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){He(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=R6(e.writeResults,e.commitTime),n=kn(e.commitTime);return this.listener.g_(n,s)}p_(){const e={};e.database=qg(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map(n=>P6(this.serializer,n))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO extends class{}{constructor(e,s,n,i){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Gg(s,n),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new oe(X.UNKNOWN,a.toString())})}Lo(e,s,n,i,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Gg(s,n),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(X.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class NO{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(s),this.D_=!1):ue("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e,s,n,i,a){this.localStore=e,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{n.enqueueAndForget(async()=>{ja(this)&&(ue("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=ve(c);u.L_.add(4),await du(u),u.q_.set("Unknown"),u.L_.delete(4),await Pm(u)}(this))})}),this.q_=new NO(n,i)}}async function Pm(t){if(ja(t))for(const e of t.B_)await e(!0)}async function du(t){for(const e of t.B_)await e(!1)}function OS(t,e){const s=ve(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),ey(s)?Jx(s):Xo(s).r_()&&Zx(s,e))}function Xx(t,e){const s=ve(t),n=Xo(s);s.N_.delete(e),n.r_()&&VS(s,e),s.N_.size===0&&(n.r_()?n.o_():ja(s)&&s.q_.set("Unknown"))}function Zx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Xo(t).A_(e)}function VS(t,e){t.Q_.xe(e),Xo(t).R_(e)}function Jx(t){t.Q_=new E6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Xo(t).start(),t.q_.v_()}function ey(t){return ja(t)&&!Xo(t).n_()&&t.N_.size>0}function ja(t){return ve(t).L_.size===0}function zS(t){t.Q_=void 0}async function EO(t){t.q_.set("Online")}async function kO(t){t.N_.forEach((e,s)=>{Zx(t,e)})}async function _O(t,e){zS(t),ey(t)?(t.q_.M_(e),Jx(t)):t.q_.set("Unknown")}async function SO(t,e,s){if(t.q_.set("Online"),e instanceof kS&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(n){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Th(t,n)}else if(e instanceof Od?t.Q_.Ke(e):e instanceof ES?t.Q_.He(e):t.Q_.We(e),!s.isEqual(ye.min()))try{const n=await DS(t.localStore);s.compareTo(n)>=0&&await function(a,o){const l=a.Q_.rt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=a.N_.get(u);d&&a.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=a.N_.get(c);if(!d)return;a.N_.set(c,d.withResumeToken(Ft.EMPTY_BYTE_STRING,d.snapshotVersion)),VS(a,c);const m=new Fr(d.target,c,u,d.sequenceNumber);Zx(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,s)}catch(n){ue("RemoteStore","Failed to raise snapshot:",n),await Th(t,n)}}async function Th(t,e,s){if(!lu(e))throw e;t.L_.add(1),await du(t),t.q_.set("Offline"),s||(s=()=>DS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ue("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await Pm(t)})}function BS(t,e){return e().catch(s=>Th(t,s,e))}async function Rm(t){const e=ve(t),s=ci(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TO(e);)try{const i=await dO(e.localStore,n);if(i===null){e.O_.length===0&&s.o_();break}n=i.batchId,CO(e,i)}catch(i){await Th(e,i)}US(e)&&FS(e)}function TO(t){return ja(t)&&t.O_.length<10}function CO(t,e){t.O_.push(e);const s=ci(t);s.r_()&&s.V_&&s.m_(e.mutations)}function US(t){return ja(t)&&!ci(t).n_()&&t.O_.length>0}function FS(t){ci(t).start()}async function IO(t){ci(t).p_()}async function AO(t){const e=ci(t);for(const s of t.O_)e.m_(s.mutations)}async function PO(t,e,s){const n=t.O_.shift(),i=Kx.from(n,e,s);await BS(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rm(t)}async function RO(t,e){e&&ci(t).V_&&await async function(n,i){if(function(o){return w6(o)&&o!==X.ABORTED}(i.code)){const a=n.O_.shift();ci(n).s_(),await BS(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Rm(n)}}(t,e),US(t)&&FS(t)}async function bN(t,e){const s=ve(t);s.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const n=ja(s);s.L_.add(3),await du(s),n&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await Pm(s)}async function DO(t,e){const s=ve(t);e?(s.L_.delete(2),await Pm(s)):e||(s.L_.add(2),await du(s),s.q_.set("Unknown"))}function Xo(t){return t.K_||(t.K_=function(s,n,i){const a=ve(s);return a.w_(),new vO(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:EO.bind(null,t),Ro:kO.bind(null,t),mo:_O.bind(null,t),d_:SO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),ey(t)?Jx(t):t.q_.set("Unknown")):(await t.K_.stop(),zS(t))})),t.K_}function ci(t){return t.U_||(t.U_=function(s,n,i){const a=ve(s);return a.w_(),new bO(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:IO.bind(null,t),mo:RO.bind(null,t),f_:AO.bind(null,t),g_:PO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rm(t)):(await t.U_.stop(),t.O_.length>0&&(ue("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,s,n,i,a){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=i,this.removalCallback=a,this.deferred=new qn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,n,i,a){const o=Date.now()+n,l=new ty(e,s,o,i,a);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sy(t,e){if(ir("AsyncQueue",`${e}: ${t}`),lu(t))return new oe(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.comparator=e?(s,n)=>e(s,n)||me.comparator(s.key,n.key):(s,n)=>me.comparator(s.key,n.key),this.keyedMap=Ol(),this.sortedSet=new lt(this.comparator)}static emptySet(e){return new go(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,n)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof go)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,a=n.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const n=new go;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(){this.W_=new lt(me.comparator)}track(e){const s=e.doc.key,n=this.W_.get(s);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(s,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(s,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(s):e.type===1&&n.type===2?this.W_=this.W_.insert(s,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):ge():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal((s,n)=>{e.push(n)}),e}}class Ao{constructor(e,s,n,i,a,o,l,c,u){this.query=e,this.docs=s,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,s,n,i,a){const o=[];return s.forEach(l=>{o.push({type:0,doc:l})}),new Ao(e,s,go.emptySet(s),o,n,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_m(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,n=e.docChanges;if(s.length!==n.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==n[i].type||!s[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class MO{constructor(){this.queries=NN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,n){const i=ve(s),a=i.queries;i.queries=NN(),a.forEach((o,l)=>{for(const c of l.j_)c.onError(n)})})(this,new oe(X.ABORTED,"Firestore shutting down"))}}function NN(){return new Qo(t=>dS(t),_m)}async function ny(t,e){const s=ve(t);let n=3;const i=e.query;let a=s.queries.get(i);a?!a.H_()&&e.J_()&&(n=2):(a=new LO,n=e.J_()?0:1);try{switch(n){case 0:a.z_=await s.onListen(i,!0);break;case 1:a.z_=await s.onListen(i,!1);break;case 2:await s.onFirstRemoteStoreListen(i)}}catch(o){const l=sy(o,`Initialization of query '${za(e.query)}' failed`);return void e.onError(l)}s.queries.set(i,a),a.j_.push(e),e.Z_(s.onlineState),a.z_&&e.X_(a.z_)&&iy(s)}async function ry(t,e){const s=ve(t),n=e.query;let i=3;const a=s.queries.get(n);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?i=e.J_()?0:1:!a.H_()&&e.J_()&&(i=2))}switch(i){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}function OO(t,e){const s=ve(t);let n=!1;for(const i of e){const a=i.query,o=s.queries.get(a);if(o){for(const l of o.j_)l.X_(i)&&(n=!0);o.z_=i}}n&&iy(s)}function VO(t,e,s){const n=ve(t),i=n.queries.get(e);if(i)for(const a of i.j_)a.onError(s);n.queries.delete(e)}function iy(t){t.Y_.forEach(e=>{e.next()})}var Qg,jN;(jN=Qg||(Qg={})).ea="default",jN.Cache="cache";class ay{constructor(e,s,n){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Ao(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const n=s!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=Ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.key=e}}class HS{constructor(e){this.key=e}}class zO{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ke(),this.mutatedKeys=ke(),this.Aa=hS(e),this.Ra=new go(this.Aa)}get Va(){return this.Ta}ma(e,s){const n=s?s.fa:new wN,i=s?s.Ra:this.Ra;let a=s?s.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,m)=>{const p=i.get(d),f=Sm(this.query,m)?m:null,x=!!p&&this.mutatedKeys.has(p.key),S=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let k=!1;p&&f?p.data.isEqual(f.data)?x!==S&&(n.track({type:3,doc:f}),k=!0):this.ga(p,f)||(n.track({type:2,doc:f}),k=!0,(c&&this.Aa(f,c)>0||u&&this.Aa(f,u)<0)&&(l=!0)):!p&&f?(n.track({type:0,doc:f}),k=!0):p&&!f&&(n.track({type:1,doc:p}),k=!0,(c||u)&&(l=!0)),k&&(f?(o=o.add(f),a=S?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{Ra:o,fa:n,ns:l,mutatedKeys:a}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,n,i){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(f,x){const S=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return S(f)-S(x)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(n),i=i!=null&&i;const l=s&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Ao(this.query,e.Ra,a,o,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new wN,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(s=>this.Ta=this.Ta.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ta=this.Ta.delete(s)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ke(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const s=[];return e.forEach(n=>{this.da.has(n)||s.push(new HS(n))}),this.da.forEach(n=>{e.has(n)||s.push(new $S(n))}),s}ba(e){this.Ta=e.Ts,this.da=ke();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return Ao.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class BO{constructor(e,s,n){this.query=e,this.targetId=s,this.view=n}}class UO{constructor(e){this.key=e,this.va=!1}}class FO{constructor(e,s,n,i,a,o){this.localStore=e,this.remoteStore=s,this.eventManager=n,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qo(l=>dS(l),_m),this.Ma=new Map,this.xa=new Set,this.Oa=new lt(me.comparator),this.Na=new Map,this.La=new qx,this.Ba={},this.ka=new Map,this.qa=Io.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $O(t,e,s=!0){const n=QS(t);let i;const a=n.Fa.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.Da()):i=await KS(n,e,s,!0),i}async function HO(t,e){const s=QS(t);await KS(s,e,!0,!1)}async function KS(t,e,s,n){const i=await hO(t.localStore,En(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,s);let l;return n&&(l=await KO(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&s&&OS(t.remoteStore,i),l}async function KO(t,e,s,n,i){t.Ka=(m,p,f)=>async function(S,k,v,_){let w=k.view.ma(v);w.ns&&(w=await xN(S.localStore,k.query,!1).then(({documents:b})=>k.view.ma(b,w)));const E=_&&_.targetChanges.get(k.targetId),T=_&&_.targetMismatches.get(k.targetId)!=null,P=k.view.applyChanges(w,S.isPrimaryClient,E,T);return kN(S,k.targetId,P.wa),P.snapshot}(t,m,p,f);const a=await xN(t.localStore,e,!0),o=new zO(e,a.Ts),l=o.ma(a.documents),c=uu.createSynthesizedTargetChangeForCurrentChange(s,n&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);kN(t,s,u.wa);const d=new BO(e,s,o);return t.Fa.set(e,d),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),u.snapshot}async function GO(t,e,s){const n=ve(t),i=n.Fa.get(e),a=n.Ma.get(i.targetId);if(a.length>1)return n.Ma.set(i.targetId,a.filter(o=>!_m(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Yg(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),s&&Xx(n.remoteStore,i.targetId),Xg(n,i.targetId)}).catch(ou)):(Xg(n,i.targetId),await Yg(n.localStore,i.targetId,!0))}async function WO(t,e){const s=ve(t),n=s.Fa.get(e),i=s.Ma.get(n.targetId);s.isPrimaryClient&&i.length===1&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),Xx(s.remoteStore,n.targetId))}async function qO(t,e,s){const n=tV(t);try{const i=await function(o,l){const c=ve(o),u=_t.now(),d=l.reduce((f,x)=>f.add(x.key),ke());let m,p;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let x=ar(),S=ke();return c.cs.getEntries(f,d).next(k=>{x=k,x.forEach((v,_)=>{_.isValidDocument()||(S=S.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,x)).next(k=>{m=k;const v=[];for(const _ of l){const w=g6(_,m.get(_.key).overlayedDocument);w!=null&&v.push(new xi(_.key,w,nS(w.value.mapValue),Us.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,v,l)}).next(k=>{p=k;const v=k.applyToLocalDocumentSet(m,S);return c.documentOverlayCache.saveOverlays(f,k.batchId,v)})}).then(()=>({batchId:p.batchId,changes:fS(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new lt(ze)),u=u.insert(l,c),o.Ba[o.currentUser.toKey()]=u}(n,i.batchId,s),await hu(n,i.changes),await Rm(n.remoteStore)}catch(i){const a=sy(i,"Failed to persist write");s.reject(a)}}async function GS(t,e){const s=ve(t);try{const n=await cO(s.localStore,e);e.targetChanges.forEach((i,a)=>{const o=s.Na.get(a);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?He(o.va):i.removedDocuments.size>0&&(He(o.va),o.va=!1))}),await hu(s,n,e)}catch(n){await ou(n)}}function EN(t,e,s){const n=ve(t);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const i=[];n.Fa.forEach((a,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ve(o);c.onlineState=l;let u=!1;c.queries.forEach((d,m)=>{for(const p of m.j_)p.Z_(l)&&(u=!0)}),u&&iy(c)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function YO(t,e,s){const n=ve(t);n.sharedClientState.updateQueryState(e,"rejected",s);const i=n.Na.get(e),a=i&&i.key;if(a){let o=new lt(me.comparator);o=o.insert(a,Zt.newNoDocument(a,ye.min()));const l=ke().add(a),c=new Im(ye.min(),new Map,new lt(ze),o,l);await GS(n,c),n.Oa=n.Oa.remove(a),n.Na.delete(e),oy(n)}else await Yg(n.localStore,e,!1).then(()=>Xg(n,e,s)).catch(ou)}async function QO(t,e){const s=ve(t),n=e.batch.batchId;try{const i=await lO(s.localStore,e);qS(s,n,null),WS(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await hu(s,i)}catch(i){await ou(i)}}async function XO(t,e,s){const n=ve(t);try{const i=await function(o,l){const c=ve(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(m=>(He(m!==null),d=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,e);qS(n,e,s),WS(n,e),n.sharedClientState.updateMutationState(e,"rejected",s),await hu(n,i)}catch(i){await ou(i)}}function WS(t,e){(t.ka.get(e)||[]).forEach(s=>{s.resolve()}),t.ka.delete(e)}function qS(t,e,s){const n=ve(t);let i=n.Ba[n.currentUser.toKey()];if(i){const a=i.get(e);a&&(s?a.reject(s):a.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function Xg(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),s&&t.Ca.$a(n,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||YS(t,n)})}function YS(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(Xx(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),oy(t))}function kN(t,e,s){for(const n of s)n instanceof $S?(t.La.addReference(n.key,e),ZO(t,n)):n instanceof HS?(ue("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||YS(t,n.key)):ge()}function ZO(t,e){const s=e.key,n=s.path.canonicalString();t.Oa.get(s)||t.xa.has(n)||(ue("SyncEngine","New document in limbo: "+s),t.xa.add(n),oy(t))}function oy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new me(Je.fromString(e)),n=t.qa.next();t.Na.set(n,new UO(s)),t.Oa=t.Oa.insert(s,n),OS(t.remoteStore,new Fr(En(km(s.path)),n,"TargetPurposeLimboResolution",Ox.oe))}}async function hu(t,e,s){const n=ve(t),i=[],a=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((l,c)=>{o.push(n.Ka(c,e,s).then(u=>{var d;if((u||s)&&n.isPrimaryClient){const m=u?!u.fromCache:(d=s==null?void 0:s.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){i.push(u);const m=Qx.Wi(c.targetId,u);a.push(m)}}))}),await Promise.all(o),n.Ca.d_(i),await async function(c,u){const d=ve(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>J.forEach(u,p=>J.forEach(p.$i,f=>d.persistence.referenceDelegate.addReference(m,p.targetId,f)).next(()=>J.forEach(p.Ui,f=>d.persistence.referenceDelegate.removeReference(m,p.targetId,f)))))}catch(m){if(!lu(m))throw m;ue("LocalStore","Failed to update sequence numbers: "+m)}for(const m of u){const p=m.targetId;if(!m.fromCache){const f=d.os.get(p),x=f.snapshotVersion,S=f.withLastLimboFreeSnapshotVersion(x);d.os=d.os.insert(p,S)}}}(n.localStore,a))}async function JO(t,e){const s=ve(t);if(!s.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const n=await RS(s.localStore,e);s.currentUser=e,function(a,o){a.ka.forEach(l=>{l.forEach(c=>{c.reject(new oe(X.CANCELLED,o))})}),a.ka.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await hu(s,n.hs)}}function eV(t,e){const s=ve(t),n=s.Na.get(e);if(n&&n.va)return ke().add(n.key);{let i=ke();const a=s.Ma.get(e);if(!a)return i;for(const o of a){const l=s.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function QS(t){const e=ve(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YO.bind(null,e),e.Ca.d_=OO.bind(null,e.eventManager),e.Ca.$a=VO.bind(null,e.eventManager),e}function tV(t){const e=ve(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=XO.bind(null,e),e}class Ch{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Am(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return oO(this.persistence,new iO,e.initialUser,this.serializer)}Ga(e){return new sO(Yx.Zr,this.serializer)}Wa(e){return new fO}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ch.provider={build:()=>new Ch};class Zg{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>EN(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=JO.bind(null,this.syncEngine),await DO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MO}()}createDatastore(e){const s=Am(e.databaseInfo.databaseId),n=function(a){return new yO(a)}(e.databaseInfo);return function(a,o,l,c){return new wO(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,n,s)}createRemoteStore(e){return function(n,i,a,o,l){return new jO(n,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,s=>EN(this.syncEngine,s,0),function(){return vN.D()?new vN:new pO}())}createSyncEngine(e,s){return function(i,a,o,l,c,u,d){const m=new FO(i,a,o,l,c,u);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(i){const a=ve(i);ue("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await du(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}Zg.provider={build:()=>new Zg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,s,n,i,a){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=eS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async o=>{ue("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(ue("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const n=sy(s,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function rp(t,e){t.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let n=s.initialUser;t.setCredentialChangeListener(async i=>{n.isEqual(i)||(await RS(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _N(t,e){t.asyncQueue.verifyOperationInProgress();const s=await nV(t);ue("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(n=>bN(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,i)=>bN(e.remoteStore,i)),t._onlineComponents=e}async function nV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{await rp(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(i){return i.name==="FirebaseError"?i.code===X.FAILED_PRECONDITION||i.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(s))throw s;_o("Error using user provided cache. Falling back to memory cache: "+s),await rp(t,new Ch)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),await rp(t,new Ch);return t._offlineComponents}async function XS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),await _N(t,t._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),await _N(t,new Zg))),t._onlineComponents}function rV(t){return XS(t).then(e=>e.syncEngine)}async function Ih(t){const e=await XS(t),s=e.eventManager;return s.onListen=$O.bind(null,e.syncEngine),s.onUnlisten=GO.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=HO.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=WO.bind(null,e.syncEngine),s}function iV(t,e,s={}){const n=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new ly({next:p=>{d.Za(),o.enqueueAndForget(()=>ry(a,m));const f=p.docs.has(l);!f&&p.fromCache?u.reject(new oe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&p.fromCache&&c&&c.source==="server"?u.reject(new oe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new ay(km(l.path),d,{includeMetadataChanges:!0,_a:!0});return ny(a,m)}(await Ih(t),t.asyncQueue,e,s,n)),n.promise}function aV(t,e,s={}){const n=new qn;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const d=new ly({next:p=>{d.Za(),o.enqueueAndForget(()=>ry(a,m)),p.fromCache&&c.source==="server"?u.reject(new oe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),m=new ay(l,d,{includeMetadataChanges:!0,_a:!0});return ny(a,m)}(await Ih(t),t.asyncQueue,e,s,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t,e,s){if(!s)throw new oe(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oV(t,e,s,n){if(e===!0&&n===!0)throw new oe(X.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function TN(t){if(!me.isDocumentKey(t))throw new oe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function CN(t){if(me.isDocumentKey(t))throw new oe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Dm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function gs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=Dm(t);throw new oe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e){var s,n;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new oe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZS((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lm{constructor(e,s,n,i){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IN({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IN(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new k3;switch(n.type){case"firstParty":return new C3(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new oe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const n=SN.get(s);n&&(ue("ComponentProvider","Removing Datastore"),SN.delete(s),n.terminate())}(this),Promise.resolve()}}function lV(t,e,s,n={}){var i;const a=(t=gs(t,Lm))._getSettings(),o=`${e}:${s}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&_o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),n.mockUserToken){let l,c;if(typeof n.mockUserToken=="string")l=n.mockUserToken,c=Qt.MOCK_USER;else{l=a_(n.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new oe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Qt(u)}t._authCredentials=new _3(new J_(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class es{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new es(this.firestore,e,this._key)}}class si extends yi{constructor(e,s,n){super(e,s,km(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new es(this.firestore,null,new me(e))}withConverter(e){return new si(this.firestore,e,this._path)}}function Ie(t,e,...s){if(t=ht(t),JS("collection","path",e),t instanceof Lm){const n=Je.fromString(e,...s);return CN(n),new si(t,null,n)}{if(!(t instanceof es||t instanceof si))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Je.fromString(e,...s));return CN(n),new si(t.firestore,null,n)}}function Ce(t,e,...s){if(t=ht(t),arguments.length===1&&(e=eS.newId()),JS("doc","path",e),t instanceof Lm){const n=Je.fromString(e,...s);return TN(n),new es(t,null,new me(n))}{if(!(t instanceof es||t instanceof si))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Je.fromString(e,...s));return TN(n),new es(t.firestore,t instanceof si?t.converter:null,new me(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new LS(this,"async_queue_retry"),this.Vu=()=>{const n=np();n&&ue("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const s=np();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=np();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const s=new qn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!lu(e))throw e;ue("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const s=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw ir("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=s,s}enqueueAfterDelay(e,s,n){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const i=ty.createAndSchedule(this,e,s,n,a=>this.yu(a));return this.Tu.push(i),i}fu(){this.Eu&&ge()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((s,n)=>s.targetTimeMs-n.targetTimeMs);for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}function PN(t){return function(s,n){if(typeof s!="object"||s===null)return!1;const i=s;for(const a of n)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class or extends Lm{constructor(e,s,n,i){super(e,s,n,i),this.type="firestore",this._queue=new AN,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AN(e),this._firestoreClient=void 0,await e}}}function cV(t,e){const s=typeof t=="object"?t:Ex(),n=typeof t=="string"?t:"(default)",i=bm(s,"firestore").getImmediate({identifier:n});if(!i._initialized){const a=n_("firestore");a&&lV(i,...a)}return i}function Mm(t){if(t._terminated)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uV(t),t._firestoreClient}function uV(t){var e,s,n;const i=t._freezeSettings(),a=function(l,c,u,d){return new F3(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,ZS(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((s=i.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new sV(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Po(Ft.fromBase64String(e))}catch(s){throw new oe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Po(Ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new oe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new oe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new oe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==i[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=/^__.*__$/;class hV{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,s,this.fieldTransforms):new cu(e,this.data,s,this.fieldTransforms)}}class eT{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return new xi(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function tT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}class hy{constructor(e,s,n,i,a,o){this.settings=e,this.databaseId=s,this.serializer=n,this.ignoreUndefinedProperties=i,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ah(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(tT(this.Cu)&&dV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mV{constructor(e,s,n){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=n||Am(e)}Qu(e,s,n,i=!1){return new hy({Cu:e,methodName:s,qu:n,path:Ot.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vm(t){const e=t._freezeSettings(),s=Am(t._databaseId);return new mV(t._databaseId,!!e.ignoreUndefinedProperties,s)}function sT(t,e,s,n,i,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,s,i);my("Data must be an object, but it was:",o,n);const l=nT(n,o);let c,u;if(a.merge)c=new ks(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const m of a.mergeFields){const p=Jg(e,m,s);if(!o.contains(p))throw new oe(X.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);iT(d,p)||d.push(p)}c=new ks(d),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new hV(new ds(l),c,u)}class zm extends cy{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zm}}function fV(t,e,s,n){const i=t.Qu(1,e,s);my("Data must be an object, but it was:",i,n);const a=[],o=ds.empty();Na(n,(c,u)=>{const d=fy(e,c,s);u=ht(u);const m=i.Nu(d);if(u instanceof zm)a.push(d);else{const p=mu(u,m);p!=null&&(a.push(d),o.set(d,p))}});const l=new ks(a);return new eT(o,l,i.fieldTransforms)}function pV(t,e,s,n,i,a){const o=t.Qu(1,e,s),l=[Jg(e,n,s)],c=[i];if(a.length%2!=0)throw new oe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(Jg(e,a[p])),c.push(a[p+1]);const u=[],d=ds.empty();for(let p=l.length-1;p>=0;--p)if(!iT(u,l[p])){const f=l[p];let x=c[p];x=ht(x);const S=o.Nu(f);if(x instanceof zm)u.push(f);else{const k=mu(x,S);k!=null&&(u.push(f),d.set(f,k))}}const m=new ks(u);return new eT(d,m,o.fieldTransforms)}function gV(t,e,s,n=!1){return mu(s,t.Qu(n?4:3,e))}function mu(t,e){if(rT(t=ht(t)))return my("Unsupported field value:",e,t),nT(t,e);if(t instanceof cy)return function(n,i){if(!tT(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const a=[];let o=0;for(const l of n){let c=mu(l,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(n,i){if((n=ht(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return u6(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=_t.fromDate(n);return{timestampValue:Sh(i.serializer,a)}}if(n instanceof _t){const a=new _t(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Sh(i.serializer,a)}}if(n instanceof uy)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Po)return{bytesValue:_S(i.serializer,n._byteString)};if(n instanceof es){const a=i.databaseId,o=n.firestore._databaseId;if(!o.isEqual(a))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Wx(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof dy)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return $x(l.serializer,c)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${Dm(n)}`)}(t,e)}function nT(t,e){const s={};return tS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(t,(n,i)=>{const a=mu(i,e.Mu(n));a!=null&&(s[n]=a)}),{mapValue:{fields:s}}}function rT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _t||t instanceof uy||t instanceof Po||t instanceof es||t instanceof cy||t instanceof dy)}function my(t,e,s){if(!rT(s)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(s)){const n=Dm(s);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Jg(t,e,s){if((e=ht(e))instanceof Om)return e._internalPath;if(typeof e=="string")return fy(t,e);throw Ah("Field path arguments must be of type string or ",t,!1,void 0,s)}const xV=new RegExp("[~\\*/\\[\\]]");function fy(t,e,s){if(e.search(xV)>=0)throw Ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Om(...e.split("."))._internalPath}catch{throw Ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Ah(t,e,s,n,i){const a=n&&!n.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;s&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${n}`),o&&(c+=` in document ${i}`),c+=")"),new oe(X.INVALID_ARGUMENT,l+t+c)}function iT(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,s,n,i,a){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new es(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Bm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class yV extends aT{data(){return super.data()}}function Bm(t,e){return typeof e=="string"?fy(t,e):e instanceof Om?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class py{}class lT extends py{}function Gs(t,e,...s){let n=[];e instanceof py&&n.push(e),n=n.concat(s),function(a){const o=a.filter(c=>c instanceof gy).length,l=a.filter(c=>c instanceof Um).length;if(o>1||o>0&&l>0)throw new oe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)t=i._apply(t);return t}class Um extends lT{constructor(e,s,n){super(),this._field=e,this._op=s,this._value=n,this.type="where"}static _create(e,s,n){return new Um(e,s,n)}_apply(e){const s=this._parse(e);return cT(e._query,s),new yi(e.firestore,e.converter,$g(e._query,s))}_parse(e){const s=Vm(e.firestore);return function(a,o,l,c,u,d,m){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new oe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){DN(m,d);const f=[];for(const x of m)f.push(RN(c,a,x));p={arrayValue:{values:f}}}else p=RN(c,a,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||DN(m,d),p=gV(l,o,m,d==="in"||d==="not-in");return Nt.create(u,d,p)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function cn(t,e,s){const n=e,i=Bm("where",t);return Um._create(i,n,s)}class gy extends py{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new gy(e,s)}_parse(e){const s=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return s.length===1?s[0]:ln.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)cT(o,c),o=$g(o,c)}(e._query,s),new yi(e.firestore,e.converter,$g(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xy extends lT{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new xy(e,s)}_apply(e){const s=function(i,a,o){if(i.startAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(a,o)}(e._query,this._field,this._direction);return new yi(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new Yo(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,s))}}function Fm(t,e="asc"){const s=e,n=Bm("orderBy",t);return xy._create(n,s)}function RN(t,e,s){if(typeof(s=ht(s))=="string"){if(s==="")throw new oe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uS(e)&&s.indexOf("/")!==-1)throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=e.path.child(Je.fromString(s));if(!me.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return eN(t,new me(n))}if(s instanceof es)return eN(t,s._key);throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dm(s)}.`)}function DN(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function cT(t,e){const s=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class vV{convertValue(e,s="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(ha(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const n={};return Na(e,(i,a)=>{n[i]=this.convertValue(a,s)}),n}convertVectorValue(e){var s,n,i;const a=(i=(n=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(o=>pt(o.doubleValue));return new dy(a)}convertGeoPoint(e){return new uy(pt(e.latitude),pt(e.longitude))}convertArray(e,s){return(e.values||[]).map(n=>this.convertValue(n,s))}convertServerTimestamp(e,s){switch(s){case"previous":const n=zx(e);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(Pc(e));default:return null}}convertTimestamp(e){const s=li(e);return new _t(s.seconds,s.nanos)}convertDocumentKey(e,s){const n=Je.fromString(e);He(PS(n));const i=new Rc(n.get(1),n.get(3)),a=new me(n.popFirst(5));return i.isEqual(s)||ir(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(t,e,s){let n;return n=t?t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dT extends aT{constructor(e,s,n,i,a,o){super(e,s,n,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field(Bm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}}class Vd extends dT{data(e={}){return super.data(e)}}class hT{constructor(e,s,n,i){this._firestore=e,this._userDataWriter=s,this._snapshot=i,this.metadata=new zl(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(n=>{e.call(s,new Vd(this._firestore,this._userDataWriter,n.key,n,new zl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new oe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new Vd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new zl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new Vd(i._firestore,i._userDataWriter,l.doc.key,l.doc,new zl(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:bV(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function bV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){t=gs(t,es);const e=gs(t.firestore,or);return iV(Mm(e),t._key).then(s=>mT(e,t,s))}class yy extends vV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new es(this.firestore,null,s)}}function os(t){t=gs(t,yi);const e=gs(t.firestore,or),s=Mm(e),n=new yy(e);return oT(t._query),aV(s,t._query).then(i=>new hT(e,n,t,i))}function ad(t,e,s){t=gs(t,es);const n=gs(t.firestore,or),i=uT(t.converter,e);return Hm(n,[sT(Vm(n),"setDoc",t._key,i,t.converter!==null,s).toMutation(t._key,Us.none())])}function Pt(t,e,s,...n){t=gs(t,es);const i=gs(t.firestore,or),a=Vm(i);let o;return o=typeof(e=ht(e))=="string"||e instanceof Om?pV(a,"updateDoc",t._key,e,s,n):fV(a,"updateDoc",t._key,e),Hm(i,[o.toMutation(t._key,Us.exists(!0))])}function $m(t){return Hm(gs(t.firestore,or),[new Hx(t._key,Us.none())])}function un(t,e){const s=gs(t.firestore,or),n=Ce(t),i=uT(t.converter,e);return Hm(s,[sT(Vm(t.firestore),"addDoc",n._key,i,t.converter!==null,{}).toMutation(n._key,Us.exists(!1))]).then(()=>n)}function Yn(t,...e){var s,n,i;t=ht(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||PN(e[o])||(a=e[o],o++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(PN(e[o])){const m=e[o];e[o]=(s=m.next)===null||s===void 0?void 0:s.bind(m),e[o+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,u,d;if(t instanceof es)u=gs(t.firestore,or),d=km(t._key.path),c={next:m=>{e[o]&&e[o](mT(u,t,m))},error:e[o+1],complete:e[o+2]};else{const m=gs(t,yi);u=gs(m.firestore,or),d=m._query;const p=new yy(u);c={next:f=>{e[o]&&e[o](new hT(u,p,m,f))},error:e[o+1],complete:e[o+2]},oT(t._query)}return function(p,f,x,S){const k=new ly(S),v=new ay(f,k,x);return p.asyncQueue.enqueueAndForget(async()=>ny(await Ih(p),v)),()=>{k.Za(),p.asyncQueue.enqueueAndForget(async()=>ry(await Ih(p),v))}}(Mm(u),d,l,c)}function Hm(t,e){return function(n,i){const a=new qn;return n.asyncQueue.enqueueAndForget(async()=>qO(await rV(n),i,a)),a.promise}(Mm(t),e)}function mT(t,e,s){const n=s.docs.get(e._key),i=new yy(t);return new dT(t,i,e._key,n,new zl(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(i){qo=i})(wa),la(new ai("firestore",(n,{instanceIdentifier:i,options:a})=>{const o=n.getProvider("app").getImmediate(),l=new or(new S3(n.getProvider("auth-internal")),new A3(n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new oe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(u.options.projectId,d)}(o,i),o);return a=Object.assign({useFetchStreams:s},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Nn(Yw,"4.7.3",e),Nn(Yw,"4.7.3","esm2017")})();var wV="firebase",NV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn(wV,NV,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT="firebasestorage.googleapis.com",jV="storageBucket",EV=2*60*1e3,kV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends In{constructor(e,s,n=0){super(ip(e),`Firebase Storage: ${s} (${ip(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ip(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Cn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Cn||(Cn={}));function ip(t){return"storage/"+t}function _V(){const t="An unknown error occurred, please check the error payload for server response.";return new Pn(Cn.UNKNOWN,t)}function SV(){return new Pn(Cn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TV(){return new Pn(Cn.CANCELED,"User canceled the upload/download.")}function CV(t){return new Pn(Cn.INVALID_URL,"Invalid URL '"+t+"'.")}function IV(t){return new Pn(Cn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function LN(t){return new Pn(Cn.INVALID_ARGUMENT,t)}function pT(){return new Pn(Cn.APP_DELETED,"The Firebase app was deleted.")}function AV(t){return new Pn(Cn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let n;try{n=sn.makeFromUrl(e,s)}catch{return new sn(e,"")}if(n.path==="")return n;throw IV(e)}static makeFromUrl(e,s){let n=null;const i="([A-Za-z0-9.\\-_]+)";function a(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(E){E.path_=decodeURIComponent(E.path)}const d="v[A-Za-z0-9_]+",m=s.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",f=new RegExp(`^https?://${m}/${d}/b/${i}/o${p}`,"i"),x={bucket:1,path:3},S=s===fT?"(?:storage.googleapis.com|storage.cloud.google.com)":s,k="([^?#]*)",v=new RegExp(`^https?://${S}/${i}/${k}`,"i"),w=[{regex:l,indices:c,postModify:a},{regex:f,indices:x,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let E=0;E<w.length;E++){const T=w[E],P=T.regex.exec(e);if(P){const b=P[T.indices.bucket];let y=P[T.indices.path];y||(y=""),n=new sn(b,y),T.postModify(n);break}}if(n==null)throw CV(e);return n}}class PV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RV(t,e,s){let n=1,i=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...k){u||(u=!0,e.apply(null,k))}function m(k){i=setTimeout(()=>{i=null,t(f,c())},k)}function p(){a&&clearTimeout(a)}function f(k,...v){if(u){p();return}if(k){p(),d.call(null,k,...v);return}if(c()||o){p(),d.call(null,k,...v);return}n<64&&(n*=2);let w;l===1?(l=2,w=0):w=(n+Math.random())*1e3,m(w)}let x=!1;function S(k){x||(x=!0,p(),!u&&(i!==null?(k||(l=2),clearTimeout(i),m(0)):k||(l=1)))}return m(0),a=setTimeout(()=>{o=!0,S(!0)},s),S}function DV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){return t!==void 0}function MN(t,e,s,n){if(n<e)throw LN(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>s)throw LN(`Invalid value for '${t}'. Expected ${s} or less.`)}function MV(t){const e=encodeURIComponent;let s="?";for(const n in t)if(t.hasOwnProperty(n)){const i=e(n)+"="+e(t[n]);s=s+i+"&"}return s=s.slice(0,-1),s}var Ph;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ph||(Ph={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t,e){const s=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return s||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,s,n,i,a,o,l,c,u,d,m,p=!0){this.url_=e,this.method_=s,this.headers_=n,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,x)=>{this.resolve_=f,this.reject_=x,this.start_()})}start_(){const e=(n,i)=>{if(i){n(!1,new od(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Ph.NO_ERROR,c=a.getStatus();if(!l||OV(c,this.additionalRetryCodes_)&&this.retry){const d=a.getErrorCode()===Ph.ABORT;n(!1,new od(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new od(u,a))})},s=(n,i)=>{const a=this.resolve_,o=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());LV(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=_V();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(i.canceled){const c=this.appDelete_?pT():TV();o(c)}else{const c=SV();o(c)}};this.canceled_?s(!1,new od(!1,null,!0)):this.backoffId_=RV(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&DV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class od{constructor(e,s,n){this.wasSuccessCode=e,this.connection=s,this.canceled=!!n}}function zV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function FV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $V(t,e,s,n,i,a,o=!0){const l=MV(t.urlParams),c=t.url+l,u=Object.assign({},t.headers);return UV(u,e),zV(u,s),BV(u,a),FV(u,n),new VV(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function KV(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e,s){this._service=e,s instanceof sn?this._location=s:this._location=sn.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new Rh(e,s)}get root(){const e=new sn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return KV(this._location.path)}get storage(){return this._service}get parent(){const e=HV(this._location.path);if(e===null)return null;const s=new sn(this._location.bucket,e);return new Rh(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw AV(e)}}function ON(t,e){const s=e==null?void 0:e[jV];return s==null?null:sn.makeFromBucketSpec(s,t)}function GV(t,e,s,n={}){t.host=`${e}:${s}`,t._protocol="http";const{mockUserToken:i}=n;i&&(t._overrideAuthToken=typeof i=="string"?i:a_(i,t.app.options.projectId))}class WV{constructor(e,s,n,i,a){this.app=e,this._authProvider=s,this._appCheckProvider=n,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=fT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=EV,this._maxUploadRetryTime=kV,this._requests=new Set,i!=null?this._bucket=sn.makeFromBucketSpec(i,this._host):this._bucket=ON(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=sn.makeFromBucketSpec(this._url,e):this._bucket=ON(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){MN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){MN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Rh(this,e)}_makeRequest(e,s,n,i,a=!0){if(this._deleted)return new PV(pT());{const o=$V(e,this._appId,n,i,s,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,s){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,n,i).getPromise()}}const VN="@firebase/storage",zN="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="storage";function qV(t=Ex(),e){t=ht(t);const n=bm(t,gT).getImmediate({identifier:e}),i=n_("storage");return i&&YV(n,...i),n}function YV(t,e,s,n={}){GV(t,e,s,n)}function QV(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new WV(s,n,i,e,wa)}function XV(){la(new ai(gT,QV,"PUBLIC").setMultipleInstances(!0)),Nn(VN,zN,""),Nn(VN,zN,"esm2017")}XV();const ZV={apiKey:"AIzaSyB6903uKvs3vjCkfreIvzensUFa25wVB9c",authDomain:"sbs-travel-96d0b.firebaseapp.com",projectId:"sbs-travel-96d0b",storageBucket:"sbs-travel-96d0b.firebasestorage.app",messagingSenderId:"689333443277",appId:"1:689333443277:web:d26c455760eb28a41e6784",measurementId:"G-G4FRHCJEDP"},vy=c_(ZV),xn=j3(vy),ae=cV(vy);qV(vy);const JV={apiKey:"AIzaSyDa66vbuMgm_L4wdOgPutliu_PLzI3xqEw",libraries:["places","geometry","drawing"],version:"weekly",language:"tr",region:"TR"},Ns={name:"SBS Transfer",companyName:"SBS Transfer Hizmetleri",supportEmail:"destek@sbstransfer.com",supportPhone:"+90 (555) 000 00 00"},ez={PENDING:"pending"},bt={ADMIN:"admin",DRIVER:"driver",CUSTOMER:"customer"},ld={CASH:"cash",BANK_TRANSFER:"bank_transfer",CREDIT_CARD:"credit_card"},Qs={USERS:"users",RESERVATIONS:"reservations",VEHICLES:"vehicles",DRIVERS:"drivers",PAYMENTS:"payments",SETTINGS:"settings"},xT=g.createContext(),pr=()=>{const t=g.useContext(xT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},tz=({children:t})=>{const[e,s]=g.useState(null),[n,i]=g.useState(null),[a,o]=g.useState(!0),[l,c]=g.useState(null),u=async(P,b)=>{try{c(null);const y=await oM(xn,P,b),j=await ni(Ce(ae,Qs.USERS,y.user.uid));return j.exists()&&i(j.data()),y}catch(y){throw c(y.message),y}},d=async()=>{var P,b;try{c(null);const y=new Bn;y.addScope("email"),y.addScope("profile");const j=await PM(xn,y),C=await ni(Ce(ae,Qs.USERS,j.user.uid));if(C.exists()){const R=C.data(),D={...R,profilePhoto:j.user.photoURL||R.profilePhoto,emailVerified:j.user.emailVerified,updatedAt:new Date().toISOString()};await Pt(Ce(ae,Qs.USERS,j.user.uid),D),i(D)}else{const R={uid:j.user.uid,email:j.user.email,firstName:((P=j.user.displayName)==null?void 0:P.split(" ")[0])||"",lastName:((b=j.user.displayName)==null?void 0:b.split(" ").slice(1).join(" "))||"",phone:j.user.phoneNumber||"",role:bt.CUSTOMER,profilePhoto:j.user.photoURL||"",authProvider:"google",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,emailVerified:j.user.emailVerified};await ad(Ce(ae,Qs.USERS,j.user.uid),R),i(R)}return j}catch(y){throw c(y.message),y}},m=async(P,b,y)=>{try{c(null);const j=await Mg(xn,P,b);await Vw(j.user,{displayName:`${y.firstName} ${y.lastName}`});const C={uid:j.user.uid,email:j.user.email,firstName:y.firstName,lastName:y.lastName,phone:y.phone||"",role:y.role||bt.CUSTOMER,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0};return await ad(Ce(ae,Qs.USERS,j.user.uid),C),i(C),j}catch(j){throw c(j.message),j}},p=async(P,b)=>{try{c(null);const y=await Mg(xn,P.email,b);await Vw(y.user,{displayName:`${P.firstName} ${P.lastName}`});const j={uid:y.user.uid,email:y.user.email,firstName:P.firstName,lastName:P.lastName,phone:P.phone,role:bt.CUSTOMER,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0,isPasswordTemporary:!0,registeredViaBooking:!0};return await ad(Ce(ae,Qs.USERS,y.user.uid),j),{user:y.user,profile:j,tempPassword:b}}catch(y){throw c(y.message),y}},f=async()=>{try{c(null),await L_(xn),s(null),i(null)}catch(P){throw c(P.message),P}},x=async P=>{try{c(null),await aM(xn,P)}catch(b){throw c(b.message),b}},S=async()=>{try{return c(null),e&&!e.emailVerified?(await lM(e),!0):!1}catch(P){throw c(P.message),P}},k=async P=>{try{if(c(null),e&&n){const b={...n,...P,updatedAt:new Date().toISOString()};await Pt(Ce(ae,Qs.USERS,e.uid),b),i(b)}}catch(b){throw c(b.message),b}},v=P=>(n==null?void 0:n.role)===P,_=()=>v(bt.ADMIN),w=()=>v(bt.DRIVER),E=()=>v(bt.CUSTOMER);g.useEffect(()=>hM(xn,async b=>{var y,j;if(b){s(b);try{const C=await ni(Ce(ae,Qs.USERS,b.uid));if(C.exists())i(C.data());else{const R={uid:b.uid,email:b.email,firstName:((y=b.displayName)==null?void 0:y.split(" ")[0])||"",lastName:((j=b.displayName)==null?void 0:j.split(" ").slice(1).join(" "))||"",role:bt.CUSTOMER,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),isActive:!0};await ad(Ce(ae,Qs.USERS,b.uid),R),i(R)}}catch(C){console.error("Error fetching user profile:",C),c("Profile bilgileri alınamadı")}}else s(null),i(null);o(!1)}),[]);const T={user:e,userProfile:n,loading:a,error:l,login:u,signInWithGoogle:d,register:m,createCustomerAccount:p,logout:f,resetPassword:x,sendVerificationEmail:S,updateUserProfile:k,hasRole:v,isAdmin:_,isDriver:w,isCustomer:E,setError:c};return r.jsx(xT.Provider,{value:T,children:t})},sz={user:null,userRole:null,loading:!0,reservations:[],currentReservation:null,vehicles:[],drivers:[],customers:[],extraServices:[],settings:{companyInfo:{},paymentSettings:{},bankAccounts:[],commissionRates:{driverCommission:70,companyCommission:30}},modal:{isOpen:!1,type:null,data:null},notification:{show:!1,type:"info",message:"",title:""}},de={SET_USER:"SET_USER",SET_USER_ROLE:"SET_USER_ROLE",SET_LOADING:"SET_LOADING",LOGOUT:"LOGOUT",SET_RESERVATIONS:"SET_RESERVATIONS",ADD_RESERVATION:"ADD_RESERVATION",UPDATE_RESERVATION:"UPDATE_RESERVATION",DELETE_RESERVATION:"DELETE_RESERVATION",SET_CURRENT_RESERVATION:"SET_CURRENT_RESERVATION",SET_VEHICLES:"SET_VEHICLES",ADD_VEHICLE:"ADD_VEHICLE",UPDATE_VEHICLE:"UPDATE_VEHICLE",DELETE_VEHICLE:"DELETE_VEHICLE",SET_DRIVERS:"SET_DRIVERS",ADD_DRIVER:"ADD_DRIVER",UPDATE_DRIVER:"UPDATE_DRIVER",DELETE_DRIVER:"DELETE_DRIVER",SET_CUSTOMERS:"SET_CUSTOMERS",ADD_CUSTOMER:"ADD_CUSTOMER",UPDATE_CUSTOMER:"UPDATE_CUSTOMER",SET_EXTRA_SERVICES:"SET_EXTRA_SERVICES",ADD_EXTRA_SERVICE:"ADD_EXTRA_SERVICE",UPDATE_EXTRA_SERVICE:"UPDATE_EXTRA_SERVICE",DELETE_EXTRA_SERVICE:"DELETE_EXTRA_SERVICE",SET_SETTINGS:"SET_SETTINGS",UPDATE_SETTINGS:"UPDATE_SETTINGS",SHOW_MODAL:"SHOW_MODAL",HIDE_MODAL:"HIDE_MODAL",SHOW_NOTIFICATION:"SHOW_NOTIFICATION",HIDE_NOTIFICATION:"HIDE_NOTIFICATION"},nz=(t,e)=>{switch(e.type){case de.SET_USER:return{...t,user:e.payload,loading:!1};case de.SET_USER_ROLE:return{...t,userRole:e.payload};case de.SET_LOADING:return{...t,loading:e.payload};case de.LOGOUT:return{...t,user:null,userRole:null,loading:!1};case de.SET_RESERVATIONS:return{...t,reservations:e.payload};case de.ADD_RESERVATION:return{...t,reservations:[...t.reservations,e.payload]};case de.UPDATE_RESERVATION:return{...t,reservations:t.reservations.map(s=>s.id===e.payload.id?e.payload:s)};case de.DELETE_RESERVATION:return{...t,reservations:t.reservations.filter(s=>s.id!==e.payload)};case de.SET_CURRENT_RESERVATION:return{...t,currentReservation:e.payload};case de.SET_VEHICLES:return{...t,vehicles:e.payload};case de.ADD_VEHICLE:return{...t,vehicles:[...t.vehicles,e.payload]};case de.UPDATE_VEHICLE:return{...t,vehicles:t.vehicles.map(s=>s.id===e.payload.id?e.payload:s)};case de.DELETE_VEHICLE:return{...t,vehicles:t.vehicles.filter(s=>s.id!==e.payload)};case de.SET_DRIVERS:return{...t,drivers:e.payload};case de.ADD_DRIVER:return{...t,drivers:[...t.drivers,e.payload]};case de.UPDATE_DRIVER:return{...t,drivers:t.drivers.map(s=>s.id===e.payload.id?e.payload:s)};case de.DELETE_DRIVER:return{...t,drivers:t.drivers.filter(s=>s.id!==e.payload)};case de.SET_CUSTOMERS:return{...t,customers:e.payload};case de.ADD_CUSTOMER:return{...t,customers:[...t.customers,e.payload]};case de.UPDATE_CUSTOMER:return{...t,customers:t.customers.map(s=>s.id===e.payload.id?e.payload:s)};case de.SET_EXTRA_SERVICES:return{...t,extraServices:e.payload};case de.ADD_EXTRA_SERVICE:return{...t,extraServices:[...t.extraServices,e.payload]};case de.UPDATE_EXTRA_SERVICE:return{...t,extraServices:t.extraServices.map(s=>s.id===e.payload.id?e.payload:s)};case de.DELETE_EXTRA_SERVICE:return{...t,extraServices:t.extraServices.filter(s=>s.id!==e.payload)};case de.SET_SETTINGS:return{...t,settings:e.payload};case de.UPDATE_SETTINGS:return{...t,settings:{...t.settings,...e.payload}};case de.SHOW_MODAL:return{...t,modal:{isOpen:!0,type:e.payload.type,data:e.payload.data}};case de.HIDE_MODAL:return{...t,modal:{isOpen:!1,type:null,data:null}};case de.SHOW_NOTIFICATION:return{...t,notification:{show:!0,type:e.payload.type,message:e.payload.message,title:e.payload.title}};case de.HIDE_NOTIFICATION:return{...t,notification:{show:!1,type:"info",message:"",title:""}};default:return t}},yT=g.createContext(),rz=({children:t})=>{const[e,s]=g.useReducer(nz,sz),n={async create(a,o){try{return{id:(await un(Ie(ae,a),{...o,createdAt:new Date,updatedAt:new Date})).id,...o}}catch(l){throw console.error(`Error creating ${a}:`,l),l}},async update(a,o,l){try{const c=Ce(ae,a,o);return await Pt(c,{...l,updatedAt:new Date}),{id:o,...l}}catch(c){throw console.error(`Error updating ${a}:`,c),c}},async delete(a,o){try{const l=Ce(ae,a,o);return await $m(l),o}catch(l){throw console.error(`Error deleting ${a}:`,l),l}},async getAll(a,o="createdAt"){try{const l=Gs(Ie(ae,a),Fm(o,"desc"));return(await os(l)).docs.map(u=>({id:u.id,...u.data()}))}catch(l){throw console.error(`Error fetching ${a}:`,l),l}}},i={setUser:a=>s({type:de.SET_USER,payload:a}),setUserRole:a=>s({type:de.SET_USER_ROLE,payload:a}),setLoading:a=>s({type:de.SET_LOADING,payload:a}),logout:()=>s({type:de.LOGOUT}),setReservations:a=>s({type:de.SET_RESERVATIONS,payload:a}),addReservation:async a=>{try{const o=await n.create("reservations",a);return s({type:de.ADD_RESERVATION,payload:o}),o}catch(o){throw i.showNotification("error","Rezervasyon oluşturulurken hata oluştu","Hata"),o}},updateReservation:async(a,o)=>{try{const l=await n.update("reservations",a,o);return s({type:de.UPDATE_RESERVATION,payload:l}),l}catch(l){throw i.showNotification("error","Rezervasyon güncellenirken hata oluştu","Hata"),l}},deleteReservation:async a=>{try{await n.delete("reservations",a),s({type:de.DELETE_RESERVATION,payload:a}),i.showNotification("success","Rezervasyon başarıyla silindi","Başarılı")}catch(o){throw i.showNotification("error","Rezervasyon silinirken hata oluştu","Hata"),o}},setCurrentReservation:a=>s({type:de.SET_CURRENT_RESERVATION,payload:a}),setVehicles:a=>s({type:de.SET_VEHICLES,payload:a}),addVehicle:async a=>{try{const o=await n.create("vehicles",a);return s({type:de.ADD_VEHICLE,payload:o}),i.showNotification("success","Araç başarıyla eklendi","Başarılı"),o}catch(o){throw i.showNotification("error","Araç eklenirken hata oluştu","Hata"),o}},updateVehicle:async(a,o)=>{try{const l=await n.update("vehicles",a,o);return s({type:de.UPDATE_VEHICLE,payload:l}),i.showNotification("success","Araç başarıyla güncellendi","Başarılı"),l}catch(l){throw i.showNotification("error","Araç güncellenirken hata oluştu","Hata"),l}},deleteVehicle:async a=>{try{await n.delete("vehicles",a),s({type:de.DELETE_VEHICLE,payload:a}),i.showNotification("success","Araç başarıyla silindi","Başarılı")}catch(o){throw i.showNotification("error","Araç silinirken hata oluştu","Hata"),o}},setDrivers:a=>s({type:de.SET_DRIVERS,payload:a}),addDriver:async a=>{try{const o=await n.create("drivers",a);return s({type:de.ADD_DRIVER,payload:o}),i.showNotification("success","Şoför başarıyla eklendi","Başarılı"),o}catch(o){throw i.showNotification("error","Şoför eklenirken hata oluştu","Hata"),o}},updateDriver:async(a,o)=>{try{const l=await n.update("drivers",a,o);return s({type:de.UPDATE_DRIVER,payload:l}),i.showNotification("success","Şoför başarıyla güncellendi","Başarılı"),l}catch(l){throw i.showNotification("error","Şoför güncellenirken hata oluştu","Hata"),l}},deleteDriver:async a=>{try{await n.delete("drivers",a),s({type:de.DELETE_DRIVER,payload:a}),i.showNotification("success","Şoför başarıyla silindi","Başarılı")}catch(o){throw i.showNotification("error","Şoför silinirken hata oluştu","Hata"),o}},setCustomers:a=>s({type:de.SET_CUSTOMERS,payload:a}),addCustomer:async a=>{try{const o=await n.create("customers",a);return s({type:de.ADD_CUSTOMER,payload:o}),o}catch(o){throw i.showNotification("error","Müşteri eklenirken hata oluştu","Hata"),o}},updateCustomer:async(a,o)=>{try{const l=await n.update("customers",a,o);return s({type:de.UPDATE_CUSTOMER,payload:l}),l}catch(l){throw i.showNotification("error","Müşteri güncellenirken hata oluştu","Hata"),l}},setExtraServices:a=>s({type:de.SET_EXTRA_SERVICES,payload:a}),addExtraService:async a=>{try{const o=await n.create("extraServices",a);return s({type:de.ADD_EXTRA_SERVICE,payload:o}),i.showNotification("success","Ek hizmet başarıyla eklendi","Başarılı"),o}catch(o){throw i.showNotification("error","Ek hizmet eklenirken hata oluştu","Hata"),o}},updateExtraService:async(a,o)=>{try{const l=await n.update("extraServices",a,o);return s({type:de.UPDATE_EXTRA_SERVICE,payload:l}),i.showNotification("success","Ek hizmet başarıyla güncellendi","Başarılı"),l}catch(l){throw i.showNotification("error","Ek hizmet güncellenirken hata oluştu","Hata"),l}},deleteExtraService:async a=>{try{await n.delete("extraServices",a),s({type:de.DELETE_EXTRA_SERVICE,payload:a}),i.showNotification("success","Ek hizmet başarıyla silindi","Başarılı")}catch(o){throw i.showNotification("error","Ek hizmet silinirken hata oluştu","Hata"),o}},setSettings:a=>s({type:de.SET_SETTINGS,payload:a}),updateSettings:async a=>{try{const o=await n.update("settings","app-settings",a);return s({type:de.UPDATE_SETTINGS,payload:o}),i.showNotification("success","Ayarlar başarıyla güncellendi","Başarılı"),o}catch(o){throw i.showNotification("error","Ayarlar güncellenirken hata oluştu","Hata"),o}},showModal:(a,o=null)=>s({type:de.SHOW_MODAL,payload:{type:a,data:o}}),hideModal:()=>s({type:de.HIDE_MODAL}),showNotification:(a,o,l="")=>s({type:de.SHOW_NOTIFICATION,payload:{type:a,message:o,title:l}}),hideNotification:()=>s({type:de.HIDE_NOTIFICATION}),loadAllData:async()=>{try{i.setLoading(!0);const[a,o,l,c,u]=await Promise.all([n.getAll("vehicles"),n.getAll("drivers"),n.getAll("customers"),n.getAll("extraServices"),n.getAll("reservations")]);i.setVehicles(a),i.setDrivers(o),i.setCustomers(l),i.setExtraServices(c),i.setReservations(u)}catch(a){console.error("Error loading data:",a),i.showNotification("error","Veriler yüklenirken hata oluştu","Hata")}finally{i.setLoading(!1)}}};return g.useEffect(()=>{i.loadAllData()},[]),r.jsx(yT.Provider,{value:{state:e,actions:i,firebaseOperations:n},children:t})},Ws=()=>{const t=g.useContext(yT);if(!t)throw new Error("useApp must be used within an AppProvider");return t},by=g.createContext({});function wy(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const Km=g.createContext(null),Ny=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class iz extends g.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function az({children:t,isPresent:e}){const s=g.useId(),n=g.useRef(null),i=g.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=g.useContext(Ny);return g.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:u}=i.current;if(e||!n.current||!o||!l)return;n.current.dataset.motionPopId=s;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),r.jsx(iz,{isPresent:e,childRef:n,sizeRef:i,children:g.cloneElement(t,{ref:n})})}const oz=({children:t,initial:e,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=wy(lz),c=g.useId(),u=g.useCallback(m=>{l.set(m,!0);for(const p of l.values())if(!p)return;n&&n()},[l,n]),d=g.useMemo(()=>({id:c,initial:e,isPresent:s,custom:i,onExitComplete:u,register:m=>(l.set(m,!1),()=>l.delete(m))}),a?[Math.random(),u]:[s,u]);return g.useMemo(()=>{l.forEach((m,p)=>l.set(p,!1))},[s]),g.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(t=r.jsx(az,{isPresent:s,children:t})),r.jsx(Km.Provider,{value:d,children:t})};function lz(){return new Map}function vT(t=!0){const e=g.useContext(Km);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:i}=e,a=g.useId();g.useEffect(()=>{t&&i(a)},[t]);const o=g.useCallback(()=>t&&n&&n(a),[a,n,t]);return!s&&n?[!1,o]:[!0]}const cd=t=>t.key||"";function BN(t){const e=[];return g.Children.forEach(t,s=>{g.isValidElement(s)&&e.push(s)}),e}const jy=typeof window<"u",bT=jy?g.useLayoutEffect:g.useEffect,lr=({children:t,custom:e,initial:s=!0,onExitComplete:n,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1})=>{const[l,c]=vT(o),u=g.useMemo(()=>BN(t),[t]),d=o&&!l?[]:u.map(cd),m=g.useRef(!0),p=g.useRef(u),f=wy(()=>new Map),[x,S]=g.useState(u),[k,v]=g.useState(u);bT(()=>{m.current=!1,p.current=u;for(let E=0;E<k.length;E++){const T=cd(k[E]);d.includes(T)?f.delete(T):f.get(T)!==!0&&f.set(T,!1)}},[k,d.length,d.join("-")]);const _=[];if(u!==x){let E=[...u];for(let T=0;T<k.length;T++){const P=k[T],b=cd(P);d.includes(b)||(E.splice(T,0,P),_.push(P))}a==="wait"&&_.length&&(E=_),v(BN(E)),S(u);return}const{forceRender:w}=g.useContext(by);return r.jsx(r.Fragment,{children:k.map(E=>{const T=cd(E),P=o&&!l?!1:u===k||d.includes(T),b=()=>{if(f.has(T))f.set(T,!0);else return;let y=!0;f.forEach(j=>{j||(y=!1)}),y&&(w==null||w(),v(p.current),o&&(c==null||c()),n&&n())};return r.jsx(oz,{isPresent:P,initial:!m.current||s?void 0:!1,custom:P?void 0:e,presenceAffectsLayout:i,mode:a,onExitComplete:P?void 0:b,children:E},T)})})},Ss=t=>t;let wT=Ss;function Ey(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ro=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n},Qn=t=>t*1e3,Xn=t=>t/1e3,cz={useManualTiming:!1};function uz(t){let e=new Set,s=new Set,n=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,d=!1,m=!1)=>{const f=m&&n?e:s;return d&&a.add(u),f.has(u)||f.add(u),u},cancel:u=>{s.delete(u),a.delete(u)},process:u=>{if(o=u,n){i=!0;return}n=!0,[e,s]=[s,e],e.forEach(l),e.clear(),n=!1,i&&(i=!1,c.process(u))}};return c}const ud=["read","resolveKeyframes","update","preRender","render","postRender"],dz=40;function NT(t,e){let s=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>s=!0,o=ud.reduce((v,_)=>(v[_]=uz(a),v),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:m,postRender:p}=o,f=()=>{const v=performance.now();s=!1,i.delta=n?1e3/60:Math.max(Math.min(v-i.timestamp,dz),1),i.timestamp=v,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),d.process(i),m.process(i),p.process(i),i.isProcessing=!1,s&&e&&(n=!1,t(f))},x=()=>{s=!0,n=!0,i.isProcessing||t(f)};return{schedule:ud.reduce((v,_)=>{const w=o[_];return v[_]=(E,T=!1,P=!1)=>(s||x(),w.schedule(E,T,P)),v},{}),cancel:v=>{for(let _=0;_<ud.length;_++)o[ud[_]].cancel(v)},state:i,steps:o}}const{schedule:tt,cancel:ui,state:Lt,steps:ap}=NT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ss,!0),jT=g.createContext({strict:!1}),UN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Do={};for(const t in UN)Do[t]={isEnabled:e=>UN[t].some(s=>!!e[s])};function hz(t){for(const e in t)Do[e]={...Do[e],...t[e]}}const mz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Dh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||mz.has(t)}let ET=t=>!Dh(t);function fz(t){t&&(ET=e=>e.startsWith("on")?!Dh(e):t(e))}try{fz(require("@emotion/is-prop-valid").default)}catch{}function pz(t,e,s){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(ET(i)||s===!0&&Dh(i)||!e&&!Dh(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function gz(t){if(typeof Proxy>"u")return t;const e=new Map,s=(...n)=>t(...n);return new Proxy(s,{get:(n,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Gm=g.createContext({});function Vc(t){return typeof t=="string"||Array.isArray(t)}function Wm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ky=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_y=["initial",...ky];function qm(t){return Wm(t.animate)||_y.some(e=>Vc(t[e]))}function kT(t){return!!(qm(t)||t.variants)}function xz(t,e){if(qm(t)){const{initial:s,animate:n}=t;return{initial:s===!1||Vc(s)?s:void 0,animate:Vc(n)?n:void 0}}return t.inherit!==!1?e:{}}function yz(t){const{initial:e,animate:s}=xz(t,g.useContext(Gm));return g.useMemo(()=>({initial:e,animate:s}),[FN(e),FN(s)])}function FN(t){return Array.isArray(t)?t.join(" "):t}const vz=Symbol.for("motionComponentSymbol");function eo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function bz(t,e,s){return g.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):eo(s)&&(s.current=n))},[e])}const Sy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),wz="framerAppearId",_T="data-"+Sy(wz),{schedule:Ty}=NT(queueMicrotask,!1),ST=g.createContext({});function Nz(t,e,s,n,i){var a,o;const{visualElement:l}=g.useContext(Gm),c=g.useContext(jT),u=g.useContext(Km),d=g.useContext(Ny).reducedMotion,m=g.useRef(null);n=n||c.renderer,!m.current&&n&&(m.current=n(t,{visualState:e,parent:l,props:s,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=m.current,f=g.useContext(ST);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&jz(m.current,s,i,f);const x=g.useRef(!1);g.useInsertionEffect(()=>{p&&x.current&&p.update(s,u)});const S=s[_T],k=g.useRef(!!S&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,S))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,S)));return bT(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Ty.render(p.render),k.current&&p.animationState&&p.animationState.animateChanges())}),g.useEffect(()=>{p&&(!k.current&&p.animationState&&p.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,S)}),k.current=!1))}),p}function jz(t,e,s,n){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u}=e;t.projection=new s(t.latestValues,e["data-framer-portal-id"]?void 0:TT(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&eo(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:n,layoutScroll:c,layoutRoot:u})}function TT(t){if(t)return t.options.allowProjection!==!1?t.projection:TT(t.parent)}function Ez({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:n,Component:i}){var a,o;t&&hz(t);function l(u,d){let m;const p={...g.useContext(Ny),...u,layoutId:kz(u)},{isStatic:f}=p,x=yz(u),S=n(u,f);if(!f&&jy){_z();const k=Sz(p);m=k.MeasureLayout,x.visualElement=Nz(i,S,p,e,k.ProjectionNode)}return r.jsxs(Gm.Provider,{value:x,children:[m&&x.visualElement?r.jsx(m,{visualElement:x.visualElement,...p}):null,s(i,u,bz(S,x.visualElement,d),S,f,x.visualElement)]})}l.displayName=`motion.${typeof i=="string"?i:`create(${(o=(a=i.displayName)!==null&&a!==void 0?a:i.name)!==null&&o!==void 0?o:""})`}`;const c=g.forwardRef(l);return c[vz]=i,c}function kz({layoutId:t}){const e=g.useContext(by).id;return e&&t!==void 0?e+"-"+t:t}function _z(t,e){g.useContext(jT).strict}function Sz(t){const{drag:e,layout:s}=Do;if(!e&&!s)return{};const n={...e,...s};return{MeasureLayout:e!=null&&e.isEnabled(t)||s!=null&&s.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const Tz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cy(t){return typeof t!="string"||t.includes("-")?!1:!!(Tz.indexOf(t)>-1||/[A-Z]/u.test(t))}function $N(t){const e=[{},{}];return t==null||t.values.forEach((s,n)=>{e[0][n]=s.get(),e[1][n]=s.getVelocity()}),e}function Iy(t,e,s,n){if(typeof e=="function"){const[i,a]=$N(n);e=e(s!==void 0?s:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=$N(n);e=e(s!==void 0?s:t.custom,i,a)}return e}const e0=t=>Array.isArray(t),Cz=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Iz=t=>e0(t)?t[t.length-1]||0:t,Jt=t=>!!(t&&t.getVelocity);function zd(t){const e=Jt(t)?t.get():t;return Cz(e)?e.toValue():e}function Az({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:s},n,i,a){const o={latestValues:Pz(n,i,a,t),renderState:e()};return s&&(o.onMount=l=>s({props:n,current:l,...o}),o.onUpdate=l=>s(l)),o}const CT=t=>(e,s)=>{const n=g.useContext(Gm),i=g.useContext(Km),a=()=>Az(t,e,n,i);return s?a():wy(a)};function Pz(t,e,s,n){const i={},a=n(t,{});for(const p in a)i[p]=zd(a[p]);let{initial:o,animate:l}=t;const c=qm(t),u=kT(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=s?s.initial===!1:!1;d=d||o===!1;const m=d?l:o;if(m&&typeof m!="boolean"&&!Wm(m)){const p=Array.isArray(m)?m:[m];for(let f=0;f<p.length;f++){const x=Iy(t,p[f]);if(x){const{transitionEnd:S,transition:k,...v}=x;for(const _ in v){let w=v[_];if(Array.isArray(w)){const E=d?w.length-1:0;w=w[E]}w!==null&&(i[_]=w)}for(const _ in S)i[_]=S[_]}}}return i}const Zo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ea=new Set(Zo),IT=t=>e=>typeof e=="string"&&e.startsWith(t),AT=IT("--"),Rz=IT("var(--"),Ay=t=>Rz(t)?Dz.test(t.split("/*")[0].trim()):!1,Dz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,PT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,cr=(t,e,s)=>s>e?e:s<t?t:s,Jo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},zc={...Jo,transform:t=>cr(0,1,t)},dd={...Jo,default:1},fu=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Tr=fu("deg"),_n=fu("%"),fe=fu("px"),Lz=fu("vh"),Mz=fu("vw"),HN={..._n,parse:t=>_n.parse(t)/100,transform:t=>_n.transform(t*100)},Oz={borderWidth:fe,borderTopWidth:fe,borderRightWidth:fe,borderBottomWidth:fe,borderLeftWidth:fe,borderRadius:fe,radius:fe,borderTopLeftRadius:fe,borderTopRightRadius:fe,borderBottomRightRadius:fe,borderBottomLeftRadius:fe,width:fe,maxWidth:fe,height:fe,maxHeight:fe,top:fe,right:fe,bottom:fe,left:fe,padding:fe,paddingTop:fe,paddingRight:fe,paddingBottom:fe,paddingLeft:fe,margin:fe,marginTop:fe,marginRight:fe,marginBottom:fe,marginLeft:fe,backgroundPositionX:fe,backgroundPositionY:fe},Vz={rotate:Tr,rotateX:Tr,rotateY:Tr,rotateZ:Tr,scale:dd,scaleX:dd,scaleY:dd,scaleZ:dd,skew:Tr,skewX:Tr,skewY:Tr,distance:fe,translateX:fe,translateY:fe,translateZ:fe,x:fe,y:fe,z:fe,perspective:fe,transformPerspective:fe,opacity:zc,originX:HN,originY:HN,originZ:fe},KN={...Jo,transform:Math.round},Py={...Oz,...Vz,zIndex:KN,size:fe,fillOpacity:zc,strokeOpacity:zc,numOctaves:KN},zz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Bz=Zo.length;function Uz(t,e,s){let n="",i=!0;for(let a=0;a<Bz;a++){const o=Zo[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||s){const u=PT(l,Py[o]);if(!c){i=!1;const d=zz[o]||o;n+=`${d}(${u}) `}s&&(e[o]=u)}}return n=n.trim(),s?n=s(e,i?"":n):i&&(n="none"),n}function Ry(t,e,s){const{style:n,vars:i,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(Ea.has(c)){o=!0;continue}else if(AT(c)){i[c]=u;continue}else{const d=PT(u,Py[c]);c.startsWith("origin")?(l=!0,a[c]=d):n[c]=d}}if(e.transform||(o||s?n.transform=Uz(e,t.transform,s):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;n.transformOrigin=`${c} ${u} ${d}`}}const Fz={offset:"stroke-dashoffset",array:"stroke-dasharray"},$z={offset:"strokeDashoffset",array:"strokeDasharray"};function Hz(t,e,s=1,n=0,i=!0){t.pathLength=1;const a=i?Fz:$z;t[a.offset]=fe.transform(-n);const o=fe.transform(e),l=fe.transform(s);t[a.array]=`${o} ${l}`}function GN(t,e,s){return typeof t=="string"?t:fe.transform(e+s*t)}function Kz(t,e,s){const n=GN(e,t.x,t.width),i=GN(s,t.y,t.height);return`${n} ${i}`}function Dy(t,{attrX:e,attrY:s,attrScale:n,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,m){if(Ry(t,u,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:f,dimensions:x}=t;p.transform&&(x&&(f.transform=p.transform),delete p.transform),x&&(i!==void 0||a!==void 0||f.transform)&&(f.transformOrigin=Kz(x,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(p.x=e),s!==void 0&&(p.y=s),n!==void 0&&(p.scale=n),o!==void 0&&Hz(p,o,l,c,!1)}const Ly=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),RT=()=>({...Ly(),attrs:{}}),My=t=>typeof t=="string"&&t.toLowerCase()==="svg";function DT(t,{style:e,vars:s},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const a in s)t.style.setProperty(a,s[a])}const LT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function MT(t,e,s,n){DT(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(LT.has(i)?i:Sy(i),e.attrs[i])}const Lh={};function Gz(t){Object.assign(Lh,t)}function OT(t,{layout:e,layoutId:s}){return Ea.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Lh[t]||t==="opacity")}function Oy(t,e,s){var n;const{style:i}=t,a={};for(const o in i)(Jt(i[o])||e.style&&Jt(e.style[o])||OT(o,t)||((n=s==null?void 0:s.getValue(o))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function VT(t,e,s){const n=Oy(t,e,s);for(const i in t)if(Jt(t[i])||Jt(e[i])){const a=Zo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[a]=t[i]}return n}function Wz(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const WN=["x","y","width","height","cx","cy","r"],qz={useVisualState:CT({scrapeMotionValuesFromProps:VT,createRenderState:RT,onUpdate:({props:t,prevProps:e,current:s,renderState:n,latestValues:i})=>{if(!s)return;let a=!!t.drag;if(!a){for(const l in i)if(Ea.has(l)){a=!0;break}}if(!a)return;let o=!e;if(e)for(let l=0;l<WN.length;l++){const c=WN[l];t[c]!==e[c]&&(o=!0)}o&&tt.read(()=>{Wz(s,n),tt.render(()=>{Dy(n,i,My(s.tagName),t.transformTemplate),MT(s,n)})})}})},Yz={useVisualState:CT({scrapeMotionValuesFromProps:Oy,createRenderState:Ly})};function zT(t,e,s){for(const n in e)!Jt(e[n])&&!OT(n,s)&&(t[n]=e[n])}function Qz({transformTemplate:t},e){return g.useMemo(()=>{const s=Ly();return Ry(s,e,t),Object.assign({},s.vars,s.style)},[e])}function Xz(t,e){const s=t.style||{},n={};return zT(n,s,t),Object.assign(n,Qz(t,e)),n}function Zz(t,e){const s={},n=Xz(t,e);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=n,s}function Jz(t,e,s,n){const i=g.useMemo(()=>{const a=RT();return Dy(a,e,My(n),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};zT(a,t.style,t),i.style={...a,...i.style}}return i}function eB(t=!1){return(s,n,i,{latestValues:a},o)=>{const c=(Cy(s)?Jz:Zz)(n,a,o,s),u=pz(n,typeof s=="string",t),d=s!==g.Fragment?{...u,...c,ref:i}:{},{children:m}=n,p=g.useMemo(()=>Jt(m)?m.get():m,[m]);return g.createElement(s,{...d,children:p})}}function tB(t,e){return function(n,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...Cy(n)?qz:Yz,preloadedFeatures:t,useRender:eB(i),createVisualElement:e,Component:n};return Ez(o)}}function BT(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}function Ym(t,e,s){const n=t.getProps();return Iy(n,e,s!==void 0?s:n.custom,t)}const sB=Ey(()=>window.ScrollTimeline!==void 0);class nB{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,s){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=s}attachTimeline(e,s){const n=this.animations.map(i=>{if(sB()&&i.attachTimeline)return i.attachTimeline(e);if(typeof s=="function")return s(i)});return()=>{n.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let s=0;s<this.animations.length;s++)e=Math.max(e,this.animations[s].duration);return e}runAll(e){this.animations.forEach(s=>s[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class rB extends nB{then(e,s){return Promise.all(this.animations).then(e).catch(s)}}function Vy(t,e){return t?t[e]||t.default||t:void 0}const t0=2e4;function UT(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<t0;)e+=s,n=t.next(e);return e>=t0?1/0:e}function zy(t){return typeof t=="function"}function qN(t,e){t.timeline=e,t.onfinish=null}const By=t=>Array.isArray(t)&&typeof t[0]=="number",iB={linearEasing:void 0};function aB(t,e){const s=Ey(t);return()=>{var n;return(n=iB[e])!==null&&n!==void 0?n:s()}}const Mh=aB(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),FT=(t,e,s=10)=>{let n="";const i=Math.max(Math.round(e/s),2);for(let a=0;a<i;a++)n+=t(Ro(0,i-1,a))+", ";return`linear(${n.substring(0,n.length-2)})`};function $T(t){return!!(typeof t=="function"&&Mh()||!t||typeof t=="string"&&(t in s0||Mh())||By(t)||Array.isArray(t)&&t.every($T))}const Bl=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,s0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bl([0,.65,.55,1]),circOut:Bl([.55,0,1,.45]),backIn:Bl([.31,.01,.66,-.59]),backOut:Bl([.33,1.53,.69,.99])};function HT(t,e){if(t)return typeof t=="function"&&Mh()?FT(t,e):By(t)?Bl(t):Array.isArray(t)?t.map(s=>HT(s,e)||s0.easeOut):s0[t]}const Xs={x:!1,y:!1};function KT(){return Xs.x||Xs.y}function oB(t,e,s){var n;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const a=(n=void 0)!==null&&n!==void 0?n:i.querySelectorAll(t);return a?Array.from(a):[]}return Array.from(t)}function GT(t,e){const s=oB(t),n=new AbortController,i={passive:!0,...e,signal:n.signal};return[s,i,()=>n.abort()]}function YN(t){return e=>{e.pointerType==="touch"||KT()||t(e)}}function lB(t,e,s={}){const[n,i,a]=GT(t,s),o=YN(l=>{const{target:c}=l,u=e(l);if(typeof u!="function"||!c)return;const d=YN(m=>{u(m),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,i)});return n.forEach(l=>{l.addEventListener("pointerenter",o,i)}),a}const WT=(t,e)=>e?t===e?!0:WT(t,e.parentElement):!1,Uy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,cB=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function uB(t){return cB.has(t.tagName)||t.tabIndex!==-1}const Ul=new WeakSet;function QN(t){return e=>{e.key==="Enter"&&t(e)}}function op(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const dB=(t,e)=>{const s=t.currentTarget;if(!s)return;const n=QN(()=>{if(Ul.has(s))return;op(s,"down");const i=QN(()=>{op(s,"up")}),a=()=>op(s,"cancel");s.addEventListener("keyup",i,e),s.addEventListener("blur",a,e)});s.addEventListener("keydown",n,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",n),e)};function XN(t){return Uy(t)&&!KT()}function hB(t,e,s={}){const[n,i,a]=GT(t,s),o=l=>{const c=l.currentTarget;if(!XN(l)||Ul.has(c))return;Ul.add(c);const u=e(l),d=(f,x)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),!(!XN(f)||!Ul.has(c))&&(Ul.delete(c),typeof u=="function"&&u(f,{success:x}))},m=f=>{d(f,s.useGlobalTarget||WT(c,f.target))},p=f=>{d(f,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",p,i)};return n.forEach(l=>{!uB(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(s.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),l.addEventListener("focus",u=>dB(u,i),i)}),a}function mB(t){return t==="x"||t==="y"?Xs[t]?null:(Xs[t]=!0,()=>{Xs[t]=!1}):Xs.x||Xs.y?null:(Xs.x=Xs.y=!0,()=>{Xs.x=Xs.y=!1})}const qT=new Set(["width","height","top","left","right","bottom",...Zo]);let Bd;function fB(){Bd=void 0}const Sn={now:()=>(Bd===void 0&&Sn.set(Lt.isProcessing||cz.useManualTiming?Lt.timestamp:performance.now()),Bd),set:t=>{Bd=t,queueMicrotask(fB)}};function Fy(t,e){t.indexOf(e)===-1&&t.push(e)}function $y(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class Hy{constructor(){this.subscriptions=[]}add(e){return Fy(this.subscriptions,e),()=>$y(this.subscriptions,e)}notify(e,s,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,n);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function YT(t,e){return e?t*(1e3/e):0}const ZN=30,pB=t=>!isNaN(parseFloat(t));class gB{constructor(e,s={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,i=!0)=>{const a=Sn.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=Sn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=pB(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new Hy);const n=this.events[e].add(s);return e==="change"?()=>{n(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,n){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Sn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ZN)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,ZN);return YT(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bc(t,e){return new gB(t,e)}function xB(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Bc(s))}function yB(t,e){const s=Ym(t,e);let{transitionEnd:n={},transition:i={},...a}=s||{};a={...a,...n};for(const o in a){const l=Iz(a[o]);xB(t,o,l)}}function vB(t){return!!(Jt(t)&&t.add)}function n0(t,e){const s=t.getValue("willChange");if(vB(s))return s.add(e)}function QT(t){return t.props[_T]}const XT=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,bB=1e-7,wB=12;function NB(t,e,s,n,i){let a,o,l=0;do o=e+(s-e)/2,a=XT(o,n,i)-t,a>0?s=o:e=o;while(Math.abs(a)>bB&&++l<wB);return o}function pu(t,e,s,n){if(t===e&&s===n)return Ss;const i=a=>NB(a,0,1,t,s);return a=>a===0||a===1?a:XT(i(a),e,n)}const ZT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,JT=t=>e=>1-t(1-e),eC=pu(.33,1.53,.69,.99),Ky=JT(eC),tC=ZT(Ky),sC=t=>(t*=2)<1?.5*Ky(t):.5*(2-Math.pow(2,-10*(t-1))),Gy=t=>1-Math.sin(Math.acos(t)),nC=JT(Gy),rC=ZT(Gy),iC=t=>/^0[^.\s]+$/u.test(t);function jB(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||iC(t):!0}const rc=t=>Math.round(t*1e5)/1e5,Wy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EB(t){return t==null}const kB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,qy=(t,e)=>s=>!!(typeof s=="string"&&kB.test(s)&&s.startsWith(t)||e&&!EB(s)&&Object.prototype.hasOwnProperty.call(s,e)),aC=(t,e,s)=>n=>{if(typeof n!="string")return n;const[i,a,o,l]=n.match(Wy);return{[t]:parseFloat(i),[e]:parseFloat(a),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},_B=t=>cr(0,255,t),lp={...Jo,transform:t=>Math.round(_B(t))},qi={test:qy("rgb","red"),parse:aC("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+lp.transform(t)+", "+lp.transform(e)+", "+lp.transform(s)+", "+rc(zc.transform(n))+")"};function SB(t){let e="",s="",n="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const r0={test:qy("#"),parse:SB,transform:qi.transform},to={test:qy("hsl","hue"),parse:aC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+_n.transform(rc(e))+", "+_n.transform(rc(s))+", "+rc(zc.transform(n))+")"},Yt={test:t=>qi.test(t)||r0.test(t)||to.test(t),parse:t=>qi.test(t)?qi.parse(t):to.test(t)?to.parse(t):r0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?qi.transform(t):to.transform(t)},TB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function CB(t){var e,s;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Wy))===null||e===void 0?void 0:e.length)||0)+(((s=t.match(TB))===null||s===void 0?void 0:s.length)||0)>0}const oC="number",lC="color",IB="var",AB="var(",JN="${}",PB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uc(t){const e=t.toString(),s=[],n={color:[],number:[],var:[]},i=[];let a=0;const l=e.replace(PB,c=>(Yt.test(c)?(n.color.push(a),i.push(lC),s.push(Yt.parse(c))):c.startsWith(AB)?(n.var.push(a),i.push(IB),s.push(c)):(n.number.push(a),i.push(oC),s.push(parseFloat(c))),++a,JN)).split(JN);return{values:s,split:l,indexes:n,types:i}}function cC(t){return Uc(t).values}function uC(t){const{split:e,types:s}=Uc(t),n=e.length;return i=>{let a="";for(let o=0;o<n;o++)if(a+=e[o],i[o]!==void 0){const l=s[o];l===oC?a+=rc(i[o]):l===lC?a+=Yt.transform(i[o]):a+=i[o]}return a}}const RB=t=>typeof t=="number"?0:t;function DB(t){const e=cC(t);return uC(t)(e.map(RB))}const di={test:CB,parse:cC,createTransformer:uC,getAnimatableNone:DB},LB=new Set(["brightness","contrast","saturate","opacity"]);function MB(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(Wy)||[];if(!n)return t;const i=s.replace(n,"");let a=LB.has(e)?1:0;return n!==s&&(a*=100),e+"("+a+i+")"}const OB=/\b([a-z-]*)\(.*?\)/gu,i0={...di,getAnimatableNone:t=>{const e=t.match(OB);return e?e.map(MB).join(" "):t}},VB={...Py,color:Yt,backgroundColor:Yt,outlineColor:Yt,fill:Yt,stroke:Yt,borderColor:Yt,borderTopColor:Yt,borderRightColor:Yt,borderBottomColor:Yt,borderLeftColor:Yt,filter:i0,WebkitFilter:i0},Yy=t=>VB[t];function dC(t,e){let s=Yy(t);return s!==i0&&(s=di),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const zB=new Set(["auto","none","0"]);function BB(t,e,s){let n=0,i;for(;n<t.length&&!i;){const a=t[n];typeof a=="string"&&!zB.has(a)&&Uc(a).values.length&&(i=t[n]),n++}if(i&&s)for(const a of e)t[a]=dC(s,i)}const ej=t=>t===Jo||t===fe,tj=(t,e)=>parseFloat(t.split(", ")[e]),sj=(t,e)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/u);if(i)return tj(i[1],e);{const a=n.match(/^matrix\((.+)\)$/u);return a?tj(a[1],t):0}},UB=new Set(["x","y","z"]),FB=Zo.filter(t=>!UB.has(t));function $B(t){const e=[];return FB.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e}const Lo={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:sj(4,13),y:sj(5,14)};Lo.translateX=Lo.x;Lo.translateY=Lo.y;const Ji=new Set;let a0=!1,o0=!1;function hC(){if(o0){const t=Array.from(Ji).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),s=new Map;e.forEach(n=>{const i=$B(n);i.length&&(s.set(n,i),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const i=s.get(n);i&&i.forEach(([a,o])=>{var l;(l=n.getValue(a))===null||l===void 0||l.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}o0=!1,a0=!1,Ji.forEach(t=>t.complete()),Ji.clear()}function mC(){Ji.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(o0=!0)})}function HB(){mC(),hC()}class Qy{constructor(e,s,n,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=n,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Ji.add(this),a0||(a0=!0,tt.read(mC),tt.resolveKeyframes(hC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:n,motionValue:i}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const o=i==null?void 0:i.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(n&&s){const c=n.readValue(s,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),i&&o===void 0&&i.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Ji.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Ji.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const fC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),KB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function GB(t){const e=KB.exec(t);if(!e)return[,];const[,s,n,i]=e;return[`--${s??n}`,i]}function pC(t,e,s=1){const[n,i]=GB(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const o=a.trim();return fC(o)?parseFloat(o):o}return Ay(i)?pC(i,e,s+1):i}const gC=t=>e=>e.test(t),WB={test:t=>t==="auto",parse:t=>t},xC=[Jo,fe,_n,Tr,Mz,Lz,WB],nj=t=>xC.find(gC(t));class yC extends Qy{constructor(e,s,n,i,a){super(e,s,n,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:n}=this;if(!s||!s.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),Ay(u))){const d=pC(u,s.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!qT.has(n)||e.length!==2)return;const[i,a]=e,o=nj(i),l=nj(a);if(o!==l)if(ej(o)&&ej(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,n=[];for(let i=0;i<e.length;i++)jB(e[i])&&n.push(i);n.length&&BB(e,n,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Lo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const i=s[s.length-1];i!==void 0&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:s,name:n,unresolvedKeyframes:i}=this;if(!s||!s.current)return;const a=s.getValue(n);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Lo[n](s.measureViewportBox(),window.getComputedStyle(s.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{s.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const rj=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(di.test(t)||t==="0")&&!t.startsWith("url("));function qB(t){const e=t[0];if(t.length===1)return!0;for(let s=0;s<t.length;s++)if(t[s]!==e)return!0}function YB(t,e,s,n){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=rj(i,e),l=rj(a,e);return!o||!l?!1:qB(t)||(s==="spring"||zy(s))&&n}const QB=t=>t!==null;function Qm(t,{repeat:e,repeatType:s="loop"},n){const i=t.filter(QB),a=e&&s!=="loop"&&e%2===1?0:i.length-1;return!a||n===void 0?i[a]:n}const XB=40;class vC{constructor({autoplay:e=!0,delay:s=0,type:n="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Sn.now(),this.options={autoplay:e,delay:s,type:n,repeat:i,repeatDelay:a,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>XB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&HB(),this._resolved}onKeyframesResolved(e,s){this.resolvedAt=Sn.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:a,delay:o,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!YB(e,n,i,a))if(o)this.options.duration=0;else{c&&c(Qm(e,this.options,s)),l&&l(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,s);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:s,...d},this.onPostResolved())}onPostResolved(){}then(e,s){return this.currentFinishedPromise.then(e,s)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const it=(t,e,s)=>t+(e-t)*s;function cp(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function ZB({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let i=0,a=0,o=0;if(!e)i=a=o=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;i=cp(c,l,t+1/3),a=cp(c,l,t),o=cp(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}function Oh(t,e){return s=>s>0?e:t}const up=(t,e,s)=>{const n=t*t,i=s*(e*e-n)+n;return i<0?0:Math.sqrt(i)},JB=[r0,qi,to],e9=t=>JB.find(e=>e.test(t));function ij(t){const e=e9(t);if(!e)return!1;let s=e.parse(t);return e===to&&(s=ZB(s)),s}const aj=(t,e)=>{const s=ij(t),n=ij(e);if(!s||!n)return Oh(t,e);const i={...s};return a=>(i.red=up(s.red,n.red,a),i.green=up(s.green,n.green,a),i.blue=up(s.blue,n.blue,a),i.alpha=it(s.alpha,n.alpha,a),qi.transform(i))},t9=(t,e)=>s=>e(t(s)),gu=(...t)=>t.reduce(t9),l0=new Set(["none","hidden"]);function s9(t,e){return l0.has(t)?s=>s<=0?t:e:s=>s>=1?e:t}function n9(t,e){return s=>it(t,e,s)}function Xy(t){return typeof t=="number"?n9:typeof t=="string"?Ay(t)?Oh:Yt.test(t)?aj:a9:Array.isArray(t)?bC:typeof t=="object"?Yt.test(t)?aj:r9:Oh}function bC(t,e){const s=[...t],n=s.length,i=t.map((a,o)=>Xy(a)(a,e[o]));return a=>{for(let o=0;o<n;o++)s[o]=i[o](a);return s}}function r9(t,e){const s={...t,...e},n={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(n[i]=Xy(t[i])(t[i],e[i]));return i=>{for(const a in n)s[a]=n[a](i);return s}}function i9(t,e){var s;const n=[],i={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],l=t.indexes[o][i[o]],c=(s=t.values[l])!==null&&s!==void 0?s:0;n[a]=c,i[o]++}return n}const a9=(t,e)=>{const s=di.createTransformer(e),n=Uc(t),i=Uc(e);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?l0.has(t)&&!i.values.length||l0.has(e)&&!n.values.length?s9(t,e):gu(bC(i9(n,i),i.values),s):Oh(t,e)};function wC(t,e,s){return typeof t=="number"&&typeof e=="number"&&typeof s=="number"?it(t,e,s):Xy(t)(t,e)}const o9=5;function NC(t,e,s){const n=Math.max(e-o9,0);return YT(s-t(n),e-n)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},dp=.001;function l9({duration:t=ut.duration,bounce:e=ut.bounce,velocity:s=ut.velocity,mass:n=ut.mass}){let i,a,o=1-e;o=cr(ut.minDamping,ut.maxDamping,o),t=cr(ut.minDuration,ut.maxDuration,Xn(t)),o<1?(i=u=>{const d=u*o,m=d*t,p=d-s,f=c0(u,o),x=Math.exp(-m);return dp-p/f*x},a=u=>{const m=u*o*t,p=m*s+s,f=Math.pow(o,2)*Math.pow(u,2)*t,x=Math.exp(-m),S=c0(Math.pow(u,2),o);return(-i(u)+dp>0?-1:1)*((p-f)*x)/S}):(i=u=>{const d=Math.exp(-u*t),m=(u-s)*t+1;return-dp+d*m},a=u=>{const d=Math.exp(-u*t),m=(s-u)*(t*t);return d*m});const l=5/t,c=u9(i,a,l);if(t=Qn(t),isNaN(c))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const c9=12;function u9(t,e,s){let n=s;for(let i=1;i<c9;i++)n=n-t(n)/e(n);return n}function c0(t,e){return t*Math.sqrt(1-e*e)}const d9=["duration","bounce"],h9=["stiffness","damping","mass"];function oj(t,e){return e.some(s=>t[s]!==void 0)}function m9(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!oj(t,h9)&&oj(t,d9))if(t.visualDuration){const s=t.visualDuration,n=2*Math.PI/(s*1.2),i=n*n,a=2*cr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ut.mass,stiffness:i,damping:a}}else{const s=l9(t);e={...e,...s,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function jC(t=ut.visualDuration,e=ut.bounce){const s=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:i}=s;const a=s.keyframes[0],o=s.keyframes[s.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:m,velocity:p,isResolvedFromDuration:f}=m9({...s,velocity:-Xn(s.velocity||0)}),x=p||0,S=u/(2*Math.sqrt(c*d)),k=o-a,v=Xn(Math.sqrt(c/d)),_=Math.abs(k)<5;n||(n=_?ut.restSpeed.granular:ut.restSpeed.default),i||(i=_?ut.restDelta.granular:ut.restDelta.default);let w;if(S<1){const T=c0(v,S);w=P=>{const b=Math.exp(-S*v*P);return o-b*((x+S*v*k)/T*Math.sin(T*P)+k*Math.cos(T*P))}}else if(S===1)w=T=>o-Math.exp(-v*T)*(k+(x+v*k)*T);else{const T=v*Math.sqrt(S*S-1);w=P=>{const b=Math.exp(-S*v*P),y=Math.min(T*P,300);return o-b*((x+S*v*k)*Math.sinh(y)+T*k*Math.cosh(y))/T}}const E={calculatedDuration:f&&m||null,next:T=>{const P=w(T);if(f)l.done=T>=m;else{let b=0;S<1&&(b=T===0?Qn(x):NC(w,T,P));const y=Math.abs(b)<=n,j=Math.abs(o-P)<=i;l.done=y&&j}return l.value=l.done?o:P,l},toString:()=>{const T=Math.min(UT(E),t0),P=FT(b=>E.next(T*b).value,T,30);return T+"ms "+P}};return E}function lj({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const m=t[0],p={done:!1,value:m},f=y=>l!==void 0&&y<l||c!==void 0&&y>c,x=y=>l===void 0?c:c===void 0||Math.abs(l-y)<Math.abs(c-y)?l:c;let S=s*e;const k=m+S,v=o===void 0?k:o(k);v!==k&&(S=v-m);const _=y=>-S*Math.exp(-y/n),w=y=>v+_(y),E=y=>{const j=_(y),C=w(y);p.done=Math.abs(j)<=u,p.value=p.done?v:C};let T,P;const b=y=>{f(p.value)&&(T=y,P=jC({keyframes:[p.value,x(p.value)],velocity:NC(w,y,p.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return b(0),{calculatedDuration:null,next:y=>{let j=!1;return!P&&T===void 0&&(j=!0,E(y),b(y)),T!==void 0&&y>=T?P.next(y-T):(!j&&E(y),p)}}}const f9=pu(.42,0,1,1),p9=pu(0,0,.58,1),EC=pu(.42,0,.58,1),g9=t=>Array.isArray(t)&&typeof t[0]!="number",x9={linear:Ss,easeIn:f9,easeInOut:EC,easeOut:p9,circIn:Gy,circInOut:rC,circOut:nC,backIn:Ky,backInOut:tC,backOut:eC,anticipate:sC},cj=t=>{if(By(t)){wT(t.length===4);const[e,s,n,i]=t;return pu(e,s,n,i)}else if(typeof t=="string")return x9[t];return t};function y9(t,e,s){const n=[],i=s||wC,a=t.length-1;for(let o=0;o<a;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ss:e;l=gu(c,l)}n.push(l)}return n}function v9(t,e,{clamp:s=!0,ease:n,mixer:i}={}){const a=t.length;if(wT(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=y9(e,n,i),c=l.length,u=d=>{if(o&&d<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(d<t[m+1]);m++);const p=Ro(t[m],t[m+1],d);return l[m](p)};return s?d=>u(cr(t[0],t[a-1],d)):u}function b9(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const i=Ro(0,e,n);t.push(it(s,1,i))}}function w9(t){const e=[0];return b9(e,t.length-1),e}function N9(t,e){return t.map(s=>s*e)}function j9(t,e){return t.map(()=>e||EC).splice(0,t.length-1)}function Vh({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const i=g9(n)?n.map(cj):cj(n),a={done:!1,value:e[0]},o=N9(s&&s.length===e.length?s:w9(e),t),l=v9(o,e,{ease:Array.isArray(i)?i:j9(e,i)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const E9=t=>{const e=({timestamp:s})=>t(s);return{start:()=>tt.update(e,!0),stop:()=>ui(e),now:()=>Lt.isProcessing?Lt.timestamp:Sn.now()}},k9={decay:lj,inertia:lj,tween:Vh,keyframes:Vh,spring:jC},_9=t=>t/100;class Zy extends vC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:s,motionValue:n,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Qy,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new o(a,l,s,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:s="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,l=zy(s)?s:k9[s]||Vh;let c,u;l!==Vh&&typeof e[0]!="number"&&(c=gu(_9,wC(e[0],e[1])),e=[0,100]);const d=l({...this.options,keyframes:e});a==="mirror"&&(u=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=UT(d));const{calculatedDuration:m}=d,p=m+i,f=p*(n+1)-i;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:m,resolvedDuration:p,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,s=!1){const{resolved:n}=this;if(!n){const{keyframes:y}=this.options;return{done:!0,value:y[y.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:m}=n;if(this.startTime===null)return a.next(0);const{delay:p,repeat:f,repeatType:x,repeatDelay:S,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),s?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),_=this.speed>=0?v<0:v>d;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,E=a;if(f){const y=Math.min(this.currentTime,d)/m;let j=Math.floor(y),C=y%1;!C&&y>=1&&(C=1),C===1&&j--,j=Math.min(j,f+1),!!(j%2)&&(x==="reverse"?(C=1-C,S&&(C-=S/m)):x==="mirror"&&(E=o)),w=cr(0,1,C)*m}const T=_?{done:!1,value:c[0]}:E.next(w);l&&(T.value=l(T.value));let{done:P}=T;!_&&u!==null&&(P=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return b&&i!==void 0&&(T.value=Qm(c,this.options,i)),k&&k(T.value),b&&this.finish(),T}get duration(){const{resolved:e}=this;return e?Xn(e.calculatedDuration):0}get time(){return Xn(this.currentTime)}set time(e){e=Qn(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=Xn(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=E9,onPlay:s,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),s&&s();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const S9=new Set(["opacity","clipPath","filter","transform"]);function T9(t,e,s,{delay:n=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const u={[e]:s};c&&(u.offset=c);const d=HT(l,i);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:n,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const C9=Ey(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zh=10,I9=2e4;function A9(t){return zy(t.type)||t.type==="spring"||!$T(t.ease)}function P9(t,e){const s=new Zy({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const i=[];let a=0;for(;!n.done&&a<I9;)n=s.sample(a),i.push(n.value),a+=zh;return{times:void 0,keyframes:i,duration:a-zh,ease:"linear"}}const kC={anticipate:sC,backInOut:tC,circInOut:rC};function R9(t){return t in kC}class uj extends vC{constructor(e){super(e);const{name:s,motionValue:n,element:i,keyframes:a}=this.options;this.resolver=new yC(a,(o,l)=>this.onKeyframesResolved(o,l),s,n,i),this.resolver.scheduleResolve()}initPlayback(e,s){let{duration:n=300,times:i,ease:a,type:o,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof a=="string"&&Mh()&&R9(a)&&(a=kC[a]),A9(this.options)){const{onComplete:m,onUpdate:p,motionValue:f,element:x,...S}=this.options,k=P9(e,S);e=k.keyframes,e.length===1&&(e[1]=e[0]),n=k.duration,i=k.times,a=k.ease,o="keyframes"}const d=T9(l.owner.current,c,e,{...this.options,duration:n,times:i,ease:a});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(qN(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:m}=this.options;l.set(Qm(e,this.options,s)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:n,times:i,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:s}=e;return Xn(s)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:s}=e;return Xn(s.currentTime||0)}set time(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.currentTime=Qn(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:s}=e;return s.playbackRate}set speed(e){const{resolved:s}=this;if(!s)return;const{animation:n}=s;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:s}=e;return s.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:s}=e;return s.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:s}=this;if(!s)return Ss;const{animation:n}=s;qN(n,e)}return Ss}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.playState==="finished"&&this.updateFinishedPromise(),s.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:s}=e;s.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:s,keyframes:n,duration:i,type:a,ease:o,times:l}=e;if(s.playState==="idle"||s.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:m,element:p,...f}=this.options,x=new Zy({...f,keyframes:n,duration:i,type:a,ease:o,times:l,isGenerator:!0}),S=Qn(this.time);u.setWithVelocity(x.sample(S-zh).value,x.sample(S).value,zh)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:s,name:n,repeatDelay:i,repeatType:a,damping:o,type:l}=e;if(!s||!s.owner||!(s.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=s.owner.getProps();return C9()&&n&&S9.has(n)&&!c&&!u&&!i&&a!=="mirror"&&o!==0&&l!=="inertia"}}const D9={type:"spring",stiffness:500,damping:25,restSpeed:10},L9=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),M9={type:"keyframes",duration:.8},O9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V9=(t,{keyframes:e})=>e.length>2?M9:Ea.has(t)?t.startsWith("scale")?L9(e[1]):D9:O9;function z9({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Jy=(t,e,s,n={},i,a)=>o=>{const l=Vy(n,t)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Qn(c);let d={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:i};z9(l)||(d={...d,...V9(t,d)}),d.duration&&(d.duration=Qn(d.duration)),d.repeatDelay&&(d.repeatDelay=Qn(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let m=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(m=!0)),m&&!a&&e.get()!==void 0){const p=Qm(d.keyframes,l);if(p!==void 0)return tt.update(()=>{d.onUpdate(p),d.onComplete()}),new rB([])}return!a&&uj.supports(d)?new uj(d):new Zy(d)};function B9({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function _C(t,e,{delay:s=0,transitionOverride:n,type:i}={}){var a;let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;n&&(o=n);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const m in c){const p=t.getValue(m,(a=t.latestValues[m])!==null&&a!==void 0?a:null),f=c[m];if(f===void 0||d&&B9(d,m))continue;const x={delay:s,...Vy(o||{},m)};let S=!1;if(window.MotionHandoffAnimation){const v=QT(t);if(v){const _=window.MotionHandoffAnimation(v,m,tt);_!==null&&(x.startTime=_,S=!0)}}n0(t,m),p.start(Jy(m,p,f,t.shouldReduceMotion&&qT.has(m)?{type:!1}:x,t,S));const k=p.animation;k&&u.push(k)}return l&&Promise.all(u).then(()=>{tt.update(()=>{l&&yB(t,l)})}),u}function u0(t,e,s={}){var n;const i=Ym(t,e,s.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:a=t.getDefaultTransition()||{}}=i||{};s.transitionOverride&&(a=s.transitionOverride);const o=i?()=>Promise.all(_C(t,i,s)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:m,staggerDirection:p}=a;return U9(t,e,d+u,m,p,s)}:()=>Promise.resolve(),{when:c}=a;if(c){const[u,d]=c==="beforeChildren"?[o,l]:[l,o];return u().then(()=>d())}else return Promise.all([o(),l(s.delay)])}function U9(t,e,s=0,n=0,i=1,a){const o=[],l=(t.variantChildren.size-1)*n,c=i===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(t.variantChildren).sort(F9).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(u0(u,e,{...a,delay:s+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function F9(t,e){return t.sortNodePosition(e)}function $9(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>u0(t,a,s));n=Promise.all(i)}else if(typeof e=="string")n=u0(t,e,s);else{const i=typeof e=="function"?Ym(t,e,s.custom):e;n=Promise.all(_C(t,i,s))}return n.then(()=>{t.notify("AnimationComplete",e)})}const H9=_y.length;function SC(t){if(!t)return;if(!t.isControllingVariants){const s=t.parent?SC(t.parent)||{}:{};return t.props.initial!==void 0&&(s.initial=t.props.initial),s}const e={};for(let s=0;s<H9;s++){const n=_y[s],i=t.props[n];(Vc(i)||i===!1)&&(e[n]=i)}return e}const K9=[...ky].reverse(),G9=ky.length;function W9(t){return e=>Promise.all(e.map(({animation:s,options:n})=>$9(t,s,n)))}function q9(t){let e=W9(t),s=dj(),n=!0;const i=c=>(u,d)=>{var m;const p=Ym(t,d,c==="exit"?(m=t.presenceContext)===null||m===void 0?void 0:m.custom:void 0);if(p){const{transition:f,transitionEnd:x,...S}=p;u={...u,...S,...x}}return u};function a(c){e=c(t)}function o(c){const{props:u}=t,d=SC(t.parent)||{},m=[],p=new Set;let f={},x=1/0;for(let k=0;k<G9;k++){const v=K9[k],_=s[v],w=u[v]!==void 0?u[v]:d[v],E=Vc(w),T=v===c?_.isActive:null;T===!1&&(x=k);let P=w===d[v]&&w!==u[v]&&E;if(P&&n&&t.manuallyAnimateOnMount&&(P=!1),_.protectedKeys={...f},!_.isActive&&T===null||!w&&!_.prevProp||Wm(w)||typeof w=="boolean")continue;const b=Y9(_.prevProp,w);let y=b||v===c&&_.isActive&&!P&&E||k>x&&E,j=!1;const C=Array.isArray(w)?w:[w];let R=C.reduce(i(v),{});T===!1&&(R={});const{prevResolvedValues:D={}}=_,A={...D,...R},V=B=>{y=!0,p.has(B)&&(j=!0,p.delete(B)),_.needsAnimating[B]=!0;const O=t.getValue(B);O&&(O.liveStyle=!1)};for(const B in A){const O=R[B],K=D[B];if(f.hasOwnProperty(B))continue;let z=!1;e0(O)&&e0(K)?z=!BT(O,K):z=O!==K,z?O!=null?V(B):p.add(B):O!==void 0&&p.has(B)?V(B):_.protectedKeys[B]=!0}_.prevProp=w,_.prevResolvedValues=R,_.isActive&&(f={...f,...R}),n&&t.blockInitialAnimation&&(y=!1),y&&(!(P&&b)||j)&&m.push(...C.map(B=>({animation:B,options:{type:v}})))}if(p.size){const k={};p.forEach(v=>{const _=t.getBaseTarget(v),w=t.getValue(v);w&&(w.liveStyle=!0),k[v]=_??null}),m.push({animation:k})}let S=!!m.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(S=!1),n=!1,S?e(m):Promise.resolve()}function l(c,u){var d;if(s[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(p=>{var f;return(f=p.animationState)===null||f===void 0?void 0:f.setActive(c,u)}),s[c].isActive=u;const m=o(c);for(const p in s)s[p].protectedKeys={};return m}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>s,reset:()=>{s=dj(),n=!0}}}function Y9(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!BT(e,t):!1}function Di(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function dj(){return{animate:Di(!0),whileInView:Di(),whileHover:Di(),whileTap:Di(),whileDrag:Di(),whileFocus:Di(),exit:Di()}}class vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Q9 extends vi{constructor(e){super(e),e.animationState||(e.animationState=q9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Wm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let X9=0;class Z9 extends vi{constructor(){super(...arguments),this.id=X9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);s&&!e&&i.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const J9={animation:{Feature:Q9},exit:{Feature:Z9}};function Fc(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}function xu(t){return{point:{x:t.pageX,y:t.pageY}}}const eU=t=>e=>Uy(e)&&t(e,xu(e));function ic(t,e,s,n){return Fc(t,e,eU(s),n)}const hj=(t,e)=>Math.abs(t-e);function tU(t,e){const s=hj(t.x,e.x),n=hj(t.y,e.y);return Math.sqrt(s**2+n**2)}class TC{constructor(e,s,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=mp(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,f=tU(m.offset,{x:0,y:0})>=3;if(!p&&!f)return;const{point:x}=m,{timestamp:S}=Lt;this.history.push({...x,timestamp:S});const{onStart:k,onMove:v}=this.handlers;p||(k&&k(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,m)},this.handlePointerMove=(m,p)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=hp(p,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(m,p)=>{this.end();const{onEnd:f,onSessionEnd:x,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=mp(m.type==="pointercancel"?this.lastMoveEventInfo:hp(p,this.transformPagePoint),this.history);this.startEvent&&f&&f(m,k),x&&x(m,k)},!Uy(e))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=n,this.contextWindow=i||window;const o=xu(e),l=hp(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=Lt;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=s;d&&d(e,mp(l,this.history)),this.removeListeners=gu(ic(this.contextWindow,"pointermove",this.handlePointerMove),ic(this.contextWindow,"pointerup",this.handlePointerUp),ic(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ui(this.updatePoint)}}function hp(t,e){return e?{point:e(t.point)}:t}function mj(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mp({point:t},e){return{point:t,delta:mj(t,CC(e)),offset:mj(t,sU(e)),velocity:nU(e,.1)}}function sU(t){return t[0]}function CC(t){return t[t.length-1]}function nU(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const i=CC(t);for(;s>=0&&(n=t[s],!(i.timestamp-n.timestamp>Qn(e)));)s--;if(!n)return{x:0,y:0};const a=Xn(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const IC=1e-4,rU=1-IC,iU=1+IC,AC=.01,aU=0-AC,oU=0+AC;function Cs(t){return t.max-t.min}function lU(t,e,s){return Math.abs(t-e)<=s}function fj(t,e,s,n=.5){t.origin=n,t.originPoint=it(e.min,e.max,t.origin),t.scale=Cs(s)/Cs(e),t.translate=it(s.min,s.max,t.origin)-t.originPoint,(t.scale>=rU&&t.scale<=iU||isNaN(t.scale))&&(t.scale=1),(t.translate>=aU&&t.translate<=oU||isNaN(t.translate))&&(t.translate=0)}function ac(t,e,s,n){fj(t.x,e.x,s.x,n?n.originX:void 0),fj(t.y,e.y,s.y,n?n.originY:void 0)}function pj(t,e,s){t.min=s.min+e.min,t.max=t.min+Cs(e)}function cU(t,e,s){pj(t.x,e.x,s.x),pj(t.y,e.y,s.y)}function gj(t,e,s){t.min=e.min-s.min,t.max=t.min+Cs(e)}function oc(t,e,s){gj(t.x,e.x,s.x),gj(t.y,e.y,s.y)}function uU(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?it(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?it(s,t,n.max):Math.min(t,s)),t}function xj(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function dU(t,{top:e,left:s,bottom:n,right:i}){return{x:xj(t.x,s,i),y:xj(t.y,e,n)}}function yj(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function hU(t,e){return{x:yj(t.x,e.x),y:yj(t.y,e.y)}}function mU(t,e){let s=.5;const n=Cs(t),i=Cs(e);return i>n?s=Ro(e.min,e.max-n,t.min):n>i&&(s=Ro(t.min,t.max-i,e.min)),cr(0,1,s)}function fU(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const d0=.35;function pU(t=d0){return t===!1?t=0:t===!0&&(t=d0),{x:vj(t,"left","right"),y:vj(t,"top","bottom")}}function vj(t,e,s){return{min:bj(t,e),max:bj(t,s)}}function bj(t,e){return typeof t=="number"?t:t[e]||0}const wj=()=>({translate:0,scale:1,origin:0,originPoint:0}),so=()=>({x:wj(),y:wj()}),Nj=()=>({min:0,max:0}),ft=()=>({x:Nj(),y:Nj()});function Ls(t){return[t("x"),t("y")]}function PC({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function gU({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xU(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function fp(t){return t===void 0||t===1}function h0({scale:t,scaleX:e,scaleY:s}){return!fp(t)||!fp(e)||!fp(s)}function zi(t){return h0(t)||RC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RC(t){return jj(t.x)||jj(t.y)}function jj(t){return t&&t!=="0%"}function Bh(t,e,s){const n=t-s,i=e*n;return s+i}function Ej(t,e,s,n,i){return i!==void 0&&(t=Bh(t,i,n)),Bh(t,s,n)+e}function m0(t,e=0,s=1,n,i){t.min=Ej(t.min,e,s,n,i),t.max=Ej(t.max,e,s,n,i)}function DC(t,{x:e,y:s}){m0(t.x,e.translate,e.scale,e.originPoint),m0(t.y,s.translate,s.scale,s.originPoint)}const kj=.999999999999,_j=1.0000000000001;function yU(t,e,s,n=!1){const i=s.length;if(!i)return;e.x=e.y=1;let a,o;for(let l=0;l<i;l++){a=s[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ro(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,DC(t,o)),n&&zi(a.latestValues)&&ro(t,a.latestValues))}e.x<_j&&e.x>kj&&(e.x=1),e.y<_j&&e.y>kj&&(e.y=1)}function no(t,e){t.min=t.min+e,t.max=t.max+e}function Sj(t,e,s,n,i=.5){const a=it(t.min,t.max,i);m0(t,e,s,a,n)}function ro(t,e){Sj(t.x,e.x,e.scaleX,e.scale,e.originX),Sj(t.y,e.y,e.scaleY,e.scale,e.originY)}function LC(t,e){return PC(xU(t.getBoundingClientRect(),e))}function vU(t,e,s){const n=LC(t,s),{scroll:i}=e;return i&&(no(n.x,i.offset.x),no(n.y,i.offset.y)),n}const MC=({current:t})=>t?t.ownerDocument.defaultView:null,bU=new WeakMap;class wU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ft(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(xu(d).point)},a=(d,m)=>{const{drag:p,dragPropagation:f,onDragStart:x}=this.getProps();if(p&&!f&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mB(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ls(k=>{let v=this.getAxisMotionValue(k).get()||0;if(_n.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[k];w&&(v=Cs(w)*(parseFloat(v)/100))}}this.originPoint[k]=v}),x&&tt.postRender(()=>x(d,m)),n0(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(d,m)=>{const{dragPropagation:p,dragDirectionLock:f,onDirectionLock:x,onDrag:S}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:k}=m;if(f&&this.currentDirection===null){this.currentDirection=NU(k),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",m.point,k),this.updateAxis("y",m.point,k),this.visualElement.render(),S&&S(d,m)},l=(d,m)=>this.stop(d,m),c=()=>Ls(d=>{var m;return this.getAnimationState(d)==="paused"&&((m=this.getAxisMotionValue(d).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new TC(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:MC(this.visualElement)})}stop(e,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&tt.postRender(()=>a(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:i}=this.getProps();if(!n||!hd(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=uU(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;s&&eo(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=dU(i.layoutBox,s):this.constraints=!1,this.elastic=pU(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ls(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=fU(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!eo(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=vU(n,i.root,this.visualElement.getTransformPagePoint());let o=hU(i.layout.layoutBox,a);if(s){const l=s(gU(o));this.hasMutatedConstraints=!!l,l&&(o=PC(l))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Ls(d=>{if(!hd(d,s,this.currentDirection))return;let m=c&&c[d]||{};o&&(m={min:0,max:0});const p=i?200:1e6,f=i?40:1e7,x={type:"inertia",velocity:n?e[d]:0,bounceStiffness:p,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(l)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return n0(this.visualElement,e),n.start(Jy(e,n,0,s,this.visualElement,!1))}stopAnimation(){Ls(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ls(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[s];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ls(s=>{const{drag:n}=this.getProps();if(!hd(s,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[s];a.set(e[s]-it(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!eo(s)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Ls(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=mU({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ls(o=>{if(!hd(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(it(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;bU.set(this.visualElement,this);const e=this.visualElement.current,s=ic(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();eo(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),tt.read(n);const o=Fc(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ls(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=d0,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function hd(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function NU(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class jU extends vi{constructor(e){super(e),this.removeGroupControls=Ss,this.removeListeners=Ss,this.controls=new wU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ss}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tj=t=>(e,s)=>{t&&tt.postRender(()=>t(e,s))};class EU extends vi{constructor(){super(...arguments),this.removePointerDownListener=Ss}onPointerDown(e){this.session=new TC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Tj(e),onStart:Tj(s),onMove:n,onEnd:(a,o)=>{delete this.session,i&&tt.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=ic(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ud={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Cj(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const _l={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(fe.test(t))t=parseFloat(t);else return t;const s=Cj(t,e.target.x),n=Cj(t,e.target.y);return`${s}% ${n}%`}},kU={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,i=di.parse(t);if(i.length>5)return n;const a=di.createTransformer(t),o=typeof i[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const u=it(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),a(i)}};class _U extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;Gz(SU),a&&(s.group&&s.group.add(a),n&&n.register&&i&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ud.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:i,isPresent:a}=this.props,o=n.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||tt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ty.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function OC(t){const[e,s]=vT(),n=g.useContext(by);return r.jsx(_U,{...t,layoutGroup:n,switchLayoutGroup:g.useContext(ST),isPresent:e,safeToRemove:s})}const SU={borderRadius:{..._l,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_l,borderTopRightRadius:_l,borderBottomLeftRadius:_l,borderBottomRightRadius:_l,boxShadow:kU};function TU(t,e,s){const n=Jt(t)?t:Bc(t);return n.start(Jy("",n,e,s)),n.animation}function CU(t){return t instanceof SVGElement&&t.tagName!=="svg"}const IU=(t,e)=>t.depth-e.depth;class AU{constructor(){this.children=[],this.isDirty=!1}add(e){Fy(this.children,e),this.isDirty=!0}remove(e){$y(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(IU),this.isDirty=!1,this.children.forEach(e)}}function PU(t,e){const s=Sn.now(),n=({timestamp:i})=>{const a=i-s;a>=e&&(ui(n),t(a-e))};return tt.read(n,!0),()=>ui(n)}const VC=["TopLeft","TopRight","BottomLeft","BottomRight"],RU=VC.length,Ij=t=>typeof t=="string"?parseFloat(t):t,Aj=t=>typeof t=="number"||fe.test(t);function DU(t,e,s,n,i,a){i?(t.opacity=it(0,s.opacity!==void 0?s.opacity:1,LU(n)),t.opacityExit=it(e.opacity!==void 0?e.opacity:1,0,MU(n))):a&&(t.opacity=it(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<RU;o++){const l=`border${VC[o]}Radius`;let c=Pj(e,l),u=Pj(s,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Aj(c)===Aj(u)?(t[l]=Math.max(it(Ij(c),Ij(u),n),0),(_n.test(u)||_n.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||s.rotate)&&(t.rotate=it(e.rotate||0,s.rotate||0,n))}function Pj(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const LU=zC(0,.5,nC),MU=zC(.5,.95,Ss);function zC(t,e,s){return n=>n<t?0:n>e?1:s(Ro(t,e,n))}function Rj(t,e){t.min=e.min,t.max=e.max}function Ds(t,e){Rj(t.x,e.x),Rj(t.y,e.y)}function Dj(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Lj(t,e,s,n,i){return t-=e,t=Bh(t,1/s,n),i!==void 0&&(t=Bh(t,1/i,n)),t}function OU(t,e=0,s=1,n=.5,i,a=t,o=t){if(_n.test(e)&&(e=parseFloat(e),e=it(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=it(a.min,a.max,n);t===a&&(l-=e),t.min=Lj(t.min,e,s,l,i),t.max=Lj(t.max,e,s,l,i)}function Mj(t,e,[s,n,i],a,o){OU(t,e[s],e[n],e[i],e.scale,a,o)}const VU=["x","scaleX","originX"],zU=["y","scaleY","originY"];function Oj(t,e,s,n){Mj(t.x,e,VU,s?s.x:void 0,n?n.x:void 0),Mj(t.y,e,zU,s?s.y:void 0,n?n.y:void 0)}function Vj(t){return t.translate===0&&t.scale===1}function BC(t){return Vj(t.x)&&Vj(t.y)}function zj(t,e){return t.min===e.min&&t.max===e.max}function BU(t,e){return zj(t.x,e.x)&&zj(t.y,e.y)}function Bj(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function UC(t,e){return Bj(t.x,e.x)&&Bj(t.y,e.y)}function Uj(t){return Cs(t.x)/Cs(t.y)}function Fj(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class UU{constructor(){this.members=[]}add(e){Fy(this.members,e),e.scheduleRender()}remove(e){if($y(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let n;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function FU(t,e,s){let n="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(s==null?void 0:s.z)||0;if((i||a||o)&&(n=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:u,rotate:d,rotateX:m,rotateY:p,skewX:f,skewY:x}=s;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),m&&(n+=`rotateX(${m}deg) `),p&&(n+=`rotateY(${p}deg) `),f&&(n+=`skewX(${f}deg) `),x&&(n+=`skewY(${x}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Bi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Fl=typeof window<"u"&&window.MotionDebug!==void 0,pp=["","X","Y","Z"],$U={visibility:"hidden"},$j=1e3;let HU=0;function gp(t,e,s,n){const{latestValues:i}=e;i[t]&&(s[t]=i[t],e.setStaticValue(t,0),n&&(n[t]=0))}function FC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const s=QT(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(s,"transform",tt,!(i||a))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&FC(n)}function $C({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=HU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Fl&&(Bi.totalNodes=Bi.resolvedTargetDeltas=Bi.recalculatedProjection=0),this.nodes.forEach(WU),this.nodes.forEach(ZU),this.nodes.forEach(JU),this.nodes.forEach(qU),Fl&&window.MotionDebug.record(Bi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new AU)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Hy),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=CU(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),t){let m;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=PU(p,250),Ud.hasAnimatedSinceResize&&(Ud.hasAnimatedSinceResize=!1,this.nodes.forEach(Kj))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:p,hasRelativeTargetChanged:f,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||d.getDefaultTransition()||rF,{onLayoutAnimationStart:k,onLayoutAnimationComplete:v}=d.getProps(),_=!this.targetLayout||!UC(this.targetLayout,x)||f,w=!p&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||p&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,w);const E={...Vy(S,"layout"),onPlay:k,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||Kj(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ui(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&FC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Hj);return}this.isUpdating||this.nodes.forEach(QU),this.isUpdating=!1,this.nodes.forEach(XU),this.nodes.forEach(KU),this.nodes.forEach(GU),this.clearAllSnapshots();const l=Sn.now();Lt.delta=cr(0,1e3/60,l-Lt.timestamp),Lt.timestamp=l,Lt.isProcessing=!0,ap.update.process(Lt),ap.preRender.process(Lt),ap.render.process(Lt),Lt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ty.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YU),this.sharedNodes.forEach(tF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ft(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!BC(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||zi(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),iF(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return ft();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(aF))){const{scroll:d}=this.root;d&&(no(c.x,d.offset.x),no(c.y,d.offset.y))}return c}removeElementScroll(o){var l;const c=ft();if(Ds(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:m,options:p}=d;d!==this.root&&m&&p.layoutScroll&&(m.wasRoot&&Ds(c,o),no(c.x,m.offset.x),no(c.y,m.offset.y))}return c}applyTransform(o,l=!1){const c=ft();Ds(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ro(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zi(d.latestValues)&&ro(c,d.latestValues)}return zi(this.latestValues)&&ro(c,this.latestValues),c}removeTransform(o){const l=ft();Ds(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!zi(u.latestValues))continue;h0(u.latestValues)&&u.updateSnapshot();const d=ft(),m=u.measurePageBox();Ds(d,m),Oj(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return zi(this.latestValues)&&Oj(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Lt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:p}=this.options;if(!(!this.layout||!(m||p))){if(this.resolvedRelativeTargetAt=Lt.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),oc(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),Ds(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ft(),this.targetWithTransforms=ft()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),cU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ds(this.target,this.layout.layoutBox),DC(this.target,this.targetDelta)):Ds(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ft(),this.relativeTargetOrigin=ft(),oc(this.relativeTargetOrigin,this.target,f.target),Ds(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Fl&&Bi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||h0(this.parent.latestValues)||RC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Lt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||m))return;Ds(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,f=this.treeScale.y;yU(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ft());const{target:x}=l;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Dj(this.prevProjectionDelta.x,this.projectionDelta.x),Dj(this.prevProjectionDelta.y,this.projectionDelta.y)),ac(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==f||!Fj(this.projectionDelta.x,this.prevProjectionDelta.x)||!Fj(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Fl&&Bi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=so(),this.projectionDelta=so(),this.projectionDeltaWithTransform=so()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=so();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=ft(),f=c?c.source:void 0,x=this.layout?this.layout.source:void 0,S=f!==x,k=this.getStack(),v=!k||k.members.length<=1,_=!!(S&&!v&&this.options.crossfade===!0&&!this.path.some(nF));this.animationProgress=0;let w;this.mixTargetDelta=E=>{const T=E/1e3;Gj(m.x,o.x,T),Gj(m.y,o.y,T),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(oc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sF(this.relativeTarget,this.relativeTargetOrigin,p,T),w&&BU(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ft()),Ds(w,this.relativeTarget)),S&&(this.animationValues=d,DU(d,u,this.latestValues,T,_,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ui(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{Ud.hasAnimatedSinceResize=!0,this.currentAnimation=TU(0,$j,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($j),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&HC(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ft();const m=Cs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const p=Cs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+p}Ds(l,c),ro(l,d),ac(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new UU),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&gp("z",o,u,this.animationValues);for(let d=0;d<pp.length;d++)gp(`rotate${pp[d]}`,o,u,this.animationValues),gp(`skew${pp[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $U;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=zd(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=zd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!zi(this.latestValues)&&(S.transform=d?d({},""):"none",this.hasProjected=!1),S}const p=m.animationValues||m.latestValues;this.applyTransformsToTarget(),u.transform=FU(this.projectionDeltaWithTransform,this.treeScale,p),d&&(u.transform=d(p,u.transform));const{x:f,y:x}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${x.origin*100}% 0`,m.animationValues?u.opacity=m===this?(c=(l=p.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=m===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Lh){if(p[S]===void 0)continue;const{correct:k,applyTo:v}=Lh[S],_=u.transform==="none"?p[S]:k(p[S],m);if(v){const w=v.length;for(let E=0;E<w;E++)u[v[E]]=_}else u[S]=_}return this.options.layoutId&&(u.pointerEvents=m===this?zd(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Hj),this.root.sharedNodes.clear()}}}function KU(t){t.updateLayout()}function GU(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,o=s.source!==t.layout.source;a==="size"?Ls(m=>{const p=o?s.measuredBox[m]:s.layoutBox[m],f=Cs(p);p.min=n[m].min,p.max=p.min+f}):HC(a,s.layoutBox,n)&&Ls(m=>{const p=o?s.measuredBox[m]:s.layoutBox[m],f=Cs(n[m]);p.max=p.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+f)});const l=so();ac(l,n,s.layoutBox);const c=so();o?ac(c,t.applyTransform(i,!0),s.measuredBox):ac(c,n,s.layoutBox);const u=!BC(l);let d=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:f}=m;if(p&&f){const x=ft();oc(x,s.layoutBox,p.layoutBox);const S=ft();oc(S,n,f.layoutBox),UC(x,S)||(d=!0),m.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=x,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function WU(t){Fl&&Bi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function qU(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function YU(t){t.clearSnapshot()}function Hj(t){t.clearMeasurements()}function QU(t){t.isLayoutDirty=!1}function XU(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Kj(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function ZU(t){t.resolveTargetDelta()}function JU(t){t.calcProjection()}function eF(t){t.resetSkewAndRotation()}function tF(t){t.removeLeadSnapshot()}function Gj(t,e,s){t.translate=it(e.translate,0,s),t.scale=it(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function Wj(t,e,s,n){t.min=it(e.min,s.min,n),t.max=it(e.max,s.max,n)}function sF(t,e,s,n){Wj(t.x,e.x,s.x,n),Wj(t.y,e.y,s.y,n)}function nF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const rF={duration:.45,ease:[.4,0,.1,1]},qj=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Yj=qj("applewebkit/")&&!qj("chrome/")?Math.round:Ss;function Qj(t){t.min=Yj(t.min),t.max=Yj(t.max)}function iF(t){Qj(t.x),Qj(t.y)}function HC(t,e,s){return t==="position"||t==="preserve-aspect"&&!lU(Uj(e),Uj(s),.2)}function aF(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const oF=$C({attachResizeListener:(t,e)=>Fc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),xp={current:void 0},KC=$C({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!xp.current){const t=new oF({});t.mount(window),t.setOptions({layoutScroll:!0}),xp.current=t}return xp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),lF={pan:{Feature:EU},drag:{Feature:jU,ProjectionNode:KC,MeasureLayout:OC}};function Xj(t,e,s){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",s==="Start");const i="onHover"+s,a=n[i];a&&tt.postRender(()=>a(e,xu(e)))}class cF extends vi{mount(){const{current:e}=this.node;e&&(this.unmount=lB(e,s=>(Xj(this.node,s,"Start"),n=>Xj(this.node,n,"End"))))}unmount(){}}class uF extends vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gu(Fc(this.node.current,"focus",()=>this.onFocus()),Fc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zj(t,e,s){const{props:n}=t;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",s==="Start");const i="onTap"+(s==="End"?"":s),a=n[i];a&&tt.postRender(()=>a(e,xu(e)))}class dF extends vi{mount(){const{current:e}=this.node;e&&(this.unmount=hB(e,s=>(Zj(this.node,s,"Start"),(n,{success:i})=>Zj(this.node,n,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const f0=new WeakMap,yp=new WeakMap,hF=t=>{const e=f0.get(t.target);e&&e(t)},mF=t=>{t.forEach(hF)};function fF({root:t,...e}){const s=t||document;yp.has(s)||yp.set(s,{});const n=yp.get(s),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(mF,{root:t,...e})),n[i]}function pF(t,e,s){const n=fF(e);return f0.set(t,s),n.observe(t),()=>{f0.delete(t),n.unobserve(t)}}const gF={some:0,all:1};class xF extends vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:i="some",once:a}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:gF[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),p=u?d:m;p&&p(c)};return pF(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(yF(e,s))&&this.startObserver()}unmount(){}}function yF({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const vF={inView:{Feature:xF},tap:{Feature:dF},focus:{Feature:uF},hover:{Feature:cF}},bF={layout:{ProjectionNode:KC,MeasureLayout:OC}},p0={current:null},GC={current:!1};function wF(){if(GC.current=!0,!!jy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>p0.current=t.matches;t.addListener(e),e()}else p0.current=!1}const NF=[...xC,Yt,di],jF=t=>NF.find(gC(t)),Jj=new WeakMap;function EF(t,e,s){for(const n in e){const i=e[n],a=s[n];if(Jt(i))t.addValue(n,i);else if(Jt(a))t.addValue(n,Bc(i,{owner:t}));else if(a!==i)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(n);t.addValue(n,Bc(o!==void 0?o:i,{owner:t}))}}for(const n in s)e[n]===void 0&&t.removeValue(n);return e}const e1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kF{scrapeMotionValuesFromProps(e,s,n){return{}}constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qy,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Sn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,tt.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=o;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=s.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=qm(s),this.isVariantNode=kT(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:m,...p}=this.scrapeMotionValuesFromProps(s,{},this);for(const f in p){const x=p[f];c[f]!==void 0&&Jt(x)&&x.set(c[f],!1)}}mount(e){this.current=e,Jj.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),GC.current||wF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:p0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Jj.delete(this.current),this.projection&&this.projection.unmount(),ui(this.notifyUpdate),ui(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=Ea.has(e),i=s.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&tt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{i(),a(),o&&o(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Do){const s=Do[e];if(!s)continue;const{isEnabled:n,Feature:i}=s;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ft()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<e1.length;n++){const i=e1[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=EF(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const n=this.values.get(e);s!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=Bc(s===null?void 0:s,{owner:this}),this.addValue(e,n)),n}readValue(e,s){var n;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(fC(i)||iC(i))?i=parseFloat(i):!jF(i)&&di.test(s)&&(i=dC(e,s)),this.setBaseTarget(e,Jt(i)?i.get():i)),Jt(i)?i.get():i}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=Iy(this.props,n,(s=this.presenceContext)===null||s===void 0?void 0:s.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Jt(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new Hy),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class WC extends kF{constructor(){super(...arguments),this.KeyframeResolver=yC}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Jt(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function _F(t){return window.getComputedStyle(t)}class SF extends WC{constructor(){super(...arguments),this.type="html",this.renderInstance=DT}readValueFromInstance(e,s){if(Ea.has(s)){const n=Yy(s);return n&&n.default||0}else{const n=_F(e),i=(AT(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return LC(e,s)}build(e,s,n){Ry(e,s,n.transformTemplate)}scrapeMotionValuesFromProps(e,s,n){return Oy(e,s,n)}}class TF extends WC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ft}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Ea.has(s)){const n=Yy(s);return n&&n.default||0}return s=LT.has(s)?s:Sy(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,n){return VT(e,s,n)}build(e,s,n){Dy(e,s,this.isSVGTag,n.transformTemplate)}renderInstance(e,s,n,i){MT(e,s,n,i)}mount(e){this.isSVGTag=My(e.tagName),super.mount(e)}}const CF=(t,e)=>Cy(t)?new TF(e):new SF(e,{allowProjection:t!==g.Fragment}),IF=tB({...J9,...vF,...lF,...bF},CF),F=gz(IF);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qC=(...t)=>t.filter((e,s,n)=>!!e&&n.indexOf(e)===s).join(" ");/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},c)=>g.createElement("svg",{ref:c,...PF,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:qC("lucide",i),...l},[...o.map(([u,d])=>g.createElement(u,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=(t,e)=>{const s=g.forwardRef(({className:n,...i},a)=>g.createElement(RF,{ref:a,iconNode:e,className:qC(`lucide-${AF(t)}`,n),...i}));return s.displayName=`${t}`,s};/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=se("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=se("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=se("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=se("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=se("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g0=se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=se("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=se("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=se("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=se("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zm=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=se("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=se("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=se("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jm=se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=se("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=se("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=se("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=se("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=se("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ef=se("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=se("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=se("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=se("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=se("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=se("Route",[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=se("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=se("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=se("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=se("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=se("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nf=se("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=se("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),e8=()=>{const[t,e]=g.useState(!1),[s,n]=g.useState(!1),i=mn();return g.useEffect(()=>{const a=()=>{e(window.scrollY>20)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]),r.jsx(F.header,{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-white/95 backdrop-blur-xl shadow-xl border-b border-gray-200/50":"bg-transparent"}`,initial:{y:-100},animate:{y:0},transition:{duration:.6},children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"flex items-center justify-between h-20",children:[r.jsxs(qe,{to:"/",className:"flex items-center space-x-3 group",children:[r.jsx(F.div,{className:`w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300 ${t?"shadow-blue-500/25":"shadow-white/25"}`,whileHover:{rotate:360},transition:{duration:.6},children:r.jsx(je,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:`text-2xl font-bold transition-colors duration-300 ${!t&&i.pathname==="/"?"text-white":"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent"}`,children:Ns.name})]}),r.jsx("nav",{className:"hidden lg:flex items-center space-x-8",children:[{path:"/",label:"Ana Sayfa"},{path:"/hakkımızda",label:"Hakkımızda"},{path:"/hizmetler",label:"Hizmetlerimiz"},{path:"/iletişim",label:"İletişim"}].map(a=>r.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsxs(qe,{to:a.path,className:`relative font-medium transition-colors duration-300 ${i.pathname===a.path?"text-blue-600":t||i.pathname!=="/"?"text-gray-700 hover:text-blue-600":"text-white hover:text-blue-200"}`,children:[a.label,i.pathname===a.path&&r.jsx(F.div,{className:"absolute -bottom-1 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500",layoutId:"activeLink",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}})]})},a.path))}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"hidden 2xl:flex items-center space-x-4",children:[r.jsxs(F.a,{href:`tel:${Ns.supportPhone}`,className:`flex items-center space-x-2 text-sm transition-colors duration-300 ${t||i.pathname!=="/"?"text-gray-600 hover:text-blue-600":"text-white/90 hover:text-white"}`,whileHover:{scale:1.05},children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:r.jsx(nt,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"font-medium",children:Ns.supportPhone})]}),r.jsxs(F.a,{href:`mailto:${Ns.supportEmail}`,className:`flex items-center space-x-2 text-sm transition-colors duration-300 ${t||i.pathname!=="/"?"text-gray-600 hover:text-blue-600":"text-white/90 hover:text-white"}`,whileHover:{scale:1.05},children:[r.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:r.jsx(ns,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"font-medium",children:Ns.supportEmail})]})]}),r.jsx(F.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsxs(qe,{to:"/giriş",className:"btn btn-primary relative overflow-hidden group",children:[r.jsx(F.span,{className:"relative z-10",whileHover:{scale:1.05},children:"Giriş Yap"}),r.jsx(F.div,{className:"absolute inset-0 bg-gradient-to-r from-purple-600 to-blue-600",initial:{x:"-100%"},whileHover:{x:0},transition:{duration:.3}})]})}),r.jsx(F.button,{className:`lg:hidden p-2 rounded-xl ${t||i.pathname!=="/"?"text-gray-700 hover:bg-gray-100":"text-white hover:bg-white/10"}`,onClick:()=>n(!s),whileHover:{scale:1.05},whileTap:{scale:.95},children:s?r.jsx(Ue,{className:"w-6 h-6"}):r.jsx(nv,{className:"w-6 h-6"})})]})]}),r.jsx(F.div,{className:`lg:hidden ${s?"block":"hidden"}`,initial:{opacity:0,height:0},animate:{opacity:s?1:0,height:s?"auto":0},transition:{duration:.3},children:r.jsxs("div",{className:"py-4 space-y-4 bg-white/95 backdrop-blur-xl border-t border-gray-200/50 rounded-b-2xl shadow-xl",children:[[{path:"/",label:"Ana Sayfa"},{path:"/hakkımızda",label:"Hakkımızda"},{path:"/hizmetler",label:"Hizmetlerimiz"},{path:"/iletişim",label:"İletişim"}].map(a=>r.jsx(F.div,{whileHover:{x:10},whileTap:{scale:.95},children:r.jsx(qe,{to:a.path,className:`block px-4 py-2 font-medium transition-colors ${i.pathname===a.path?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"}`,onClick:()=>n(!1),children:a.label})},a.path)),r.jsx("div",{className:"px-4 py-2 border-t border-gray-200/50",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(nt,{className:"w-4 h-4"}),r.jsx("span",{children:Ns.supportPhone})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(ns,{className:"w-4 h-4"}),r.jsx("span",{children:Ns.supportEmail})]})]})})]})})]})})},t8=()=>{const t=()=>{window.scrollTo({top:0,behavior:"smooth"})};return r.jsxs("footer",{className:"relative bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 text-white overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40"}),r.jsx(F.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10",animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:20,repeat:1/0,ease:"linear"}}),r.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(15)].map((e,s)=>r.jsx(F.div,{className:"absolute w-1 h-1 bg-white rounded-full opacity-20",initial:{x:Math.random()*(typeof window<"u"?window.innerWidth:1e3),y:Math.random()*600},animate:{y:[null,-50],opacity:[.2,.5,.2]},transition:{duration:Math.random()*8+8,repeat:1/0,ease:"linear"}},s))}),r.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[r.jsxs(F.div,{className:"lg:col-span-2",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[r.jsx(F.div,{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",whileHover:{scale:1.1,rotate:360},transition:{duration:.6},children:r.jsx(je,{className:"w-6 h-6 text-white"})}),r.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:Ns.name})]}),r.jsx("p",{className:"text-gray-300 mb-6 max-w-md leading-relaxed",children:"Konforlu, güvenli ve kaliteli transfer hizmetleri. Havalimanından otelinize, otelinizden havalimanına profesyonel transfer çözümleri ile yanınızdayız."}),r.jsx("div",{className:"flex space-x-4",children:[{icon:zF,href:"#"},{icon:ZF,href:"#"},{icon:HF,href:"#"}].map((e,s)=>r.jsx(F.a,{href:e.href,className:"w-10 h-10 bg-white/10 backdrop-blur-sm rounded-xl flex items-center justify-center text-gray-400 hover:text-white hover:bg-gradient-to-br hover:from-blue-500 hover:to-purple-600 transition-all duration-300",whileHover:{scale:1.1,y:-2},whileTap:{scale:.95},children:r.jsx(e.icon,{className:"w-5 h-5"})},s))})]}),r.jsxs(F.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},children:[r.jsx("h3",{className:"text-xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Hızlı Bağlantılar"}),r.jsx("ul",{className:"space-y-3",children:[{to:"/",label:"Ana Sayfa"},{to:"/hakkımızda",label:"Hakkımızda"},{to:"/hizmetler",label:"Hizmetlerimiz"},{to:"/iletişim",label:"İletişim"},{to:"/giriş",label:"Giriş Yap"}].map((e,s)=>r.jsx(F.li,{whileHover:{x:5},children:r.jsxs(qe,{to:e.to,className:"text-gray-300 hover:text-white transition-colors duration-300 flex items-center group",children:[r.jsx("span",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full mr-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.label]})},s))})]}),r.jsxs(F.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[r.jsx("h3",{className:"text-xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"İletişim"}),r.jsx("div",{className:"space-y-4",children:[{icon:nt,title:Ns.supportPhone,subtitle:"7/24 Destek Hattı",href:`tel:${Ns.supportPhone}`},{icon:ns,title:Ns.supportEmail,subtitle:"E-posta Desteği",href:`mailto:${Ns.supportEmail}`},{icon:Ke,title:"İstanbul, Türkiye",subtitle:"Merkez Ofis",href:"#"}].map((e,s)=>r.jsxs(F.div,{className:"flex items-start space-x-3 group cursor-pointer",whileHover:{scale:1.02},children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center mt-0.5 group-hover:scale-110 transition-transform duration-300",children:r.jsx(e.icon,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("a",{href:e.href,className:"text-gray-300 hover:text-white transition-colors duration-300 font-medium",children:e.title}),r.jsx("p",{className:"text-sm text-gray-400",children:e.subtitle})]})]},s))})]})]}),r.jsx(F.div,{className:"border-t border-white/20 mt-12 pt-8",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:.3},viewport:{once:!0},children:r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[r.jsxs("p",{className:"text-gray-400 text-sm",children:["© 2025 ",Ns.companyName,". Tüm hakları saklıdır."]}),r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsx("div",{className:"flex space-x-6",children:[{to:"/gizlilik",label:"Gizlilik Politikası"},{to:"/kullanim-kosullari",label:"Kullanım Koşulları"}].map((e,s)=>r.jsx(F.div,{whileHover:{scale:1.05},children:r.jsx(qe,{to:e.to,className:"text-gray-400 hover:text-white text-sm transition-colors duration-300",children:e.label})},s))}),r.jsx(F.button,{onClick:t,className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center text-white hover:scale-110 transition-transform duration-300 shadow-lg",whileHover:{y:-2},whileTap:{scale:.95},children:r.jsx(YC,{className:"w-5 h-5"})})]})]})})]})]})},s8=()=>{const e=mn().pathname==="/";return r.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[r.jsx(e8,{}),r.jsx("main",{className:`flex-1 ${e?"":"pt-20"}`,children:r.jsx(xm,{})}),r.jsx(t8,{})]})},n8=()=>{var S;const t=mn(),e=ys(),{state:s}=Ws(),{logout:n,user:i}=pr(),[a,o]=g.useState(!1),[l,c]=g.useState(!1),u=async()=>{try{await n(),ce.success("Başarıyla çıkış yaptınız"),e("/")}catch(k){console.error("Logout error:",k),ce.error("Çıkış yapılırken hata oluştu")}},d=[{name:"Dashboard",href:"/admin",icon:QC,exact:!0,description:"Genel bakış ve istatistikler"},{name:"Araç Yönetimi",href:"/admin/vehicles",icon:je,description:"Araç ekleme, düzenleme ve yönetimi"},{name:"Şoför Yönetimi",href:"/admin/şoförler",icon:Qe,description:"Şoför kayıtları ve atamalar"},{name:"Ek Hizmetler",href:"/admin/ek-hizmetler",icon:ta,description:"Ek hizmet yönetimi ve fiyatlandırma"},{name:"Rezervasyonlar",href:"/admin/rezervasyonlar",icon:Be,description:"Rezervasyon takibi ve yönetimi"},{name:"Finansal Yönetim",href:"/admin/finans",icon:xs,description:"Gelir, gider ve raporlar"},{name:"Ayarlar",href:"/admin/ayarlar",icon:Oo,description:"Sistem ayarları ve konfigürasyon"}],m=(k,v=!1)=>v?t.pathname===k:t.pathname.startsWith(k),p={open:{x:0,transition:{type:"spring",stiffness:300,damping:30}},closed:{x:"-100%",transition:{type:"spring",stiffness:300,damping:30}}},f={inactive:{backgroundColor:"transparent",scale:1,transition:{duration:.2}},active:{backgroundColor:"linear-gradient(135deg, #3b82f6, #6366f1)",scale:1.02,transition:{duration:.2}},hover:{backgroundColor:"#f3f4f6",scale:1.01,transition:{duration:.2}}},x=({isMobile:k=!1})=>{var v,_;return r.jsxs("div",{className:"flex flex-col h-full bg-white shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-indigo-600",children:[r.jsxs(qe,{to:"/",className:"flex items-center space-x-3 group",children:[r.jsx(F.div,{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",whileHover:{scale:1.1},whileTap:{scale:.95},children:r.jsx(je,{className:"w-6 h-6 text-white"})}),!l&&r.jsx("div",{children:r.jsx("span",{className:"text-xl font-bold text-white group-hover:text-blue-200 transition-colors",children:"SBS Admin"})})]}),!k&&r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c(!l),className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:l?r.jsx(g0,{className:"w-5 h-5"}):r.jsx(Ue,{className:"w-5 h-5"})}),k&&r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(!1),className:"p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),!l&&r.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50/50",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(F.div,{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",whileHover:{scale:1.02},children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(je,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Araçlar"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((v=s.vehicles)==null?void 0:v.length)||0})]}),r.jsxs(F.div,{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",whileHover:{scale:1.02},children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(Be,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Rezervasyon"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((_=s.reservations)==null?void 0:_.length)||0})]})]})}),r.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2 overflow-y-auto",children:d.map((w,E)=>{const T=m(w.href,w.exact);return r.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:E*.1},children:r.jsx(qe,{to:w.href,onClick:k?()=>o(!1):void 0,className:"group relative block",title:l?w.name:void 0,children:r.jsxs(F.div,{className:`flex items-center ${l?"px-3 py-3 justify-center":"px-4 py-3"} text-sm font-medium rounded-xl transition-all duration-300 ${T?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg shadow-blue-500/25":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,variants:f,initial:"inactive",animate:T?"active":"inactive",whileHover:T?void 0:"hover",whileTap:{scale:.98},children:[r.jsx(w.icon,{className:`w-5 h-5 ${l?"":"mr-3"} transition-transform group-hover:scale-110 ${T?"text-white":"text-gray-400 group-hover:text-blue-600"}`}),!l&&r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-semibold",children:w.name}),!T&&r.jsx("div",{className:"text-xs text-gray-400 group-hover:text-gray-500 mt-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:w.description})]}),T&&!l&&r.jsx(F.div,{layoutId:"activeIndicator",className:"w-2 h-2 bg-white rounded-full",initial:{scale:0},animate:{scale:1},exit:{scale:0}}),!T&&!l&&r.jsx(g0,{className:"w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity"})]})})},w.name)})}),r.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50/50",children:r.jsxs(F.div,{className:`flex items-center ${l?"justify-center":"space-x-3"} p-4 bg-white rounded-xl shadow-sm border border-gray-100`,whileHover:{scale:1.02},children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center",children:r.jsx(nf,{className:"w-5 h-5 text-white"})}),!l&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:(i==null?void 0:i.displayName)||"Admin"}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:i==null?void 0:i.email})]}),r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:u,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Çıkış Yap",children:r.jsx(sv,{className:"w-4 h-4"})})]})]})})]})};return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[r.jsx(lr,{children:a&&r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:()=>o(!1)})}),r.jsx("div",{className:"hidden lg:flex lg:flex-shrink-0",children:r.jsx("div",{className:`${l?"w-20":"w-80"} transition-all duration-300`,children:r.jsx(x,{})})}),r.jsx(lr,{children:a&&r.jsx(F.div,{variants:p,initial:"closed",animate:"open",exit:"closed",className:"fixed inset-y-0 left-0 z-50 w-80 lg:hidden",children:r.jsx(x,{isMobile:!0})})}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 lg:hidden",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[r.jsx(F.button,{whileTap:{scale:.95},onClick:()=>o(!0),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(nv,{className:"w-6 h-6"})}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Admin Panel"}),r.jsx("div",{className:"w-10"})]})}),r.jsx("header",{className:"hidden lg:block bg-white shadow-sm border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-8",children:[r.jsx("div",{children:r.jsx("h1",{className:"text-xl font-bold text-gray-900",children:((S=d.find(k=>m(k.href,k.exact)))==null?void 0:S.name)||"Dashboard"})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors relative",children:[r.jsx(Mo,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),r.jsxs(qe,{to:"/",className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx(sI,{className:"w-4 h-4"}),r.jsx("span",{children:"Ana Sayfa"})]})]})]})}),r.jsx("main",{className:"flex-1 overflow-auto bg-gray-50",children:r.jsx("div",{className:"h-full",children:r.jsx(xm,{})})})]})]})},r8=()=>{const t=ys(),{logout:e}=pr(),s=async()=>{try{await e(),ce.success("Başarıyla çıkış yaptınız"),t("/")}catch(n){console.error("Logout error:",n),ce.error("Çıkış yapılırken hata oluştu")}};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-0 z-40",children:r.jsxs("div",{className:"flex items-center justify-between max-w-md mx-auto",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-blue-500 p-2 rounded-full",children:r.jsx(je,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-gray-900",children:"SBS Transfer"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Şoför Paneli"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>t("/şoför/profil"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Profil",children:r.jsx(Fe,{className:"w-5 h-5 text-gray-600"})}),r.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Çıkış Yap",children:r.jsx(sv,{className:"w-5 h-5 text-gray-600"})})]})]})}),r.jsx("main",{className:"pb-4",children:r.jsx(xm,{})})]})},i8=()=>{var u,d,m;const t=mn(),e=ys(),{state:s,actions:n}=Ws(),[i,a]=ga.useState(!1),o=async()=>{try{await L_(xn),n.logout(),n.showNotification("success","Başarıyla çıkış yaptınız","Çıkış"),e("/")}catch(p){console.error("Logout error:",p),n.showNotification("error","Çıkış yapılırken hata oluştu","Hata")}},l=[{name:"Dashboard",href:"/müşteri",icon:Be,exact:!0},{name:"Rezervasyonlarım",href:"/müşteri/rezervasyonlar",icon:je},{name:"Profilim",href:"/müşteri/profil",icon:Fe}],c=(p,f=!1)=>f?t.pathname===p:t.pathname.startsWith(p);return r.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>a(!1)}),r.jsxs(F.div,{initial:!1,animate:{x:i?0:"-100%",transition:{type:"tween",duration:.3}},className:"fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-xl transform lg:translate-x-0 lg:static lg:inset-0",children:[r.jsxs("div",{className:"flex items-center justify-between h-16 px-6 border-b border-gray-200",children:[r.jsxs(qe,{to:"/",className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-primary-600 rounded-lg flex items-center justify-center",children:r.jsx(je,{className:"w-5 h-5 text-white"})}),r.jsx("span",{className:"text-lg font-bold text-gray-900",children:"SBS Müşteri"})]}),r.jsx("button",{onClick:()=>a(!1),className:"lg:hidden p-1 text-gray-400 hover:text-gray-600",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-3",children:r.jsxs(qe,{to:"/",className:"w-full btn btn-primary flex items-center justify-center space-x-2",children:[r.jsx(Bt,{className:"w-4 h-4"}),r.jsx("span",{children:"Yeni Rezervasyon"})]})}),r.jsx("nav",{className:"px-3",children:r.jsx("div",{className:"space-y-1",children:l.map(p=>{const f=c(p.href,p.exact);return r.jsxs(qe,{to:p.href,onClick:()=>a(!1),className:`flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${f?"bg-primary-100 text-primary-700 border-r-2 border-primary-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[r.jsx(p.icon,{className:"w-5 h-5 mr-3"}),p.name]},p.name)})})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2",children:[r.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-primary-700",children:(d=(u=s.user)==null?void 0:u.email)==null?void 0:d.charAt(0).toUpperCase()})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Müşteri"}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:(m=s.user)==null?void 0:m.email})]}),r.jsx("button",{onClick:o,className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Çıkış Yap",children:r.jsx(sv,{className:"w-4 h-4"})})]})})]}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 lg:hidden",children:r.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[r.jsx("button",{onClick:()=>a(!0),className:"p-2 text-gray-400 hover:text-gray-600",children:r.jsx(nv,{className:"w-6 h-6"})}),r.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Müşteri Panel"}),r.jsx("div",{className:"w-10"})," "]})}),r.jsx("main",{className:"flex-1 overflow-auto",children:r.jsx("div",{className:"py-6",children:r.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:r.jsx(xm,{})})})})]})]})},a8=()=>{const t=[{icon:r.jsx(Ke,{className:"w-8 h-8"}),title:"Antalya Güvenli Transfer",description:"Antalya genelinde 7/24 güvenli ve konforlu VIP transfer hizmeti"},{icon:r.jsx(Ye,{className:"w-8 h-8"}),title:"Zamanında Teslimat",description:"Antalya havalimanı ve şehir transferlerinde dakiklik garantisi"},{icon:r.jsx(hn,{className:"w-8 h-8"}),title:"Sigortalı Transfer Hizmeti",description:"Antalya transfer hizmetlerinde tam kapsamlı sigorta güvencesi"},{icon:r.jsx(Fs,{className:"w-8 h-8"}),title:"Antalya VIP Kalite",description:"Lüks araçlar ve Antalya'yı tanıyan profesyonel şoförler"}],e=[{icon:r.jsx(XF,{className:"w-12 h-12"}),title:"Antalya Havalimanı Transfer",description:"Antalya Havalimanı'ndan otel ve şehir merkezine güvenli VIP transfer hizmeti",price:"₺120'den başlayan fiyatlar"},{icon:r.jsx(Qe,{className:"w-12 h-12"}),title:"Antalya Grup Transfer",description:"Büyük gruplar için Antalya genelinde özel araç transfer çözümleri",price:"₺250'den başlayan fiyatlar"},{icon:r.jsx(FF,{className:"w-12 h-12"}),title:"Antalya Şehir İçi Transfer",description:"Antalya şehir içi, otel arası ve turistik alan transferleri",price:"₺60'dan başlayan fiyatlar"}],s=[{number:"50K+",label:"Mutlu Müşteri"},{number:"100K+",label:"Başarılı Transfer"},{number:"24/7",label:"Hizmet Saati"},{number:"99%",label:"Memnuniyet Oranı"}];return r.jsxs("div",{className:"min-h-screen",children:[r.jsxs("section",{className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900",children:[r.jsx("div",{className:"absolute inset-0 bg-black opacity-40"}),r.jsx(F.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20",animate:{scale:[1,1.1,1],rotate:[0,5,0]},transition:{duration:20,repeat:1/0,ease:"linear"}})]}),r.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(20)].map((n,i)=>r.jsx(F.div,{className:"absolute w-2 h-2 bg-white rounded-full opacity-30",initial:{x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight},animate:{y:[null,-100],opacity:[.3,.7,.3]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"linear"}},i))}),r.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsxs(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mb-8",children:[r.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:[r.jsx("span",{className:"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"Antalya"}),r.jsx("br",{}),r.jsx("span",{className:"text-4xl md:text-6xl",children:"VIP Transfer Hizmeti"})]}),r.jsx("p",{className:"text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto mb-8 leading-relaxed",children:"Antalya'nın en güvenilir VIP transfer ve havalimanı transfer hizmeti. Profesyonel şoförler, lüks araçlar ve 7/24 güvenli yolculuk garantisi ile Antalya şehir içi, havalimanı ve otel transferleri."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[r.jsx(qe,{to:"/rezervasyon",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-4 rounded-full text-lg font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Hemen Rezervasyon Yap"}),r.jsx(qe,{to:"/giriş",className:"bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white px-8 py-4 rounded-full text-lg font-semibold transition-all duration-300 border border-white/20 hover:border-white/30",children:"Giriş Yap"})]})]}),r.jsx(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.4},className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-12",children:s.map((n,i)=>r.jsxs(F.div,{className:"text-center group",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.8+i*.1},whileHover:{scale:1.05},children:[r.jsx("div",{className:"text-3xl md:text-4xl font-bold text-white mb-2 group-hover:text-blue-400 transition-colors",children:n.number}),r.jsx("div",{className:"text-gray-300 text-sm md:text-base",children:n.label})]},i))})]}),r.jsx(F.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:r.jsx("div",{className:"w-6 h-10 border-2 border-white rounded-full flex justify-center",children:r.jsx("div",{className:"w-1 h-3 bg-white rounded-full mt-2"})})})]}),r.jsx("section",{className:"py-24 bg-gradient-to-br from-gray-50 to-blue-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs(F.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold gradient-text mb-6",children:"Antalya Transfer Hizmetimizi Neden Tercih Etmelisiniz?"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Antalya'da yılların deneyimi ve modern teknoloji ile size en iyi transfer hizmetini sunuyoruz"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:t.map((n,i)=>r.jsx(F.div,{className:"card text-center group hover:scale-105",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:i*.1},viewport:{once:!0},whileHover:{y:-10},children:r.jsxs("div",{className:"card-body",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-white group-hover:scale-110 transition-transform duration-300",children:n.icon})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:n.title}),r.jsx("p",{className:"text-gray-600",children:n.description})]})},i))})]})}),r.jsx("section",{className:"py-24 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs(F.div,{className:"text-center mb-16",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold gradient-text mb-6",children:"Antalya Transfer Hizmetlerimiz"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Antalya'da ihtiyacınıza uygun VIP transfer çözümlerini keşfedin"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:e.map((n,i)=>r.jsx(F.div,{className:"card group hover:scale-105",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:i*.2},viewport:{once:!0},whileHover:{y:-10},children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center text-white group-hover:scale-110 transition-transform duration-300",children:n.icon})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:n.title}),r.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:n.description}),r.jsx("div",{className:"text-lg font-semibold text-blue-600 mb-6",children:n.price}),r.jsx(qe,{to:"/book-transfer",className:"btn btn-primary w-full group-hover:scale-105 transition-transform",children:"Rezervasyon Yap"})]})},i))})]})}),r.jsxs("section",{className:"py-24 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black opacity-20"}),r.jsx(F.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-purple-400/20",animate:{scale:[1,1.1,1],rotate:[0,-5,0]},transition:{duration:15,repeat:1/0,ease:"linear"}}),r.jsx("div",{className:"relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:r.jsxs(F.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},children:[r.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"Antalya Transfer Rezervasyonu"}),r.jsx("p",{className:"text-xl text-gray-200 mb-8 leading-relaxed",children:"Antalya'da size özel VIP transfer çözümlerimizle konforlu yolculuğunuz başlasın. 7/24 Antalya transfer desteği ve garantili hizmet kalitesi."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-center",children:[r.jsx(qe,{to:"/rezervasyon",className:"btn btn-lg bg-white text-gray-900 hover:bg-gray-100 font-bold px-8 py-4 rounded-2xl shadow-2xl hover:scale-105 transition-all duration-300",children:r.jsxs(F.span,{className:"flex items-center gap-3",whileHover:{scale:1.05},whileTap:{scale:.95},children:[r.jsx(OF,{className:"w-6 h-6"}),"Şimdi Rezervasyon Yap"]})}),r.jsx("a",{href:"tel:+902422281234",className:"btn btn-outline btn-lg border-white text-white hover:bg-white hover:text-gray-900 px-8 py-4 rounded-2xl",children:r.jsxs(F.span,{className:"flex items-center gap-3",whileHover:{scale:1.05},whileTap:{scale:.95},children:[r.jsx(nt,{className:"w-6 h-6"}),"+90 242 228 12 34"]})})]})]})})]}),r.jsx("section",{className:"py-16 bg-gray-900",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[r.jsxs(F.div,{className:"text-white",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[r.jsx(nt,{className:"w-8 h-8 mx-auto mb-4 text-blue-400"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Antalya Transfer Telefon"}),r.jsx("p",{className:"text-gray-300",children:"+90 242 228 12 34"})]}),r.jsxs(F.div,{className:"text-white",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},children:[r.jsx(ns,{className:"w-8 h-8 mx-auto mb-4 text-blue-400"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Antalya Transfer E-posta"}),r.jsx("p",{className:"text-gray-300",children:"info@sbstransfer.com"})]}),r.jsxs(F.div,{className:"text-white",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[r.jsx(Ye,{className:"w-8 h-8 mx-auto mb-4 text-blue-400"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Antalya Transfer Saatleri"}),r.jsx("p",{className:"text-gray-300",children:"7/24 Hizmet"})]})]})})})]})},o8=()=>{const t=ys();return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"container-custom",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[r.jsx("button",{onClick:()=>t("/"),className:"btn btn-outline p-2",children:r.jsx(ea,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Araç Seçimi"}),r.jsx("p",{className:"text-gray-600",children:"Size uygun aracı seçin"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-8 text-center",children:[r.jsx(je,{className:"w-16 h-16 text-primary-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Araç Seçimi Sayfası"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Bu sayfa geliştirilme aşamasındadır. Ana sayfadan rezervasyon bilgilerini girdikten sonra burada araçlar listelenecektir."}),r.jsx("button",{onClick:()=>t("/"),className:"btn btn-primary",children:"Ana Sayfaya Dön"})]})]})})})},l8=()=>{const t=ys();return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"container-custom",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[r.jsx("button",{onClick:()=>t("/araç-seçimi"),className:"btn btn-outline p-2",children:r.jsx(ea,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Müşteri Bilgileri"}),r.jsx("p",{className:"text-gray-600",children:"Kişisel bilgilerinizi girin"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-8 text-center",children:[r.jsx(Fe,{className:"w-16 h-16 text-primary-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Müşteri Bilgileri Sayfası"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Bu sayfa geliştirilme aşamasındadır. Burada müşteri bilgileri formu bulunacaktır."}),r.jsx("button",{onClick:()=>t("/"),className:"btn btn-primary",children:"Ana Sayfaya Dön"})]})]})})})},c8=()=>{const t=ys();return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"container-custom",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"flex items-center space-x-4 mb-8",children:[r.jsx("button",{onClick:()=>t("/müşteri-bilgileri"),className:"btn btn-outline p-2",children:r.jsx(ea,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ödeme"}),r.jsx("p",{className:"text-gray-600",children:"Ödeme yöntemini seçin"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-8 text-center",children:[r.jsx($t,{className:"w-16 h-16 text-primary-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Ödeme Sayfası"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Bu sayfa geliştirilme aşamasındadır. Burada ödeme yöntemleri ve PayTR entegrasyonu bulunacaktır."}),r.jsx("button",{onClick:()=>t("/"),className:"btn btn-primary",children:"Ana Sayfaya Dön"})]})]})})})},u8=()=>{const t=ys();return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"container-custom",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-8 text-center",children:[r.jsx(_e,{className:"w-16 h-16 text-green-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Rezervasyon Onayı"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Bu sayfa geliştirilme aşamasındadır. Burada rezervasyon onayı, QR kod ve giriş bilgileri gösterilecektir."}),r.jsx("button",{onClick:()=>t("/"),className:"btn btn-primary",children:"Ana Sayfaya Dön"})]})})})})},d8=()=>{var T,P;const t=ys(),e=mn(),{login:s,signInWithGoogle:n}=pr(),[i,a]=g.useState({email:"",password:""}),[o,l]=g.useState(!1),[c,u]=g.useState(!1),[d,m]=g.useState(!1),[p,f]=g.useState(!1),[x,S]=g.useState({}),k=((P=(T=e.state)==null?void 0:T.from)==null?void 0:P.pathname)||"/",v=(b,y)=>{a(j=>({...j,[b]:y})),x[b]&&S(j=>({...j,[b]:""}))},_=()=>{const b={};return i.email?/\S+@\S+\.\S+/.test(i.email)||(b.email="Geçerli bir e-posta adresi girin"):b.email="E-posta adresi gerekli",i.password||(b.password="Şifre gerekli"),S(b),Object.keys(b).length===0},w=async b=>{if(b.preventDefault(),!!_()){u(!0);try{await s(i.email,i.password),ce.success("Başarıyla giriş yaptınız!"),t(k,{replace:!0})}catch(y){console.error("Login error:",y);let j="Giriş yapılırken bir hata oluştu";y.code==="auth/user-not-found"?j="Bu e-posta adresi ile kayıtlı kullanıcı bulunamadı":y.code==="auth/wrong-password"?j="Hatalı şifre":y.code==="auth/invalid-credential"?j="Geçersiz giriş bilgileri. Demo hesapları henüz oluşturulmamış olabilir.":y.code==="auth/invalid-email"?j="Geçersiz e-posta adresi":y.code==="auth/too-many-requests"&&(j="Çok fazla başarısız deneme. Lütfen daha sonra tekrar deneyin"),ce.error(j),S({general:j})}finally{u(!1)}}},E=async()=>{m(!0);try{await n(),ce.success("Google ile başarıyla giriş yaptınız!",{icon:"🎉",duration:3e3}),t(k,{replace:!0})}catch(b){console.error("Google sign-in error:",b);let y="Google ile giriş yapılırken bir hata oluştu";b.code==="auth/popup-closed-by-user"?y="Giriş penceresi kapatıldı. Lütfen tekrar deneyin.":b.code==="auth/popup-blocked"?y="Pop-up engellendi. Lütfen pop-up engelleyiciyi devre dışı bırakın.":b.code==="auth/account-exists-with-different-credential"&&(y="Bu e-posta adresi zaten farklı bir yöntemle kayıtlı."),ce.error(y),S({general:y})}finally{m(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8",children:[r.jsxs(qe,{to:"/",className:"inline-flex items-center space-x-3 mb-8 group",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:r.jsx(je,{className:"w-8 h-8 text-white"})}),r.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"SBS Transfer"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hoş Geldiniz! 👋"}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Hesabınıza giriş yaparak devam edin"})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/20 p-8",children:[r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:E,disabled:d||c,className:"w-full mb-6 flex items-center justify-center space-x-3 py-4 px-6 border-2 border-gray-200 rounded-2xl text-gray-700 font-medium hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed group",children:[d?r.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"}):r.jsx(JC,{className:"w-5 h-5 text-blue-600 group-hover:scale-110 transition-transform"}),r.jsx("span",{children:d?"Google ile bağlanılıyor...":"Google ile Devam Et"}),r.jsx(iI,{className:"w-4 h-4 text-yellow-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"veya e-posta ile"})})]}),r.jsxs("form",{onSubmit:w,className:"space-y-5",children:[x.general&&r.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-5 h-5 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})}),r.jsx("p",{className:"text-red-700 text-sm font-medium",children:x.general})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"E-posta Adresi"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",value:i.email,onChange:b=>v("email",b.target.value),placeholder:"ornek@email.com",disabled:c||d,className:`w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${x.email?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(ns,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${x.email?"text-red-400":"text-gray-400"}`})]}),x.email&&r.jsxs(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-sm flex items-center space-x-1",children:[r.jsx("div",{className:"w-1 h-1 bg-red-500 rounded-full"}),r.jsx("span",{children:x.email})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Şifre"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:o?"text":"password",value:i.password,onChange:b=>v("password",b.target.value),placeholder:"••••••••",disabled:c||d,className:`w-full pl-12 pr-12 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${x.password?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(Kc,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${x.password?"text-red-400":"text-gray-400"}`}),r.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 transition-colors",children:o?r.jsx(Hc,{className:"w-5 h-5"}):r.jsx(dn,{className:"w-5 h-5"})})]}),x.password&&r.jsxs(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-sm flex items-center space-x-1",children:[r.jsx("div",{className:"w-1 h-1 bg-red-500 rounded-full"}),r.jsx("span",{children:x.password})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2",children:[r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),r.jsx("span",{className:"text-sm text-gray-600 group-hover:text-gray-800 transition-colors",children:"Beni hatırla"})]}),r.jsx(qe,{to:"/şifre-sıfırla",className:"text-sm text-blue-600 hover:text-blue-700 font-medium hover:underline transition-colors",children:"Şifremi unuttum"})]}),r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:c||d,className:"w-full mt-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 focus:ring-4 focus:ring-blue-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Giriş yapılıyor..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"Giriş Yap"}),r.jsx($c,{className:"w-5 h-5"})]})})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("p",{className:"text-gray-600",children:["Hesabınız yok mu?"," ",r.jsx(qe,{to:"/kayıt",className:"text-blue-600 hover:text-blue-700 font-semibold hover:underline transition-colors",children:"Kayıt olun"})]})}),r.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-6 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx(hn,{className:"w-5 h-5 text-amber-600"}),r.jsx("h4",{className:"text-sm font-semibold text-amber-800",children:"Demo Hesapları"})]}),r.jsxs("div",{className:"space-y-2 text-xs text-amber-700",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{className:"w-3 h-3 text-green-600"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Admin:"})," admin@sbstransfer.com / admin123"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{className:"w-3 h-3 text-green-600"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Şoför:"})," sofor@sbstransfer.com / sofor123"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{className:"w-3 h-3 text-green-600"}),r.jsxs("span",{children:[r.jsx("strong",{children:"Müşteri:"})," musteri@sbstransfer.com / musteri123"]})]})]})]})]}),r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center mt-8",children:r.jsxs(qe,{to:"/",className:"inline-flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors group",children:[r.jsx($c,{className:"w-4 h-4 rotate-180 group-hover:-translate-x-1 transition-transform"}),r.jsx("span",{children:"Ana sayfaya dön"})]})})]})})},h8=()=>{const t=ys(),{register:e,signInWithGoogle:s}=pr(),[n,i]=g.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",role:bt.CUSTOMER}),[a,o]=g.useState(!1),[l,c]=g.useState(!1),[u,d]=g.useState(!1),[m,p]=g.useState(!1),[f,x]=g.useState({}),S=(w,E)=>{i(T=>({...T,[w]:E})),f[w]&&x(T=>({...T,[w]:""}))},k=()=>{const w={};return n.firstName.trim()?n.firstName.trim().length<2&&(w.firstName="Ad en az 2 karakter olmalıdır"):w.firstName="Ad alanı zorunludur",n.lastName.trim()?n.lastName.trim().length<2&&(w.lastName="Soyad en az 2 karakter olmalıdır"):w.lastName="Soyad alanı zorunludur",n.email?/\S+@\S+\.\S+/.test(n.email)||(w.email="Geçerli bir e-posta adresi girin"):w.email="E-posta adresi gerekli",n.phone.trim()?/^(\+90|0)?[0-9]{10}$/.test(n.phone.replace(/\s/g,""))||(w.phone="Geçerli bir telefon numarası girin"):w.phone="Telefon numarası gerekli",n.password?n.password.length<6&&(w.password="Şifre en az 6 karakter olmalıdır"):w.password="Şifre gerekli",n.confirmPassword?n.password!==n.confirmPassword&&(w.confirmPassword="Şifreler eşleşmiyor"):w.confirmPassword="Şifre tekrarı gerekli",x(w),Object.keys(w).length===0},v=async w=>{if(w.preventDefault(),!!k()){d(!0);try{await e(n.email,n.password,{firstName:n.firstName.trim(),lastName:n.lastName.trim(),phone:n.phone.trim(),role:n.role}),ce.success("Hesabınız başarıyla oluşturuldu! 🎉",{duration:4e3}),t("/giriş")}catch(E){console.error("Register error:",E);let T="Kayıt olurken bir hata oluştu";E.code==="auth/email-already-in-use"?T="Bu e-posta adresi zaten kullanımda":E.code==="auth/weak-password"?T="Şifre çok zayıf. Daha güçlü bir şifre seçin":E.code==="auth/invalid-email"&&(T="Geçersiz e-posta adresi"),ce.error(T),x({general:T})}finally{d(!1)}}},_=async()=>{p(!0);try{await s(),ce.success("Google ile başarıyla kayıt oldunuz! 🎉",{duration:3e3}),t("/")}catch(w){console.error("Google sign-in error:",w);let E="Google ile kayıt olurken bir hata oluştu";w.code==="auth/popup-closed-by-user"?E="Kayıt penceresi kapatıldı. Lütfen tekrar deneyin.":w.code==="auth/popup-blocked"?E="Pop-up engellendi. Lütfen pop-up engelleyiciyi devre dışı bırakın.":w.code==="auth/account-exists-with-different-credential"&&(E="Bu e-posta adresi zaten farklı bir yöntemle kayıtlı."),ce.error(E),x({general:E})}finally{p(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-lg",children:[r.jsxs(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8",children:[r.jsxs(qe,{to:"/",className:"inline-flex items-center space-x-3 mb-8 group",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:r.jsx(je,{className:"w-8 h-8 text-white"})}),r.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"SBS Transfer"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hesap Oluşturun 🚀"}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Hemen kayıt olun ve avantajları keşfedin"})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/20 p-8",children:[r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:_,disabled:m||u,className:"w-full mb-6 flex items-center justify-center space-x-3 py-4 px-6 border-2 border-gray-200 rounded-2xl text-gray-700 font-medium hover:bg-gray-50 hover:border-gray-300 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed group",children:[m?r.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin"}):r.jsx(JC,{className:"w-5 h-5 text-blue-600 group-hover:scale-110 transition-transform"}),r.jsx("span",{children:m?"Google ile bağlanılıyor...":"Google ile Kayıt Ol"}),r.jsx(iI,{className:"w-4 h-4 text-yellow-500 opacity-0 group-hover:opacity-100 transition-opacity"})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("div",{className:"w-full border-t border-gray-200"})}),r.jsx("div",{className:"relative flex justify-center text-sm",children:r.jsx("span",{className:"px-4 bg-white text-gray-500 font-medium",children:"veya e-posta ile"})})]}),r.jsxs("form",{onSubmit:v,className:"space-y-5",children:[f.general&&r.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-5 h-5 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})}),r.jsx("p",{className:"text-red-700 text-sm font-medium",children:f.general})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Ad"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:n.firstName,onChange:w=>S("firstName",w.target.value),placeholder:"Adınız",disabled:u||m,className:`w-full pl-10 pr-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${f.firstName?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(Fe,{className:`absolute left-3 top-3 w-4 h-4 transition-colors ${f.firstName?"text-red-400":"text-gray-400"}`})]}),f.firstName&&r.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-xs",children:f.firstName})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Soyad"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:n.lastName,onChange:w=>S("lastName",w.target.value),placeholder:"Soyadınız",disabled:u||m,className:`w-full pl-10 pr-4 py-3 border-2 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${f.lastName?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(Fe,{className:`absolute left-3 top-3 w-4 h-4 transition-colors ${f.lastName?"text-red-400":"text-gray-400"}`})]}),f.lastName&&r.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-xs",children:f.lastName})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"E-posta Adresi"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",value:n.email,onChange:w=>S("email",w.target.value),placeholder:"ornek@email.com",disabled:u||m,className:`w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${f.email?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(ns,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${f.email?"text-red-400":"text-gray-400"}`})]}),f.email&&r.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-sm",children:f.email})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Telefon Numarası"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"tel",value:n.phone,onChange:w=>S("phone",w.target.value),placeholder:"555 123 4567",disabled:u||m,className:`w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${f.phone?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(nt,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${f.phone?"text-red-400":"text-gray-400"}`})]}),f.phone&&r.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-sm",children:f.phone})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Şifre"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:a?"text":"password",value:n.password,onChange:w=>S("password",w.target.value),placeholder:"••••••••",disabled:u||m,className:`w-full pl-12 pr-12 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${f.password?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(Kc,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${f.password?"text-red-400":"text-gray-400"}`}),r.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 transition-colors",children:a?r.jsx(Hc,{className:"w-5 h-5"}):r.jsx(dn,{className:"w-5 h-5"})})]}),f.password&&r.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-sm",children:f.password})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Şifre Tekrar"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:l?"text":"password",value:n.confirmPassword,onChange:w=>S("confirmPassword",w.target.value),placeholder:"••••••••",disabled:u||m,className:`w-full pl-12 pr-12 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${f.confirmPassword?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(Kc,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${f.confirmPassword?"text-red-400":"text-gray-400"}`}),r.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-4 top-4 text-gray-400 hover:text-gray-600 transition-colors",children:l?r.jsx(Hc,{className:"w-5 h-5"}):r.jsx(dn,{className:"w-5 h-5"})})]}),f.confirmPassword&&r.jsx(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-sm",children:f.confirmPassword})]})]}),r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:u||m,className:"w-full mt-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 focus:ring-4 focus:ring-blue-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl",children:u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Hesap oluşturuluyor..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(JF,{className:"w-5 h-5"}),r.jsx("span",{children:"Hesap Oluştur"})]})})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("p",{className:"text-gray-600",children:["Zaten hesabınız var mı?"," ",r.jsx(qe,{to:"/giriş",className:"text-blue-600 hover:text-blue-700 font-semibold hover:underline transition-colors",children:"Giriş yapın"})]})}),r.jsxs(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx(hn,{className:"w-5 h-5 text-green-600"}),r.jsx("h4",{className:"text-sm font-semibold text-green-800",children:"Otomatik Üyelik"})]}),r.jsxs("div",{className:"space-y-2 text-xs text-green-700",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{className:"w-3 h-3 text-green-600"}),r.jsx("span",{children:"Rezervasyon sonrası otomatik hesap oluşturulur"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{className:"w-3 h-3 text-green-600"}),r.jsx("span",{children:"Google ile hızlı kayıt imkanı"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{className:"w-3 h-3 text-green-600"}),r.jsx("span",{children:"Güvenli ve kolay profil yönetimi"})]})]})]})]}),r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center mt-8",children:r.jsxs(qe,{to:"/",className:"inline-flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors group",children:[r.jsx($c,{className:"w-4 h-4 rotate-180 group-hover:-translate-x-1 transition-transform"}),r.jsx("span",{children:"Ana sayfaya dön"})]})})]})})},m8=()=>{ys();const{resetPassword:t}=pr(),[e,s]=g.useState(""),[n,i]=g.useState(!1),[a,o]=g.useState(!1),[l,c]=g.useState({}),u=()=>{const p={};return e?/\S+@\S+\.\S+/.test(e)||(p.email="Geçerli bir e-posta adresi girin"):p.email="E-posta adresi gerekli",c(p),Object.keys(p).length===0},d=async p=>{if(p.preventDefault(),!!u()){i(!0);try{await t(e),o(!0),ce.success("Şifre sıfırlama e-postası gönderildi! 📧",{duration:4e3})}catch(f){console.error("Reset password error:",f);let x="Şifre sıfırlama e-postası gönderilirken hata oluştu";f.code==="auth/user-not-found"?x="Bu e-posta adresi ile kayıtlı kullanıcı bulunamadı":f.code==="auth/invalid-email"?x="Geçersiz e-posta adresi":f.code==="auth/too-many-requests"&&(x="Çok fazla istek gönderildi. Lütfen daha sonra tekrar deneyin"),ce.error(x),c({general:x})}finally{i(!1)}}},m=p=>{s(p),l.email&&c(f=>({...f,email:""}))};return a?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:r.jsx("div",{className:"w-full max-w-md",children:r.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6},className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/20 p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(_e,{className:"w-8 h-8 text-green-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"E-posta Gönderildi! ✅"}),r.jsxs("p",{className:"text-gray-600 mb-6 leading-relaxed",children:[r.jsx("strong",{children:e})," adresine şifre sıfırlama bağlantısı gönderdik. E-postanızı kontrol edin ve talimatları takip edin."]}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-4 mb-6",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(hn,{className:"w-4 h-4 text-amber-600"}),r.jsx("span",{className:"text-sm font-medium text-amber-800",children:"Önemli Notlar"})]}),r.jsxs("ul",{className:"text-xs text-amber-700 space-y-1 text-left",children:[r.jsx("li",{children:"• E-posta birkaç dakika içinde gelebilir"}),r.jsx("li",{children:"• Spam klasörünü kontrol etmeyi unutmayın"}),r.jsx("li",{children:"• Bağlantı 1 saat boyunca geçerlidir"})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-2xl font-medium hover:bg-blue-700 transition-colors",children:"Tekrar Gönder"}),r.jsx(qe,{to:"/giriş",className:"w-full block text-center py-3 px-6 border border-gray-200 rounded-2xl text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Giriş Sayfasına Dön"})]})]})})}):r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs(F.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-8",children:[r.jsxs(qe,{to:"/",className:"inline-flex items-center space-x-3 mb-8 group",children:[r.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-105",children:r.jsx(je,{className:"w-8 h-8 text-white"})}),r.jsx("span",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"SBS Transfer"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Şifrenizi mi Unuttunuz? 🔑"}),r.jsx("p",{className:"text-gray-600 text-lg",children:"E-posta adresinizi girin, size yardım edelim"})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.1},className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/20 p-8",children:[r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.general&&r.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-5 h-5 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"})}),r.jsx("p",{className:"text-red-700 text-sm font-medium",children:l.general})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"E-posta Adresi"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",value:e,onChange:p=>m(p.target.value),placeholder:"Kayıtlı e-posta adresinizi girin",disabled:n,className:`w-full pl-12 pr-4 py-4 border-2 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 text-gray-900 placeholder-gray-400 ${l.email?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 focus:border-blue-300"}`}),r.jsx(ns,{className:`absolute left-4 top-4 w-5 h-5 transition-colors ${l.email?"text-red-400":"text-gray-400"}`})]}),l.email&&r.jsxs(F.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-600 text-sm flex items-center space-x-1",children:[r.jsx("div",{className:"w-1 h-1 bg-red-500 rounded-full"}),r.jsx("span",{children:l.email})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-2xl p-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx(hn,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Nasıl Çalışır?"})]}),r.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[r.jsx("li",{children:"• E-posta adresinizi girin"}),r.jsx("li",{children:"• Size şifre sıfırlama bağlantısı göndereceğiz"}),r.jsx("li",{children:"• Bağlantıya tıklayarak yeni şifre oluşturun"}),r.jsx("li",{children:"• Hesabınıza tekrar erişim sağlayın"})]})]}),r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-6 rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 focus:ring-4 focus:ring-blue-200 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 shadow-lg hover:shadow-xl",children:n?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Gönderiliyor..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"Şifre Sıfırlama E-postası Gönder"}),r.jsx($c,{className:"w-5 h-5"})]})})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs(qe,{to:"/giriş",className:"inline-flex items-center space-x-2 text-gray-600 hover:text-gray-800 transition-colors group",children:[r.jsx(ea,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),r.jsx("span",{children:"Giriş sayfasına dön"})]})})]})]})})},r1=()=>{const{state:t}=Ws(),{reservations:e,vehicles:s,drivers:n,customers:i}=t,[a,o]=g.useState({totalReservations:0,todayReservations:0,totalRevenue:0,activeDrivers:0,pendingReservations:0,completedReservations:0,monthlyGrowth:0,customerSatisfaction:0});g.useEffect(()=>{const d=new Date().toDateString(),m=e.filter(_=>{var w;return new Date((w=_.tripDetails)==null?void 0:w.date).toDateString()===d}).length,p=e.filter(_=>_.status==="pending").length,f=e.filter(_=>_.status==="completed").length,x=e.filter(_=>_.status==="completed").reduce((_,w)=>_+(w.totalPrice||0),0),S=n.filter(_=>_.status==="active").length,k=e.length>0?Math.round(f/e.length*100):0,v=f>0?Math.min(95,85+Math.round(f/10)):0;o({totalReservations:e.length,todayReservations:m,totalRevenue:x,activeDrivers:S,pendingReservations:p,completedReservations:f,monthlyGrowth:k,customerSatisfaction:v})},[e,n]);const l=[{title:"Toplam Rezervasyon",value:a.totalReservations,icon:Be,color:"blue",change:"+12%",trend:"up"},{title:"Bugünkü Rezervasyonlar",value:a.todayReservations,icon:Ye,color:"green",change:"+8%",trend:"up"},{title:"Toplam Gelir",value:`₺${a.totalRevenue.toLocaleString()}`,icon:xs,color:"purple",change:"+25%",trend:"up"},{title:"Aktif Şoförler",value:a.activeDrivers,icon:Qe,color:"orange",change:"+5%",trend:"up"},{title:"Bekleyen Rezervasyonlar",value:a.pendingReservations,icon:Is,color:"yellow",change:"-3%",trend:"down"},{title:"Tamamlanan İşler",value:a.completedReservations,icon:_e,color:"emerald",change:"+18%",trend:"up"},{title:"Aylık Büyüme",value:`%${a.monthlyGrowth}`,icon:sa,color:"indigo",change:"+7%",trend:"up"},{title:"Müşteri Memnuniyeti",value:`%${a.customerSatisfaction}`,icon:Fs,color:"pink",change:"+2%",trend:"up"}],c=d=>{switch(d){case"blue":return"bg-blue-500 text-blue-100";case"orange":return"bg-orange-500 text-orange-100";case"green":return"bg-green-500 text-green-100";case"purple":return"bg-purple-500 text-purple-100";case"yellow":return"bg-yellow-500 text-yellow-100";case"emerald":return"bg-emerald-500 text-emerald-100";case"indigo":return"bg-indigo-500 text-indigo-100";case"pink":return"bg-pink-500 text-pink-100";default:return"bg-gray-500 text-gray-100"}},u=d=>d==="up"?"text-green-600":"text-red-600";return r.jsxs("div",{className:"space-y-8 p-6",children:[r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.map((d,m)=>r.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:m*.1},whileHover:{y:-5,transition:{duration:.2}},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${c(d.color)}`,children:r.jsx(d.icon,{className:"w-6 h-6"})}),r.jsxs("div",{className:`text-sm font-medium ${u(d.trend)} flex items-center space-x-1`,children:[d.trend==="up"?r.jsx(sa,{className:"w-3 h-3"}):r.jsx(sa,{className:"w-3 h-3 rotate-180"}),r.jsx("span",{children:d.change})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:d.value}),r.jsx("p",{className:"text-sm text-gray-600",children:d.title})]})]},d.title))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Son Rezervasyonlar"})}),r.jsx("div",{className:"card-body",children:e.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Be,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Henüz rezervasyon yok"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Yeni rezervasyonlar burada görünecektir"})]}):r.jsx("div",{className:"space-y-3",children:e.slice(0,5).map(d=>{var m,p,f;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:d.reservationId||`RES-${(m=d.id)==null?void 0:m.slice(-6)}`}),r.jsxs("p",{className:"text-xs text-gray-500",children:[(p=d.customerInfo)==null?void 0:p.firstName," ",(f=d.customerInfo)==null?void 0:f.lastName]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₺",d.totalPrice||0]}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${d.status==="completed"?"status-completed":d.status==="pending"?"status-pending":d.status==="assigned"?"status-assigned":"status-pending"}`,children:d.status==="completed"?"Tamamlandı":d.status==="pending"?"Bekleyen":d.status==="assigned"?"Atandı":"Bilinmeyen"})]})]},d.id)})})})]}),r.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hızlı İşlemler"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[r.jsx(Is,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Bekleyen"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a.pendingReservations})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[r.jsx(_e,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Tamamlanan"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.completedReservations})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg text-center",children:[r.jsx(je,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Araçlar"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:s.length})]}),r.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg text-center",children:[r.jsx(Qe,{className:"w-8 h-8 text-indigo-500 mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Müşteriler"}),r.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:i.length})]})]})})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Sistem Durumu"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Firebase"}),r.jsx("p",{className:"text-xs text-green-600",children:"Çevrimiçi"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Google Maps API"}),r.jsx("p",{className:"text-xs text-green-600",children:"Çevrimiçi"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full mx-auto mb-2"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"PayTR API"}),r.jsx("p",{className:"text-xs text-yellow-600",children:"Test Modu"})]})]})})]})]})},f8=()=>{const{state:t,addVehicle:e,updateVehicle:s,deleteVehicle:n}=Ws(),{vehicles:i=[]}=t,[a,o]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[m,p]=g.useState(!1),[f,x]=g.useState({brand:"",model:"",year:new Date().getFullYear(),plateNumber:"",capacity:"",kmRate:"",color:"",status:"active",fuelType:"benzin",transmission:"otomatik"}),S=()=>{x({brand:"",model:"",year:new Date().getFullYear(),plateNumber:"",capacity:"",kmRate:"",color:"",status:"active",fuelType:"benzin",transmission:"otomatik"})},k=(j,C)=>{x(R=>({...R,[j]:C}))},v=()=>{const j={};return f.brand.trim()||(j.brand="Marka gerekli"),f.model.trim()||(j.model="Model gerekli"),f.plateNumber.trim()||(j.plateNumber="Plaka gerekli"),(!f.capacity||f.capacity<1)&&(j.capacity="Geçerli kapasite gerekli"),(!f.kmRate||f.kmRate<0)&&(j.kmRate="KM başı ücret gerekli"),j},_=async j=>{j.preventDefault();const C=v();if(Object.keys(C).length>0){Object.values(C).forEach(R=>ce.error(R));return}p(!0);try{const R={...f,capacity:parseInt(f.capacity),kmRate:parseFloat(f.kmRate),year:parseInt(f.year),createdAt:l?l.createdAt:new Date,updatedAt:new Date};l?(await s(l.id,R),ce.success("Araç başarıyla güncellendi!")):(await e(R),ce.success("Araç başarıyla eklendi!")),T()}catch(R){console.error("Vehicle operation error:",R),ce.error("İşlem sırasında bir hata oluştu")}finally{p(!1)}},w=j=>{c(j),x({brand:j.brand||"",model:j.model||"",year:j.year||new Date().getFullYear(),plateNumber:j.plateNumber||"",capacity:j.capacity||"",kmRate:j.kmRate||"",color:j.color||"",status:j.status||"active",fuelType:j.fuelType||"benzin",transmission:j.transmission||"otomatik"}),o(!0)},E=async j=>{if(window.confirm("Bu aracı silmek istediğinizden emin misiniz?"))try{await n(j),ce.success("Araç başarıyla silindi!")}catch(C){console.error("Delete error:",C),ce.error("Araç silinirken hata oluştu")}},T=()=>{o(!1),c(null),S()},P=()=>{c(null),S(),o(!0)},b=i.filter(j=>{if(!u)return!0;const C=u.toLowerCase();return(j.brand||"").toLowerCase().includes(C)||(j.model||"").toLowerCase().includes(C)||(j.plateNumber||"").toLowerCase().includes(C)}),y=[{value:"active",label:"Aktif",color:"text-green-600 bg-green-100"},{value:"maintenance",label:"Bakımda",color:"text-yellow-600 bg-yellow-100"},{value:"inactive",label:"Pasif",color:"text-red-600 bg-red-100"}];return r.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[r.jsxs("div",{className:"flex-1 p-6 overflow-auto",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:P,className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-200 flex items-center gap-2",children:[r.jsx(Bt,{className:"w-5 h-5"}),"Yeni Araç Ekle"]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 mb-6",children:r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),r.jsx("input",{type:"text",placeholder:"Marka, model veya plaka ile ara...",value:u,onChange:j=>d(j.target.value),className:"w-full pl-12 pr-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.jsx(lr,{children:b.map((j,C)=>{const R=y.find(D=>D.value===j.status);return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{delay:C*.1},className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center",children:r.jsx(je,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold text-gray-900 text-lg",children:[j.brand," ",j.model]}),r.jsx("p",{className:"text-sm text-gray-500",children:j.year})]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(R==null?void 0:R.color)||"text-gray-600 bg-gray-100"}`,children:(R==null?void 0:R.label)||"Bilinmiyor"})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Plaka"}),r.jsx("span",{className:"font-semibold text-gray-900",children:j.plateNumber})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Kapasite"}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Qe,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:[j.capacity," kişi"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"KM Ücreti"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:["₺",j.kmRate,"/km"]})]}),j.color&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Renk"}),r.jsx("span",{className:"font-semibold text-gray-900",children:j.color})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>w(j),className:"flex-1 bg-blue-50 hover:bg-blue-100 text-blue-600 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[r.jsx(fa,{className:"w-4 h-4"}),r.jsx("span",{children:"Düzenle"})]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>E(j.id),className:"flex-1 bg-red-50 hover:bg-red-100 text-red-600 px-4 py-2 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2",children:[r.jsx(ka,{className:"w-4 h-4"}),r.jsx("span",{children:"Sil"})]})]})]},j.id)})})}),b.length===0&&r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(je,{className:"w-12 h-12 text-gray-400"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:u?"Araç bulunamadı":"Henüz araç eklenmemiş"}),r.jsx("p",{className:"text-gray-500 mb-6",children:u?"Arama kriterlerinizi değiştirerek tekrar deneyin":"İlk aracınızı ekleyerek başlayın"}),!u&&r.jsx(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-xl font-semibold hover:bg-blue-700 transition-colors",children:"İlk Aracı Ekle"})]})]}),r.jsx(lr,{children:a&&r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:T,children:r.jsxs(F.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:j=>j.stopPropagation(),className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:l?"Araç Düzenle":"Yeni Araç Ekle"}),r.jsx("button",{onClick:T,className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:r.jsx(Ue,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:_,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Marka *"}),r.jsx("input",{type:"text",value:f.brand,onChange:j=>k("brand",j.target.value),placeholder:"Örn: Mercedes",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Model *"}),r.jsx("input",{type:"text",value:f.model,onChange:j=>k("model",j.target.value),placeholder:"Örn: Vito",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Yıl"}),r.jsx("input",{type:"number",value:f.year,onChange:j=>k("year",j.target.value),min:"1990",max:new Date().getFullYear()+1,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Plaka *"}),r.jsx("input",{type:"text",value:f.plateNumber,onChange:j=>k("plateNumber",j.target.value.toUpperCase()),placeholder:"Örn: 34 ABC 123",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Kapasite *"}),r.jsx("input",{type:"number",value:f.capacity,onChange:j=>k("capacity",j.target.value),placeholder:"Örn: 8",min:"1",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"KM Başı Ücret (₺) *"}),r.jsx("input",{type:"number",step:"0.01",value:f.kmRate,onChange:j=>k("kmRate",j.target.value),placeholder:"Örn: 12.50",min:"0",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Renk"}),r.jsx("input",{type:"text",value:f.color,onChange:j=>k("color",j.target.value),placeholder:"Örn: Beyaz",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Durum"}),r.jsx("select",{value:f.status,onChange:j=>k("status",j.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:y.map(j=>r.jsx("option",{value:j.value,children:j.label},j.value))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Yakıt Türü"}),r.jsxs("select",{value:f.fuelType,onChange:j=>k("fuelType",j.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[r.jsx("option",{value:"benzin",children:"Benzin"}),r.jsx("option",{value:"dizel",children:"Dizel"}),r.jsx("option",{value:"lpg",children:"LPG"}),r.jsx("option",{value:"elektrik",children:"Elektrik"}),r.jsx("option",{value:"hibrit",children:"Hibrit"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Vites Türü"}),r.jsxs("select",{value:f.transmission,onChange:j=>k("transmission",j.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[r.jsx("option",{value:"otomatik",children:"Otomatik"}),r.jsx("option",{value:"manuel",children:"Manuel"})]})]})]}),r.jsx("div",{className:"pt-6 border-t border-gray-200",children:r.jsx(F.button,{type:"submit",disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-500 text-white px-6 py-4 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center space-x-2",children:m?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"İşleniyor..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-5 h-5"}),r.jsx("span",{children:l?"Güncelle":"Araç Ekle"})]})})})]})]})})})]})},p8=({vehicles:t,onShowDetails:e,onEditVehicle:s,onDeleteVehicle:n,onStatusChange:i,onManageFeatures:a})=>{const[o,l]=g.useState(null),[c,u]=g.useState(null),d=x=>{const S={active:{color:"bg-green-100 text-green-800",icon:_e,text:"Aktif"},inactive:{color:"bg-red-100 text-red-800",icon:ur,text:"Pasif"},maintenance:{color:"bg-yellow-100 text-yellow-800",icon:Ne,text:"Bakımda"}},k=S[x]||S.inactive,v=k.icon;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${k.color}`,children:[r.jsx(v,{className:"w-3 h-3"}),k.text]})},m=x=>({sedan:"🚗",suv:"🚙",minibus:"🚐",midibus:"🚌",bus:"🚍",vip:"🏎️"})[x]||"🚗",p=async x=>{window.confirm("Bu aracı silmek istediğinizden emin misiniz?")&&(u(x),await n(x)&&u(null))},f=async(x,S)=>{await i(x,S)&&l(null)};return t.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[r.jsx(je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz araç yok"}),r.jsx("p",{className:"text-gray-600",children:"İlk aracınızı ekleyerek başlayın."})]}):r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Araç Bilgileri"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kapasite"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"KM Ücreti"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Özellikler"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>{var S;return r.jsxs(F.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:r.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center text-2xl",children:x.imageUrl?r.jsx("img",{src:x.imageUrl,alt:`${x.brand} ${x.model}`,className:"h-12 w-12 rounded-lg object-cover"}):m(x.type)})}),r.jsxs("div",{className:"ml-4",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[x.brand," ",x.model]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[x.year," • ",x.plateNumber]}),r.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[x.color," • ",x.fuelType]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(Qe,{className:"w-4 h-4 text-gray-400 mr-1"}),x.capacity," Kişi"]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₺",((S=x.kmRate)==null?void 0:S.toFixed(2))||"0.00"]}),r.jsx("div",{className:"text-xs text-gray-500",children:"per km"})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d(x.status)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[x.features&&x.features.length>0?x.features.slice(0,3).map((k,v)=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:k},v)):r.jsx("span",{className:"text-xs text-gray-400",children:"Özellik yok"}),x.features&&x.features.length>3&&r.jsxs("span",{className:"text-xs text-gray-500",children:["+",x.features.length-3," daha"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>e(x),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Detayları Görüntüle",children:r.jsx(dn,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>s(x),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded",title:"Düzenle",children:r.jsx(fa,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>a(x),className:"text-purple-600 hover:text-purple-900 p-1 hover:bg-purple-50 rounded",title:"Özellikleri Yönet",children:r.jsx(Oo,{className:"w-4 h-4"})}),r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>l(o===x.id?null:x.id),className:"text-gray-600 hover:text-gray-900 p-1 hover:bg-gray-50 rounded",title:"Daha Fazla",children:r.jsx(eI,{className:"w-4 h-4"})}),o===x.id&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:r.jsxs("div",{className:"py-1",children:[r.jsx("button",{onClick:()=>f(x.id,x.status==="active"?"inactive":"active"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:x.status==="active"?"Pasif Et":"Aktif Et"}),r.jsx("button",{onClick:()=>f(x.id,"maintenance"),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Bakıma Al"}),r.jsx("button",{onClick:()=>p(x.id),disabled:c===x.id,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 disabled:opacity-50",children:c===x.id?"Siliniyor...":"Sil"})]})})]})]})})]},x.id)})})]})})})},g8=({vehicles:t,onShowDetails:e,onEditVehicle:s,onDeleteVehicle:n,onStatusChange:i,onManageFeatures:a})=>{const[o,l]=g.useState(null),c=p=>{const f={active:{color:"bg-green-100 text-green-800",icon:_e,text:"Aktif"},inactive:{color:"bg-red-100 text-red-800",icon:ur,text:"Pasif"},maintenance:{color:"bg-yellow-100 text-yellow-800",icon:Ne,text:"Bakımda"}},x=f[p]||f.inactive,S=x.icon;return r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${x.color}`,children:[r.jsx(S,{className:"w-3 h-3"}),x.text]})},u=p=>({sedan:"🚗",suv:"🚙",minibus:"🚐",midibus:"🚌",bus:"🚍",vip:"🏎️"})[p]||"🚗",d=async(p,f)=>{await i(p,f)&&l(null)},m=async p=>{window.confirm("Bu aracı silmek istediğinizden emin misiniz?")&&await n(p)};return t.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(je,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Henüz araç yok"}),r.jsx("p",{className:"text-gray-600",children:"İlk aracınızı ekleyerek başlayın."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>{var f;return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-5},className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-all duration-300",children:[r.jsxs("div",{className:"relative h-48 bg-gray-100",children:[p.imageUrl?r.jsx("img",{src:p.imageUrl,alt:`${p.brand} ${p.model}`,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("div",{className:"text-6xl",children:u(p.type)})}),r.jsx("div",{className:"absolute top-3 left-3",children:c(p.status)}),r.jsx("div",{className:"absolute top-3 right-3",children:r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>l(o===p.id?null:p.id),className:"p-2 bg-white/80 backdrop-blur-sm rounded-full hover:bg-white/90 transition-colors",children:r.jsx(eI,{className:"w-4 h-4 text-gray-700"})}),o===p.id&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg ring-1 ring-black ring-opacity-5 z-10",children:r.jsxs("div",{className:"py-1",children:[r.jsxs("button",{onClick:()=>e(p),className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[r.jsx(dn,{className:"w-4 h-4"}),"Detayları Görüntüle"]}),r.jsxs("button",{onClick:()=>s(p),className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[r.jsx(fa,{className:"w-4 h-4"}),"Düzenle"]}),r.jsxs("button",{onClick:()=>a(p),className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[r.jsx(Oo,{className:"w-4 h-4"}),"Özellikleri Yönet"]}),r.jsx("div",{className:"border-t border-gray-100 my-1"}),r.jsx("button",{onClick:()=>d(p.id,p.status==="active"?"inactive":"active"),className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:p.status==="active"?r.jsxs(r.Fragment,{children:[r.jsx(ur,{className:"w-4 h-4"}),"Pasif Et"]}):r.jsxs(r.Fragment,{children:[r.jsx(_e,{className:"w-4 h-4"}),"Aktif Et"]})}),r.jsxs("button",{onClick:()=>d(p.id,"maintenance"),className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[r.jsx(Ne,{className:"w-4 h-4"}),"Bakıma Al"]}),r.jsxs("button",{onClick:()=>m(p.id),className:"flex items-center gap-2 w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:[r.jsx(ka,{className:"w-4 h-4"}),"Sil"]})]})})]})})]}),r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 text-lg",children:[p.brand," ",p.model]}),r.jsxs("p",{className:"text-gray-600 text-sm",children:[p.year," • ",p.plateNumber]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["₺",(f=p.kmRate)==null?void 0:f.toFixed(2)]}),r.jsx("p",{className:"text-xs text-gray-500",children:"per km"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Qe,{className:"w-4 h-4"}),r.jsxs("span",{children:[p.capacity," Kişi"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(je,{className:"w-4 h-4"}),r.jsx("span",{className:"capitalize",children:p.type})]})]}),r.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm text-gray-600",children:[r.jsx("span",{children:p.color}),r.jsx("span",{children:"•"}),r.jsx("span",{className:"capitalize",children:p.fuelType})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Özellikler"}),p.features&&p.features.length>0?r.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.features.slice(0,3).map((x,S)=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 rounded-md text-xs",children:[r.jsx(hn,{className:"w-3 h-3"}),x]},S)),p.features.length>3&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-gray-100 text-gray-600 rounded-md text-xs",children:["+",p.features.length-3," daha"]})]}):r.jsx("p",{className:"text-gray-400 text-sm",children:"Henüz özellik eklenmemiş"})]}),r.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>e(p),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md transition-colors",title:"Detayları Görüntüle",children:r.jsx(dn,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>s(p),className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-md transition-colors",title:"Düzenle",children:r.jsx(fa,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>a(p),className:"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-md transition-colors",title:"Özellikleri Yönet",children:r.jsx(Oo,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Fs,{className:"w-4 h-4 text-yellow-400 fill-current"}),r.jsx("span",{className:"text-sm text-gray-600",children:p.rating||"4.5"})]})]})]})]},p.id)})})},x8=({searchTerm:t,setSearchTerm:e,statusFilter:s,setStatusFilter:n,capacityFilter:i,setCapacityFilter:a,typeFilter:o,setTypeFilter:l})=>{const c=()=>{e(""),n("all"),a("all"),l("all")},u=t||s!=="all"||i!=="all"||o!=="all";return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[r.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Marka, model veya plaka ile ara...",value:t,onChange:d=>e(d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsx("div",{className:"min-w-32",children:r.jsxs("select",{value:s,onChange:d=>n(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tüm Durumlar"}),r.jsx("option",{value:"active",children:"Aktif"}),r.jsx("option",{value:"inactive",children:"Pasif"}),r.jsx("option",{value:"maintenance",children:"Bakımda"})]})}),r.jsx("div",{className:"min-w-32",children:r.jsxs("select",{value:i,onChange:d=>a(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tüm Kapasiteler"}),r.jsx("option",{value:"4",children:"4+ Kişi"}),r.jsx("option",{value:"8",children:"8+ Kişi"}),r.jsx("option",{value:"12",children:"12+ Kişi"}),r.jsx("option",{value:"16",children:"16+ Kişi"})]})}),r.jsx("div",{className:"min-w-32",children:r.jsxs("select",{value:o,onChange:d=>l(d.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tüm Tipler"}),r.jsx("option",{value:"sedan",children:"Sedan"}),r.jsx("option",{value:"suv",children:"SUV"}),r.jsx("option",{value:"minibus",children:"Minibüs"}),r.jsx("option",{value:"midibus",children:"Midibüs"}),r.jsx("option",{value:"bus",children:"Otobüs"}),r.jsx("option",{value:"vip",children:"VIP"})]})}),u&&r.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx(Ue,{className:"w-4 h-4"}),"Temizle"]})]}),u&&r.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-gray-200",children:[t&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-sm",children:['Arama: "',t,'"',r.jsx("button",{onClick:()=>e(""),className:"text-blue-600 hover:text-blue-800",children:r.jsx(Ue,{className:"w-3 h-3"})})]}),s!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-800 rounded-md text-sm",children:["Durum: ",s==="active"?"Aktif":s==="inactive"?"Pasif":"Bakımda",r.jsx("button",{onClick:()=>n("all"),className:"text-green-600 hover:text-green-800",children:r.jsx(Ue,{className:"w-3 h-3"})})]}),i!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-800 rounded-md text-sm",children:["Kapasite: ",i,"+ Kişi",r.jsx("button",{onClick:()=>a("all"),className:"text-purple-600 hover:text-purple-800",children:r.jsx(Ue,{className:"w-3 h-3"})})]}),o!=="all"&&r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-800 rounded-md text-sm",children:["Tip: ",o.charAt(0).toUpperCase()+o.slice(1),r.jsx("button",{onClick:()=>l("all"),className:"text-orange-600 hover:text-orange-800",children:r.jsx(Ue,{className:"w-3 h-3"})})]})]})]})},y8=({onClose:t,onSubmit:e})=>{const[s,n]=g.useState({brand:"",model:"",year:new Date().getFullYear(),plateNumber:"",capacity:"",kmRate:"",color:"",fuelType:"benzin",transmission:"otomatik",type:"sedan",imageUrl:"",features:[],description:""}),[i,a]=g.useState(!1),[o,l]=g.useState({}),c=["Klima","WiFi","USB Şarj","Su İkramı","Bebek Koltuğu","Çocuk Koltuğu","Tekerlekli Sandalye Desteği","Müzik Sistemi","TV/Monitör","Mikrobus","Büyük Bagaj","Hostesli Hizmet","Premium İç Tasarım","Deri Koltuk","Panoramik Cam","Bluetooth","Navigasyon","Kamera Sistemi"],u=(f,x)=>{n(S=>({...S,[f]:x})),o[f]&&l(S=>({...S,[f]:""}))},d=f=>{n(x=>({...x,features:x.features.includes(f)?x.features.filter(S=>S!==f):[...x.features,f]}))},m=()=>{const f={};s.brand.trim()||(f.brand="Marka gerekli"),s.model.trim()||(f.model="Model gerekli"),s.plateNumber.trim()||(f.plateNumber="Plaka gerekli"),(!s.capacity||s.capacity<1)&&(f.capacity="Geçerli kapasite gerekli"),(!s.kmRate||s.kmRate<0)&&(f.kmRate="KM başı ücret gerekli"),s.color.trim()||(f.color="Renk gerekli");const x=/^[0-9]{2}[A-Z]{1,3}[0-9]{2,4}$/;return s.plateNumber&&!x.test(s.plateNumber.replace(/\s/g,""))&&(f.plateNumber="Geçerli plaka formatı girin (örn: 06ABC123)"),l(f),Object.keys(f).length===0},p=async f=>{if(f.preventDefault(),!!m()){a(!0);try{const x={...s,capacity:parseInt(s.capacity),kmRate:parseFloat(s.kmRate),year:parseInt(s.year),plateNumber:s.plateNumber.toUpperCase().replace(/\s/g,""),brand:s.brand.trim(),model:s.model.trim(),color:s.color.trim()};await e(x)&&t()}catch(x){console.error("Araç eklenirken hata:",x)}finally{a(!1)}}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(je,{className:"w-6 h-6 text-blue-600"}),"Yeni Araç Ekle"]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:p,className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Temel Bilgiler"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Marka ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:s.brand,onChange:f=>u("brand",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.brand?"border-red-300":"border-gray-300"}`,placeholder:"Marka giriniz"}),o.brand&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),o.brand]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Model ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:s.model,onChange:f=>u("model",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.model?"border-red-300":"border-gray-300"}`,placeholder:"Model giriniz"}),o.model&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),o.model]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yıl"}),r.jsx("input",{type:"number",value:s.year,onChange:f=>u("year",f.target.value),min:"1990",max:new Date().getFullYear()+1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tip"}),r.jsxs("select",{value:s.type,onChange:f=>u("type",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"sedan",children:"Sedan"}),r.jsx("option",{value:"suv",children:"SUV"}),r.jsx("option",{value:"minibus",children:"Minibüs"}),r.jsx("option",{value:"midibus",children:"Midibüs"}),r.jsx("option",{value:"bus",children:"Otobüs"}),r.jsx("option",{value:"vip",children:"VIP"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Plaka ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:s.plateNumber,onChange:f=>u("plateNumber",f.target.value.toUpperCase()),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.plateNumber?"border-red-300":"border-gray-300"}`,placeholder:"06ABC123"}),o.plateNumber&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),o.plateNumber]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Renk ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:s.color,onChange:f=>u("color",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.color?"border-red-300":"border-gray-300"}`,placeholder:"Renk giriniz"}),o.color&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),o.color]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Teknik Bilgiler"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kapasite ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:s.capacity,onChange:f=>u("capacity",f.target.value),min:"1",max:"50",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.capacity?"border-red-300":"border-gray-300"}`,placeholder:"Kişi sayısı"}),o.capacity&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),o.capacity]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["KM Başı Ücret (₺) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:s.kmRate,onChange:f=>u("kmRate",f.target.value),min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${o.kmRate?"border-red-300":"border-gray-300"}`,placeholder:"0.00"}),o.kmRate&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),o.kmRate]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yakıt Türü"}),r.jsxs("select",{value:s.fuelType,onChange:f=>u("fuelType",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"benzin",children:"Benzin"}),r.jsx("option",{value:"dizel",children:"Dizel"}),r.jsx("option",{value:"lpg",children:"LPG"}),r.jsx("option",{value:"elektrik",children:"Elektrik"}),r.jsx("option",{value:"hibrit",children:"Hibrit"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şanzıman"}),r.jsxs("select",{value:s.transmission,onChange:f=>u("transmission",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"otomatik",children:"Otomatik"}),r.jsx("option",{value:"manuel",children:"Manuel"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Araç Resmi (URL)"}),r.jsx("input",{type:"url",value:s.imageUrl,onChange:f=>u("imageUrl",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Araç fotoğrafının URL'ini girin (opsiyonel)"})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-4",children:"Araç Özellikleri"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:c.map(f=>r.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:s.features.includes(f),onChange:()=>d(f),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:f})]},f))})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),r.jsx("textarea",{value:s.description,onChange:f=>u("description",f.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Araç hakkında ek bilgiler..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),r.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Kaydet"]})})]})]})]})})},v8=({vehicle:t,onClose:e,onSubmit:s})=>{const[n,i]=g.useState({brand:t.brand||"",model:t.model||"",year:t.year||new Date().getFullYear(),plateNumber:t.plateNumber||"",capacity:t.capacity||"",kmRate:t.kmRate||"",color:t.color||"",fuelType:t.fuelType||"benzin",transmission:t.transmission||"otomatik",type:t.type||"sedan",imageUrl:t.imageUrl||"",features:t.features||[],description:t.description||""}),[a,o]=g.useState(!1),[l,c]=g.useState({}),u=["Klima","WiFi","USB Şarj","Su İkramı","Bebek Koltuğu","Çocuk Koltuğu","Tekerlekli Sandalye Desteği","Müzik Sistemi","TV/Monitör","Mikrobus","Büyük Bagaj","Hostesli Hizmet","Premium İç Tasarım","Deri Koltuk","Panoramik Cam","Bluetooth","Navigasyon","Kamera Sistemi"],d=(x,S)=>{i(k=>({...k,[x]:S})),l[x]&&c(k=>({...k,[x]:""}))},m=x=>{i(S=>({...S,features:S.features.includes(x)?S.features.filter(k=>k!==x):[...S.features,x]}))},p=()=>{const x={};n.brand.trim()||(x.brand="Marka gerekli"),n.model.trim()||(x.model="Model gerekli"),n.plateNumber.trim()||(x.plateNumber="Plaka gerekli"),(!n.capacity||n.capacity<1)&&(x.capacity="Geçerli kapasite gerekli"),(!n.kmRate||n.kmRate<0)&&(x.kmRate="KM başı ücret gerekli"),n.color.trim()||(x.color="Renk gerekli");const S=/^[0-9]{2}[A-Z]{1,3}[0-9]{2,4}$/;return n.plateNumber&&!S.test(n.plateNumber.replace(/\s/g,""))&&(x.plateNumber="Geçerli plaka formatı girin (örn: 06ABC123)"),c(x),Object.keys(x).length===0},f=async x=>{if(x.preventDefault(),!!p()){o(!0);try{const S={...n,capacity:parseInt(n.capacity),kmRate:parseFloat(n.kmRate),year:parseInt(n.year),plateNumber:n.plateNumber.toUpperCase().replace(/\s/g,""),brand:n.brand.trim(),model:n.model.trim(),color:n.color.trim()};await s(t.id,S)&&e()}catch(S){console.error("Araç güncellenirken hata:",S)}finally{o(!1)}}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(je,{className:"w-6 h-6 text-blue-600"}),"Araç Düzenle"]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:f,className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Temel Bilgiler"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Marka ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:n.brand,onChange:x=>d("brand",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.brand?"border-red-300":"border-gray-300"}`,placeholder:"Marka giriniz"}),l.brand&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),l.brand]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Model ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:n.model,onChange:x=>d("model",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.model?"border-red-300":"border-gray-300"}`,placeholder:"Model giriniz"}),l.model&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),l.model]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yıl"}),r.jsx("input",{type:"number",value:n.year,onChange:x=>d("year",x.target.value),min:"1990",max:new Date().getFullYear()+1,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tip"}),r.jsxs("select",{value:n.type,onChange:x=>d("type",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"sedan",children:"Sedan"}),r.jsx("option",{value:"suv",children:"SUV"}),r.jsx("option",{value:"minibus",children:"Minibüs"}),r.jsx("option",{value:"midibus",children:"Midibüs"}),r.jsx("option",{value:"bus",children:"Otobüs"}),r.jsx("option",{value:"vip",children:"VIP"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Plaka ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:n.plateNumber,onChange:x=>d("plateNumber",x.target.value.toUpperCase()),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.plateNumber?"border-red-300":"border-gray-300"}`,placeholder:"06ABC123"}),l.plateNumber&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),l.plateNumber]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Renk ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:n.color,onChange:x=>d("color",x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.color?"border-red-300":"border-gray-300"}`,placeholder:"Renk giriniz"}),l.color&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),l.color]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2",children:"Teknik Bilgiler"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Kapasite ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:n.capacity,onChange:x=>d("capacity",x.target.value),min:"1",max:"50",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.capacity?"border-red-300":"border-gray-300"}`,placeholder:"Kişi sayısı"}),l.capacity&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),l.capacity]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["KM Başı Ücret (₺) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"number",value:n.kmRate,onChange:x=>d("kmRate",x.target.value),min:"0",step:"0.01",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.kmRate?"border-red-300":"border-gray-300"}`,placeholder:"0.00"}),l.kmRate&&r.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[r.jsx(Ne,{className:"w-4 h-4"}),l.kmRate]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yakıt Türü"}),r.jsxs("select",{value:n.fuelType,onChange:x=>d("fuelType",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"benzin",children:"Benzin"}),r.jsx("option",{value:"dizel",children:"Dizel"}),r.jsx("option",{value:"lpg",children:"LPG"}),r.jsx("option",{value:"elektrik",children:"Elektrik"}),r.jsx("option",{value:"hibrit",children:"Hibrit"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şanzıman"}),r.jsxs("select",{value:n.transmission,onChange:x=>d("transmission",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"otomatik",children:"Otomatik"}),r.jsx("option",{value:"manuel",children:"Manuel"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Araç Resmi (URL)"}),r.jsx("input",{type:"url",value:n.imageUrl,onChange:x=>d("imageUrl",x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Araç fotoğrafının URL'ini girin (opsiyonel)"})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 border-b pb-2 mb-4",children:"Araç Özellikleri"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:u.map(x=>r.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:n.features.includes(x),onChange:()=>m(x),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:x})]},x))})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),r.jsx("textarea",{value:n.description,onChange:x=>d("description",x.target.value),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Araç hakkında ek bilgiler..."})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),r.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Güncelleniyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Güncelle"]})})]})]})]})})},b8=({vehicle:t,onClose:e})=>{var a,o;const s=l=>({sedan:"🚗",suv:"🚙",minibus:"🚐",midibus:"🚌",bus:"🚍",vip:"🏎️"})[l]||"🚗",n=l=>{const c={active:{color:"bg-green-100 text-green-800",text:"Aktif"},inactive:{color:"bg-red-100 text-red-800",text:"Pasif"},maintenance:{color:"bg-yellow-100 text-yellow-800",text:"Bakımda"}},u=c[l]||c.inactive;return r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${u.color}`,children:u.text})},i=l=>{if(!l)return"Belirtilmemiş";try{return(l.toDate?l.toDate():new Date(l)).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Geçersiz tarih"}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(je,{className:"w-6 h-6 text-blue-600"}),"Araç Detayları"]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-1",children:[r.jsx("div",{className:"aspect-square bg-gray-100 rounded-lg flex items-center justify-center mb-4",children:t.imageUrl?r.jsx("img",{src:t.imageUrl,alt:`${t.brand} ${t.model}`,className:"w-full h-full object-cover rounded-lg"}):r.jsx("div",{className:"text-6xl",children:s(t.type)})}),r.jsx("div",{className:"flex justify-center mb-4",children:n(t.status)}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[r.jsx(Qe,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Kapasite"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[t.capacity," Kişi"]})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-green-50 rounded-lg",children:[r.jsx(Ke,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"KM Ücreti"}),r.jsxs("p",{className:"text-sm text-gray-600",children:["₺",(a=t.kmRate)==null?void 0:a.toFixed(2)," / km"]})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 bg-purple-50 rounded-lg",children:[r.jsx(BF,{className:"w-5 h-5 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Yakıt Türü"}),r.jsx("p",{className:"text-sm text-gray-600 capitalize",children:t.fuelType})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Temel Bilgiler"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Marka"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.brand})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Model"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.model})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Yıl"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.year})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Plaka"}),r.jsx("p",{className:"text-sm text-gray-900 font-mono",children:t.plateNumber})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Renk"}),r.jsx("p",{className:"text-sm text-gray-900",children:t.color})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Tip"}),r.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.type})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Teknik Bilgiler"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Kapasite"}),r.jsxs("p",{className:"text-sm text-gray-900",children:[t.capacity," Kişi"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"KM Başı Ücret"}),r.jsxs("p",{className:"text-sm text-gray-900",children:["₺",(o=t.kmRate)==null?void 0:o.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Yakıt Türü"}),r.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.fuelType})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Şanzıman"}),r.jsx("p",{className:"text-sm text-gray-900 capitalize",children:t.transmission})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Oluşturma Tarihi"}),r.jsx("p",{className:"text-sm text-gray-900",children:i(t.createdAt)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Son Güncelleme"}),r.jsx("p",{className:"text-sm text-gray-900",children:i(t.updatedAt)})]})]})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4",children:"Araç Özellikleri"}),t.features&&t.features.length>0?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:t.features.map((l,c)=>r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-50 rounded-lg",children:[r.jsx(hn,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-900",children:l})]},c))}):r.jsx("p",{className:"text-gray-500 text-sm",children:"Henüz özellik eklenmemiş"})]}),t.description&&r.jsxs("div",{className:"mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2 mb-4",children:"Açıklama"}),r.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded-lg",children:t.description})]})]})]})}),r.jsx("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:r.jsx("button",{onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Kapat"})})]})})},w8=({vehicle:t,onClose:e,onUpdate:s})=>{const[n,i]=g.useState(t.features||[]),[a,o]=g.useState(""),[l,c]=g.useState(!1),u=["Klima","WiFi","USB Şarj","Su İkramı","Bebek Koltuğu","Çocuk Koltuğu","Tekerlekli Sandalye Desteği","Müzik Sistemi","TV/Monitör","Mikrobus","Büyük Bagaj","Hostesli Hizmet","Premium İç Tasarım","Deri Koltuk","Panoramik Cam","Bluetooth","Navigasyon","Kamera Sistemi","Elektrikli Kapılar","Masaj Koltuğu","Mini Bar","Gazete/Dergi","Havlu Hizmeti","Şemsiye","Telefon Şarj Kablosu","Tablet/iPad","Çocuk Oyuncağı","Battaniye","Maske/Dezenfektan","VIP Lounge Erişim"],d=k=>{k.trim()&&!n.includes(k.trim())&&(i([...n,k.trim()]),o(""))},m=k=>{i(n.filter(v=>v!==k))},p=k=>{n.includes(k)||i([...n,k])},f=async k=>{k.preventDefault(),c(!0);try{await s(t.id,{...t,features:n})&&e()}catch(v){console.error("Özellikler güncellenirken hata:",v)}finally{c(!1)}},x=k=>{k.key==="Enter"&&(k.preventDefault(),d(a))},S=u.filter(k=>!n.includes(k));return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Oo,{className:"w-6 h-6 text-blue-600"}),"Araç Özelliklerini Yönet"]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:[r.jsxs("h3",{className:"font-medium text-blue-900 mb-2",children:[t.brand," ",t.model]}),r.jsxs("p",{className:"text-sm text-blue-700",children:[t.year," • ",t.plateNumber," • ",t.capacity," Kişi"]})]}),r.jsxs("form",{onSubmit:f,children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Mevcut Özellikler (",n.length,")"]}),n.length>0?r.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:n.map((k,v)=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(hn,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{className:"text-sm text-gray-900",children:k})]}),r.jsx("button",{type:"button",onClick:()=>m(k),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-100 rounded transition-colors",children:r.jsx(ka,{className:"w-4 h-4"})})]},v))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(hn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Henüz özellik eklenmemiş"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Özellik Ekle"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Özel Özellik Ekle"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:a,onChange:k=>o(k.target.value),onKeyPress:x,placeholder:"Özellik adı girin...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("button",{type:"button",onClick:()=>d(a),disabled:!a.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r.jsx(Bt,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hazır Özellikler"}),r.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:S.map(k=>r.jsx("button",{type:"button",onClick:()=>p(k),className:"w-full text-left p-3 border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-blue-300 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Bt,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-sm text-gray-900",children:k})]})},k))}),S.length===0&&r.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"Tüm hazır özellikler eklendi"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),r.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Özellikleri Kaydet"]})})]})]})]})]})})},N8=()=>{const[t,e]=g.useState([]),[s,n]=g.useState([]),[i,a]=g.useState(!0),[o,l]=g.useState(null),[c,u]=g.useState("table"),[d,m]=g.useState(""),[p,f]=g.useState("all"),[x,S]=g.useState("all"),[k,v]=g.useState("all"),[_,w]=g.useState(!1),[E,T]=g.useState(!1),[P,b]=g.useState(!1),[y,j]=g.useState(!1);g.useEffect(()=>{console.log("Araç verileri yükleniyor..."),a(!0);const B=Yn(Ie(ae,"vehicles"),O=>{console.log("Vehicles koleksiyonu güncellendi, döküman sayısı:",O.docs.length);const K=O.docs.map(z=>({id:z.id,...z.data()}));e(K),n(K),a(!1)},O=>{console.error("Araç verileri yüklenirken hata:",O),a(!1)});return()=>B()},[]),g.useEffect(()=>{let B=t;if(d&&(B=B.filter(O=>{var K,z,M;return((K=O.brand)==null?void 0:K.toLowerCase().includes(d.toLowerCase()))||((z=O.model)==null?void 0:z.toLowerCase().includes(d.toLowerCase()))||((M=O.plateNumber)==null?void 0:M.toLowerCase().includes(d.toLowerCase()))})),p!=="all"&&(B=B.filter(O=>O.status===p)),x!=="all"){const O=parseInt(x);B=B.filter(K=>K.capacity>=O)}k!=="all"&&(B=B.filter(O=>O.type===k)),n(B)},[t,d,p,x,k]);const C=async B=>{try{const O={...B,createdAt:new Date,updatedAt:new Date,status:"active"};return await un(Ie(ae,"vehicles"),O),console.log("Araç başarıyla eklendi"),w(!1),!0}catch(O){return console.error("Araç eklenirken hata:",O),!1}},R=async(B,O)=>{try{const K={...O,updatedAt:new Date};return await Pt(Ce(ae,"vehicles",B),K),console.log("Araç başarıyla güncellendi"),T(!1),l(null),!0}catch(K){return console.error("Araç güncellenirken hata:",K),!1}},D=async B=>{try{return await $m(Ce(ae,"vehicles",B)),console.log("Araç başarıyla silindi"),!0}catch(O){return console.error("Araç silinirken hata:",O),!1}},A=B=>{l(B),b(!0)},V=B=>{l(B),T(!0)},$=B=>{l(B),j(!0)},Y=async(B,O)=>{try{return await Pt(Ce(ae,"vehicles",B),{status:O,updatedAt:new Date}),console.log("Araç durumu güncellendi"),!0}catch(K){return console.error("Araç durumu güncellenirken hata:",K),!1}};return i?r.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[r.jsx(tf,{className:"w-8 h-8 animate-spin text-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Araçlar yükleniyor..."})]}):r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[r.jsx(je,{className:"w-7 h-7 text-blue-600"}),"Araç Yönetimi"]}),r.jsxs("p",{className:"text-gray-600 mt-1",children:[t.length," araç kayıtlı • ",s.length," gösteriliyor"]})]}),r.jsxs("button",{onClick:()=>w(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[r.jsx(Bt,{className:"w-4 h-4"}),"Yeni Araç Ekle"]})]}),r.jsx(x8,{searchTerm:d,setSearchTerm:m,statusFilter:p,setStatusFilter:f,capacityFilter:x,setCapacityFilter:S,typeFilter:k,setTypeFilter:v}),r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(je,{className:"w-5 h-5 text-gray-500"}),r.jsx("span",{className:"text-sm text-gray-600",children:"Görünüm"})]}),r.jsxs("div",{className:"flex rounded-lg border border-gray-200 p-1",children:[r.jsxs("button",{onClick:()=>u("table"),className:`flex items-center gap-2 px-3 py-1 rounded text-sm transition-colors ${c==="table"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx(KF,{className:"w-4 h-4"}),"Tablo"]}),r.jsxs("button",{onClick:()=>u("grid"),className:`flex items-center gap-2 px-3 py-1 rounded text-sm transition-colors ${c==="grid"?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900"}`,children:[r.jsx($F,{className:"w-4 h-4"}),"Kart"]})]})]})}),c==="table"?r.jsx(p8,{vehicles:s,onShowDetails:A,onEditVehicle:V,onDeleteVehicle:D,onStatusChange:Y,onManageFeatures:$}):r.jsx(g8,{vehicles:s,onShowDetails:A,onEditVehicle:V,onDeleteVehicle:D,onStatusChange:Y,onManageFeatures:$}),_&&r.jsx(y8,{onClose:()=>w(!1),onSubmit:C}),E&&o&&r.jsx(v8,{vehicle:o,onClose:()=>{T(!1),l(null)},onSubmit:R}),P&&o&&r.jsx(b8,{vehicle:o,onClose:()=>{b(!1),l(null)}}),y&&o&&r.jsx(w8,{vehicle:o,onClose:()=>{j(!1),l(null)},onUpdate:R})]})},j8=[{firstName:"Mehmet",lastName:"Yılmaz",phone:"+90 555 123 45 67",email:"mehmet.yilmaz@sbs.com",licenseNumber:"12345678901",licenseExpiry:"2025-12-31",status:"active",assignedVehicle:"vehicle1",totalTrips:156,commission:28,joinDate:"2023-01-15",address:"Muratpaşa, Antalya",emergencyContact:"+90 555 987 65 43",bloodType:"A+",profileImage:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{firstName:"Ali",lastName:"Karaca",phone:"+90 555 987 65 43",email:"ali.karaca@sbs.com",licenseNumber:"09876543210",licenseExpiry:"2024-08-15",status:"active",assignedVehicle:"vehicle2",totalTrips:203,commission:32,joinDate:"2022-11-20",address:"Kepez, Antalya",emergencyContact:"+90 555 123 45 67",bloodType:"B+",profileImage:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{firstName:"Fatma",lastName:"Öztürk",phone:"+90 555 456 78 90",email:"fatma.ozturk@sbs.com",licenseNumber:"55555555555",licenseExpiry:"2026-03-10",status:"inactive",assignedVehicle:null,totalTrips:89,commission:25,joinDate:"2023-06-10",address:"Konyaaltı, Antalya",emergencyContact:"+90 555 111 22 33",bloodType:"O+",profileImage:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],E8=[{brand:"Mercedes",model:"Vito",plateNumber:"07ABC123",capacity:8,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{brand:"Ford",model:"Transit",plateNumber:"07DEF456",capacity:12,status:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{brand:"Volkswagen",model:"Crafter",plateNumber:"07GHI789",capacity:16,status:"available",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],k8=async()=>{try{console.log("Firebase başlangıç verileri kontrol ediliyor...");const t=await os(Ie(ae,"drivers"));if(t.empty){console.log("Şoför verisi yok, demo veriler ekleniyor...");for(const s of j8)await un(Ie(ae,"drivers"),s);console.log("Demo şoför verileri eklendi")}else console.log("Şoför verisi mevcut:",t.docs.length,"kayıt");const e=await os(Ie(ae,"vehicles"));if(e.empty){console.log("Araç verisi yok, demo veriler ekleniyor...");for(const s of E8)await un(Ie(ae,"vehicles"),s);console.log("Demo araç verileri eklendi")}else console.log("Araç verisi mevcut:",e.docs.length,"kayıt");console.log("Firebase başlangıç verileri hazır!")}catch(t){throw console.error("Firebase başlangıç verilerini eklerken hata:",t),t}},_8=({drivers:t=[],vehicles:e=[],onEdit:s,onDelete:n,onStatusChange:i,onViewDetails:a})=>{const o=u=>{const d=e.find(m=>m.id===u);return d?`${d.brand} ${d.model} (${d.plateNumber})`:"Araç atanmamış"},l=u=>{const d={active:{color:"bg-green-100 text-green-800 border-green-200",icon:nf,label:"Aktif"},inactive:{color:"bg-red-100 text-red-800 border-red-200",icon:rv,label:"Pasif"},suspended:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:Is,label:"Askıya Alındı"}},m=d[u]||d.inactive,p=m.icon;return r.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${m.color}`,children:[r.jsx(p,{className:"w-3 h-3 mr-1"}),m.label]})},c=u=>{const d=new Date,p=new Date(u)-d,f=Math.ceil(p/(1e3*60*60*24));return f<0?{color:"text-red-600",label:"Süresi Dolmuş",urgent:!0}:f<=30?{color:"text-orange-600",label:`${f} gün kaldı`,urgent:!0}:f<=90?{color:"text-yellow-600",label:`${f} gün kaldı`,urgent:!1}:{color:"text-green-600",label:"Geçerli",urgent:!1}};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Şoför"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İletişim"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ehliyet"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Araç"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Komisyon"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t&&t.length>0?t.map(u=>r.jsx(ga.Fragment,{children:r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[(u.firstName||"")[0]||"",(u.lastName||"")[0]||""]})}),r.jsxs("div",{className:"ml-4",children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[u.firstName||""," ",u.lastName||""]}),r.jsxs("div",{className:"text-sm text-gray-500",children:[u.totalTrips||0," sefer"]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx(nt,{className:"w-4 h-4 text-gray-400 mr-2"}),u.phone]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(ns,{className:"w-4 h-4 text-gray-400 mr-2"}),u.email]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[r.jsx("div",{className:"font-medium",children:u.licenseNumber}),r.jsxs("div",{className:`text-xs ${c(u.licenseExpiry).color}`,children:[c(u.licenseExpiry).label,c(u.licenseExpiry).urgent&&r.jsx(Is,{className:"w-3 h-3 inline ml-1"})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[l(u.status),r.jsxs("select",{value:u.status,onChange:d=>i(u.id,d.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[r.jsx("option",{value:"active",children:"Aktif"}),r.jsx("option",{value:"inactive",children:"Pasif"}),r.jsx("option",{value:"suspended",children:"Askıya Al"})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(je,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsx("div",{className:"max-w-xs",children:r.jsx("div",{className:`truncate ${u.assignedVehicle?"text-gray-900":"text-gray-500"}`,children:o(u.assignedVehicle)})})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["%",u.commission||0]}),r.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"komisyon"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>a(u),className:"text-blue-600 hover:text-blue-800 p-1 rounded",title:"Detayları Görüntüle",children:r.jsx(dn,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>s(u),className:"text-green-600 hover:text-green-800 p-1 rounded",title:"Düzenle",children:r.jsx(sf,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>n(u.id),className:"text-red-600 hover:text-red-800 p-1 rounded",title:"Sil",children:r.jsx(ka,{className:"w-4 h-4"})})]})})]})},u.id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500",children:"Henüz şoför bulunmuyor"})})})]})}),(!t||t.length===0)&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Henüz şoför bulunmuyor"})]})]})},S8=({searchTerm:t,setSearchTerm:e,statusFilter:s,setStatusFilter:n,vehicleFilter:i,setVehicleFilter:a,licenseExpiryFilter:o,setLicenseExpiryFilter:l,onClearFilters:c,vehicles:u})=>{const[d,m]=g.useState(!1),p=()=>{let x=0;return t&&x++,s&&s!=="all"&&x++,i&&i!=="all"&&x++,o&&o!=="all"&&x++,x},f=()=>{const x=[];if(t&&x.push({key:"search",label:`Arama: "${t}"`,onRemove:()=>e("")}),s&&s!=="all"){const S={active:"Aktif",inactive:"Pasif",suspended:"Askıya Alındı"};x.push({key:"status",label:`Durum: ${S[s]}`,onRemove:()=>n("all")})}if(i&&i!=="all"){const S={assigned:"Araç Atanmış",unassigned:"Araç Atanmamış"};x.push({key:"vehicle",label:`Araç: ${S[i]}`,onRemove:()=>a("all")})}if(o&&o!=="all"){const S={expired:"Süresi Dolmuş",expiring:"Süresi Dolmak Üzere",valid:"Geçerli"};x.push({key:"license",label:`Ehliyet: ${S[o]}`,onRemove:()=>l("all")})}return x};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Şoför adı, telefon veya e-posta ara...",value:t,onChange:x=>e(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:s,onChange:x=>n(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[r.jsx("option",{value:"all",children:"Tüm Durumlar"}),r.jsx("option",{value:"active",children:"Aktif"}),r.jsx("option",{value:"inactive",children:"Pasif"}),r.jsx("option",{value:"suspended",children:"Askıya Alındı"})]}),r.jsx($r,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:i,onChange:x=>a(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[r.jsx("option",{value:"all",children:"Tüm Araçlar"}),r.jsx("option",{value:"assigned",children:"Araç Atanmış"}),r.jsx("option",{value:"unassigned",children:"Araç Atanmamış"})]}),r.jsx($r,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>m(!d),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(tI,{className:"w-4 h-4"}),r.jsx("span",{children:"Gelişmiş"}),r.jsx($r,{className:`w-4 h-4 transition-transform ${d?"rotate-180":""}`})]}),p()>0&&r.jsxs("button",{onClick:c,className:"px-4 py-2 bg-red-50 text-red-700 border border-red-200 rounded-lg hover:bg-red-100 transition-colors",children:["Temizle (",p(),")"]})]})]}),d&&r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ehliyet Durumu"}),r.jsxs("select",{value:o,onChange:x=>l(x.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[r.jsx("option",{value:"all",children:"Tüm Ehliyetler"}),r.jsx("option",{value:"expired",children:"Süresi Dolmuş"}),r.jsx("option",{value:"expiring",children:"Süresi Dolmak Üzere (30 gün)"}),r.jsx("option",{value:"valid",children:"Geçerli"})]}),r.jsx($r,{className:"absolute right-3 top-9 transform -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsx("div",{})]})}),f().length>0&&r.jsx("div",{className:"border-t pt-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"Aktif filtreler:"}),f().map(x=>r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-700 rounded-full text-sm",children:[x.label,r.jsx("button",{onClick:x.onRemove,className:"hover:bg-blue-100 rounded-full p-0.5",children:r.jsx(Ue,{className:"w-3 h-3"})})]},x.key))]})}),(s!=="all"||i!=="all"||o!=="all")&&r.jsx("div",{className:"border-t pt-4 mt-4",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nf,{className:"w-4 h-4 text-green-600"}),r.jsx("span",{children:"Aktif Şoförler"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rv,{className:"w-4 h-4 text-red-600"}),r.jsx("span",{children:"Pasif Şoförler"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4 text-yellow-600"}),r.jsx("span",{children:"Askıya Alınanlar"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(je,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{children:"Araç Atanmış"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Be,{className:"w-4 h-4 text-orange-600"}),r.jsx("span",{children:"Ehliyet Süresi Dolacak"})]})]})})]})},T8=({isOpen:t,onClose:e,onSave:s,vehicles:n,loading:i=!1})=>{const[a,o]=g.useState({firstName:"",lastName:"",email:"",phone:"",address:"",licenseNumber:"",licenseExpiry:"",joinDate:new Date().toISOString().split("T")[0],bloodType:"",emergencyContact:"",emergencyPhone:"",assignedVehicle:"",bankAccount:"",bankName:"",salary:"",commission:"",notes:""}),[l,c]=g.useState({}),u=["A+","A-","B+","B-","AB+","AB-","0+","0-"],d=x=>{const{name:S,value:k}=x.target;o(v=>({...v,[S]:k})),l[S]&&c(v=>({...v,[S]:""}))},m=()=>{const x={};if(a.firstName.trim()||(x.firstName="Ad alanı gereklidir"),a.lastName.trim()||(x.lastName="Soyad alanı gereklidir"),a.email.trim()?/\S+@\S+\.\S+/.test(a.email)||(x.email="Geçerli bir e-posta adresi girin"):x.email="E-posta alanı gereklidir",a.phone.trim()||(x.phone="Telefon alanı gereklidir"),a.licenseNumber.trim()||(x.licenseNumber="Ehliyet numarası gereklidir"),a.licenseExpiry||(x.licenseExpiry="Ehliyet bitiş tarihi gereklidir"),a.commission||(x.commission="Komisyon oranı gereklidir"),a.email&&!/\S+@\S+\.\S+/.test(a.email)&&(x.email="Geçerli bir e-posta adresi girin"),a.phone&&!/^[0-9+\-\s\(\)]+$/.test(a.phone)&&(x.phone="Geçerli bir telefon numarası girin"),a.licenseExpiry){const S=new Date;new Date(a.licenseExpiry)<=S&&(x.licenseExpiry="Ehliyet bitiş tarihi bugünden sonra olmalıdır")}if(a.salary&&(isNaN(a.salary)||parseFloat(a.salary)<0)&&(x.salary="Geçerli bir maaş miktarı girin"),a.commission){const S=parseFloat(a.commission);(isNaN(S)||S<0||S>100)&&(x.commission="Komisyon 0 ile 100 arasında olmalıdır")}return c(x),Object.keys(x).length===0},p=x=>{if(x.preventDefault(),!m())return;const S={...a,status:"active",totalTrips:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s(S)},f=()=>{o({firstName:"",lastName:"",email:"",phone:"",address:"",licenseNumber:"",licenseExpiry:"",joinDate:new Date().toISOString().split("T")[0],bloodType:"",emergencyContact:"",emergencyPhone:"",assignedVehicle:"",bankAccount:"",bankName:"",salary:"",commission:"",notes:""}),c({})};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[85vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Yeni Şoför Ekle"}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:p,className:"p-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[r.jsx(Fe,{className:"w-5 h-5"}),"Kişisel Bilgiler"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),r.jsx("input",{type:"text",name:"firstName",value:a.firstName,onChange:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Ad"}),l.firstName&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.firstName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),r.jsx("input",{type:"text",name:"lastName",value:a.lastName,onChange:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Soyad"}),l.lastName&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.lastName})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),r.jsxs("div",{className:"relative",children:[r.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"email",name:"email",value:a.email,onChange:d,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.email?"border-red-500":"border-gray-300"}`,placeholder:"E-posta adresi"})]}),l.email&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),r.jsxs("div",{className:"relative",children:[r.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:d,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.phone?"border-red-500":"border-gray-300"}`,placeholder:"Telefon numarası"})]}),l.phone&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adres"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ke,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),r.jsx("textarea",{name:"address",value:a.address,onChange:d,rows:2,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Adres"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kan Grubu"}),r.jsxs("select",{name:"bloodType",value:a.bloodType,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Kan grubu seçiniz"}),u.map(x=>r.jsx("option",{value:x,children:x},x))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İşe Başlama Tarihi"}),r.jsx("input",{type:"date",name:"joinDate",value:a.joinDate,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acil Durumda Aranacak Kişi"}),r.jsx("input",{type:"text",name:"emergencyContact",value:a.emergencyContact,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İsim ve telefon"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[r.jsx($t,{className:"w-5 h-5"}),"Lisans ve İş Bilgileri"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Numarası *"}),r.jsx("input",{type:"text",name:"licenseNumber",value:a.licenseNumber,onChange:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.licenseNumber?"border-red-500":"border-gray-300"}`,placeholder:"Ehliyet numarası"}),l.licenseNumber&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.licenseNumber})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Bitiş Tarihi *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"date",name:"licenseExpiry",value:a.licenseExpiry,onChange:d,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.licenseExpiry?"border-red-500":"border-gray-300"}`})]}),l.licenseExpiry&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.licenseExpiry})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atanacak Araç"}),r.jsxs("div",{className:"relative",children:[r.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsxs("select",{name:"assignedVehicle",value:a.assignedVehicle,onChange:d,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Araç seçiniz"}),n.filter(x=>x.status==="available").map(x=>r.jsxs("option",{value:x.id,children:[x.brand," ",x.model," (",x.plateNumber,")"]},x.id))]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Adı"}),r.jsx("input",{type:"text",name:"bankName",value:a.bankName,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banka adı"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Hesap No"}),r.jsx("input",{type:"text",name:"bankAccount",value:a.bankAccount,onChange:d,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Hesap numarası"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maaş"}),r.jsx("input",{type:"number",name:"salary",value:a.salary,onChange:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.salary?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0"}),l.salary&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.salary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Komisyon (%) *"}),r.jsx("input",{type:"number",name:"commission",value:a.commission,onChange:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${l.commission?"border-red-500":"border-gray-300"}`,placeholder:"25",min:"0",max:"100"}),l.commission&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:l.commission})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),r.jsxs("div",{className:"relative",children:[r.jsx(Jm,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),r.jsx("textarea",{name:"notes",value:a.notes,onChange:d,rows:3,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şoför hakkında notlar..."})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t bg-gray-50 -mx-4 -mb-4 px-4 py-4",children:[r.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Temizle"}),r.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"İptal"}),r.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:i?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Şoför Ekle"]})})]})]})]})}):null},C8=({isOpen:t,onClose:e,onSave:s,driver:n,vehicles:i,loading:a=!1})=>{const[o,l]=g.useState({firstName:"",lastName:"",email:"",phone:"",address:"",licenseNumber:"",licenseExpiry:"",joinDate:"",bloodType:"",emergencyContact:"",emergencyPhone:"",assignedVehicle:"",bankAccount:"",bankName:"",salary:"",commission:"",notes:""}),[c,u]=g.useState({}),[d,m]=g.useState(!1),p=["A+","A-","B+","B-","AB+","AB-","0+","0-"];g.useEffect(()=>{n&&t&&(l({firstName:n.firstName||"",lastName:n.lastName||"",email:n.email||"",phone:n.phone||"",address:n.address||"",licenseNumber:n.licenseNumber||"",licenseExpiry:n.licenseExpiry?n.licenseExpiry.split("T")[0]:"",joinDate:n.joinDate?n.joinDate.split("T")[0]:"",bloodType:n.bloodType||"",emergencyContact:n.emergencyContact||"",emergencyPhone:n.emergencyPhone||"",assignedVehicle:n.assignedVehicle||"",bankAccount:n.bankAccount||"",bankName:n.bankName||"",salary:n.salary||"",commission:n.commission||"",notes:n.notes||""}),m(!1),u({}))},[n,t]);const f=w=>{const{name:E,value:T}=w.target;l(P=>({...P,[E]:T})),m(!0),c[E]&&u(P=>({...P,[E]:""}))},x=()=>{const w={};if(o.firstName.trim()||(w.firstName="Ad alanı gereklidir"),o.lastName.trim()||(w.lastName="Soyad alanı gereklidir"),o.email.trim()?/\S+@\S+\.\S+/.test(o.email)||(w.email="Geçerli bir e-posta adresi girin"):w.email="E-posta alanı gereklidir",o.phone.trim()||(w.phone="Telefon alanı gereklidir"),o.licenseNumber.trim()||(w.licenseNumber="Ehliyet numarası gereklidir"),o.licenseExpiry||(w.licenseExpiry="Ehliyet bitiş tarihi gereklidir"),o.commission||(w.commission="Komisyon oranı gereklidir"),o.email&&!/\S+@\S+\.\S+/.test(o.email)&&(w.email="Geçerli bir e-posta adresi girin"),o.phone&&!/^[0-9+\-\s\(\)]+$/.test(o.phone)&&(w.phone="Geçerli bir telefon numarası girin"),o.licenseExpiry){const E=new Date;new Date(o.licenseExpiry)<=E&&(w.licenseExpiry="Ehliyet bitiş tarihi bugünden sonra olmalıdır")}if(o.salary&&(isNaN(o.salary)||parseFloat(o.salary)<0)&&(w.salary="Geçerli bir maaş miktarı girin"),o.commission){const E=parseFloat(o.commission);(isNaN(E)||E<0||E>100)&&(w.commission="Komisyon 0 ile 100 arasında olmalıdır")}return u(w),Object.keys(w).length===0},S=w=>{if(w.preventDefault(),!x())return;if(!d){e();return}const E={...n,...o,updatedAt:new Date().toISOString()};s(E)},k=()=>{d?window.confirm("Değişiklikler kaydedilmedi. Çıkmak istediğinizden emin misiniz?")&&e():e()};if(!t||!n)return null;const _=(w=>{const E=new Date,P=new Date(w)-E,b=Math.ceil(P/(1e3*60*60*24));return b<0?{color:"text-red-600",message:"Ehliyet süresi dolmuş!",urgent:!0}:b<=30?{color:"text-orange-600",message:`${b} gün içinde dolacak`,urgent:!0}:b<=90?{color:"text-yellow-600",message:`${b} gün kaldı`,urgent:!1}:{color:"text-green-600",message:"Geçerli",urgent:!1}})(o.licenseExpiry);return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[85vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Şoför Düzenle"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[n.firstName," ",n.lastName]})]}),r.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:S,className:"p-4",children:[o.licenseExpiry&&_.urgent&&r.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4 text-orange-600"}),r.jsxs("span",{className:`font-medium ${_.color}`,children:["Ehliyet Uyarısı: ",_.message]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[r.jsx(Fe,{className:"w-5 h-5"}),"Kişisel Bilgiler"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),r.jsx("input",{type:"text",name:"firstName",value:o.firstName,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Ad"}),c.firstName&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.firstName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),r.jsx("input",{type:"text",name:"lastName",value:o.lastName,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Soyad"}),c.lastName&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.lastName})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),r.jsxs("div",{className:"relative",children:[r.jsx(ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"email",name:"email",value:o.email,onChange:f,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.email?"border-red-500":"border-gray-300"}`,placeholder:"ornek@email.com"})]}),c.email&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),r.jsxs("div",{className:"relative",children:[r.jsx(nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"tel",name:"phone",value:o.phone,onChange:f,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.phone?"border-red-500":"border-gray-300"}`,placeholder:"0555 123 4567"})]}),c.phone&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adres"}),r.jsxs("div",{className:"relative",children:[r.jsx(Ke,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),r.jsx("textarea",{name:"address",value:o.address,onChange:f,rows:2,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Tam adres..."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kan Grubu"}),r.jsxs("select",{name:"bloodType",value:o.bloodType,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Seçiniz"}),p.map(w=>r.jsx("option",{value:w,children:w},w))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"İşe Başlama Tarihi"}),r.jsx("input",{type:"date",name:"joinDate",value:o.joinDate,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Acil Durumda Aranacak Kişi"}),r.jsx("input",{type:"text",name:"emergencyContact",value:o.emergencyContact,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"İsim ve telefon"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2 mb-3",children:[r.jsx($t,{className:"w-5 h-5"}),"Lisans ve İş Bilgileri"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Numarası *"}),r.jsx("input",{type:"text",name:"licenseNumber",value:o.licenseNumber,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.licenseNumber?"border-red-500":"border-gray-300"}`,placeholder:"Ehliyet numarası"}),c.licenseNumber&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.licenseNumber})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ehliyet Bitiş Tarihi *"}),r.jsxs("div",{className:"relative",children:[r.jsx(Be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"date",name:"licenseExpiry",value:o.licenseExpiry,onChange:f,className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.licenseExpiry?"border-red-500":"border-gray-300"}`})]}),c.licenseExpiry&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.licenseExpiry})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Atanan Araç"}),r.jsxs("div",{className:"relative",children:[r.jsx(je,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),r.jsxs("select",{name:"assignedVehicle",value:o.assignedVehicle,onChange:f,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Araç seçiniz"}),i&&i.length>0?i.map(w=>r.jsxs("option",{value:w.id,children:[w.brand," ",w.model," (",w.plateNumber,") - ",w.status||"Durum Belirtilmemiş"]},w.id)):r.jsx("option",{value:"",disabled:!0,children:"Araç bulunamadı"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Adı"}),r.jsx("input",{type:"text",name:"bankName",value:o.bankName,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Banka adı"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Banka Hesap No"}),r.jsx("input",{type:"text",name:"bankAccount",value:o.bankAccount,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Hesap numarası"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maaş"}),r.jsx("input",{type:"number",name:"salary",value:o.salary,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.salary?"border-red-500":"border-gray-300"}`,placeholder:"0",min:"0"}),c.salary&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.salary})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Komisyon (%) *"}),r.jsx("input",{type:"number",name:"commission",value:o.commission,onChange:f,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ${c.commission?"border-red-500":"border-gray-300"}`,placeholder:"25",min:"0",max:"100"}),c.commission&&r.jsx("p",{className:"mt-1 text-xs text-red-600",children:c.commission})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notlar"}),r.jsxs("div",{className:"relative",children:[r.jsx(Jm,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),r.jsx("textarea",{name:"notes",value:o.notes,onChange:f,rows:3,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Şoför hakkında notlar..."})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t bg-gray-50 -mx-4 -mb-4 px-4 py-4",children:[r.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"İptal"}),r.jsx("button",{type:"submit",disabled:a||!d,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Kaydediliyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Değişiklikleri Kaydet"]})})]})]})]})})},I8=({isOpen:t,onClose:e,driver:s,vehicles:n=[]})=>{if(!t||!s)return null;const i=c=>{const u=n.find(d=>d.id===c);return u?`${u.brand} ${u.model} (${u.plateNumber})`:"Araç atanmamış"},a=c=>{const u={active:{color:"bg-green-100 text-green-800 border-green-200",icon:nf,label:"Aktif"},inactive:{color:"bg-red-100 text-red-800 border-red-200",icon:rv,label:"Pasif"},suspended:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:Is,label:"Askıya Alındı"}},d=u[c]||u.inactive,m=d.icon;return r.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${d.color}`,children:[r.jsx(m,{className:"w-3 h-3 mr-1"}),d.label]})},l=(c=>{const u=new Date,m=new Date(c)-u,p=Math.ceil(m/(1e3*60*60*24));return p<0?{color:"text-red-600",label:"Süresi Dolmuş",urgent:!0}:p<=30?{color:"text-orange-600",label:`${p} gün kaldı`,urgent:!0}:p<=90?{color:"text-yellow-600",label:`${p} gün kaldı`,urgent:!1}:{color:"text-green-600",label:"Geçerli",urgent:!1}})(s.licenseExpiry);return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[85vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsxs("span",{className:"text-lg font-bold text-gray-600",children:[(s.firstName||"")[0]||"",(s.lastName||"")[0]||""]})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[s.firstName||""," ",s.lastName||""]}),r.jsx("div",{className:"flex items-center gap-2 mt-1",children:a(s.status)})]})]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-4",children:[l.urgent&&r.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4 text-orange-600"}),r.jsxs("span",{className:`font-medium ${l.color}`,children:["Ehliyet Uyarısı: ",l.label]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(Fe,{className:"w-4 h-4"}),"Kişisel Bilgiler"]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Telefon:"}),r.jsx("p",{className:"font-medium",children:s.phone})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"E-posta:"}),r.jsx("p",{className:"font-medium",children:s.email})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Kan Grubu:"}),r.jsx("p",{className:"font-medium",children:s.bloodType})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"İşe Başlama:"}),r.jsx("p",{className:"font-medium",children:new Date(s.joinDate).toLocaleDateString("tr-TR")})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(nt,{className:"w-4 h-4"}),"İletişim"]}),r.jsxs("div",{className:"text-sm space-y-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Adres:"}),r.jsx("p",{className:"font-medium",children:s.address})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Acil Durum:"}),r.jsx("p",{className:"font-medium",children:s.emergencyContact})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx($t,{className:"w-4 h-4"}),"Lisans & Araç"]}),r.jsxs("div",{className:"text-sm space-y-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Ehliyet No:"}),r.jsx("p",{className:"font-medium",children:s.licenseNumber})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Geçerlilik:"}),r.jsxs("p",{className:`font-medium ${l.color}`,children:[new Date(s.licenseExpiry).toLocaleDateString("tr-TR")," (",l.label,")"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Atanan Araç:"}),r.jsx("p",{className:"font-medium",children:i(s.assignedVehicle)})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[r.jsx(xs,{className:"w-4 h-4"}),"Finansal & Performans"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Komisyon:"}),r.jsxs("p",{className:"font-medium text-green-600",children:["%",s.commission||0]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Toplam Sefer:"}),r.jsx("p",{className:"font-medium",children:s.totalTrips})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Aylık Ort.:"}),r.jsx("p",{className:"font-medium",children:Math.round(s.totalTrips/12)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-gray-500",children:"Durum:"}),r.jsx("p",{className:"font-medium",children:s.status==="active"?"Aktif":"Pasif"})]})]})]})]})]})]}),r.jsx("div",{className:"flex justify-end p-4 border-t bg-gray-50",children:r.jsx("button",{onClick:e,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Kapat"})})]})})},A8=()=>{const[t,e]=g.useState([]),[s,n]=g.useState([]),[i,a]=g.useState([]),[o,l]=g.useState(!0),[c,u]=g.useState(null),[d,m]=g.useState(""),[p,f]=g.useState("all"),[x,S]=g.useState("all"),[k,v]=g.useState("all"),[_,w]=g.useState(!1),[E,T]=g.useState(!1),[P,b]=g.useState(!1);g.useEffect(()=>{(async()=>{console.log("Firebase initialize başlatılıyor..."),l(!0);try{await k8(),console.log("Firebase başlangıç verileri hazırlandı");const V=Gs(Ie(ae,"users"),cn("role","==",bt.DRIVER)),$=Yn(V,B=>{console.log("Driver users güncellendi, döküman sayısı:",B.docs.length);const O=B.docs.map(K=>({id:K.id,...K.data(),name:K.data().firstName&&K.data().lastName?`${K.data().firstName} ${K.data().lastName}`:K.data().name||K.data().email,phone:K.data().phone||"",licenseNumber:K.data().licenseNumber||"Belirtilmemiş",vehicle:K.data().assignedVehicle||"Atanmamış",status:K.data().isActive?"active":"inactive"}));e(O),l(!1)},B=>{console.error("Şoförler yüklenirken hata:",B),l(!1)}),Y=Yn(Ie(ae,"vehicles"),B=>{console.log("Vehicles koleksiyonu güncellendi, döküman sayısı:",B.docs.length);const O=B.docs.map(K=>({id:K.id,...K.data()}));a(O)},B=>{console.error("Araçlar yüklenirken hata:",B)});return()=>{$(),Y()}}catch(V){console.error("Firebase başlatma hatası:",V),l(!1)}})()},[]);const y=()=>{if(!t||t.length===0){n([]);return}let A=[...t];if(d){const V=d.toLowerCase();A=A.filter($=>($.firstName||"").toLowerCase().includes(V)||($.lastName||"").toLowerCase().includes(V)||($.phone||"").includes(d)||($.email||"").toLowerCase().includes(V)||($.licenseNumber||"").includes(d))}if(p!=="all"&&(A=A.filter(V=>V.status===p)),x!=="all"&&(x==="assigned"?A=A.filter(V=>V.assignedVehicle):x==="unassigned"&&(A=A.filter(V=>!V.assignedVehicle))),k!=="all"){const V=new Date,$=new Date(V.getTime()+30*24*60*60*1e3);new Date(V.getTime()+90*24*60*60*1e3),A=A.filter(Y=>{const B=new Date(Y.licenseExpiry);switch(k){case"expired":return B<V;case"expiring":return B>=V&&B<=$;case"valid":return B>$;default:return!0}})}n(A)};g.useEffect(()=>{y()},[t,d,p,x,k]);const j=async A=>{console.log("Şoför ekleme başlatılıyor:",A);try{const V={...A,totalTrips:0,joinDate:new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};console.log("Firebase'a eklenecek veri:",V);const $=await un(Ie(ae,"drivers"),V);console.log("Yeni şoför eklendi, ID:",$.id),w(!1),alert("Şoför başarıyla eklendi!")}catch(V){console.error("Şoför eklenirken hata:",V),alert("Şoför eklenirken bir hata oluştu: "+V.message)}},C=async(A,V)=>{console.log("Şoför güncelleme başlatılıyor:",A,V);try{await Pt(Ce(ae,"users",A),{...V,updatedAt:new Date().toISOString()}),console.log("Şoför güncellendi:",A),T(!1),u(null),alert("Şoför bilgileri başarıyla güncellendi!")}catch($){console.error("Şoför güncellenirken hata:",$),alert("Şoför güncellenirken bir hata oluştu: "+$.message)}},R=async A=>{if(window.confirm("Bu şoförü silmek istediğinizden emin misiniz?"))try{await $m(Ce(ae,"drivers",A)),console.log("Şoför silindi:",A),alert("Şoför başarıyla silindi!")}catch(V){console.error("Şoför silinirken hata:",V),alert("Şoför silinirken bir hata oluştu: "+V.message)}},D=async(A,V)=>{console.log("Durum değiştirme başlatılıyor:",A,V);try{const $=V==="active";await Pt(Ce(ae,"users",A),{isActive:$,status:V,updatedAt:new Date().toISOString()}),console.log("Şoför durumu güncellendi:",A,V)}catch($){console.error("Durum güncellenirken hata:",$),alert("Durum güncellenirken bir hata oluştu: "+$.message)}};return o?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx(tf,{className:"w-8 h-8 animate-spin text-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Şoförler yükleniyor..."})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Şoför Yönetimi"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:["Toplam ",t.length," şoför • Filtrelenmiş ",s.length," şoför"]})]}),r.jsxs("button",{onClick:()=>{console.log("Yeni Şoför Ekle butonuna tıklandı"),w(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx(Bt,{className:"w-4 h-4"}),"Yeni Şoför Ekle"]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[{label:"Aktif Şoförler",value:t.filter(A=>A.status==="active").length,color:"text-green-600",bg:"bg-green-100"},{label:"Pasif Şoförler",value:t.filter(A=>A.status==="inactive").length,color:"text-red-600",bg:"bg-red-100"},{label:"Araç Atanmış",value:t.filter(A=>A.assignedVehicle).length,color:"text-blue-600",bg:"bg-blue-100"},{label:"Araç Bekleyen",value:t.filter(A=>!A.assignedVehicle).length,color:"text-yellow-600",bg:"bg-yellow-100"}].map((A,V)=>r.jsx("div",{className:"bg-white rounded-lg border border-gray-100 p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${A.bg}`,children:r.jsx(Qe,{className:`w-4 h-4 ${A.color}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:A.label}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:A.value})]})]})},V))}),r.jsx(S8,{searchTerm:d,setSearchTerm:m,statusFilter:p,setStatusFilter:f,vehicleFilter:x,setVehicleFilter:S,licenseExpiryFilter:k,setLicenseExpiryFilter:v,onClearFilters:()=>{m(""),f("all"),S("all"),v("all")},vehicles:i}),r.jsx(_8,{drivers:s,vehicles:i,onEdit:A=>{console.log("Şoför düzenleme başlatılıyor:",A),u(A),T(!0)},onDelete:R,onStatusChange:D,onViewDetails:A=>{u(A),b(!0)}}),r.jsx(T8,{isOpen:_,vehicles:i,onClose:()=>w(!1),onSave:j}),r.jsx(C8,{isOpen:E,driver:c,vehicles:i,onClose:()=>{T(!1),u(null)},onSave:A=>C(A.id,A)}),r.jsx(I8,{isOpen:P,driver:c,vehicles:i,onClose:()=>{b(!1),u(null)}})]})},P8=()=>{const{state:t,addExtraService:e,updateExtraService:s,deleteExtraService:n}=Ws(),{extraServices:i=[]}=t,[a,o]=g.useState(!1),[l,c]=g.useState(null),[u,d]=g.useState(""),[m,p]=g.useState(!1),[f,x]=g.useState({name:"",description:"",price:"",category:"comfort",icon:"Package",status:"active",isPopular:!1,duration:"",restrictions:""}),S=[{value:"comfort",label:"Konfor",icon:Fs},{value:"luggage",label:"Bagaj",icon:ta},{value:"time",label:"Zaman",icon:Ye},{value:"vehicle",label:"Araç",icon:je},{value:"passenger",label:"Yolcu",icon:Qe}],k=["Package","Star","Clock","Car","Users","Shield","Coffee","Wifi","Music","Phone","MapPin","Heart","Gift"],v=()=>{x({name:"",description:"",price:"",category:"comfort",icon:"Package",status:"active",isPopular:!1,duration:"",restrictions:""})},_=(C,R)=>{x(D=>({...D,[C]:R}))},w=()=>{const C={};return f.name.trim()||(C.name="Hizmet adı gerekli"),f.description.trim()||(C.description="Açıklama gerekli"),(!f.price||f.price<0)&&(C.price="Geçerli fiyat gerekli"),C},E=async C=>{C.preventDefault();const R=w();if(Object.keys(R).length>0){Object.values(R).forEach(D=>ce.error(D));return}p(!0);try{const D={...f,price:parseFloat(f.price),createdAt:l?l.createdAt:new Date,updatedAt:new Date};l?(await s(l.id,D),ce.success("Ek hizmet başarıyla güncellendi!")):(await e(D),ce.success("Ek hizmet başarıyla eklendi!")),v(),o(!1),c(null)}catch(D){console.error("Ek hizmet işlem hatası:",D),ce.error("İşlem sırasında bir hata oluştu")}finally{p(!1)}},T=C=>{c(C),x(C),o(!0)},P=async C=>{if(window.confirm("Bu ek hizmeti silmek istediğinizden emin misiniz?"))try{await n(C),ce.success("Ek hizmet başarıyla silindi!")}catch(R){console.error("Ek hizmet silme hatası:",R),ce.error("Silme işlemi sırasında bir hata oluştu")}},b=()=>{o(!1),c(null),v()},y=i.filter(C=>{var R,D,A;return((R=C.name)==null?void 0:R.toLowerCase().includes(u.toLowerCase()))||((D=C.description)==null?void 0:D.toLowerCase().includes(u.toLowerCase()))||((A=C.category)==null?void 0:A.toLowerCase().includes(u.toLowerCase()))}),j=C=>S.find(R=>R.value===C)||S[0];return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Ek Hizmetler Yönetimi"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Transfer hizmetlerinize eklenebilecek ek hizmetleri yönetin"})]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors shadow-lg",children:[r.jsx(Bt,{className:"h-5 w-5"}),r.jsx("span",{children:"Yeni Ek Hizmet"})]})]}),r.jsxs("div",{className:"flex items-center justify-between bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:[r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Ek hizmet ara...",value:u,onChange:C=>d(C.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-80"})]})}),r.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(ta,{className:"h-4 w-4 text-blue-500"}),r.jsxs("span",{children:["Toplam: ",i.length]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(_e,{className:"h-4 w-4 text-green-500"}),r.jsxs("span",{children:["Aktif: ",i.filter(C=>C.status==="active").length]})]})]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(C=>{const R=j(C.category),D=R.icon;return r.jsxs(F.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${C.status==="active"?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:r.jsx(D,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center space-x-2",children:[r.jsx("span",{children:C.name}),C.isPopular&&r.jsx(Fs,{className:"h-4 w-4 text-yellow-500 fill-current"})]}),r.jsx("p",{className:"text-sm text-gray-500",children:R.label})]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>T(C),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(fa,{className:"h-4 w-4"})}),r.jsx(F.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>P(C.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(ka,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-gray-600 text-sm",children:C.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(xs,{className:"h-4 w-4 text-green-500"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["₺",C.price]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C.status==="active"?"Aktif":"Pasif"})]}),C.duration&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[r.jsx(Ye,{className:"h-4 w-4"}),r.jsx("span",{children:C.duration})]})]})]},C.id)})}),y.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(ta,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ek hizmet bulunamadı"}),r.jsx("p",{className:"text-gray-500 mb-6",children:u?"Arama kriterlerinize uygun ek hizmet bulunamadı.":"Henüz ek hizmet eklenmemiş."}),!u&&r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:"inline-flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Bt,{className:"h-5 w-5"}),r.jsx("span",{children:"İlk Ek Hizmeti Ekle"})]})]}),r.jsx(lr,{children:a&&r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs(F.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:l?"Ek Hizmeti Düzenle":"Yeni Ek Hizmet Ekle"}),r.jsx("button",{onClick:b,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(Ue,{className:"h-5 w-5"})})]}),r.jsxs("form",{onSubmit:E,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hizmet Adı *"}),r.jsx("input",{type:"text",value:f.name,onChange:C=>_("name",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: VIP Karşılama, Bagaj Taşıma...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama *"}),r.jsx("textarea",{value:f.description,onChange:C=>_("description",C.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Hizmet detaylarını açıklayın...",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fiyat (₺) *"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:f.price,onChange:C=>_("price",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kategori"}),r.jsx("select",{value:f.category,onChange:C=>_("category",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:S.map(C=>r.jsx("option",{value:C.value,children:C.label},C.value))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İkon"}),r.jsx("select",{value:f.icon,onChange:C=>_("icon",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:k.map(C=>r.jsx("option",{value:C,children:C},C))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Durum"}),r.jsxs("select",{value:f.status,onChange:C=>_("status",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"active",children:"Aktif"}),r.jsx("option",{value:"inactive",children:"Pasif"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Süre (Opsiyonel)"}),r.jsx("input",{type:"text",value:f.duration,onChange:C=>_("duration",C.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Örn: 30 dakika, 1 saat..."})]}),r.jsxs("div",{className:"flex items-center space-x-3 pt-8",children:[r.jsx("input",{type:"checkbox",id:"isPopular",checked:f.isPopular,onChange:C=>_("isPopular",C.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"isPopular",className:"text-sm font-medium text-gray-700",children:"Popüler hizmet olarak işaretle"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kısıtlamalar (Opsiyonel)"}),r.jsx("textarea",{value:f.restrictions,onChange:C=>_("restrictions",C.target.value),rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Bu hizmet için özel koşullar veya kısıtlamalar..."})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:b,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"İptal"}),r.jsx(F.button,{type:"submit",disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Kaydediliyor...":l?"Güncelle":"Kaydet"})]})]})]})})})]})},aI=async(t,e)=>{try{const{driverId:s,totalPrice:n,paymentMethod:i,customerInfo:a,tripDetails:o}=e;if(!s||!n){console.log("Eksik veri: driverId veya totalPrice bulunamadı");return}const l=await ni(Ce(ae,"drivers",s));if(!l.exists()){console.error("Şoför bulunamadı:",s);return}const c=l.data(),u=c.commissionRate||15,d=n*u/100,m=n-d;let p=0,f="";i==="cash"?(p=-d,f=`Nakit rezervasyon komisyonu - ${t}`):(i==="card"||i==="credit_card")&&(p=+m,f=`Kart rezervasyon kazancı - ${t}`);const x=c.balance||0,S=x+p,k={id:Date.now().toString(),type:p>0?"earning":"commission_debt",amount:Math.abs(p),note:f,date:new Date,balanceBefore:x,balanceAfter:S,reservationId:t,paymentMethod:i,totalPrice:n,commission:d,customerName:`${a.firstName} ${a.lastName}`,tripRoute:`${o.pickupLocation} → ${o.dropoffLocation}`},_=[...c.transactions||[],k];return await Pt(Ce(ae,"drivers",s),{balance:S,transactions:_,lastTransactionDate:new Date,totalEarnings:(c.totalEarnings||0)+(p>0?p:0),totalCommission:(c.totalCommission||0)+d,completedTrips:(c.completedTrips||0)+1}),await un(Ie(ae,"financial_transactions"),{...k,driverId:s,createdAt:new Date,processedBy:"system_auto"}),console.log(`Şoför ${s} cari hesabı güncellendi:`,{oldBalance:x,newBalance:S,change:p,paymentMethod:i}),{success:!0,oldBalance:x,newBalance:S,transaction:k}}catch(s){throw console.error("Şoför finansal güncelleme hatası:",s),s}},oI=async(t,e)=>{try{const s=await ni(Ce(ae,"reservations",t));if(!s.exists())throw new Error("Rezervasyon bulunamadı");const n=s.data();if(n.status==="completed")throw new Error("Bu rezervasyon zaten tamamlanmış");if(n.driverId!==e)throw new Error("Bu rezervasyon size atanmamış");await Pt(Ce(ae,"reservations",t),{status:"completed",completedAt:new Date,qrScannedAt:new Date,qrScannedBy:e,financialProcessed:!0});const i=await aI(t,n);return{success:!0,message:"Rezervasyon başarıyla tamamlandı",reservation:n,financial:i}}catch(s){throw console.error("QR scan completion error:",s),s}},R8=async(t,e)=>{try{const s=await ni(Ce(ae,"reservations",t));if(!s.exists())throw new Error("Rezervasyon bulunamadı");const n=s.data();if(n.status==="completed")throw new Error("Bu rezervasyon zaten tamamlanmış");await Pt(Ce(ae,"reservations",t),{status:"completed",completedAt:new Date,completedBy:e,completionMethod:"manual",financialProcessed:!0});const i=await aI(t,n);return{success:!0,message:"Rezervasyon manuel olarak tamamlandı",reservation:n,financial:i}}catch(s){throw console.error("Manual completion error:",s),s}};function Wc(t){"@babel/helpers - typeof";return Wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function D8(t,e){if(Wc(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L8(t){var e=D8(t,"string");return Wc(e)=="symbol"?e:e+""}function Q(t,e,s){return(e=L8(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function lI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vp,i1;function M8(){if(i1)return vp;i1=1;var t=function(s,n,i,a,o,l,c,u){if(!s){var d;if(n===void 0)d=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[i,a,o,l,c,u],p=0;d=new Error(n.replace(/%s/g,function(){return m[p++]})),d.name="Invariant Violation"}throw d.framesToPop=1,d}};return vp=t,vp}var O8=M8(),St=lI(O8),we=g.createContext(null);function V8(){St(!!g.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=g.useContext(we);return St(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function z8(t,e,s){return Object.keys(t).reduce(function(i,a){return e(i,t[a],a)},s)}function B8(t,e){Object.keys(t).forEach(s=>e(t[s],s))}function U8(t,e,s,n){var i={},a=(o,l)=>{var c=s[l];c!==e[l]&&(i[l]=c,o(n,c))};return B8(t,a),i}function F8(t,e,s){var n=z8(s,function(a,o,l){return typeof t[l]=="function"&&a.push(google.maps.event.addListener(e,o,t[l])),a},[]);return n}function $8(t){google.maps.event.removeListener(t)}function Ae(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach($8)}function Se(t){var{updaterMap:e,eventMap:s,prevProps:n,nextProps:i,instance:a}=t,o=F8(i,a,s);return U8(e,n,i,a),o}function H8(t){var{children:e,options:s,id:n,mapContainerStyle:i,mapContainerClassName:a,center:o,onClick:l,onDblClick:c,onDrag:u,onDragEnd:d,onDragStart:m,onMouseMove:p,onMouseOut:f,onMouseOver:x,onMouseDown:S,onMouseUp:k,onRightClick:v,onCenterChanged:_,onLoad:w,onUnmount:E}=t,[T,P]=g.useState(null),b=g.useRef(null),[y,j]=g.useState(null),[C,R]=g.useState(null),[D,A]=g.useState(null),[V,$]=g.useState(null),[Y,B]=g.useState(null),[O,K]=g.useState(null),[z,M]=g.useState(null),[U,W]=g.useState(null),[Z,G]=g.useState(null),[ne,te]=g.useState(null),[ie,Re]=g.useState(null),[he,be]=g.useState(null);return g.useEffect(()=>{s&&T!==null&&T.setOptions(s)},[T,s]),g.useEffect(()=>{T!==null&&typeof o<"u"&&T.setCenter(o)},[T,o]),g.useEffect(()=>{T&&c&&(C!==null&&google.maps.event.removeListener(C),R(google.maps.event.addListener(T,"dblclick",c)))},[c]),g.useEffect(()=>{T&&d&&(D!==null&&google.maps.event.removeListener(D),A(google.maps.event.addListener(T,"dragend",d)))},[d]),g.useEffect(()=>{T&&m&&(V!==null&&google.maps.event.removeListener(V),$(google.maps.event.addListener(T,"dragstart",m)))},[m]),g.useEffect(()=>{T&&S&&(Y!==null&&google.maps.event.removeListener(Y),B(google.maps.event.addListener(T,"mousedown",S)))},[S]),g.useEffect(()=>{T&&p&&(O!==null&&google.maps.event.removeListener(O),K(google.maps.event.addListener(T,"mousemove",p)))},[p]),g.useEffect(()=>{T&&f&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(T,"mouseout",f)))},[f]),g.useEffect(()=>{T&&x&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(T,"mouseover",x)))},[x]),g.useEffect(()=>{T&&k&&(Z!==null&&google.maps.event.removeListener(Z),G(google.maps.event.addListener(T,"mouseup",k)))},[k]),g.useEffect(()=>{T&&v&&(ne!==null&&google.maps.event.removeListener(ne),te(google.maps.event.addListener(T,"rightclick",v)))},[v]),g.useEffect(()=>{T&&l&&(ie!==null&&google.maps.event.removeListener(ie),Re(google.maps.event.addListener(T,"click",l)))},[l]),g.useEffect(()=>{T&&u&&(he!==null&&google.maps.event.removeListener(he),be(google.maps.event.addListener(T,"drag",u)))},[u]),g.useEffect(()=>{T&&_&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(T,"center_changed",_)))},[l]),g.useEffect(()=>{var Tt=b.current===null?null:new google.maps.Map(b.current,s);return P(Tt),Tt!==null&&w&&w(Tt),()=>{Tt!==null&&E&&E(Tt)}},[]),r.jsx("div",{id:n,ref:b,style:i,className:a,children:r.jsx(we.Provider,{value:T,children:T!==null?e:null})})}g.memo(H8);function a1(t,e,s,n,i,a,o){try{var l=t[a](o),c=l.value}catch(u){return void s(u)}l.done?e(c):Promise.resolve(c).then(n,i)}function cI(t){return function(){var e=this,s=arguments;return new Promise(function(n,i){var a=t.apply(e,s);function o(c){a1(a,n,i,o,l,"next",c)}function l(c){a1(a,n,i,o,l,"throw",c)}o(void 0)})}}function uI(t){var{googleMapsApiKey:e,googleMapsClientId:s,version:n="weekly",language:i,region:a,libraries:o,channel:l,mapIds:c,authReferrerPolicy:u,apiUrl:d="https://maps.googleapis.com"}=t,m=[];return St(e&&s||!(e&&s),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?m.push("key=".concat(e)):s&&m.push("client=".concat(s)),n&&m.push("v=".concat(n)),i&&m.push("language=".concat(i)),a&&m.push("region=".concat(a)),o&&o.length&&m.push("libraries=".concat(o.sort().join(","))),l&&m.push("channel=".concat(l)),c&&c.length&&m.push("map_ids=".concat(c.join(","))),u&&m.push("auth_referrer_policy=".concat(u)),m.push("loading=async"),m.push("callback=initMap"),"".concat(d,"/maps/api/js?").concat(m.join("&"))}var Yi=typeof document<"u";function dI(t){var{url:e,id:s,nonce:n}=t;return Yi?new Promise(function(a,o){var l=document.getElementById(s),c=window;if(l){var u=l.getAttribute("data-state");if(l.src===e&&u!=="error"){if(u==="ready")return a(s);var d=c.initMap,m=l.onerror;c.initMap=function(){d&&d(),a(s)},l.onerror=function(f){m&&m(f),o(f)};return}else l.remove()}var p=document.createElement("script");p.type="text/javascript",p.src=e,p.id=s,p.async=!0,p.nonce=n||"",p.onerror=function(x){p.setAttribute("data-state","error"),o(x)},c.initMap=function(){p.setAttribute("data-state","ready"),a(s)},document.head.appendChild(p)}).catch(i=>{throw console.error("injectScript error: ",i),i}):Promise.reject(new Error("document is undefined"))}function o1(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function hI(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(i,a){return o1(i)||Reflect.apply(e,t,[i,a]),i};var s=t.appendChild.bind(t);t.appendChild=function(i){return o1(i)||Reflect.apply(s,t,[i]),i}}}var Sl=!1;function mI(){return r.jsx("div",{children:"Loading..."})}var x0={id:"script-loader",version:"weekly"};class K8 extends g.PureComponent{constructor(){super(...arguments),Q(this,"check",null),Q(this,"state",{loaded:!1}),Q(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),Q(this,"isCleaningUp",cI(function*(){function e(s){if(!Sl)s();else if(Yi)var n=window.setInterval(function(){Sl||(window.clearInterval(n),s())},1)}return new Promise(e)})),Q(this,"cleanup",()=>{Sl=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(n){return typeof n.src=="string"&&n.src.includes("maps.googleapis")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(n){return n.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(n){return n.innerText!==void 0&&n.innerText.length>0&&n.innerText.includes(".gm-")}).forEach(function(n){n.parentNode&&n.parentNode.removeChild(n)})}),Q(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&hI(),St(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:uI(this.props)};dI(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(s=>{this.props.onError&&this.props.onError(s),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),Q(this,"getRef",e=>{this.check=e})}componentDidMount(){if(Yi){if(window.google&&window.google.maps&&!Sl){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(s){console.error("Error at injecting script after cleaning up: ",s)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),Yi&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(Yi){this.cleanup();var e=()=>{this.check||(delete window.google,Sl=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||r.jsx(mI,{})]})}}Q(K8,"defaultProps",x0);function G8(t,e){if(t==null)return{};var s={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(e.includes(n))continue;s[n]=t[n]}return s}function iv(t,e){if(t==null)return{};var s,n,i=G8(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)s=a[n],e.includes(s)||{}.propertyIsEnumerable.call(t,s)&&(i[s]=t[s])}return i}var l1;function fI(t){var{id:e=x0.id,version:s=x0.version,nonce:n,googleMapsApiKey:i,googleMapsClientId:a,language:o,region:l,libraries:c,preventGoogleFontsLoading:u,channel:d,mapIds:m,authReferrerPolicy:p,apiUrl:f="https://maps.googleapis.com"}=t,x=g.useRef(!1),[S,k]=g.useState(!1),[v,_]=g.useState(void 0);g.useEffect(function(){return x.current=!0,()=>{x.current=!1}},[]),g.useEffect(function(){Yi&&u&&hI()},[u]),g.useEffect(function(){S&&St(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[S]);var w=uI({version:s,googleMapsApiKey:i,googleMapsClientId:a,language:o,region:l,libraries:c,channel:d,mapIds:m,authReferrerPolicy:p,apiUrl:f});g.useEffect(function(){if(!Yi)return;function P(){x.current&&(k(!0),l1=w)}if(window.google&&window.google.maps&&l1===w){P();return}dI({id:e,url:w,nonce:n}).then(P).catch(function(y){x.current&&_(y),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(i||"-",") or Client ID (").concat(a||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(y)})},[e,w,n]);var E=g.useRef(void 0);return g.useEffect(function(){E.current&&c!==E.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),E.current=c},[c]),{isLoaded:S,loadError:v,url:w}}var W8=["loadingElement","onLoad","onError","onUnmount","children"],q8=r.jsx(mI,{});function Y8(t){var{loadingElement:e,onLoad:s,onError:n,onUnmount:i,children:a}=t,o=iv(t,W8),{isLoaded:l,loadError:c}=fI(o);return g.useEffect(function(){l&&typeof s=="function"&&s()},[l,s]),g.useEffect(function(){c&&typeof n=="function"&&n(c)},[c,n]),g.useEffect(function(){return()=>{i&&i()}},[i]),l?a:e||q8}g.memo(Y8);var c1;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(c1||(c1={}));function u1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Fh(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?u1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):u1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var d1={},h1={options(t,e){t.setOptions(e)}};function Q8(t){var{options:e,onLoad:s,onUnmount:n}=t,i=g.useContext(we),[a,o]=g.useState(null);return g.useEffect(()=>{a!==null&&a.setMap(i)},[i]),g.useEffect(()=>{e&&a!==null&&a.setOptions(e)},[a,e]),g.useEffect(()=>{var l=new google.maps.TrafficLayer(Fh(Fh({},e),{},{map:i}));return o(l),s&&s(l),()=>{a!==null&&(n&&n(a),a.setMap(null))}},[]),null}g.memo(Q8);class X8 extends g.PureComponent{constructor(){super(...arguments),Q(this,"state",{trafficLayer:null}),Q(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),Q(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(Fh(Fh({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:h1,eventMap:d1,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:h1,eventMap:d1,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),Ae(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}Q(X8,"contextType",we);function Z8(t){var{onLoad:e,onUnmount:s}=t,n=g.useContext(we),[i,a]=g.useState(null);return g.useEffect(()=>{i!==null&&i.setMap(n)},[n]),g.useEffect(()=>{var o=new google.maps.BicyclingLayer;return a(o),o.setMap(n),e&&e(o),()=>{o!==null&&(s&&s(o),o.setMap(null))}},[]),null}g.memo(Z8);class J8 extends g.PureComponent{constructor(){super(...arguments),Q(this,"state",{bicyclingLayer:null}),Q(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}Q(J8,"contextType",we);function e7(t){var{onLoad:e,onUnmount:s}=t,n=g.useContext(we),[i,a]=g.useState(null);return g.useEffect(()=>{i!==null&&i.setMap(n)},[n]),g.useEffect(()=>{var o=new google.maps.TransitLayer;return a(o),o.setMap(n),e&&e(o),()=>{i!==null&&(s&&s(i),i.setMap(null))}},[]),null}g.memo(e7);class t7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"state",{transitLayer:null}),Q(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}Q(t7,"contextType",we);function m1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function $h(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?m1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):m1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var f1={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},p1={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function s7(t){var{options:e,drawingMode:s,onCircleComplete:n,onMarkerComplete:i,onOverlayComplete:a,onPolygonComplete:o,onPolylineComplete:l,onRectangleComplete:c,onLoad:u,onUnmount:d}=t,m=g.useContext(we),[p,f]=g.useState(null),[x,S]=g.useState(null),[k,v]=g.useState(null),[_,w]=g.useState(null),[E,T]=g.useState(null),[P,b]=g.useState(null),[y,j]=g.useState(null);return g.useEffect(()=>{p!==null&&p.setMap(m)},[m]),g.useEffect(()=>{e&&p!==null&&p.setOptions(e)},[p,e]),g.useEffect(()=>{p!==null&&p.setDrawingMode(s??null)},[p,s]),g.useEffect(()=>{p&&n&&(x!==null&&google.maps.event.removeListener(x),S(google.maps.event.addListener(p,"circlecomplete",n)))},[p,n]),g.useEffect(()=>{p&&i&&(k!==null&&google.maps.event.removeListener(k),v(google.maps.event.addListener(p,"markercomplete",i)))},[p,i]),g.useEffect(()=>{p&&a&&(_!==null&&google.maps.event.removeListener(_),w(google.maps.event.addListener(p,"overlaycomplete",a)))},[p,a]),g.useEffect(()=>{p&&o&&(E!==null&&google.maps.event.removeListener(E),T(google.maps.event.addListener(p,"polygoncomplete",o)))},[p,o]),g.useEffect(()=>{p&&l&&(P!==null&&google.maps.event.removeListener(P),b(google.maps.event.addListener(p,"polylinecomplete",l)))},[p,l]),g.useEffect(()=>{p&&c&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(p,"rectanglecomplete",c)))},[p,c]),g.useEffect(()=>{St(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var C=new google.maps.drawing.DrawingManager($h($h({},e),{},{map:m}));return s&&C.setDrawingMode(s),n&&S(google.maps.event.addListener(C,"circlecomplete",n)),i&&v(google.maps.event.addListener(C,"markercomplete",i)),a&&w(google.maps.event.addListener(C,"overlaycomplete",a)),o&&T(google.maps.event.addListener(C,"polygoncomplete",o)),l&&b(google.maps.event.addListener(C,"polylinecomplete",l)),c&&j(google.maps.event.addListener(C,"rectanglecomplete",c)),f(C),u&&u(C),()=>{p!==null&&(x&&google.maps.event.removeListener(x),k&&google.maps.event.removeListener(k),_&&google.maps.event.removeListener(_),E&&google.maps.event.removeListener(E),P&&google.maps.event.removeListener(P),y&&google.maps.event.removeListener(y),d&&d(p),p.setMap(null))}},[]),null}g.memo(s7);class n7 extends g.PureComponent{constructor(e){super(e),Q(this,"registeredEvents",[]),Q(this,"state",{drawingManager:null}),Q(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),St(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager($h($h({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:p1,eventMap:f1,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:p1,eventMap:f1,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),Ae(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}Q(n7,"contextType",we);function g1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function xo(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?g1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):g1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var x1={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},y1={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Hh={};function r7(t){var{position:e,options:s,clusterer:n,noClustererRedraw:i,children:a,draggable:o,visible:l,animation:c,clickable:u,cursor:d,icon:m,label:p,opacity:f,shape:x,title:S,zIndex:k,onClick:v,onDblClick:_,onDrag:w,onDragEnd:E,onDragStart:T,onMouseOut:P,onMouseOver:b,onMouseUp:y,onMouseDown:j,onRightClick:C,onClickableChanged:R,onCursorChanged:D,onAnimationChanged:A,onDraggableChanged:V,onFlatChanged:$,onIconChanged:Y,onPositionChanged:B,onShapeChanged:O,onTitleChanged:K,onVisibleChanged:z,onZindexChanged:M,onLoad:U,onUnmount:W}=t,Z=g.useContext(we),[G,ne]=g.useState(null),[te,ie]=g.useState(null),[Re,he]=g.useState(null),[be,Tt]=g.useState(null),[vs,Dn]=g.useState(null),[Le,sl]=g.useState(null),[_a,vu]=g.useState(null),[Ni,Sa]=g.useState(null),[ji,bu]=g.useState(null),[xr,Ta]=g.useState(null),[nl,jt]=g.useState(null),[yt,Ei]=g.useState(null),[ki,rl]=g.useState(null),[Ca,yr]=g.useState(null),[_i,il]=g.useState(null),[vr,wu]=g.useState(null),[Ia,Aa]=g.useState(null),[Si,al]=g.useState(null),[br,Pa]=g.useState(null),[wr,fn]=g.useState(null),[Ti,Ci]=g.useState(null),[Ii,Nr]=g.useState(null);g.useEffect(()=>{G!==null&&G.setMap(Z)},[Z]),g.useEffect(()=>{typeof s<"u"&&G!==null&&G.setOptions(s)},[G,s]),g.useEffect(()=>{typeof o<"u"&&G!==null&&G.setDraggable(o)},[G,o]),g.useEffect(()=>{e&&G!==null&&G.setPosition(e)},[G,e]),g.useEffect(()=>{typeof l<"u"&&G!==null&&G.setVisible(l)},[G,l]),g.useEffect(()=>{G==null||G.setAnimation(c)},[G,c]),g.useEffect(()=>{G&&u!==void 0&&G.setClickable(u)},[G,u]),g.useEffect(()=>{G&&d!==void 0&&G.setCursor(d)},[G,d]),g.useEffect(()=>{G&&m!==void 0&&G.setIcon(m)},[G,m]),g.useEffect(()=>{G&&p!==void 0&&G.setLabel(p)},[G,p]),g.useEffect(()=>{G&&f!==void 0&&G.setOpacity(f)},[G,f]),g.useEffect(()=>{G&&x!==void 0&&G.setShape(x)},[G,x]),g.useEffect(()=>{G&&S!==void 0&&G.setTitle(S)},[G,S]),g.useEffect(()=>{G&&k!==void 0&&G.setZIndex(k)},[G,k]),g.useEffect(()=>{G&&_&&(te!==null&&google.maps.event.removeListener(te),ie(google.maps.event.addListener(G,"dblclick",_)))},[_]),g.useEffect(()=>{G&&E&&(Re!==null&&google.maps.event.removeListener(Re),he(google.maps.event.addListener(G,"dragend",E)))},[E]),g.useEffect(()=>{G&&T&&(be!==null&&google.maps.event.removeListener(be),Tt(google.maps.event.addListener(G,"dragstart",T)))},[T]),g.useEffect(()=>{G&&j&&(vs!==null&&google.maps.event.removeListener(vs),Dn(google.maps.event.addListener(G,"mousedown",j)))},[j]),g.useEffect(()=>{G&&P&&(Le!==null&&google.maps.event.removeListener(Le),sl(google.maps.event.addListener(G,"mouseout",P)))},[P]),g.useEffect(()=>{G&&b&&(_a!==null&&google.maps.event.removeListener(_a),vu(google.maps.event.addListener(G,"mouseover",b)))},[b]),g.useEffect(()=>{G&&y&&(Ni!==null&&google.maps.event.removeListener(Ni),Sa(google.maps.event.addListener(G,"mouseup",y)))},[y]),g.useEffect(()=>{G&&C&&(ji!==null&&google.maps.event.removeListener(ji),bu(google.maps.event.addListener(G,"rightclick",C)))},[C]),g.useEffect(()=>{G&&v&&(xr!==null&&google.maps.event.removeListener(xr),Ta(google.maps.event.addListener(G,"click",v)))},[v]),g.useEffect(()=>{G&&w&&(nl!==null&&google.maps.event.removeListener(nl),jt(google.maps.event.addListener(G,"drag",w)))},[w]),g.useEffect(()=>{G&&R&&(yt!==null&&google.maps.event.removeListener(yt),Ei(google.maps.event.addListener(G,"clickable_changed",R)))},[R]),g.useEffect(()=>{G&&D&&(ki!==null&&google.maps.event.removeListener(ki),rl(google.maps.event.addListener(G,"cursor_changed",D)))},[D]),g.useEffect(()=>{G&&A&&(Ca!==null&&google.maps.event.removeListener(Ca),yr(google.maps.event.addListener(G,"animation_changed",A)))},[A]),g.useEffect(()=>{G&&V&&(_i!==null&&google.maps.event.removeListener(_i),il(google.maps.event.addListener(G,"draggable_changed",V)))},[V]),g.useEffect(()=>{G&&$&&(vr!==null&&google.maps.event.removeListener(vr),wu(google.maps.event.addListener(G,"flat_changed",$)))},[$]),g.useEffect(()=>{G&&Y&&(Ia!==null&&google.maps.event.removeListener(Ia),Aa(google.maps.event.addListener(G,"icon_changed",Y)))},[Y]),g.useEffect(()=>{G&&B&&(Si!==null&&google.maps.event.removeListener(Si),al(google.maps.event.addListener(G,"position_changed",B)))},[B]),g.useEffect(()=>{G&&O&&(br!==null&&google.maps.event.removeListener(br),Pa(google.maps.event.addListener(G,"shape_changed",O)))},[O]),g.useEffect(()=>{G&&K&&(wr!==null&&google.maps.event.removeListener(wr),fn(google.maps.event.addListener(G,"title_changed",K)))},[K]),g.useEffect(()=>{G&&z&&(Ti!==null&&google.maps.event.removeListener(Ti),Ci(google.maps.event.addListener(G,"visible_changed",z)))},[z]),g.useEffect(()=>{G&&M&&(Ii!==null&&google.maps.event.removeListener(Ii),Nr(google.maps.event.addListener(G,"zindex_changed",M)))},[M]),g.useEffect(()=>{var mt=xo(xo(xo({},s||Hh),n?Hh:{map:Z}),{},{position:e}),xe=new google.maps.Marker(mt);return n?n.addMarker(xe,!!i):xe.setMap(Z),e&&xe.setPosition(e),typeof l<"u"&&xe.setVisible(l),typeof o<"u"&&xe.setDraggable(o),typeof u<"u"&&xe.setClickable(u),typeof d=="string"&&xe.setCursor(d),m&&xe.setIcon(m),typeof p<"u"&&xe.setLabel(p),typeof f<"u"&&xe.setOpacity(f),x&&xe.setShape(x),typeof S=="string"&&xe.setTitle(S),typeof k=="number"&&xe.setZIndex(k),_&&ie(google.maps.event.addListener(xe,"dblclick",_)),E&&he(google.maps.event.addListener(xe,"dragend",E)),T&&Tt(google.maps.event.addListener(xe,"dragstart",T)),j&&Dn(google.maps.event.addListener(xe,"mousedown",j)),P&&sl(google.maps.event.addListener(xe,"mouseout",P)),b&&vu(google.maps.event.addListener(xe,"mouseover",b)),y&&Sa(google.maps.event.addListener(xe,"mouseup",y)),C&&bu(google.maps.event.addListener(xe,"rightclick",C)),v&&Ta(google.maps.event.addListener(xe,"click",v)),w&&jt(google.maps.event.addListener(xe,"drag",w)),R&&Ei(google.maps.event.addListener(xe,"clickable_changed",R)),D&&rl(google.maps.event.addListener(xe,"cursor_changed",D)),A&&yr(google.maps.event.addListener(xe,"animation_changed",A)),V&&il(google.maps.event.addListener(xe,"draggable_changed",V)),$&&wu(google.maps.event.addListener(xe,"flat_changed",$)),Y&&Aa(google.maps.event.addListener(xe,"icon_changed",Y)),B&&al(google.maps.event.addListener(xe,"position_changed",B)),O&&Pa(google.maps.event.addListener(xe,"shape_changed",O)),K&&fn(google.maps.event.addListener(xe,"title_changed",K)),z&&Ci(google.maps.event.addListener(xe,"visible_changed",z)),M&&Nr(google.maps.event.addListener(xe,"zindex_changed",M)),ne(xe),U&&U(xe),()=>{te!==null&&google.maps.event.removeListener(te),Re!==null&&google.maps.event.removeListener(Re),be!==null&&google.maps.event.removeListener(be),vs!==null&&google.maps.event.removeListener(vs),Le!==null&&google.maps.event.removeListener(Le),_a!==null&&google.maps.event.removeListener(_a),Ni!==null&&google.maps.event.removeListener(Ni),ji!==null&&google.maps.event.removeListener(ji),xr!==null&&google.maps.event.removeListener(xr),yt!==null&&google.maps.event.removeListener(yt),ki!==null&&google.maps.event.removeListener(ki),Ca!==null&&google.maps.event.removeListener(Ca),_i!==null&&google.maps.event.removeListener(_i),vr!==null&&google.maps.event.removeListener(vr),Ia!==null&&google.maps.event.removeListener(Ia),Si!==null&&google.maps.event.removeListener(Si),wr!==null&&google.maps.event.removeListener(wr),Ti!==null&&google.maps.event.removeListener(Ti),Ii!==null&&google.maps.event.removeListener(Ii),W&&W(xe),n?n.removeMarker(xe,!!i):xe&&xe.setMap(null)}},[]);var Nu=g.useMemo(()=>a?g.Children.map(a,mt=>{if(!g.isValidElement(mt))return mt;var xe=mt;return g.cloneElement(xe,{anchor:G})}):null,[a,G]);return r.jsx(r.Fragment,{children:Nu})||null}g.memo(r7);class i7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[])}componentDidMount(){var e=this;return cI(function*(){var s=xo(xo(xo({},e.props.options||Hh),e.props.clusterer?Hh:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(s),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Se({updaterMap:y1,eventMap:x1,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:y1,eventMap:x1,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),Ae(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?g.Children.map(this.props.children,s=>{if(!g.isValidElement(s))return s;var n=s;return g.cloneElement(n,{anchor:this.marker})}):null;return e||null}}Q(i7,"contextType",we);var a7=function(){function t(e,s){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=s,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var s=this.cluster.getClusterer();if(google.maps.event.trigger(s,"click",this.cluster),google.maps.event.trigger(s,"clusterclick",this.cluster),s.getZoomOnClick()){var n=s.getMaxZoom(),i=this.cluster.getBounds(),a=s.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(i),this.timeOut=window.setTimeout(function(){var o=s.getMap();if(o!==null){"fitBounds"in o&&o.fitBounds(i);var l=o.getZoom()||0;n!==null&&l>n&&o.setZoom(n+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var s=this.getMap();s!==null&&(this.boundsChangedListener=google.maps.event.addListener(s,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,s,n,i,a,o;if(this.div&&this.center){var l=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,c=this.backgroundPosition.split(" "),u=parseInt(((e=c[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),d=parseInt(((s=c[1])===null||s===void 0?void 0:s.replace(/^\s+|\s+$/g,""))||"0",10),m=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(m!==null?"".concat(m.y,"px"):"0","; left: ").concat(m!==null?"".concat(m.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var p=document.createElement("img");p.alt=l,p.src=this.url,p.width=this.width,p.height=this.height,p.setAttribute("style","position: absolute; top: ".concat(d,"px; left: ").concat(u,"px")),this.cluster.getClusterer().enableRetinaIcons||(p.style.clip="rect(-".concat(d,"px, -").concat(u+this.width,"px, -").concat(d+this.height,", -").concat(u,")"));var f=document.createElement("div");f.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((n=this.sums)===null||n===void 0)&&n.text&&(f.innerText="".concat((i=this.sums)===null||i===void 0?void 0:i.text)),!((a=this.sums)===null||a===void 0)&&a.html&&(f.innerHTML="".concat((o=this.sums)===null||o===void 0?void 0:o.html)),this.div.innerHTML="",this.div.appendChild(p),this.div.appendChild(f),this.div.title=l,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var s=this.cluster.getClusterer().getStyles(),n=s[Math.min(s.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var s=this.getProjection().fromLatLngToDivPixel(e);return s!==null&&(s.x-=this.anchorIcon[1],s.y-=this.anchorIcon[0]),s},t}(),o7=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new a7(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),s=this.getMarkers(),n=0,i=s;n<i.length;n++){var a=i[n],o=a.getPosition();o&&e.extend(o)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var s;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var n=e.getPosition();if(n){var i=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(i-1)+n.lat())/i,(this.center.lng()*(i-1)+n.lng())/i),this.calculateBounds()}}}else{var n=e.getPosition();n&&(this.center=n,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var a=this.markers.length,o=this.markerClusterer.getMaxZoom(),l=(s=this.map)===null||s===void 0?void 0:s.getZoom();if(o!==null&&typeof l<"u"&&l>o)e.getMap()!==this.map&&e.setMap(this.map);else if(a<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(a===this.minClusterSize)for(var c=0,u=this.markers;c<u.length;c++){var d=u[c];d.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var s=e.getPosition();if(s)return this.bounds.contains(s)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,s=this.markers.length,n=this.markerClusterer.getMaxZoom(),i=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(n!==null&&typeof i<"u"&&i>n){this.clusterIcon.hide();return}if(s<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var s=0;s<this.markers.length;s++)if(e===this.markers[s])return!0;return!1},t}();function l7(t,e){var s=t.length,n=s.toString().length,i=Math.min(n,e);return{text:s.toString(),index:i,title:""}}var c7=2e3,u7=500,d7="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",h7="png",m7=[53,56,66,78,90],f7="cluster",pI=function(){function t(e,s,n){s===void 0&&(s=[]),n===void 0&&(n={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=n.gridSize||60,this.minClusterSize=n.minimumClusterSize||2,this.maxZoom=n.maxZoom||null,this.styles=n.styles||[],this.title=n.title||"",this.zoomOnClick=!0,n.zoomOnClick!==void 0&&(this.zoomOnClick=n.zoomOnClick),this.averageCenter=!1,n.averageCenter!==void 0&&(this.averageCenter=n.averageCenter),this.ignoreHidden=!1,n.ignoreHidden!==void 0&&(this.ignoreHidden=n.ignoreHidden),this.enableRetinaIcons=!1,n.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=n.enableRetinaIcons),this.imagePath=n.imagePath||d7,this.imageExtension=n.imageExtension||h7,this.imageSizes=n.imageSizes||m7,this.calculator=n.calculator||l7,this.batchSize=n.batchSize||c7,this.batchSizeIE=n.batchSizeIE||u7,this.clusterClass=n.clusterClass||f7,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(s,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,s;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((s=this.getMap())===null||s===void 0?void 0:s.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,s=this.markers;e<s.length;e++){var n=s[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var i=0,a=this.clusters;i<a.length;i++){var o=a[i];o.remove()}this.clusters=[];for(var l=0,c=this.listeners;l<c.length;l++){var u=c[l];google.maps.event.removeListener(u)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),s=new google.maps.LatLngBounds,n=0,i=e;n<i.length;n++){var a=i[n],o=a.getPosition();o&&s.extend(o)}var l=this.getMap();l!==null&&"fitBounds"in l&&l.fitBounds(s)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,s){this.pushMarkerTo(e),s||this.redraw()},t.prototype.addMarkers=function(e,s){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n];i&&this.pushMarkerTo(i)}s||this.redraw()},t.prototype.pushMarkerTo=function(e){var s=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){s.ready&&(e.isAdded=!1,s.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var s=-1;if(this.markers.indexOf)s=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){s=n;break}return s===-1?!1:(e.setMap(null),this.markers.splice(s,1),!0)},t.prototype.removeMarker=function(e,s){var n=this.removeMarker_(e);return!s&&n&&this.repaint(),n},t.prototype.removeMarkers=function(e,s){for(var n=!1,i=0,a=e;i<a.length;i++){var o=a[i];n=n||this.removeMarker_(o)}return!s&&n&&this.repaint(),n},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var n=0,i=e;n<i.length;n++){var a=i[n];a.remove()}},0)},t.prototype.getExtendedBounds=function(e){var s=this.getProjection(),n=s.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));n!==null&&(n.x+=this.gridSize,n.y-=this.gridSize);var i=s.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(i!==null&&(i.x-=this.gridSize,i.y+=this.gridSize),n!==null){var a=s.fromDivPixelToLatLng(n);a!==null&&e.extend(a)}if(i!==null){var o=s.fromDivPixelToLatLng(i);o!==null&&e.extend(o)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var s=0,n=this.clusters;s<n.length;s++){var i=n[s];i.remove()}this.clusters=[];for(var a=0,o=this.markers;a<o.length;a++){var l=o[a];l.isAdded=!1,e&&l.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,s){var n=6371,i=(s.lat()-e.lat())*Math.PI/180,a=(s.lng()-e.lng())*Math.PI/180,o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(s.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return n*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},t.prototype.isMarkerInBounds=function(e,s){var n=e.getPosition();return n?s.contains(n):!1},t.prototype.addToClosestCluster=function(e){for(var s,n=4e4,i=null,a=0,o=this.clusters;a<o.length;a++){var l=o[a];s=l;var c=s.getCenter(),u=e.getPosition();if(c&&u){var d=this.distanceBetweenPoints(c,u);d<n&&(n=d,i=s)}}i&&i.isMarkerInClusterBounds(e)?i.addMarker(e):(s=new o7(this),s.addMarker(e),this.clusters.push(s))},t.prototype.createClusters=function(e){var s=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),i=n!==null&&("getBounds"in n)?n.getBounds():null,a=(n==null?void 0:n.getZoom())||0,o=a>3?new google.maps.LatLngBounds(i==null?void 0:i.getSouthWest(),i==null?void 0:i.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),l=this.getExtendedBounds(o),c=Math.min(e+this.batchSize,this.markers.length),u=e;u<c;u++){var d=this.markers[u];d&&!d.isAdded&&this.isMarkerInBounds(d,l)&&(!this.ignoreHidden||this.ignoreHidden&&d.getVisible())&&this.addToClosestCluster(d)}if(c<this.markers.length)this.timerRefStatic=window.setTimeout(function(){s.createClusters(c)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var m=0,p=this.clusters;m<p.length;m++){var f=p[m];f.updateIcon()}}}},t.prototype.extend=function(e,s){return(function(i){for(var a in i.prototype){var o=a;this.prototype[o]=i.prototype[o]}return this}).apply(e,[s])},t}();function v1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function p7(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?v1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):v1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var Ms={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Ve={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},g7={};function x7(t){var{children:e,options:s,averageCenter:n,batchSizeIE:i,calculator:a,clusterClass:o,enableRetinaIcons:l,gridSize:c,ignoreHidden:u,imageExtension:d,imagePath:m,imageSizes:p,maxZoom:f,minimumClusterSize:x,styles:S,title:k,zoomOnClick:v,onClick:_,onClusteringBegin:w,onClusteringEnd:E,onMouseOver:T,onMouseOut:P,onLoad:b,onUnmount:y}=t,[j,C]=g.useState(null),R=g.useContext(we),[D,A]=g.useState(null),[V,$]=g.useState(null),[Y,B]=g.useState(null),[O,K]=g.useState(null),[z,M]=g.useState(null);return g.useEffect(()=>{j&&P&&(O!==null&&google.maps.event.removeListener(O),K(google.maps.event.addListener(j,Ms.onMouseOut,P)))},[P]),g.useEffect(()=>{j&&T&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(j,Ms.onMouseOver,T)))},[T]),g.useEffect(()=>{j&&_&&(D!==null&&google.maps.event.removeListener(D),A(google.maps.event.addListener(j,Ms.onClick,_)))},[_]),g.useEffect(()=>{j&&w&&(V!==null&&google.maps.event.removeListener(V),$(google.maps.event.addListener(j,Ms.onClusteringBegin,w)))},[w]),g.useEffect(()=>{j&&E&&(Y!==null&&google.maps.event.removeListener(Y),$(google.maps.event.addListener(j,Ms.onClusteringEnd,E)))},[E]),g.useEffect(()=>{typeof n<"u"&&j!==null&&Ve.averageCenter(j,n)},[j,n]),g.useEffect(()=>{typeof i<"u"&&j!==null&&Ve.batchSizeIE(j,i)},[j,i]),g.useEffect(()=>{typeof a<"u"&&j!==null&&Ve.calculator(j,a)},[j,a]),g.useEffect(()=>{typeof o<"u"&&j!==null&&Ve.clusterClass(j,o)},[j,o]),g.useEffect(()=>{typeof l<"u"&&j!==null&&Ve.enableRetinaIcons(j,l)},[j,l]),g.useEffect(()=>{typeof c<"u"&&j!==null&&Ve.gridSize(j,c)},[j,c]),g.useEffect(()=>{typeof u<"u"&&j!==null&&Ve.ignoreHidden(j,u)},[j,u]),g.useEffect(()=>{typeof d<"u"&&j!==null&&Ve.imageExtension(j,d)},[j,d]),g.useEffect(()=>{typeof m<"u"&&j!==null&&Ve.imagePath(j,m)},[j,m]),g.useEffect(()=>{typeof p<"u"&&j!==null&&Ve.imageSizes(j,p)},[j,p]),g.useEffect(()=>{typeof f<"u"&&j!==null&&Ve.maxZoom(j,f)},[j,f]),g.useEffect(()=>{typeof x<"u"&&j!==null&&Ve.minimumClusterSize(j,x)},[j,x]),g.useEffect(()=>{typeof S<"u"&&j!==null&&Ve.styles(j,S)},[j,S]),g.useEffect(()=>{typeof k<"u"&&j!==null&&Ve.title(j,k)},[j,k]),g.useEffect(()=>{typeof v<"u"&&j!==null&&Ve.zoomOnClick(j,v)},[j,v]),g.useEffect(()=>{if(R){var U=p7({},s||g7),W=new pI(R,[],U);return n&&Ve.averageCenter(W,n),i&&Ve.batchSizeIE(W,i),a&&Ve.calculator(W,a),o&&Ve.clusterClass(W,o),l&&Ve.enableRetinaIcons(W,l),c&&Ve.gridSize(W,c),u&&Ve.ignoreHidden(W,u),d&&Ve.imageExtension(W,d),m&&Ve.imagePath(W,m),p&&Ve.imageSizes(W,p),f&&Ve.maxZoom(W,f),x&&Ve.minimumClusterSize(W,x),S&&Ve.styles(W,S),k&&Ve.title(W,k),v&&Ve.zoomOnClick(W,v),P&&K(google.maps.event.addListener(W,Ms.onMouseOut,P)),T&&M(google.maps.event.addListener(W,Ms.onMouseOver,T)),_&&A(google.maps.event.addListener(W,Ms.onClick,_)),w&&$(google.maps.event.addListener(W,Ms.onClusteringBegin,w)),E&&B(google.maps.event.addListener(W,Ms.onClusteringEnd,E)),C(W),b&&b(W),()=>{O!==null&&google.maps.event.removeListener(O),z!==null&&google.maps.event.removeListener(z),D!==null&&google.maps.event.removeListener(D),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),y&&y(W)}}},[]),j!==null&&e(j)||null}g.memo(x7);class y7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{markerClusterer:null}),Q(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new pI(this.context,[],this.props.options);this.registeredEvents=Se({updaterMap:Ve,eventMap:Ms,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:Ve,eventMap:Ms,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),Ae(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}Q(y7,"contextType",we);function b1(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var gI=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,s=function(d){d.returnValue=!1,d.preventDefault&&d.preventDefault(),e.enableEventPropagation||b1(d)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var n=this.getPanes();if(n!==null&&n[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var i=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-i.left-i.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var a=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],o=0,l=a;o<l.length;o++){var c=l[o];this.eventListeners.push(google.maps.event.addListener(this.div,c,b1))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",s),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var s=this.getMap();if(s instanceof google.maps.Map){var n=0,i=0,a=s.getBounds();a&&!a.contains(this.position)&&s.setCenter(this.position);var o=s.getDiv(),l=o.offsetWidth,c=o.offsetHeight,u=this.pixelOffset.width,d=this.pixelOffset.height,m=this.div.offsetWidth,p=this.div.offsetHeight,f=this.infoBoxClearance.width,x=this.infoBoxClearance.height,S=this.getProjection(),k=S.fromLatLngToContainerPixel(this.position);k!==null&&(k.x<-u+f?n=k.x+u-f:k.x+m+u+f>l&&(n=k.x+m+u+f-l),this.alignBottom?k.y<-d+x+p?i=k.y+d-x-p:k.y+d+x>c&&(i=k.y+d+x-c):k.y<-d+x?i=k.y+d-x:k.y+p+d+x>c&&(i=k.y+p+d+x-c)),n===0&&i===0||s.panBy(n,i)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(this.div.style[s]=e[s]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+n*100+')"',this.div.style.filter="alpha(opacity="+n*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var s=this.div.ownerDocument,n=s&&s.defaultView?s.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var i=this.div.currentStyle;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),s=e.fromLatLngToDivPixel(this.position);s!==null&&(this.div.style.left=s.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(s.y+this.pixelOffset.height)+"px":this.div.style.top=s.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,s){var n=this;s&&(this.position=s.getPosition(),this.moveListener=google.maps.event.addListener(s,"position_changed",function(){var i=s.getPosition();n.setPosition(i)}),this.mapListener=google.maps.event.addListener(s,"map_changed",function(){n.setMap(s.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,s=this.eventListeners;e<s.length;e++){var n=s[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,s){return(function(i){for(var a in i.prototype)Object.prototype.hasOwnProperty.call(this,a)||(this.prototype[a]=i.prototype[a]);return this}).apply(e,[s])},t}(),v7=["position"],b7=["position"];function w1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Kh(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?w1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):w1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var N1={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},j1={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},w7={};function N7(t){var{children:e,anchor:s,options:n,position:i,zIndex:a,onCloseClick:o,onDomReady:l,onContentChanged:c,onPositionChanged:u,onZindexChanged:d,onLoad:m,onUnmount:p}=t,f=g.useContext(we),[x,S]=g.useState(null),[k,v]=g.useState(null),[_,w]=g.useState(null),[E,T]=g.useState(null),[P,b]=g.useState(null),[y,j]=g.useState(null),C=g.useRef(null);return g.useEffect(()=>{f&&x!==null&&(x.close(),s?x.open(f,s):x.getPosition()&&x.open(f))},[f,x,s]),g.useEffect(()=>{n&&x!==null&&x.setOptions(n)},[x,n]),g.useEffect(()=>{if(i&&x!==null){var R=i instanceof google.maps.LatLng?i:new google.maps.LatLng(i.lat,i.lng);x.setPosition(R)}},[i]),g.useEffect(()=>{typeof a=="number"&&x!==null&&x.setZIndex(a)},[a]),g.useEffect(()=>{x&&o&&(k!==null&&google.maps.event.removeListener(k),v(google.maps.event.addListener(x,"closeclick",o)))},[o]),g.useEffect(()=>{x&&l&&(_!==null&&google.maps.event.removeListener(_),w(google.maps.event.addListener(x,"domready",l)))},[l]),g.useEffect(()=>{x&&c&&(E!==null&&google.maps.event.removeListener(E),T(google.maps.event.addListener(x,"content_changed",c)))},[c]),g.useEffect(()=>{x&&u&&(P!==null&&google.maps.event.removeListener(P),b(google.maps.event.addListener(x,"position_changed",u)))},[u]),g.useEffect(()=>{x&&d&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(x,"zindex_changed",d)))},[d]),g.useEffect(()=>{if(f){var R=n||w7,{position:D}=R,A=iv(R,v7),V;D&&!(D instanceof google.maps.LatLng)&&(V=new google.maps.LatLng(D.lat,D.lng));var $=new gI(Kh(Kh({},A),V?{position:V}:{}));C.current=document.createElement("div"),S($),o&&v(google.maps.event.addListener($,"closeclick",o)),l&&w(google.maps.event.addListener($,"domready",l)),c&&T(google.maps.event.addListener($,"content_changed",c)),u&&b(google.maps.event.addListener($,"position_changed",u)),d&&j(google.maps.event.addListener($,"zindex_changed",d)),$.setContent(C.current),s?$.open(f,s):$.getPosition()?$.open(f):St(!1,"You must provide either an anchor or a position prop for <InfoBox>."),m&&m($)}return()=>{x!==null&&(k&&google.maps.event.removeListener(k),E&&google.maps.event.removeListener(E),_&&google.maps.event.removeListener(_),P&&google.maps.event.removeListener(P),y&&google.maps.event.removeListener(y),p&&p(x),x.close())}},[]),C.current?va.createPortal(g.Children.only(e),C.current):null}g.memo(N7);class j7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",null),Q(this,"state",{infoBox:null}),Q(this,"open",(e,s)=>{s?this.context!==null&&e.open(this.context,s):e.getPosition()?this.context!==null&&e.open(this.context):St(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),Q(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:s}=e,n=iv(e,b7),i;s&&!(s instanceof google.maps.LatLng)&&(i=new google.maps.LatLng(s.lat,s.lng));var a=new gI(Kh(Kh({},n),i?{position:i}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Se({updaterMap:j1,eventMap:N1,prevProps:{},nextProps:this.props,instance:a}),this.setState({infoBox:a},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:s}=this.state;s!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:j1,eventMap:N1,prevProps:e,nextProps:this.props,instance:s}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:s}=this.state;s!==null&&(e&&e(s),Ae(this.registeredEvents),s.close())}render(){return this.containerElement?va.createPortal(g.Children.only(this.props.children),this.containerElement):null}}Q(j7,"contextType",we);var bp,E1;function E7(){return E1||(E1=1,bp=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=s.length)return!1;for(i=n;i--!==0;)if(!t(e[i],s[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(s).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(s,a[i]))return!1;for(i=n;i--!==0;){var o=a[i];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),bp}var k7=E7(),k1=lI(k7),_1=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],wp=1,Tl=8;class av{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[s,n]=new Uint8Array(e,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");var i=n>>4;if(i!==wp)throw new Error("Got v".concat(i," data when expected v").concat(wp,"."));var a=_1[n&15];if(!a)throw new Error("Unrecognized array type.");var[o]=new Uint16Array(e,2,1),[l]=new Uint32Array(e,4,1);return new av(l,o,a,e)}constructor(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var a=_1.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,l=e*this.IndexArrayType.BYTES_PER_ELEMENT,c=(8-l%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(n,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,Tl,e),this.coords=new this.ArrayType(this.data,Tl+l+c,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(Tl+o+l+c),this.ids=new this.IndexArrayType(this.data,Tl,e),this.coords=new this.ArrayType(this.data,Tl+l+c,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(wp<<4)+a]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=e)}add(e,s){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=s,n}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return y0(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,s,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:a,coords:o,nodeSize:l}=this,c=[0,a.length-1,0],u=[];c.length;){var d=c.pop()||0,m=c.pop()||0,p=c.pop()||0;if(m-p<=l){for(var f=p;f<=m;f++){var x=o[2*f],S=o[2*f+1];x>=e&&x<=n&&S>=s&&S<=i&&u.push(a[f])}continue}var k=p+m>>1,v=o[2*k],_=o[2*k+1];v>=e&&v<=n&&_>=s&&_<=i&&u.push(a[k]),(d===0?e<=v:s<=_)&&(c.push(p),c.push(k-1),c.push(1-d)),(d===0?n>=v:i>=_)&&(c.push(k+1),c.push(m),c.push(1-d))}return u}within(e,s,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:i,coords:a,nodeSize:o}=this,l=[0,i.length-1,0],c=[],u=n*n;l.length;){var d=l.pop()||0,m=l.pop()||0,p=l.pop()||0;if(m-p<=o){for(var f=p;f<=m;f++)S1(a[2*f],a[2*f+1],e,s)<=u&&c.push(i[f]);continue}var x=p+m>>1,S=a[2*x],k=a[2*x+1];S1(S,k,e,s)<=u&&c.push(i[x]),(d===0?e-n<=S:s-n<=k)&&(l.push(p),l.push(x-1),l.push(1-d)),(d===0?e+n>=S:s+n>=k)&&(l.push(x+1),l.push(m),l.push(1-d))}return c}}function y0(t,e,s,n,i,a){if(!(i-n<=s)){var o=n+i>>1;xI(t,e,o,n,i,a),y0(t,e,s,n,o-1,1-a),y0(t,e,s,o+1,i,1-a)}}function xI(t,e,s,n,i,a){for(;i>n;){if(i-n>600){var o=i-n+1,l=s-n+1,c=Math.log(o),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(o-u)/o)*(l-o/2<0?-1:1),m=Math.max(n,Math.floor(s-l*u/o+d)),p=Math.min(i,Math.floor(s+(o-l)*u/o+d));xI(t,e,s,m,p,a)}var f=e[2*s+a],x=n,S=i;for(Cl(t,e,n,s),e[2*i+a]>f&&Cl(t,e,n,i);x<S;){for(Cl(t,e,x,S),x++,S--;e[2*x+a]<f;)x++;for(;e[2*S+a]>f;)S--}e[2*n+a]===f?Cl(t,e,n,S):(S++,Cl(t,e,S,i)),S<=s&&(n=S+1),s<=S&&(i=S-1)}}function Cl(t,e,s,n){Np(t,s,n),Np(e,2*s,2*n),Np(e,2*s+1,2*n+1)}function Np(t,e,s){var n=t[e];t[e]=t[s],t[s]=n}function S1(t,e,s,n){var i=t-s,a=e-n;return i*i+a*a}var _7={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},T1=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),Li=2,Pr=3,jp=4,Cr=5,yI=6;class S7{constructor(e){this.options=Object.assign(Object.create(_7),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:s,minZoom:n,maxZoom:i}=this.options;s&&console.time("total time");var a="prepare ".concat(e.length," points");s&&console.time(a),this.points=e;for(var o=[],l=0;l<e.length;l++){var c=e[l];if(c.geometry){var[u,d]=c.geometry.coordinates,m=T1(md(u)),p=T1(fd(d));o.push(m,p,1/0,l,-1,1),this.options.reduce&&o.push(0)}}var f=this.trees[i+1]=this._createTree(o);s&&console.timeEnd(a);for(var x=i;x>=n;x--){var S=+Date.now();f=this.trees[x]=this._createTree(this._cluster(f,x)),s&&console.log("z%d: %d clusters in %dms",x,f.numItems,+Date.now()-S)}return s&&console.timeEnd("total time"),this}getClusters(e,s){var n=((e[0]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,e[1])),a=e[2]===180?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,a=180;else if(n>a){var l=this.getClusters([n,i,180,o],s),c=this.getClusters([-180,i,a,o],s);return l.concat(c)}var u=this.trees[this._limitZoom(s)],d=u.range(md(n),fd(o),md(a),fd(i)),m=u.data,p=[];for(var f of d){var x=this.stride*f;p.push(m[x+Cr]>1?C1(m,x,this.clusterProps):this.points[m[x+Pr]])}return p}getChildren(e){var s=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",a=this.trees[n];if(!a)throw new Error(i);var o=a.data;if(s*this.stride>=o.length)throw new Error(i);var l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),c=o[s*this.stride],u=o[s*this.stride+1],d=a.within(c,u,l),m=[];for(var p of d){var f=p*this.stride;o[f+jp]===e&&m.push(o[f+Cr]>1?C1(o,f,this.clusterProps):this.points[o[f+Pr]])}if(m.length===0)throw new Error(i);return m}getLeaves(e,s,n){s=s||10,n=n||0;var i=[];return this._appendLeaves(i,e,s,n,0),i}getTile(e,s,n){var i=this.trees[this._limitZoom(e)],a=Math.pow(2,e),{extent:o,radius:l}=this.options,c=l/o,u=(n-c)/a,d=(n+1+c)/a,m={features:[]};return this._addTileFeatures(i.range((s-c)/a,u,(s+1+c)/a,d),i.data,s,n,a,m),s===0&&this._addTileFeatures(i.range(1-c/a,u,1,d),i.data,a,n,a,m),s===a-1&&this._addTileFeatures(i.range(0,u,c/a,d),i.data,-1,n,a,m),m.features.length?m:null}getClusterExpansionZoom(e){for(var s=this._getOriginZoom(e)-1;s<=this.options.maxZoom;){var n=this.getChildren(e);if(s++,n.length!==1)break;e=n[0].properties.cluster_id}return s}_appendLeaves(e,s,n,i,a){var o=this.getChildren(s);for(var l of o){var c=l.properties;if(c&&c.cluster?a+c.point_count<=i?a+=c.point_count:a=this._appendLeaves(e,c.cluster_id,n,i,a):a<i?a++:e.push(l),e.length===n)break}return a}_createTree(e){for(var s=new av(e.length/this.stride|0,this.options.nodeSize,Float32Array),n=0;n<e.length;n+=this.stride)s.add(e[n],e[n+1]);return s.finish(),s.data=e,s}_addTileFeatures(e,s,n,i,a,o){for(var l of e){var c=l*this.stride,u=s[c+Cr]>1,d=void 0,m=void 0,p=void 0;if(u)d=vI(s,c,this.clusterProps),m=s[c],p=s[c+1];else{var f=this.points[s[c+Pr]];d=f.properties;var[x,S]=f.geometry.coordinates;m=md(x),p=fd(S)}var k={type:1,geometry:[[Math.round(this.options.extent*(m*a-n)),Math.round(this.options.extent*(p*a-i))]],tags:d},v=void 0;u||this.options.generateId?v=s[c+Pr]:v=this.points[s[c+Pr]].id,v!==void 0&&(k.id=v),o.features.push(k)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,s){for(var{radius:n,extent:i,reduce:a,minPoints:o}=this.options,l=n/(i*Math.pow(2,s)),c=e.data,u=[],d=this.stride,m=0;m<c.length;m+=d)if(!(c[m+Li]<=s)){c[m+Li]=s;var p=c[m],f=c[m+1],x=e.within(c[m],c[m+1],l),S=c[m+Cr],k=S;for(var v of x){var _=v*d;c[_+Li]>s&&(k+=c[_+Cr])}if(k>S&&k>=o){var w=p*S,E=f*S,T=void 0,P=-1,b=((m/d|0)<<5)+(s+1)+this.points.length;for(var y of x){var j=y*d;if(!(c[j+Li]<=s)){c[j+Li]=s;var C=c[j+Cr];w+=c[j]*C,E+=c[j+1]*C,c[j+jp]=b,a&&(T||(T=this._map(c,m,!0),P=this.clusterProps.length,this.clusterProps.push(T)),a(T,this._map(c,j)))}}c[m+jp]=b,u.push(w/k,E/k,1/0,b,-1,k),a&&u.push(P)}else{for(var R=0;R<d;R++)u.push(c[m+R]);if(k>1)for(var D of x){var A=D*d;if(!(c[A+Li]<=s)){c[A+Li]=s;for(var V=0;V<d;V++)u.push(c[A+V])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,s,n){if(e[s+Cr]>1){var i=this.clusterProps[e[s+yI]];return n?Object.assign({},i):i}var a=this.points[e[s+Pr]].properties,o=this.options.map(a);return n&&o===a?Object.assign({},o):o}}function C1(t,e,s){return{type:"Feature",id:t[e+Pr],properties:vI(t,e,s),geometry:{type:"Point",coordinates:[T7(t[e]),C7(t[e+1])]}}}function vI(t,e,s){var n=t[e+Cr],i=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,a=t[e+yI],o=a===-1?{}:Object.assign({},s[a]);return Object.assign(o,{cluster:!0,cluster_id:t[e+Pr],point_count:n,point_count_abbreviated:i})}function md(t){return t/360+.5}function fd(t){var e=Math.sin(t*Math.PI/180),s=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return s<0?0:s>1?1:s}function T7(t){return(t-.5)*360}function C7(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function I7(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s}class js{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,s){this.isAdvancedMarker(e)?e.map=s:e.setMap(s)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class v0{constructor(e){var{markers:s,position:n}=e;this.markers=s,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var s of this.markers)e.extend(js.getPosition(s));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>js.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(js.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class A7{constructor(e){var{maxZoom:s=16}=e;this.maxZoom=s}noop(e){var{markers:s}=e;return P7(s)}}var P7=t=>{var e=t.map(s=>new v0({position:js.getPosition(s),markers:[s]}));return e};class R7 extends A7{constructor(e){var{maxZoom:s,radius:n=60}=e,i=I7(e,["maxZoom","radius"]);super({maxZoom:s}),this.state={zoom:-1},this.superCluster=new S7(Object.assign({maxZoom:this.maxZoom,radius:n},i))}calculate(e){var s=!1,n={zoom:e.map.getZoom()};if(!k1(e.markers,this.markers)){s=!0,this.markers=[...e.markers];var i=this.markers.map(a=>{var o=js.getPosition(a),l=[o.lng(),o.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:l},properties:{marker:a}}});this.superCluster.load(i)}return s||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(s=!k1(this.state,n)),this.state=n,s&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:s}}cluster(e){var{map:s}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(s.getZoom())).map(n=>this.transformCluster(n))}transformCluster(e){var{geometry:{coordinates:[s,n]},properties:i}=e;if(i.cluster)return new v0({markers:this.superCluster.getLeaves(i.cluster_id,1/0).map(o=>o.properties.marker),position:{lat:n,lng:s}});var a=i.marker;return new v0({markers:[a],position:js.getPosition(a)})}}class D7{constructor(e,s){this.markers={sum:e.length};var n=s.map(a=>a.count),i=n.reduce((a,o)=>a+o,0);this.clusters={count:s.length,markers:{mean:i/s.length,sum:i,min:Math.min(...n),max:Math.max(...n)}}}}class L7{render(e,s,n){var{count:i,position:a}=e,o=i>Math.max(10,s.clusters.markers.mean)?"#ff0000":"#0000ff",l='<svg fill="'.concat(o,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(i,`</text>
</svg>`),c="Cluster of ".concat(i," markers"),u=Number(google.maps.Marker.MAX_ZINDEX)+i;if(js.isAdvancedMarkerAvailable(n)){var d=new DOMParser,m=d.parseFromString(l,"image/svg+xml").documentElement;m.setAttribute("transform","translate(0 25)");var p={map:n,position:a,zIndex:u,title:c,content:m};return new google.maps.marker.AdvancedMarkerElement(p)}var f={position:a,zIndex:u,title:c,icon:{url:"data:image/svg+xml;base64,".concat(btoa(l)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(f)}}function M7(t,e){for(var s in e.prototype)t.prototype[s]=e.prototype[s]}class ov{constructor(){M7(ov,google.maps.OverlayView)}}var lc;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(lc||(lc={}));var O7=(t,e,s)=>{s.fitBounds(e.bounds)};class V7 extends ov{constructor(e){var{map:s,markers:n=[],algorithmOptions:i={},algorithm:a=new R7(i),renderer:o=new L7,onClusterClick:l=O7}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=a,this.renderer=o,this.onClusterClick=l,s&&this.setMap(s)}addMarker(e,s){this.markers.includes(e)||(this.markers.push(e),s||this.render())}addMarkers(e,s){e.forEach(n=>{this.addMarker(n,!0)}),s||this.render()}removeMarker(e,s){var n=this.markers.indexOf(e);return n===-1?!1:(js.setMap(e,null),this.markers.splice(n,1),s||this.render(),!0)}removeMarkers(e,s){var n=!1;return e.forEach(i=>{n=this.removeMarker(i,!0)||n}),n&&!s&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,lc.CLUSTERING_BEGIN,this);var{clusters:s,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||n==null){var i=new Set;for(var a of s)a.markers.length==1&&i.add(a.markers[0]);var o=[];for(var l of this.clusters)l.marker!=null&&(l.markers.length==1?i.has(l.marker)||js.setMap(l.marker,null):o.push(l.marker));this.clusters=s,this.renderClusters(),requestAnimationFrame(()=>o.forEach(c=>js.setMap(c,null)))}google.maps.event.trigger(this,lc.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>js.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new D7(this.markers,this.clusters),s=this.getMap();this.clusters.forEach(n=>{n.markers.length===1?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,s),n.markers.forEach(i=>js.setMap(i,null)),this.onClusterClick&&n.marker.addListener("click",i=>{google.maps.event.trigger(this,lc.CLUSTER_CLICK,n),this.onClusterClick(i,n,s)})),js.setMap(n.marker,s)})}}function I1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function A1(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?I1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):I1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function z7(t){var e=V8(),[s,n]=g.useState(null);return g.useEffect(()=>{if(e&&s===null){var i=new V7(A1(A1({},t),{},{map:e}));n(i)}},[e]),s}function B7(t){var{children:e,options:s}=t,n=z7(s);return n!==null?e(n):null}g.memo(B7);var P1={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},R1={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function U7(t){var{children:e,anchor:s,options:n,position:i,zIndex:a,onCloseClick:o,onDomReady:l,onContentChanged:c,onPositionChanged:u,onZindexChanged:d,onLoad:m,onUnmount:p}=t,f=g.useContext(we),[x,S]=g.useState(null),[k,v]=g.useState(null),[_,w]=g.useState(null),[E,T]=g.useState(null),[P,b]=g.useState(null),[y,j]=g.useState(null),C=g.useRef(null);return g.useEffect(()=>{x!==null&&(x.close(),s?x.open(f,s):x.getPosition()&&x.open(f))},[f,x,s]),g.useEffect(()=>{n&&x!==null&&x.setOptions(n)},[x,n]),g.useEffect(()=>{i&&x!==null&&x.setPosition(i)},[i]),g.useEffect(()=>{typeof a=="number"&&x!==null&&x.setZIndex(a)},[a]),g.useEffect(()=>{x&&o&&(k!==null&&google.maps.event.removeListener(k),v(google.maps.event.addListener(x,"closeclick",o)))},[o]),g.useEffect(()=>{x&&l&&(_!==null&&google.maps.event.removeListener(_),w(google.maps.event.addListener(x,"domready",l)))},[l]),g.useEffect(()=>{x&&c&&(E!==null&&google.maps.event.removeListener(E),T(google.maps.event.addListener(x,"content_changed",c)))},[c]),g.useEffect(()=>{x&&u&&(P!==null&&google.maps.event.removeListener(P),b(google.maps.event.addListener(x,"position_changed",u)))},[u]),g.useEffect(()=>{x&&d&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(x,"zindex_changed",d)))},[d]),g.useEffect(()=>{var R=new google.maps.InfoWindow(n);return S(R),C.current=document.createElement("div"),o&&v(google.maps.event.addListener(R,"closeclick",o)),l&&w(google.maps.event.addListener(R,"domready",l)),c&&T(google.maps.event.addListener(R,"content_changed",c)),u&&b(google.maps.event.addListener(R,"position_changed",u)),d&&j(google.maps.event.addListener(R,"zindex_changed",d)),R.setContent(C.current),i&&R.setPosition(i),a&&R.setZIndex(a),s?R.open(f,s):R.getPosition()?R.open(f):St(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),m&&m(R),()=>{k&&google.maps.event.removeListener(k),E&&google.maps.event.removeListener(E),_&&google.maps.event.removeListener(_),P&&google.maps.event.removeListener(P),y&&google.maps.event.removeListener(y),p&&p(R),R.close()}},[]),C.current?va.createPortal(g.Children.only(e),C.current):null}g.memo(U7);class F7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",null),Q(this,"state",{infoWindow:null}),Q(this,"open",(e,s)=>{s?e.open(this.context,s):e.getPosition()?e.open(this.context):St(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),Q(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Se({updaterMap:R1,eventMap:P1,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:R1,eventMap:P1,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(Ae(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?va.createPortal(g.Children.only(this.props.children),this.containerElement):null}}Q(F7,"contextType",we);function D1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Gh(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?D1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):D1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var L1={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},M1={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},$7={};function H7(t){var{options:e,draggable:s,editable:n,visible:i,path:a,onDblClick:o,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:m,onMouseOver:p,onMouseUp:f,onRightClick:x,onClick:S,onDrag:k,onLoad:v,onUnmount:_}=t,w=g.useContext(we),[E,T]=g.useState(null),[P,b]=g.useState(null),[y,j]=g.useState(null),[C,R]=g.useState(null),[D,A]=g.useState(null),[V,$]=g.useState(null),[Y,B]=g.useState(null),[O,K]=g.useState(null),[z,M]=g.useState(null),[U,W]=g.useState(null),[Z,G]=g.useState(null),[ne,te]=g.useState(null);return g.useEffect(()=>{E!==null&&E.setMap(w)},[w]),g.useEffect(()=>{typeof e<"u"&&E!==null&&E.setOptions(e)},[E,e]),g.useEffect(()=>{typeof s<"u"&&E!==null&&E.setDraggable(s)},[E,s]),g.useEffect(()=>{typeof n<"u"&&E!==null&&E.setEditable(n)},[E,n]),g.useEffect(()=>{typeof i<"u"&&E!==null&&E.setVisible(i)},[E,i]),g.useEffect(()=>{typeof a<"u"&&E!==null&&E.setPath(a)},[E,a]),g.useEffect(()=>{E&&o&&(P!==null&&google.maps.event.removeListener(P),b(google.maps.event.addListener(E,"dblclick",o)))},[o]),g.useEffect(()=>{E&&l&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(E,"dragend",l)))},[l]),g.useEffect(()=>{E&&c&&(C!==null&&google.maps.event.removeListener(C),R(google.maps.event.addListener(E,"dragstart",c)))},[c]),g.useEffect(()=>{E&&u&&(D!==null&&google.maps.event.removeListener(D),A(google.maps.event.addListener(E,"mousedown",u)))},[u]),g.useEffect(()=>{E&&d&&(V!==null&&google.maps.event.removeListener(V),$(google.maps.event.addListener(E,"mousemove",d)))},[d]),g.useEffect(()=>{E&&m&&(Y!==null&&google.maps.event.removeListener(Y),B(google.maps.event.addListener(E,"mouseout",m)))},[m]),g.useEffect(()=>{E&&p&&(O!==null&&google.maps.event.removeListener(O),K(google.maps.event.addListener(E,"mouseover",p)))},[p]),g.useEffect(()=>{E&&f&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(E,"mouseup",f)))},[f]),g.useEffect(()=>{E&&x&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(E,"rightclick",x)))},[x]),g.useEffect(()=>{E&&S&&(Z!==null&&google.maps.event.removeListener(Z),G(google.maps.event.addListener(E,"click",S)))},[S]),g.useEffect(()=>{E&&k&&(ne!==null&&google.maps.event.removeListener(ne),te(google.maps.event.addListener(E,"drag",k)))},[k]),g.useEffect(()=>{var ie=new google.maps.Polyline(Gh(Gh({},e||$7),{},{map:w}));return a&&ie.setPath(a),typeof i<"u"&&ie.setVisible(i),typeof n<"u"&&ie.setEditable(n),typeof s<"u"&&ie.setDraggable(s),o&&b(google.maps.event.addListener(ie,"dblclick",o)),l&&j(google.maps.event.addListener(ie,"dragend",l)),c&&R(google.maps.event.addListener(ie,"dragstart",c)),u&&A(google.maps.event.addListener(ie,"mousedown",u)),d&&$(google.maps.event.addListener(ie,"mousemove",d)),m&&B(google.maps.event.addListener(ie,"mouseout",m)),p&&K(google.maps.event.addListener(ie,"mouseover",p)),f&&M(google.maps.event.addListener(ie,"mouseup",f)),x&&W(google.maps.event.addListener(ie,"rightclick",x)),S&&G(google.maps.event.addListener(ie,"click",S)),k&&te(google.maps.event.addListener(ie,"drag",k)),T(ie),v&&v(ie),()=>{P!==null&&google.maps.event.removeListener(P),y!==null&&google.maps.event.removeListener(y),C!==null&&google.maps.event.removeListener(C),D!==null&&google.maps.event.removeListener(D),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),O!==null&&google.maps.event.removeListener(O),z!==null&&google.maps.event.removeListener(z),U!==null&&google.maps.event.removeListener(U),Z!==null&&google.maps.event.removeListener(Z),_&&_(ie),ie.setMap(null)}},[]),null}g.memo(H7);class K7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{polyline:null}),Q(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(Gh(Gh({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:M1,eventMap:L1,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:M1,eventMap:L1,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),Ae(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}Q(K7,"contextType",we);function O1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function V1(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?O1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):O1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var z1={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},B1={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function G7(t){var{options:e,draggable:s,editable:n,visible:i,path:a,paths:o,onDblClick:l,onDragEnd:c,onDragStart:u,onMouseDown:d,onMouseMove:m,onMouseOut:p,onMouseOver:f,onMouseUp:x,onRightClick:S,onClick:k,onDrag:v,onLoad:_,onUnmount:w,onEdit:E}=t,T=g.useContext(we),[P,b]=g.useState(null),[y,j]=g.useState(null),[C,R]=g.useState(null),[D,A]=g.useState(null),[V,$]=g.useState(null),[Y,B]=g.useState(null),[O,K]=g.useState(null),[z,M]=g.useState(null),[U,W]=g.useState(null),[Z,G]=g.useState(null),[ne,te]=g.useState(null),[ie,Re]=g.useState(null);return g.useEffect(()=>{P!==null&&P.setMap(T)},[T]),g.useEffect(()=>{typeof e<"u"&&P!==null&&P.setOptions(e)},[P,e]),g.useEffect(()=>{typeof s<"u"&&P!==null&&P.setDraggable(s)},[P,s]),g.useEffect(()=>{typeof n<"u"&&P!==null&&P.setEditable(n)},[P,n]),g.useEffect(()=>{typeof i<"u"&&P!==null&&P.setVisible(i)},[P,i]),g.useEffect(()=>{typeof a<"u"&&P!==null&&P.setPath(a)},[P,a]),g.useEffect(()=>{typeof o<"u"&&P!==null&&P.setPaths(o)},[P,o]),g.useEffect(()=>{P&&typeof l=="function"&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(P,"dblclick",l)))},[l]),g.useEffect(()=>{P&&(google.maps.event.addListener(P.getPath(),"insert_at",()=>{E==null||E(P)}),google.maps.event.addListener(P.getPath(),"set_at",()=>{E==null||E(P)}),google.maps.event.addListener(P.getPath(),"remove_at",()=>{E==null||E(P)}))},[P,E]),g.useEffect(()=>{P&&typeof c=="function"&&(C!==null&&google.maps.event.removeListener(C),R(google.maps.event.addListener(P,"dragend",c)))},[c]),g.useEffect(()=>{P&&typeof u=="function"&&(D!==null&&google.maps.event.removeListener(D),A(google.maps.event.addListener(P,"dragstart",u)))},[u]),g.useEffect(()=>{P&&typeof d=="function"&&(V!==null&&google.maps.event.removeListener(V),$(google.maps.event.addListener(P,"mousedown",d)))},[d]),g.useEffect(()=>{P&&typeof m=="function"&&(Y!==null&&google.maps.event.removeListener(Y),B(google.maps.event.addListener(P,"mousemove",m)))},[m]),g.useEffect(()=>{P&&typeof p=="function"&&(O!==null&&google.maps.event.removeListener(O),K(google.maps.event.addListener(P,"mouseout",p)))},[p]),g.useEffect(()=>{P&&typeof f=="function"&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(P,"mouseover",f)))},[f]),g.useEffect(()=>{P&&typeof x=="function"&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(P,"mouseup",x)))},[x]),g.useEffect(()=>{P&&typeof S=="function"&&(Z!==null&&google.maps.event.removeListener(Z),G(google.maps.event.addListener(P,"rightclick",S)))},[S]),g.useEffect(()=>{P&&typeof k=="function"&&(ne!==null&&google.maps.event.removeListener(ne),te(google.maps.event.addListener(P,"click",k)))},[k]),g.useEffect(()=>{P&&typeof v=="function"&&(ie!==null&&google.maps.event.removeListener(ie),Re(google.maps.event.addListener(P,"drag",v)))},[v]),g.useEffect(()=>{var he=new google.maps.Polygon(V1(V1({},e),{},{map:T}));return a&&he.setPath(a),o&&he.setPaths(o),typeof i<"u"&&he.setVisible(i),typeof n<"u"&&he.setEditable(n),typeof s<"u"&&he.setDraggable(s),l&&j(google.maps.event.addListener(he,"dblclick",l)),c&&R(google.maps.event.addListener(he,"dragend",c)),u&&A(google.maps.event.addListener(he,"dragstart",u)),d&&$(google.maps.event.addListener(he,"mousedown",d)),m&&B(google.maps.event.addListener(he,"mousemove",m)),p&&K(google.maps.event.addListener(he,"mouseout",p)),f&&M(google.maps.event.addListener(he,"mouseover",f)),x&&W(google.maps.event.addListener(he,"mouseup",x)),S&&G(google.maps.event.addListener(he,"rightclick",S)),k&&te(google.maps.event.addListener(he,"click",k)),v&&Re(google.maps.event.addListener(he,"drag",v)),b(he),_&&_(he),()=>{y!==null&&google.maps.event.removeListener(y),C!==null&&google.maps.event.removeListener(C),D!==null&&google.maps.event.removeListener(D),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),O!==null&&google.maps.event.removeListener(O),z!==null&&google.maps.event.removeListener(z),U!==null&&google.maps.event.removeListener(U),Z!==null&&google.maps.event.removeListener(Z),ne!==null&&google.maps.event.removeListener(ne),w&&w(he),he.setMap(null)}},[]),null}g.memo(G7);class W7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Se({updaterMap:B1,eventMap:z1,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:B1,eventMap:z1,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),Ae(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}Q(W7,"contextType",we);function U1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Wh(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?U1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):U1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var F1={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},$1={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function q7(t){var{options:e,bounds:s,draggable:n,editable:i,visible:a,onDblClick:o,onDragEnd:l,onDragStart:c,onMouseDown:u,onMouseMove:d,onMouseOut:m,onMouseOver:p,onMouseUp:f,onRightClick:x,onClick:S,onDrag:k,onBoundsChanged:v,onLoad:_,onUnmount:w}=t,E=g.useContext(we),[T,P]=g.useState(null),[b,y]=g.useState(null),[j,C]=g.useState(null),[R,D]=g.useState(null),[A,V]=g.useState(null),[$,Y]=g.useState(null),[B,O]=g.useState(null),[K,z]=g.useState(null),[M,U]=g.useState(null),[W,Z]=g.useState(null),[G,ne]=g.useState(null),[te,ie]=g.useState(null),[Re,he]=g.useState(null);return g.useEffect(()=>{T!==null&&T.setMap(E)},[E]),g.useEffect(()=>{typeof e<"u"&&T!==null&&T.setOptions(e)},[T,e]),g.useEffect(()=>{typeof n<"u"&&T!==null&&T.setDraggable(n)},[T,n]),g.useEffect(()=>{typeof i<"u"&&T!==null&&T.setEditable(i)},[T,i]),g.useEffect(()=>{typeof a<"u"&&T!==null&&T.setVisible(a)},[T,a]),g.useEffect(()=>{typeof s<"u"&&T!==null&&T.setBounds(s)},[T,s]),g.useEffect(()=>{T&&o&&(b!==null&&google.maps.event.removeListener(b),y(google.maps.event.addListener(T,"dblclick",o)))},[o]),g.useEffect(()=>{T&&l&&(j!==null&&google.maps.event.removeListener(j),C(google.maps.event.addListener(T,"dragend",l)))},[l]),g.useEffect(()=>{T&&c&&(R!==null&&google.maps.event.removeListener(R),D(google.maps.event.addListener(T,"dragstart",c)))},[c]),g.useEffect(()=>{T&&u&&(A!==null&&google.maps.event.removeListener(A),V(google.maps.event.addListener(T,"mousedown",u)))},[u]),g.useEffect(()=>{T&&d&&($!==null&&google.maps.event.removeListener($),Y(google.maps.event.addListener(T,"mousemove",d)))},[d]),g.useEffect(()=>{T&&m&&(B!==null&&google.maps.event.removeListener(B),O(google.maps.event.addListener(T,"mouseout",m)))},[m]),g.useEffect(()=>{T&&p&&(K!==null&&google.maps.event.removeListener(K),z(google.maps.event.addListener(T,"mouseover",p)))},[p]),g.useEffect(()=>{T&&f&&(M!==null&&google.maps.event.removeListener(M),U(google.maps.event.addListener(T,"mouseup",f)))},[f]),g.useEffect(()=>{T&&x&&(W!==null&&google.maps.event.removeListener(W),Z(google.maps.event.addListener(T,"rightclick",x)))},[x]),g.useEffect(()=>{T&&S&&(G!==null&&google.maps.event.removeListener(G),ne(google.maps.event.addListener(T,"click",S)))},[S]),g.useEffect(()=>{T&&k&&(te!==null&&google.maps.event.removeListener(te),ie(google.maps.event.addListener(T,"drag",k)))},[k]),g.useEffect(()=>{T&&v&&(Re!==null&&google.maps.event.removeListener(Re),he(google.maps.event.addListener(T,"bounds_changed",v)))},[v]),g.useEffect(()=>{var be=new google.maps.Rectangle(Wh(Wh({},e),{},{map:E}));return typeof a<"u"&&be.setVisible(a),typeof i<"u"&&be.setEditable(i),typeof n<"u"&&be.setDraggable(n),typeof s<"u"&&be.setBounds(s),o&&y(google.maps.event.addListener(be,"dblclick",o)),l&&C(google.maps.event.addListener(be,"dragend",l)),c&&D(google.maps.event.addListener(be,"dragstart",c)),u&&V(google.maps.event.addListener(be,"mousedown",u)),d&&Y(google.maps.event.addListener(be,"mousemove",d)),m&&O(google.maps.event.addListener(be,"mouseout",m)),p&&z(google.maps.event.addListener(be,"mouseover",p)),f&&U(google.maps.event.addListener(be,"mouseup",f)),x&&Z(google.maps.event.addListener(be,"rightclick",x)),S&&ne(google.maps.event.addListener(be,"click",S)),k&&ie(google.maps.event.addListener(be,"drag",k)),v&&he(google.maps.event.addListener(be,"bounds_changed",v)),P(be),_&&_(be),()=>{b!==null&&google.maps.event.removeListener(b),j!==null&&google.maps.event.removeListener(j),R!==null&&google.maps.event.removeListener(R),A!==null&&google.maps.event.removeListener(A),$!==null&&google.maps.event.removeListener($),B!==null&&google.maps.event.removeListener(B),K!==null&&google.maps.event.removeListener(K),M!==null&&google.maps.event.removeListener(M),W!==null&&google.maps.event.removeListener(W),G!==null&&google.maps.event.removeListener(G),te!==null&&google.maps.event.removeListener(te),Re!==null&&google.maps.event.removeListener(Re),w&&w(be),be.setMap(null)}},[]),null}g.memo(q7);class Y7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{rectangle:null}),Q(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(Wh(Wh({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:$1,eventMap:F1,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:$1,eventMap:F1,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),Ae(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}Q(Y7,"contextType",we);function H1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function qh(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?H1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):H1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var K1={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},G1={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},Q7={};function X7(t){var{options:e,center:s,radius:n,draggable:i,editable:a,visible:o,onDblClick:l,onDragEnd:c,onDragStart:u,onMouseDown:d,onMouseMove:m,onMouseOut:p,onMouseOver:f,onMouseUp:x,onRightClick:S,onClick:k,onDrag:v,onCenterChanged:_,onRadiusChanged:w,onLoad:E,onUnmount:T}=t,P=g.useContext(we),[b,y]=g.useState(null),[j,C]=g.useState(null),[R,D]=g.useState(null),[A,V]=g.useState(null),[$,Y]=g.useState(null),[B,O]=g.useState(null),[K,z]=g.useState(null),[M,U]=g.useState(null),[W,Z]=g.useState(null),[G,ne]=g.useState(null),[te,ie]=g.useState(null),[Re,he]=g.useState(null),[be,Tt]=g.useState(null),[vs,Dn]=g.useState(null);return g.useEffect(()=>{b!==null&&b.setMap(P)},[P]),g.useEffect(()=>{typeof e<"u"&&b!==null&&b.setOptions(e)},[b,e]),g.useEffect(()=>{typeof i<"u"&&b!==null&&b.setDraggable(i)},[b,i]),g.useEffect(()=>{typeof a<"u"&&b!==null&&b.setEditable(a)},[b,a]),g.useEffect(()=>{typeof o<"u"&&b!==null&&b.setVisible(o)},[b,o]),g.useEffect(()=>{typeof n=="number"&&b!==null&&b.setRadius(n)},[b,n]),g.useEffect(()=>{typeof s<"u"&&b!==null&&b.setCenter(s)},[b,s]),g.useEffect(()=>{b&&l&&(j!==null&&google.maps.event.removeListener(j),C(google.maps.event.addListener(b,"dblclick",l)))},[l]),g.useEffect(()=>{b&&c&&(R!==null&&google.maps.event.removeListener(R),D(google.maps.event.addListener(b,"dragend",c)))},[c]),g.useEffect(()=>{b&&u&&(A!==null&&google.maps.event.removeListener(A),V(google.maps.event.addListener(b,"dragstart",u)))},[u]),g.useEffect(()=>{b&&d&&($!==null&&google.maps.event.removeListener($),Y(google.maps.event.addListener(b,"mousedown",d)))},[d]),g.useEffect(()=>{b&&m&&(B!==null&&google.maps.event.removeListener(B),O(google.maps.event.addListener(b,"mousemove",m)))},[m]),g.useEffect(()=>{b&&p&&(K!==null&&google.maps.event.removeListener(K),z(google.maps.event.addListener(b,"mouseout",p)))},[p]),g.useEffect(()=>{b&&f&&(M!==null&&google.maps.event.removeListener(M),U(google.maps.event.addListener(b,"mouseover",f)))},[f]),g.useEffect(()=>{b&&x&&(W!==null&&google.maps.event.removeListener(W),Z(google.maps.event.addListener(b,"mouseup",x)))},[x]),g.useEffect(()=>{b&&S&&(G!==null&&google.maps.event.removeListener(G),ne(google.maps.event.addListener(b,"rightclick",S)))},[S]),g.useEffect(()=>{b&&k&&(te!==null&&google.maps.event.removeListener(te),ie(google.maps.event.addListener(b,"click",k)))},[k]),g.useEffect(()=>{b&&v&&(Re!==null&&google.maps.event.removeListener(Re),he(google.maps.event.addListener(b,"drag",v)))},[v]),g.useEffect(()=>{b&&_&&(be!==null&&google.maps.event.removeListener(be),Tt(google.maps.event.addListener(b,"center_changed",_)))},[k]),g.useEffect(()=>{b&&w&&(vs!==null&&google.maps.event.removeListener(vs),Dn(google.maps.event.addListener(b,"radius_changed",w)))},[w]),g.useEffect(()=>{var Le=new google.maps.Circle(qh(qh({},e||Q7),{},{map:P}));return typeof n=="number"&&Le.setRadius(n),typeof s<"u"&&Le.setCenter(s),typeof n=="number"&&Le.setRadius(n),typeof o<"u"&&Le.setVisible(o),typeof a<"u"&&Le.setEditable(a),typeof i<"u"&&Le.setDraggable(i),l&&C(google.maps.event.addListener(Le,"dblclick",l)),c&&D(google.maps.event.addListener(Le,"dragend",c)),u&&V(google.maps.event.addListener(Le,"dragstart",u)),d&&Y(google.maps.event.addListener(Le,"mousedown",d)),m&&O(google.maps.event.addListener(Le,"mousemove",m)),p&&z(google.maps.event.addListener(Le,"mouseout",p)),f&&U(google.maps.event.addListener(Le,"mouseover",f)),x&&Z(google.maps.event.addListener(Le,"mouseup",x)),S&&ne(google.maps.event.addListener(Le,"rightclick",S)),k&&ie(google.maps.event.addListener(Le,"click",k)),v&&he(google.maps.event.addListener(Le,"drag",v)),_&&Tt(google.maps.event.addListener(Le,"center_changed",_)),w&&Dn(google.maps.event.addListener(Le,"radius_changed",w)),y(Le),E&&E(Le),()=>{j!==null&&google.maps.event.removeListener(j),R!==null&&google.maps.event.removeListener(R),A!==null&&google.maps.event.removeListener(A),$!==null&&google.maps.event.removeListener($),B!==null&&google.maps.event.removeListener(B),K!==null&&google.maps.event.removeListener(K),M!==null&&google.maps.event.removeListener(M),W!==null&&google.maps.event.removeListener(W),G!==null&&google.maps.event.removeListener(G),te!==null&&google.maps.event.removeListener(te),be!==null&&google.maps.event.removeListener(be),vs!==null&&google.maps.event.removeListener(vs),T&&T(Le),Le.setMap(null)}},[]),null}g.memo(X7);class Z7 extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{circle:null}),Q(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(qh(qh({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:G1,eventMap:K1,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:G1,eventMap:K1,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),Ae(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}Q(Z7,"contextType",we);function W1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Yh(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?W1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):W1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var q1={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},Y1={add(t,e){t.add(e)},addgeojson(t,e,s){t.addGeoJson(e,s)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,s,n){t.loadGeoJson(e,s,n)},overridestyle(t,e,s){t.overrideStyle(e,s)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function J7(t){var{options:e,onClick:s,onDblClick:n,onMouseDown:i,onMouseMove:a,onMouseOut:o,onMouseOver:l,onMouseUp:c,onRightClick:u,onAddFeature:d,onRemoveFeature:m,onRemoveProperty:p,onSetGeometry:f,onSetProperty:x,onLoad:S,onUnmount:k}=t,v=g.useContext(we),[_,w]=g.useState(null),[E,T]=g.useState(null),[P,b]=g.useState(null),[y,j]=g.useState(null),[C,R]=g.useState(null),[D,A]=g.useState(null),[V,$]=g.useState(null),[Y,B]=g.useState(null),[O,K]=g.useState(null),[z,M]=g.useState(null),[U,W]=g.useState(null),[Z,G]=g.useState(null),[ne,te]=g.useState(null),[ie,Re]=g.useState(null);return g.useEffect(()=>{_!==null&&_.setMap(v)},[v]),g.useEffect(()=>{_&&n&&(E!==null&&google.maps.event.removeListener(E),T(google.maps.event.addListener(_,"dblclick",n)))},[n]),g.useEffect(()=>{_&&i&&(P!==null&&google.maps.event.removeListener(P),b(google.maps.event.addListener(_,"mousedown",i)))},[i]),g.useEffect(()=>{_&&a&&(y!==null&&google.maps.event.removeListener(y),j(google.maps.event.addListener(_,"mousemove",a)))},[a]),g.useEffect(()=>{_&&o&&(C!==null&&google.maps.event.removeListener(C),R(google.maps.event.addListener(_,"mouseout",o)))},[o]),g.useEffect(()=>{_&&l&&(D!==null&&google.maps.event.removeListener(D),A(google.maps.event.addListener(_,"mouseover",l)))},[l]),g.useEffect(()=>{_&&c&&(V!==null&&google.maps.event.removeListener(V),$(google.maps.event.addListener(_,"mouseup",c)))},[c]),g.useEffect(()=>{_&&u&&(Y!==null&&google.maps.event.removeListener(Y),B(google.maps.event.addListener(_,"rightclick",u)))},[u]),g.useEffect(()=>{_&&s&&(O!==null&&google.maps.event.removeListener(O),K(google.maps.event.addListener(_,"click",s)))},[s]),g.useEffect(()=>{_&&d&&(z!==null&&google.maps.event.removeListener(z),M(google.maps.event.addListener(_,"addfeature",d)))},[d]),g.useEffect(()=>{_&&m&&(U!==null&&google.maps.event.removeListener(U),W(google.maps.event.addListener(_,"removefeature",m)))},[m]),g.useEffect(()=>{_&&p&&(Z!==null&&google.maps.event.removeListener(Z),G(google.maps.event.addListener(_,"removeproperty",p)))},[p]),g.useEffect(()=>{_&&f&&(ne!==null&&google.maps.event.removeListener(ne),te(google.maps.event.addListener(_,"setgeometry",f)))},[f]),g.useEffect(()=>{_&&x&&(ie!==null&&google.maps.event.removeListener(ie),Re(google.maps.event.addListener(_,"setproperty",x)))},[x]),g.useEffect(()=>{if(v!==null){var he=new google.maps.Data(Yh(Yh({},e),{},{map:v}));n&&T(google.maps.event.addListener(he,"dblclick",n)),i&&b(google.maps.event.addListener(he,"mousedown",i)),a&&j(google.maps.event.addListener(he,"mousemove",a)),o&&R(google.maps.event.addListener(he,"mouseout",o)),l&&A(google.maps.event.addListener(he,"mouseover",l)),c&&$(google.maps.event.addListener(he,"mouseup",c)),u&&B(google.maps.event.addListener(he,"rightclick",u)),s&&K(google.maps.event.addListener(he,"click",s)),d&&M(google.maps.event.addListener(he,"addfeature",d)),m&&W(google.maps.event.addListener(he,"removefeature",m)),p&&G(google.maps.event.addListener(he,"removeproperty",p)),f&&te(google.maps.event.addListener(he,"setgeometry",f)),x&&Re(google.maps.event.addListener(he,"setproperty",x)),w(he),S&&S(he)}return()=>{_&&(E!==null&&google.maps.event.removeListener(E),P!==null&&google.maps.event.removeListener(P),y!==null&&google.maps.event.removeListener(y),C!==null&&google.maps.event.removeListener(C),D!==null&&google.maps.event.removeListener(D),V!==null&&google.maps.event.removeListener(V),Y!==null&&google.maps.event.removeListener(Y),O!==null&&google.maps.event.removeListener(O),z!==null&&google.maps.event.removeListener(z),U!==null&&google.maps.event.removeListener(U),Z!==null&&google.maps.event.removeListener(Z),ne!==null&&google.maps.event.removeListener(ne),ie!==null&&google.maps.event.removeListener(ie),k&&k(_),_.setMap(null))}},[]),null}g.memo(J7);class e$ extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{data:null}),Q(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(Yh(Yh({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:Y1,eventMap:q1,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:Y1,eventMap:q1,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),Ae(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}Q(e$,"contextType",we);function Q1(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function X1(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Q1(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Q1(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var Z1={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},J1={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class t$ extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{kmlLayer:null}),Q(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(X1(X1({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:J1,eventMap:Z1,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:J1,eventMap:Z1,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),Ae(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}Q(t$,"contextType",we);function bI(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function s$(t,e){return new e(t.lat,t.lng)}function n$(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function r$(t,e,s){return t instanceof e?t:s(t,e)}function i$(t,e,s){return t instanceof e?t:s(t,e)}function a$(t,e,s){var n=t&&t.fromLatLngToDivPixel(s.getNorthEast()),i=t&&t.fromLatLngToDivPixel(s.getSouthWest());return n&&i?{left:"".concat(i.x+e.x,"px"),top:"".concat(n.y+e.y,"px"),width:"".concat(n.x-i.x-e.x,"px"),height:"".concat(i.y-n.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function o$(t,e,s){var n=t&&t.fromLatLngToDivPixel(s);if(n){var{x:i,y:a}=n;return{left:"".concat(i+e.x,"px"),top:"".concat(a+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function wI(t,e,s,n){return s!==void 0?a$(t,e,i$(s,google.maps.LatLngBounds,n$)):o$(t,e,r$(n,google.maps.LatLng,s$))}function l$(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function eE(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function c$(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?eE(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):eE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function u$(t,e,s,n,i){class a extends google.maps.OverlayView{constructor(l,c,u,d){super(),this.container=l,this.pane=c,this.position=u,this.bounds=d}onAdd(){var l,c=(l=this.getPanes())===null||l===void 0?void 0:l[this.pane];c==null||c.appendChild(this.container)}draw(){var l=this.getProjection(),c=c$({},this.container?bI(this.container,i):{x:0,y:0}),u=wI(l,c,this.bounds,this.position);for(var[d,m]of Object.entries(u))this.container.style[d]=m}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new a(t,e,s,n)}function tE(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function d$(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?tE(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):tE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function sE(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function nE(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function h$(t){var{position:e,bounds:s,mapPaneName:n,zIndex:i,onLoad:a,onUnmount:o,getPixelPositionOffset:l,children:c}=t,u=g.useContext(we),d=g.useMemo(()=>{var p=document.createElement("div");return p.style.position="absolute",p},[]),m=g.useMemo(()=>u$(d,n,e,s,l),[d,n,e,s]);return g.useEffect(()=>(a==null||a(m),m==null||m.setMap(u),()=>{o==null||o(m),m==null||m.setMap(null)}),[u,m]),g.useEffect(()=>{d.style.zIndex="".concat(i)},[i,d]),va.createPortal(c,d)}g.memo(h$);class el extends g.PureComponent{constructor(e){super(e),Q(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),Q(this,"updatePane",()=>{var n=this.props.mapPaneName,i=this.overlayView.getPanes();St(!!n,"OverlayView requires props.mapPaneName but got %s",n),i?this.setState({paneEl:i[n]}):this.setState({paneEl:null})}),Q(this,"onAdd",()=>{var n,i;this.updatePane(),(n=(i=this.props).onLoad)===null||n===void 0||n.call(i,this.overlayView)}),Q(this,"onPositionElement",()=>{var n=this.overlayView.getProjection(),i=d$({x:0,y:0},this.containerRef.current?bI(this.containerRef.current,this.props.getPixelPositionOffset):{}),a=wI(n,i,this.props.bounds,this.props.position);if(!l$(a,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var o,l,c,u;this.setState({containerStyle:{top:(o=a.top)!==null&&o!==void 0?o:0,left:(l=a.left)!==null&&l!==void 0?l:0,width:(c=a.width)!==null&&c!==void 0?c:0,height:(u=a.height)!==null&&u!==void 0?u:0,position:"absolute"}})}}),Q(this,"draw",()=>{this.onPositionElement()}),Q(this,"onRemove",()=>{var n,i;this.setState(()=>({paneEl:null})),(n=(i=this.props).onUnmount)===null||n===void 0||n.call(i,this.overlayView)}),this.containerRef=g.createRef();var s=new google.maps.OverlayView;s.onAdd=this.onAdd,s.draw=this.draw,s.onRemove=this.onRemove,this.overlayView=s}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var s=sE(e.position),n=sE(this.props.position),i=nE(e.bounds),a=nE(this.props.bounds);(s!==n||i!==a)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?va.createPortal(r.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:g.Children.only(this.props.children)}),e):null}}Q(el,"FLOAT_PANE","floatPane");Q(el,"MAP_PANE","mapPane");Q(el,"MARKER_LAYER","markerLayer");Q(el,"OVERLAY_LAYER","overlayLayer");Q(el,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");Q(el,"contextType",we);function m$(){}function rE(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function iE(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?rE(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):rE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var aE={onDblClick:"dblclick",onClick:"click"},oE={opacity(t,e){t.setOpacity(e)}};function f$(t){var{url:e,bounds:s,options:n,visible:i}=t,a=g.useContext(we),o=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east)),l=g.useMemo(()=>new google.maps.GroundOverlay(e,o,n),[]);return g.useEffect(()=>{l!==null&&l.setMap(a)},[a]),g.useEffect(()=>{typeof e<"u"&&l!==null&&(l.set("url",e),l.setMap(a))},[l,e]),g.useEffect(()=>{typeof i<"u"&&l!==null&&l.setOpacity(i?1:0)},[l,i]),g.useEffect(()=>{var c=new google.maps.LatLngBounds(new google.maps.LatLng(s.south,s.west),new google.maps.LatLng(s.north,s.east));typeof s<"u"&&l!==null&&(l.set("bounds",c),l.setMap(a))},[l,s]),null}g.memo(f$);class NI extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{groundOverlay:null}),Q(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){St(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,iE(iE({},this.props.options),{},{map:this.context}));this.registeredEvents=Se({updaterMap:oE,eventMap:aE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:oE,eventMap:aE,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Q(NI,"defaultProps",{onLoad:m$});Q(NI,"contextType",we);function lE(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Qh(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?lE(Object(s),!0).forEach(function(n){Q(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):lE(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}var cE={},uE={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function p$(t){var{data:e,onLoad:s,onUnmount:n,options:i}=t,a=g.useContext(we),[o,l]=g.useState(null);return g.useEffect(()=>{google.maps.visualization||St(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),g.useEffect(()=>{St(!!e,"data property is required in HeatmapLayer %s",e)},[e]),g.useEffect(()=>{o!==null&&o.setMap(a)},[a]),g.useEffect(()=>{i&&o!==null&&o.setOptions(i)},[o,i]),g.useEffect(()=>{var c=new google.maps.visualization.HeatmapLayer(Qh(Qh({},i),{},{data:e,map:a}));return l(c),s&&s(c),()=>{o!==null&&(n&&n(o),o.setMap(null))}},[]),null}g.memo(p$);class g$ extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{heatmapLayer:null}),Q(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){St(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),St(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Qh(Qh({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Se({updaterMap:uE,eventMap:cE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:uE,eventMap:cE,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),Ae(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}Q(g$,"contextType",we);var dE={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},hE={register(t,e,s){t.registerPanoProvider(e,s)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class x$ extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{streetViewPanorama:null}),Q(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,s,n=(e=(s=this.context)===null||s===void 0?void 0:s.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Se({updaterMap:hE,eventMap:dE,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({streetViewPanorama:n}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:hE,eventMap:dE,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),Ae(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}Q(x$,"contextType",we);class y$ extends g.PureComponent{constructor(){super(...arguments),Q(this,"state",{streetViewService:null}),Q(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}Q(y$,"contextType",we);var mE={onDirectionsChanged:"directions_changed"},fE={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class v$ extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"state",{directionsRenderer:null}),Q(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Se({updaterMap:fE,eventMap:mE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:fE,eventMap:mE,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),Ae(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}Q(v$,"contextType",we);var pE={onPlacesChanged:"places_changed"},gE={bounds(t,e){t.setBounds(e)}};class b$ extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",g.createRef()),Q(this,"state",{searchBox:null}),Q(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(St(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var s=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Se({updaterMap:gE,eventMap:pE,prevProps:{},nextProps:this.props,instance:s}),this.setState(function(){return{searchBox:s}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:gE,eventMap:pE,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),Ae(this.registeredEvents))}render(){return r.jsx("div",{ref:this.containerElement,children:g.Children.only(this.props.children)})}}Q(b$,"contextType",we);var xE={onPlaceChanged:"place_changed"},yE={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class Xh extends g.PureComponent{constructor(){super(...arguments),Q(this,"registeredEvents",[]),Q(this,"containerElement",g.createRef()),Q(this,"state",{autocomplete:null}),Q(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;St(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var s=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(s){var n=new google.maps.places.Autocomplete(s,this.props.options);this.registeredEvents=Se({updaterMap:yE,eventMap:xE,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({autocomplete:n}),this.setAutocompleteCallback)}}componentDidUpdate(e){Ae(this.registeredEvents),this.registeredEvents=Se({updaterMap:yE,eventMap:xE,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&Ae(this.registeredEvents)}render(){return r.jsx("div",{ref:this.containerElement,className:this.props.className,children:g.Children.only(this.props.children)})}}Q(Xh,"defaultProps",{className:""});Q(Xh,"contextType",we);const w$=["places"],N$=({onClose:t,onSubmit:e})=>{const[s,n]=g.useState({customerInfo:{firstName:"",lastName:"",phone:"",email:""},tripDetails:{date:"",time:"",pickupLocation:"",dropoffLocation:"Antalya Havalimanı",passengerCount:1,luggageCount:0,flightNumber:""},transferDirection:"to_airport",paymentMethod:"cash",totalPrice:0}),[i,a]=g.useState({}),[o,l]=g.useState(!1),[c,u]=g.useState(null),[d,m]=g.useState(null),{isLoaded:p}=fI({googleMapsApiKey:"AIzaSyDa66vbuMgm_L4wdOgPutliu_PLzI3xqEw",libraries:w$}),f=(E,T,P)=>{n(b=>({...b,[E]:{...b[E],[T]:P}})),i[`${E}.${T}`]&&a(b=>{const y={...b};return delete y[`${E}.${T}`],y})},x=E=>{u(E)},S=E=>{m(E)},k=()=>{if(c!==null){const E=c.getPlace();n(T=>({...T,tripDetails:{...T.tripDetails,pickupLocation:E.formatted_address}}))}},v=()=>{if(d!==null){const E=d.getPlace();n(T=>({...T,tripDetails:{...T.tripDetails,dropoffLocation:E.formatted_address}}))}},_=()=>{const E={};return s.customerInfo.firstName.trim()||(E["customerInfo.firstName"]="Ad zorunludur"),s.customerInfo.lastName.trim()||(E["customerInfo.lastName"]="Soyad zorunludur"),s.customerInfo.phone.trim()||(E["customerInfo.phone"]="Telefon zorunludur"),s.customerInfo.email.trim()||(E["customerInfo.email"]="E-posta zorunludur"),s.tripDetails.date||(E["tripDetails.date"]="Tarih zorunludur"),s.tripDetails.time||(E["tripDetails.time"]="Saat zorunludur"),s.tripDetails.pickupLocation.trim()||(E["tripDetails.pickupLocation"]="Kalkış noktası zorunludur"),s.tripDetails.dropoffLocation.trim()||(E["tripDetails.dropoffLocation"]="Varış noktası zorunludur"),a(E),Object.keys(E).length===0},w=async E=>{if(E.preventDefault(),!!_()){l(!0);try{const P=Math.random()*50+10,b=Math.round(100+P*2),y={...s,totalPrice:b,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await e(y)}catch(T){console.error("Rezervasyon ekleme hatası:",T)}finally{l(!1)}}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Hızlı Rezervasyon Ekle"}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:w,className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Fe,{className:"w-5 h-5 text-blue-600"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Müşteri Bilgileri"})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),r.jsx("input",{type:"text",value:s.customerInfo.firstName,onChange:E=>f("customerInfo","firstName",E.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["customerInfo.firstName"]?"border-red-500":"border-gray-300"}`,placeholder:"Müşteri adı"}),i["customerInfo.firstName"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:i["customerInfo.firstName"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),r.jsx("input",{type:"text",value:s.customerInfo.lastName,onChange:E=>f("customerInfo","lastName",E.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["customerInfo.lastName"]?"border-red-500":"border-gray-300"}`,placeholder:"Müşteri soyadı"}),i["customerInfo.lastName"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:i["customerInfo.lastName"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),r.jsx("input",{type:"tel",value:s.customerInfo.phone,onChange:E=>f("customerInfo","phone",E.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["customerInfo.phone"]?"border-red-500":"border-gray-300"}`,placeholder:"+90 555 123 45 67"}),i["customerInfo.phone"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:i["customerInfo.phone"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),r.jsx("input",{type:"email",value:s.customerInfo.email,onChange:E=>f("customerInfo","email",E.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["customerInfo.email"]?"border-red-500":"border-gray-300"}`,placeholder:"ornek@email.com"}),i["customerInfo.email"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:i["customerInfo.email"]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Ke,{className:"w-5 h-5 text-green-600"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Seyahat Bilgileri"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarih *"}),r.jsx("input",{type:"date",value:s.tripDetails.date,onChange:E=>f("tripDetails","date",E.target.value),min:new Date().toISOString().split("T")[0],className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["tripDetails.date"]?"border-red-500":"border-gray-300"}`}),i["tripDetails.date"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:i["tripDetails.date"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saat *"}),r.jsx("input",{type:"time",value:s.tripDetails.time,onChange:E=>f("tripDetails","time",E.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["tripDetails.time"]?"border-red-500":"border-gray-300"}`}),i["tripDetails.time"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:i["tripDetails.time"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Yönü *"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${s.transferDirection==="to_airport"?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"transferDirection",value:"to_airport",checked:s.transferDirection==="to_airport",onChange:E=>{n(T=>({...T,transferDirection:E.target.value,tripDetails:{...T.tripDetails,pickupLocation:"",dropoffLocation:"Antalya Havalimanı"}}))},className:"mr-2"}),r.jsx("span",{className:"text-sm font-medium",children:"Otelden Havalimanına"})]}),r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${s.transferDirection==="from_airport"?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[r.jsx("input",{type:"radio",name:"transferDirection",value:"from_airport",checked:s.transferDirection==="from_airport",onChange:E=>{n(T=>({...T,transferDirection:E.target.value,tripDetails:{...T.tripDetails,pickupLocation:"Antalya Havalimanı",dropoffLocation:""}}))},className:"mr-2"}),r.jsx("span",{className:"text-sm font-medium",children:"Havalimanından Otele"})]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s.transferDirection==="to_airport"?"Kalkış Noktası (Otel)":"Varış Noktası (Otel)"," *"]}),p?r.jsxs("div",{className:"relative",children:[s.transferDirection==="to_airport"?r.jsx(Xh,{onLoad:x,onPlaceChanged:k,bounds:{north:36.9081,south:36.8847,east:30.7133,west:30.6694},options:{componentRestrictions:{country:"tr"},fields:["formatted_address","name","geometry"],types:["establishment","geocode"]},children:r.jsx("input",{type:"text",value:s.tripDetails.pickupLocation,onChange:E=>f("tripDetails","pickupLocation",E.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["tripDetails.pickupLocation"]?"border-red-500":"border-gray-300"}`,placeholder:"Otel adı veya adresi yazın..."})}):r.jsx(Xh,{onLoad:S,onPlaceChanged:v,bounds:{north:36.9081,south:36.8847,east:30.7133,west:30.6694},options:{componentRestrictions:{country:"tr"},fields:["formatted_address","name","geometry"],types:["establishment","geocode"]},children:r.jsx("input",{type:"text",value:s.tripDetails.dropoffLocation,onChange:E=>f("tripDetails","dropoffLocation",E.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i["tripDetails.dropoffLocation"]?"border-red-500":"border-gray-300"}`,placeholder:"Otel adı veya adresi yazın..."})}),r.jsx(Ke,{className:"absolute right-3 top-3 w-4 h-4 text-gray-400"})]}):r.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:"Google Maps yükleniyor..."}),(i["tripDetails.pickupLocation"]||i["tripDetails.dropoffLocation"])&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:i["tripDetails.pickupLocation"]||i["tripDetails.dropoffLocation"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yolcu Sayısı"}),r.jsx("input",{type:"number",min:"1",max:"8",value:s.tripDetails.passengerCount,onChange:E=>f("tripDetails","passengerCount",parseInt(E.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bagaj Adedi"}),r.jsx("input",{type:"number",min:"0",max:"10",value:s.tripDetails.luggageCount,onChange:E=>f("tripDetails","luggageCount",parseInt(E.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uçuş No"}),r.jsx("input",{type:"text",value:s.tripDetails.flightNumber,onChange:E=>f("tripDetails","flightNumber",E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"TK123 (opsiyonel)"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx($t,{className:"w-5 h-5 text-purple-600"}),r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Ödeme Yöntemi"})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"cash",label:"Nakit",desc:"Araçta ödeme"},{value:"card",label:"Kredi Kartı",desc:"Online ödeme"},{value:"transfer",label:"Havale",desc:"Banka havalesi"}].map(E=>r.jsxs("label",{className:`flex flex-col p-3 border rounded-lg cursor-pointer transition-colors ${s.paymentMethod===E.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium text-gray-900",children:E.label}),r.jsx("input",{type:"radio",name:"paymentMethod",value:E.value,checked:s.paymentMethod===E.value,onChange:T=>n(P=>({...P,paymentMethod:T.target.value})),className:"text-blue-600"})]}),r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:E.desc})]},E.value))})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),r.jsx("button",{type:"submit",disabled:o,className:"px-8 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Ekleniyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Be,{className:"w-4 h-4"}),"Rezervasyon Ekle"]})})]})]})]})})},j$=({reservation:t,onClose:e,onUpdate:s})=>{const[n,i]=g.useState({customerInfo:{firstName:"",lastName:"",phone:"",email:""},tripDetails:{date:"",time:"",pickupLocation:"",dropoffLocation:"",passengerCount:1,luggageCount:0,flightNumber:""},paymentMethod:"cash",totalPrice:0}),[a,o]=g.useState({}),[l,c]=g.useState(!1),u=["Lara Kundu Otelleri","Kaleici Otelleri","Belek Otelleri","Side Otelleri","Alanya Otelleri","Kemer Otelleri","Antalya Merkez","Kepez","Muratpaşa","Aksu"];g.useEffect(()=>{t&&i({customerInfo:t.customerInfo||{firstName:"",lastName:"",phone:"",email:""},tripDetails:t.tripDetails||{date:"",time:"",pickupLocation:"",dropoffLocation:"",passengerCount:1,luggageCount:0,flightNumber:""},paymentMethod:t.paymentMethod||"cash",totalPrice:t.totalPrice||0})},[t]);const d=(f,x,S)=>{i(k=>({...k,[f]:{...k[f],[x]:S}})),a[`${f}.${x}`]&&o(k=>{const v={...k};return delete v[`${f}.${x}`],v})},m=()=>{const f={};return n.customerInfo.firstName.trim()||(f["customerInfo.firstName"]="Ad zorunludur"),n.customerInfo.lastName.trim()||(f["customerInfo.lastName"]="Soyad zorunludur"),n.customerInfo.phone.trim()||(f["customerInfo.phone"]="Telefon zorunludur"),n.customerInfo.email.trim()||(f["customerInfo.email"]="E-posta zorunludur"),n.tripDetails.date||(f["tripDetails.date"]="Tarih zorunludur"),n.tripDetails.time||(f["tripDetails.time"]="Saat zorunludur"),n.tripDetails.pickupLocation.trim()||(f["tripDetails.pickupLocation"]="Kalkış noktası zorunludur"),n.tripDetails.dropoffLocation.trim()||(f["tripDetails.dropoffLocation"]="Varış noktası zorunludur"),o(f),Object.keys(f).length===0},p=async f=>{if(f.preventDefault(),!!m()){c(!0);try{const x={...t,...n,updatedAt:new Date().toISOString()};await s(x)}catch(x){console.error("Rezervasyon güncelleme hatası:",x),alert("Rezervasyon güncellenirken hata oluştu")}finally{c(!1)}}};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(sf,{className:"w-5 h-5"}),"Rezervasyon Düzenle - ",t.reservationId]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:p,className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Müşteri Bilgileri"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad *"}),r.jsx("input",{type:"text",value:n.customerInfo.firstName,onChange:f=>d("customerInfo","firstName",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["customerInfo.firstName"]?"border-red-500":"border-gray-300"}`}),a["customerInfo.firstName"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["customerInfo.firstName"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Soyad *"}),r.jsx("input",{type:"text",value:n.customerInfo.lastName,onChange:f=>d("customerInfo","lastName",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["customerInfo.lastName"]?"border-red-500":"border-gray-300"}`}),a["customerInfo.lastName"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["customerInfo.lastName"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon *"}),r.jsx("input",{type:"tel",value:n.customerInfo.phone,onChange:f=>d("customerInfo","phone",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["customerInfo.phone"]?"border-red-500":"border-gray-300"}`}),a["customerInfo.phone"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["customerInfo.phone"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta *"}),r.jsx("input",{type:"email",value:n.customerInfo.email,onChange:f=>d("customerInfo","email",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["customerInfo.email"]?"border-red-500":"border-gray-300"}`}),a["customerInfo.email"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["customerInfo.email"]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Seyahat Bilgileri"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarih *"}),r.jsx("input",{type:"date",value:n.tripDetails.date,onChange:f=>d("tripDetails","date",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["tripDetails.date"]?"border-red-500":"border-gray-300"}`}),a["tripDetails.date"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["tripDetails.date"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Saat *"}),r.jsx("input",{type:"time",value:n.tripDetails.time,onChange:f=>d("tripDetails","time",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["tripDetails.time"]?"border-red-500":"border-gray-300"}`}),a["tripDetails.time"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["tripDetails.time"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kalkış Noktası *"}),r.jsxs("select",{value:n.tripDetails.pickupLocation,onChange:f=>d("tripDetails","pickupLocation",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["tripDetails.pickupLocation"]?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Kalkış noktası seçin"}),r.jsx("option",{value:"Antalya Havalimanı",children:"Antalya Havalimanı"}),u.map(f=>r.jsx("option",{value:f,children:f},f))]}),a["tripDetails.pickupLocation"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["tripDetails.pickupLocation"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Varış Noktası *"}),r.jsxs("select",{value:n.tripDetails.dropoffLocation,onChange:f=>d("tripDetails","dropoffLocation",f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${a["tripDetails.dropoffLocation"]?"border-red-500":"border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Varış noktası seçin"}),r.jsx("option",{value:"Antalya Havalimanı",children:"Antalya Havalimanı"}),u.map(f=>r.jsx("option",{value:f,children:f},f))]}),a["tripDetails.dropoffLocation"]&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:a["tripDetails.dropoffLocation"]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Yolcu"}),r.jsx("input",{type:"number",min:"1",max:"8",value:n.tripDetails.passengerCount,onChange:f=>d("tripDetails","passengerCount",parseInt(f.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bagaj"}),r.jsx("input",{type:"number",min:"0",max:"10",value:n.tripDetails.luggageCount,onChange:f=>d("tripDetails","luggageCount",parseInt(f.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fiyat (₺)"}),r.jsx("input",{type:"number",min:"0",value:n.totalPrice,onChange:f=>i(x=>({...x,totalPrice:parseInt(f.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Uçuş Numarası"}),r.jsx("input",{type:"text",value:n.tripDetails.flightNumber,onChange:f=>d("tripDetails","flightNumber",f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"TK123 (opsiyonel)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ödeme Yöntemi"}),r.jsxs("select",{value:n.paymentMethod,onChange:f=>i(x=>({...x,paymentMethod:f.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"cash",children:"Nakit"}),r.jsx("option",{value:"card",children:"Kredi Kartı"}),r.jsx("option",{value:"transfer",children:"Havale"})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 mt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),r.jsx("button",{type:"submit",disabled:l,className:"px-8 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Güncelleniyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gr,{className:"w-4 h-4"}),"Güncelle"]})})]})]})]})}):null},E$=({status:t,type:e="reservation"})=>{const n=(()=>{if(e==="payment")switch(t){case"paid":return{color:"bg-green-100 text-green-800 border-green-200",icon:_e,label:"Ödendi"};case"pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:Ye,label:"Bekleyen"};case"unpaid":return{color:"bg-red-100 text-red-800 border-red-200",icon:ur,label:"Ödenmedi"};case"refunded":return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:xs,label:"İade Edildi"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:Ne,label:"Bilinmeyen"}}else switch(t){case"confirmed":return{color:"bg-green-100 text-green-800 border-green-200",icon:_e,label:"Onaylandı"};case"assigned":return{color:"bg-purple-100 text-purple-800 border-purple-200",icon:Fe,label:"Şoför Atandı"};case"pending":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:Ye,label:"Bekleyen"};case"cancelled":return{color:"bg-red-100 text-red-800 border-red-200",icon:ur,label:"İptal Edildi"};case"completed":return{color:"bg-blue-100 text-blue-800 border-blue-200",icon:_e,label:"Tamamlandı"};case"in_progress":return{color:"bg-purple-100 text-purple-800 border-purple-200",icon:Ne,label:"Devam Ediyor"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:Ne,label:"Bilinmeyen"}}})(),i=n.icon;return r.jsxs("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium border ${n.color}`,children:[r.jsx(i,{className:"w-3 h-3 mr-1"}),n.label]})},k$=({reservations:t,drivers:e,vehicles:s,onEdit:n,onDriverAssign:i,onShowQR:a,onStatusChange:o,onCompleteReservation:l})=>{const[c,u]=g.useState(new Set),d=f=>{u(x=>{const S=new Set(x);return S.has(f)?S.delete(f):S.add(f),S})},m=f=>{const x=e.find(S=>S.id===f);return x?`${x.firstName} ${x.lastName}`:"Atanmamış"},p=f=>{const x=s.find(S=>S.id===f);return x?`${x.brand} ${x.model}`:"Araç yok"};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rezervasyon"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Müşteri"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarih & Saat"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rota"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Durum"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Şoför"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detay"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"İşlemler"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(f=>{var x,S,k,v,_,w,E,T,P,b,y,j,C,R,D,A;return r.jsxs(ga.Fragment,{children:[r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:f.reservationId})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Fe,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(x=f.customerInfo)==null?void 0:x.firstName," ",(S=f.customerInfo)==null?void 0:S.lastName]}),r.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[r.jsx(nt,{className:"w-3 h-3 mr-1"}),(k=f.customerInfo)==null?void 0:k.phone]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(Be,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("div",{children:[r.jsx("div",{children:(v=f.tripDetails)==null?void 0:v.date}),r.jsx("div",{className:"text-gray-500",children:(_=f.tripDetails)==null?void 0:_.time})]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[r.jsx(Ke,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("div",{className:"max-w-xs truncate",children:[r.jsx("div",{className:"truncate",children:(w=f.tripDetails)==null?void 0:w.pickupLocation}),r.jsxs("div",{className:"text-gray-500 truncate",children:["↓ ",(E=f.tripDetails)==null?void 0:E.dropoffLocation]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(E$,{status:f.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(je,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-900",children:m(f.assignedDriver)}),r.jsx("div",{className:"text-gray-500",children:p(f.assignedVehicle)})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>d(f.id),className:"flex items-center text-sm text-blue-600 hover:text-blue-800",children:c.has(f.id)?r.jsxs(r.Fragment,{children:[r.jsx(Hc,{className:"w-4 h-4 mr-1"}),r.jsx($r,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:[r.jsx(dn,{className:"w-4 h-4 mr-1"}),r.jsx(g0,{className:"w-4 h-4"})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>n(f),className:"text-blue-600 hover:text-blue-800",title:"Düzenle",children:r.jsx(sf,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>i(f),className:"text-purple-600 hover:text-purple-800",title:"Şoför Ata",children:r.jsx(Fe,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>a(f),className:"text-green-600 hover:text-green-800",title:"QR Kod",children:r.jsx(pa,{className:"w-4 h-4"})}),f.status!=="completed"&&f.driverId&&r.jsx("button",{onClick:()=>l(f.id),className:"text-emerald-600 hover:text-emerald-800",title:"Rezervasyonu Tamamla & Cari Güncelle",children:r.jsx(_e,{className:"w-4 h-4"})})]})})]}),c.has(f.id)&&r.jsx("tr",{children:r.jsx("td",{colSpan:"8",className:"px-6 py-4 bg-gray-50",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Müşteri Bilgileri"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fe,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{children:[(T=f.customerInfo)==null?void 0:T.firstName," ",(P=f.customerInfo)==null?void 0:P.lastName]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nt,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:(b=f.customerInfo)==null?void 0:b.phone})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"@"}),r.jsx("span",{children:(y=f.customerInfo)==null?void 0:y.email})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Seyahat Detayları"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Be,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{children:[(j=f.tripDetails)==null?void 0:j.date," - ",(C=f.tripDetails)==null?void 0:C.time]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fe,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{children:[(R=f.tripDetails)==null?void 0:R.passengerCount," Yolcu"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"✈️"}),r.jsx("span",{children:((D=f.tripDetails)==null?void 0:D.flightNumber)||"Uçuş no yok"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"🧳"}),r.jsxs("span",{children:[(A=f.tripDetails)==null?void 0:A.luggageCount," Bagaj"]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 border-b pb-2",children:"Ödeme & Durum"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($t,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"capitalize",children:f.paymentMethod})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"💰"}),r.jsxs("span",{className:"font-medium",children:[f.totalPrice," TL"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"📅"}),r.jsx("span",{children:new Date(f.createdAt).toLocaleDateString("tr-TR")})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-400",children:"🔄"}),r.jsx("span",{children:f.updatedAt?new Date(f.updatedAt).toLocaleDateString("tr-TR"):"Güncellenmemiş"})]})]})]})]})})})]},f.id)})})]})}),t.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Be,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500",children:"Henüz rezervasyon bulunmuyor"})]})]})},_$=({onFilterChange:t,reservations:e})=>{const[s,n]=g.useState({search:"",status:"all",dateRange:"all",assignedDriver:"all",paymentMethod:"all"}),[i,a]=g.useState(!1),o=(d,m)=>{const p={...s,[d]:m};n(p),t(p)},l=()=>{const d={search:"",status:"all",dateRange:"all",assignedDriver:"all",paymentMethod:"all"};n(d),t(d)},u={all:e.length,pending:e.filter(m=>m.status==="pending").length,confirmed:e.filter(m=>m.status==="confirmed").length,assigned:e.filter(m=>m.status==="assigned").length,in_progress:e.filter(m=>m.status==="in_progress").length,completed:e.filter(m=>m.status==="completed").length,cancelled:e.filter(m=>m.status==="cancelled").length};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[r.jsx("div",{className:"flex-1 min-w-64",children:r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Rezervasyon ID, müşteri adı, telefon...",value:s.search,onChange:d=>o("search",d.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:s.status,onChange:d=>o("status",d.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsxs("option",{value:"all",children:["Tüm Durumlar (",u.all,")"]}),r.jsxs("option",{value:"pending",children:["Beklemede (",u.pending,")"]}),r.jsxs("option",{value:"confirmed",children:["Onaylandı (",u.confirmed,")"]}),r.jsxs("option",{value:"assigned",children:["Atandı (",u.assigned,")"]}),r.jsxs("option",{value:"in_progress",children:["Devam Ediyor (",u.in_progress,")"]}),r.jsxs("option",{value:"completed",children:["Tamamlandı (",u.completed,")"]}),r.jsxs("option",{value:"cancelled",children:["İptal (",u.cancelled,")"]})]}),r.jsx($r,{className:"absolute right-2 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:s.dateRange,onChange:d=>o("dateRange",d.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"Tüm Tarihler"}),r.jsx("option",{value:"today",children:"Bugün"}),r.jsx("option",{value:"tomorrow",children:"Yarın"}),r.jsx("option",{value:"this_week",children:"Bu Hafta"}),r.jsx("option",{value:"this_month",children:"Bu Ay"}),r.jsx("option",{value:"next_month",children:"Gelecek Ay"})]}),r.jsx($r,{className:"absolute right-2 top-3 w-4 h-4 text-gray-400 pointer-events-none"})]}),r.jsxs("button",{onClick:()=>a(!i),className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[r.jsx(tI,{className:"w-4 h-4"}),"Gelişmiş Filtreler",r.jsx($r,{className:`w-4 h-4 transition-transform ${i?"rotate-180":""}`})]}),(s.search||s.status!=="all"||s.dateRange!=="all"||s.assignedDriver!=="all"||s.paymentMethod!=="all")&&r.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:[r.jsx(Ue,{className:"w-4 h-4"}),"Temizle"]})]}),i&&r.jsx("div",{className:"border-t pt-4 mt-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şoför Durumu"}),r.jsxs("select",{value:s.assignedDriver,onChange:d=>o("assignedDriver",d.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"Tüm Rezervasyonlar"}),r.jsx("option",{value:"assigned",children:"Şoför Atanmış"}),r.jsx("option",{value:"unassigned",children:"Şoför Atanmamış"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ödeme Yöntemi"}),r.jsxs("select",{value:s.paymentMethod,onChange:d=>o("paymentMethod",d.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"Tüm Yöntemler"}),r.jsx("option",{value:"cash",children:"Nakit"}),r.jsx("option",{value:"card",children:"Kredi Kartı"}),r.jsx("option",{value:"transfer",children:"Banka Transferi"}),r.jsx("option",{value:"online",children:"Online Ödeme"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yolcu Sayısı"}),r.jsxs("select",{value:s.passengerCount||"all",onChange:d=>o("passengerCount",d.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"all",children:"Tüm Yolcu Sayıları"}),r.jsx("option",{value:"1",children:"1 Kişi"}),r.jsx("option",{value:"2",children:"2 Kişi"}),r.jsx("option",{value:"3",children:"3 Kişi"}),r.jsx("option",{value:"4",children:"4 Kişi"}),r.jsx("option",{value:"5+",children:"5+ Kişi"})]})]})]})}),Object.entries(s).some(([d,m])=>d!=="search"&&m!=="all"&&m!=="")&&r.jsx("div",{className:"mt-4 pt-4 border-t",children:r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx("span",{children:"Aktif filtreler:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.status!=="all"&&r.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full",children:["Durum: ",s.status]}),s.dateRange!=="all"&&r.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full",children:["Tarih: ",s.dateRange]}),s.assignedDriver!=="all"&&r.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full",children:["Şoför: ",s.assignedDriver]}),s.paymentMethod!=="all"&&r.jsxs("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 rounded-full",children:["Ödeme: ",s.paymentMethod]})]})]})})]})},S$=({reservation:t,drivers:e,vehicles:s,onClose:n,onAssign:i})=>{var p,f,x,S,k,v,_;const[a,o]=g.useState(""),[l,c]=g.useState(!1),u=e.filter(w=>w.status==="active"),d=w=>{o(w)},m=async w=>{if(w.preventDefault(),!a){alert("Lütfen şoför seçin");return}c(!0);try{const E=e.find(P=>P.id===a),T=(E==null?void 0:E.assignedVehicle)||null;await i(t.id,a,T)}catch(E){console.error("Şoför atama hatası:",E),alert("Şoför atama sırasında bir hata oluştu")}finally{c(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Şoför Atama"}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:t.reservationId}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Müşteri:"})," ",(p=t.customerInfo)==null?void 0:p.firstName," ",(f=t.customerInfo)==null?void 0:f.lastName]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Tarih:"})," ",(x=t.tripDetails)==null?void 0:x.date," - ",(S=t.tripDetails)==null?void 0:S.time]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Rota:"})," ",(k=t.tripDetails)==null?void 0:k.pickupLocation," → ",(v=t.tripDetails)==null?void 0:v.dropoffLocation]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Yolcu:"})," ",(_=t.tripDetails)==null?void 0:_.passengerCount," kişi"]})]})]}),r.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Şoför Seçin *"}),u.length===0?r.jsxs("div",{className:"text-center py-4 text-gray-500",children:[r.jsx(Fe,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),r.jsx("p",{children:"Aktif şoför bulunamadı"})]}):r.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:u.map(w=>{var E;return s.find(T=>T.id===w.assignedVehicle),r.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${a===w.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[r.jsx("input",{type:"radio",name:"driver",value:w.id,checked:a===w.id,onChange:()=>d(w.id),className:"sr-only"}),r.jsxs("div",{children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:w.firstName&&w.lastName?`${w.firstName} ${w.lastName}`:w.name||w.email||"İsimsiz Şoför"}),r.jsx("p",{className:"text-sm text-gray-600",children:w.phone||"Telefon belirtilmemiş"}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Ehliyet: ",w.licenseNumber||"Belirtilmemiş"]}),w.assignedVehicle&&r.jsxs("p",{className:"text-xs text-green-600",children:["✓ Atanmış araç: ",((E=s.find(T=>T.id===w.assignedVehicle))==null?void 0:E.plateNumber)||"Araç bilgisi bulunamadı"]}),!w.assignedVehicle&&r.jsx("p",{className:"text-xs text-orange-600",children:"⚠ Atanmış araç yok"})]}),a===w.id&&r.jsx(Xm,{className:"w-5 h-5 text-blue-600"})]})]},w.id)})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"İptal"}),r.jsx("button",{type:"submit",disabled:l||!a||u.length===0,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Atanıyor..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Fe,{className:"w-4 h-4"}),"Şoför Ata"]})})]})]})]})})};var tl={},T$=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},jI={},Rs={};let lv;const C$=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Rs.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Rs.getSymbolTotalCodewords=function(e){return C$[e]};Rs.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Rs.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');lv=e};Rs.isKanjiModeEnabled=function(){return typeof lv<"u"};Rs.toSJIS=function(e){return lv(e)};var rf={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+s)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,i){if(t.isValid(n))return n;try{return e(n)}catch{return i}}})(rf);function EI(){this.buffer=[],this.length=0}EI.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let s=0;s<e;s++)this.putBit((t>>>e-s-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var I$=EI;function yu(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}yu.prototype.set=function(t,e,s,n){const i=t*this.size+e;this.data[i]=s,n&&(this.reservedBit[i]=!0)};yu.prototype.get=function(t,e){return this.data[t*this.size+e]};yu.prototype.xor=function(t,e,s){this.data[t*this.size+e]^=s};yu.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var A$=yu,kI={};(function(t){const e=Rs.getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,a=e(n),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,l=[a-7];for(let c=1;c<i-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},t.getPositions=function(n){const i=[],a=t.getRowColCoords(n),o=a.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||i.push([a[l],a[c]]);return i}})(kI);var _I={};const P$=Rs.getSymbolSize,vE=7;_I.getPositions=function(e){const s=P$(e);return[[0,0],[s-vE,0],[0,s-vE]]};var SI={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},t.from=function(i){return t.isValid(i)?parseInt(i,10):void 0},t.getPenaltyN1=function(i){const a=i.size;let o=0,l=0,c=0,u=null,d=null;for(let m=0;m<a;m++){l=c=0,u=d=null;for(let p=0;p<a;p++){let f=i.get(m,p);f===u?l++:(l>=5&&(o+=e.N1+(l-5)),u=f,l=1),f=i.get(p,m),f===d?c++:(c>=5&&(o+=e.N1+(c-5)),d=f,c=1)}l>=5&&(o+=e.N1+(l-5)),c>=5&&(o+=e.N1+(c-5))}return o},t.getPenaltyN2=function(i){const a=i.size;let o=0;for(let l=0;l<a-1;l++)for(let c=0;c<a-1;c++){const u=i.get(l,c)+i.get(l,c+1)+i.get(l+1,c)+i.get(l+1,c+1);(u===4||u===0)&&o++}return o*e.N2},t.getPenaltyN3=function(i){const a=i.size;let o=0,l=0,c=0;for(let u=0;u<a;u++){l=c=0;for(let d=0;d<a;d++)l=l<<1&2047|i.get(u,d),d>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|i.get(d,u),d>=10&&(c===1488||c===93)&&o++}return o*e.N3},t.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let c=0;c<o;c++)a+=i.data[c];return Math.abs(Math.ceil(a*100/o/5)-10)*e.N4};function s(n,i,a){switch(n){case t.Patterns.PATTERN000:return(i+a)%2===0;case t.Patterns.PATTERN001:return i%2===0;case t.Patterns.PATTERN010:return a%3===0;case t.Patterns.PATTERN011:return(i+a)%3===0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case t.Patterns.PATTERN101:return i*a%2+i*a%3===0;case t.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case t.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(i,a){const o=a.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)a.isReserved(c,l)||a.xor(c,l,s(i,c,l))},t.getBestMask=function(i,a){const o=Object.keys(t.Patterns).length;let l=0,c=1/0;for(let u=0;u<o;u++){a(u),t.applyMask(u,i);const d=t.getPenaltyN1(i)+t.getPenaltyN2(i)+t.getPenaltyN3(i)+t.getPenaltyN4(i);t.applyMask(u,i),d<c&&(c=d,l=u)}return l}})(SI);var af={};const Hr=rf,pd=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],gd=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];af.getBlocksCount=function(e,s){switch(s){case Hr.L:return pd[(e-1)*4+0];case Hr.M:return pd[(e-1)*4+1];case Hr.Q:return pd[(e-1)*4+2];case Hr.H:return pd[(e-1)*4+3];default:return}};af.getTotalCodewordsCount=function(e,s){switch(s){case Hr.L:return gd[(e-1)*4+0];case Hr.M:return gd[(e-1)*4+1];case Hr.Q:return gd[(e-1)*4+2];case Hr.H:return gd[(e-1)*4+3];default:return}};var TI={},of={};const cc=new Uint8Array(512),Zh=new Uint8Array(256);(function(){let e=1;for(let s=0;s<255;s++)cc[s]=e,Zh[e]=s,e<<=1,e&256&&(e^=285);for(let s=255;s<512;s++)cc[s]=cc[s-255]})();of.log=function(e){if(e<1)throw new Error("log("+e+")");return Zh[e]};of.exp=function(e){return cc[e]};of.mul=function(e,s){return e===0||s===0?0:cc[Zh[e]+Zh[s]]};(function(t){const e=of;t.mul=function(n,i){const a=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)a[o+l]^=e.mul(n[o],i[l]);return a},t.mod=function(n,i){let a=new Uint8Array(n);for(;a.length-i.length>=0;){const o=a[0];for(let c=0;c<i.length;c++)a[c]^=e.mul(i[c],o);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},t.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let a=0;a<n;a++)i=t.mul(i,new Uint8Array([1,e.exp(a)]));return i}})(TI);const CI=TI;function cv(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}cv.prototype.initialize=function(e){this.degree=e,this.genPoly=CI.generateECPolynomial(this.degree)};cv.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(e.length+this.degree);s.set(e);const n=CI.mod(s,this.genPoly),i=this.degree-n.length;if(i>0){const a=new Uint8Array(this.degree);return a.set(n,i),a}return n};var R$=cv,II={},wi={},uv={};uv.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Rn={};const AI="[0-9]+",D$="[A-Z $%*+\\-./:]+";let qc="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";qc=qc.replace(/u/g,"\\u");const L$="(?:(?![A-Z0-9 $%*+\\-./:]|"+qc+`)(?:.|[\r
]))+`;Rn.KANJI=new RegExp(qc,"g");Rn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Rn.BYTE=new RegExp(L$,"g");Rn.NUMERIC=new RegExp(AI,"g");Rn.ALPHANUMERIC=new RegExp(D$,"g");const M$=new RegExp("^"+qc+"$"),O$=new RegExp("^"+AI+"$"),V$=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Rn.testKanji=function(e){return M$.test(e)};Rn.testNumeric=function(e){return O$.test(e)};Rn.testAlphanumeric=function(e){return V$.test(e)};(function(t){const e=uv,s=Rn;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},t.getBestModeForData=function(a){return s.testNumeric(a)?t.NUMERIC:s.testAlphanumeric(a)?t.ALPHANUMERIC:s.testKanji(a)?t.KANJI:t.BYTE},t.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},t.isValid=function(a){return a&&a.bit&&a.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+i)}}t.from=function(a,o){if(t.isValid(a))return a;try{return n(a)}catch{return o}}})(wi);(function(t){const e=Rs,s=af,n=rf,i=wi,a=uv,o=7973,l=e.getBCHDigit(o);function c(p,f,x){for(let S=1;S<=40;S++)if(f<=t.getCapacity(S,x,p))return S}function u(p,f){return i.getCharCountIndicator(p,f)+4}function d(p,f){let x=0;return p.forEach(function(S){const k=u(S.mode,f);x+=k+S.getBitsLength()}),x}function m(p,f){for(let x=1;x<=40;x++)if(d(p,x)<=t.getCapacity(x,f,i.MIXED))return x}t.from=function(f,x){return a.isValid(f)?parseInt(f,10):x},t.getCapacity=function(f,x,S){if(!a.isValid(f))throw new Error("Invalid QR Code version");typeof S>"u"&&(S=i.BYTE);const k=e.getSymbolTotalCodewords(f),v=s.getTotalCodewordsCount(f,x),_=(k-v)*8;if(S===i.MIXED)return _;const w=_-u(S,f);switch(S){case i.NUMERIC:return Math.floor(w/10*3);case i.ALPHANUMERIC:return Math.floor(w/11*2);case i.KANJI:return Math.floor(w/13);case i.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(f,x){let S;const k=n.from(x,n.M);if(Array.isArray(f)){if(f.length>1)return m(f,k);if(f.length===0)return 1;S=f[0]}else S=f;return c(S.mode,S.getLength(),k)},t.getEncodedBits=function(f){if(!a.isValid(f)||f<7)throw new Error("Invalid QR Code version");let x=f<<12;for(;e.getBCHDigit(x)-l>=0;)x^=o<<e.getBCHDigit(x)-l;return f<<12|x}})(II);var PI={};const b0=Rs,RI=1335,z$=21522,bE=b0.getBCHDigit(RI);PI.getEncodedBits=function(e,s){const n=e.bit<<3|s;let i=n<<10;for(;b0.getBCHDigit(i)-bE>=0;)i^=RI<<b0.getBCHDigit(i)-bE;return(n<<10|i)^z$};var DI={};const B$=wi;function Vo(t){this.mode=B$.NUMERIC,this.data=t.toString()}Vo.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Vo.prototype.getLength=function(){return this.data.length};Vo.prototype.getBitsLength=function(){return Vo.getBitsLength(this.data.length)};Vo.prototype.write=function(e){let s,n,i;for(s=0;s+3<=this.data.length;s+=3)n=this.data.substr(s,3),i=parseInt(n,10),e.put(i,10);const a=this.data.length-s;a>0&&(n=this.data.substr(s),i=parseInt(n,10),e.put(i,a*3+1))};var U$=Vo;const F$=wi,Ep=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function zo(t){this.mode=F$.ALPHANUMERIC,this.data=t}zo.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};zo.prototype.getLength=function(){return this.data.length};zo.prototype.getBitsLength=function(){return zo.getBitsLength(this.data.length)};zo.prototype.write=function(e){let s;for(s=0;s+2<=this.data.length;s+=2){let n=Ep.indexOf(this.data[s])*45;n+=Ep.indexOf(this.data[s+1]),e.put(n,11)}this.data.length%2&&e.put(Ep.indexOf(this.data[s]),6)};var $$=zo;const H$=wi;function Bo(t){this.mode=H$.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}Bo.getBitsLength=function(e){return e*8};Bo.prototype.getLength=function(){return this.data.length};Bo.prototype.getBitsLength=function(){return Bo.getBitsLength(this.data.length)};Bo.prototype.write=function(t){for(let e=0,s=this.data.length;e<s;e++)t.put(this.data[e],8)};var K$=Bo;const G$=wi,W$=Rs;function Uo(t){this.mode=G$.KANJI,this.data=t}Uo.getBitsLength=function(e){return e*13};Uo.prototype.getLength=function(){return this.data.length};Uo.prototype.getBitsLength=function(){return Uo.getBitsLength(this.data.length)};Uo.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let s=W$.toSJIS(this.data[e]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),t.put(s,13)}};var q$=Uo,LI={exports:{}};(function(t){var e={single_source_shortest_paths:function(s,n,i){var a={},o={};o[n]=0;var l=e.PriorityQueue.make();l.push(n,0);for(var c,u,d,m,p,f,x,S,k;!l.empty();){c=l.pop(),u=c.value,m=c.cost,p=s[u]||{};for(d in p)p.hasOwnProperty(d)&&(f=p[d],x=m+f,S=o[d],k=typeof o[d]>"u",(k||S>x)&&(o[d]=x,l.push(d,x),a[d]=u))}if(typeof i<"u"&&typeof o[i]>"u"){var v=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(v)}return a},extract_shortest_path_from_predecessor_list:function(s,n){for(var i=[],a=n;a;)i.push(a),s[a],a=s[a];return i.reverse(),i},find_path:function(s,n,i){var a=e.single_source_shortest_paths(s,n,i);return e.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(s){var n=e.PriorityQueue,i={},a;s=s||{};for(a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return i.queue=[],i.sorter=s.sorter||n.default_sorter,i},default_sorter:function(s,n){return s.cost-n.cost},push:function(s,n){var i={value:s,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(LI);var Y$=LI.exports;(function(t){const e=wi,s=U$,n=$$,i=K$,a=q$,o=Rn,l=Rs,c=Y$;function u(v){return unescape(encodeURIComponent(v)).length}function d(v,_,w){const E=[];let T;for(;(T=v.exec(w))!==null;)E.push({data:T[0],index:T.index,mode:_,length:T[0].length});return E}function m(v){const _=d(o.NUMERIC,e.NUMERIC,v),w=d(o.ALPHANUMERIC,e.ALPHANUMERIC,v);let E,T;return l.isKanjiModeEnabled()?(E=d(o.BYTE,e.BYTE,v),T=d(o.KANJI,e.KANJI,v)):(E=d(o.BYTE_KANJI,e.BYTE,v),T=[]),_.concat(w,E,T).sort(function(b,y){return b.index-y.index}).map(function(b){return{data:b.data,mode:b.mode,length:b.length}})}function p(v,_){switch(_){case e.NUMERIC:return s.getBitsLength(v);case e.ALPHANUMERIC:return n.getBitsLength(v);case e.KANJI:return a.getBitsLength(v);case e.BYTE:return i.getBitsLength(v)}}function f(v){return v.reduce(function(_,w){const E=_.length-1>=0?_[_.length-1]:null;return E&&E.mode===w.mode?(_[_.length-1].data+=w.data,_):(_.push(w),_)},[])}function x(v){const _=[];for(let w=0;w<v.length;w++){const E=v[w];switch(E.mode){case e.NUMERIC:_.push([E,{data:E.data,mode:e.ALPHANUMERIC,length:E.length},{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.ALPHANUMERIC:_.push([E,{data:E.data,mode:e.BYTE,length:E.length}]);break;case e.KANJI:_.push([E,{data:E.data,mode:e.BYTE,length:u(E.data)}]);break;case e.BYTE:_.push([{data:E.data,mode:e.BYTE,length:u(E.data)}])}}return _}function S(v,_){const w={},E={start:{}};let T=["start"];for(let P=0;P<v.length;P++){const b=v[P],y=[];for(let j=0;j<b.length;j++){const C=b[j],R=""+P+j;y.push(R),w[R]={node:C,lastCount:0},E[R]={};for(let D=0;D<T.length;D++){const A=T[D];w[A]&&w[A].node.mode===C.mode?(E[A][R]=p(w[A].lastCount+C.length,C.mode)-p(w[A].lastCount,C.mode),w[A].lastCount+=C.length):(w[A]&&(w[A].lastCount=C.length),E[A][R]=p(C.length,C.mode)+4+e.getCharCountIndicator(C.mode,_))}}T=y}for(let P=0;P<T.length;P++)E[T[P]].end=0;return{map:E,table:w}}function k(v,_){let w;const E=e.getBestModeForData(v);if(w=e.from(_,E),w!==e.BYTE&&w.bit<E.bit)throw new Error('"'+v+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(E));switch(w===e.KANJI&&!l.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new s(v);case e.ALPHANUMERIC:return new n(v);case e.KANJI:return new a(v);case e.BYTE:return new i(v)}}t.fromArray=function(_){return _.reduce(function(w,E){return typeof E=="string"?w.push(k(E,null)):E.data&&w.push(k(E.data,E.mode)),w},[])},t.fromString=function(_,w){const E=m(_,l.isKanjiModeEnabled()),T=x(E),P=S(T,w),b=c.find_path(P.map,"start","end"),y=[];for(let j=1;j<b.length-1;j++)y.push(P.table[b[j]].node);return t.fromArray(f(y))},t.rawSplit=function(_){return t.fromArray(m(_,l.isKanjiModeEnabled()))}})(DI);const lf=Rs,kp=rf,Q$=I$,X$=A$,Z$=kI,J$=_I,w0=SI,N0=af,eH=R$,Jh=II,tH=PI,sH=wi,_p=DI;function nH(t,e){const s=t.size,n=J$.getPositions(e);for(let i=0;i<n.length;i++){const a=n[i][0],o=n[i][1];for(let l=-1;l<=7;l++)if(!(a+l<=-1||s<=a+l))for(let c=-1;c<=7;c++)o+c<=-1||s<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?t.set(a+l,o+c,!0,!0):t.set(a+l,o+c,!1,!0))}}function rH(t){const e=t.size;for(let s=8;s<e-8;s++){const n=s%2===0;t.set(s,6,n,!0),t.set(6,s,n,!0)}}function iH(t,e){const s=Z$.getPositions(e);for(let n=0;n<s.length;n++){const i=s[n][0],a=s[n][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?t.set(i+o,a+l,!0,!0):t.set(i+o,a+l,!1,!0)}}function aH(t,e){const s=t.size,n=Jh.getEncodedBits(e);let i,a,o;for(let l=0;l<18;l++)i=Math.floor(l/3),a=l%3+s-8-3,o=(n>>l&1)===1,t.set(i,a,o,!0),t.set(a,i,o,!0)}function Sp(t,e,s){const n=t.size,i=tH.getEncodedBits(e,s);let a,o;for(a=0;a<15;a++)o=(i>>a&1)===1,a<6?t.set(a,8,o,!0):a<8?t.set(a+1,8,o,!0):t.set(n-15+a,8,o,!0),a<8?t.set(8,n-a-1,o,!0):a<9?t.set(8,15-a-1+1,o,!0):t.set(8,15-a-1,o,!0);t.set(n-8,8,1,!0)}function oH(t,e){const s=t.size;let n=-1,i=s-1,a=7,o=0;for(let l=s-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!t.isReserved(i,l-c)){let u=!1;o<e.length&&(u=(e[o]>>>a&1)===1),t.set(i,l-c,u),a--,a===-1&&(o++,a=7)}if(i+=n,i<0||s<=i){i-=n,n=-n;break}}}function lH(t,e,s){const n=new Q$;s.forEach(function(c){n.put(c.mode.bit,4),n.put(c.getLength(),sH.getCharCountIndicator(c.mode,t)),c.write(n)});const i=lf.getSymbolTotalCodewords(t),a=N0.getTotalCodewordsCount(t,e),o=(i-a)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const l=(o-n.getLengthInBits())/8;for(let c=0;c<l;c++)n.put(c%2?17:236,8);return cH(n,t,e)}function cH(t,e,s){const n=lf.getSymbolTotalCodewords(e),i=N0.getTotalCodewordsCount(e,s),a=n-i,o=N0.getBlocksCount(e,s),l=n%o,c=o-l,u=Math.floor(n/o),d=Math.floor(a/o),m=d+1,p=u-d,f=new eH(p);let x=0;const S=new Array(o),k=new Array(o);let v=0;const _=new Uint8Array(t.buffer);for(let b=0;b<o;b++){const y=b<c?d:m;S[b]=_.slice(x,x+y),k[b]=f.encode(S[b]),x+=y,v=Math.max(v,y)}const w=new Uint8Array(n);let E=0,T,P;for(T=0;T<v;T++)for(P=0;P<o;P++)T<S[P].length&&(w[E++]=S[P][T]);for(T=0;T<p;T++)for(P=0;P<o;P++)w[E++]=k[P][T];return w}function uH(t,e,s,n){let i;if(Array.isArray(t))i=_p.fromArray(t);else if(typeof t=="string"){let u=e;if(!u){const d=_p.rawSplit(t);u=Jh.getBestVersionForData(d,s)}i=_p.fromString(t,u||40)}else throw new Error("Invalid data");const a=Jh.getBestVersionForData(i,s);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=a;else if(e<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const o=lH(e,s,i),l=lf.getSymbolSize(e),c=new X$(l);return nH(c,e),rH(c),iH(c,e),Sp(c,s,0),e>=7&&aH(c,e),oH(c,o),isNaN(n)&&(n=w0.getBestMask(c,Sp.bind(null,c,s))),w0.applyMask(n,c),Sp(c,s,n),{modules:c,version:e,errorCorrectionLevel:s,maskPattern:n,segments:i}}jI.create=function(e,s){if(typeof e>"u"||e==="")throw new Error("No input text");let n=kp.M,i,a;return typeof s<"u"&&(n=kp.from(s.errorCorrectionLevel,kp.M),i=Jh.from(s.version),a=w0.from(s.maskPattern),s.toSJISFunc&&lf.setToSJISFunction(s.toSJISFunc)),uH(e,i,n,a)};var MI={},dv={};(function(t){function e(s){if(typeof s=="number"&&(s=s.toString()),typeof s!="string")throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+s);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:e(n.color.dark||"#000000ff"),light:e(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},t.getImageWidth=function(n,i){const a=t.getScale(n,i);return Math.floor((n+i.margin*2)*a)},t.qrToImageData=function(n,i,a){const o=i.modules.size,l=i.modules.data,c=t.getScale(o,a),u=Math.floor((o+a.margin*2)*c),d=a.margin*c,m=[a.color.light,a.color.dark];for(let p=0;p<u;p++)for(let f=0;f<u;f++){let x=(p*u+f)*4,S=a.color.light;if(p>=d&&f>=d&&p<u-d&&f<u-d){const k=Math.floor((p-d)/c),v=Math.floor((f-d)/c);S=m[l[k*o+v]?1:0]}n[x++]=S.r,n[x++]=S.g,n[x++]=S.b,n[x]=S.a}}})(dv);(function(t){const e=dv;function s(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(a,o,l){let c=l,u=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(u=n()),c=e.getOptions(c);const d=e.getImageWidth(a.modules.size,c),m=u.getContext("2d"),p=m.createImageData(d,d);return e.qrToImageData(p.data,a,c),s(m,u,d),m.putImageData(p,0,0),u},t.renderToDataURL=function(a,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const u=t.render(a,o,c),d=c.type||"image/png",m=c.rendererOpts||{};return u.toDataURL(d,m.quality)}})(MI);var OI={};const dH=dv;function wE(t,e){const s=t.a/255,n=e+'="'+t.hex+'"';return s<1?n+" "+e+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function Tp(t,e,s){let n=t+e;return typeof s<"u"&&(n+=" "+s),n}function hH(t,e,s){let n="",i=0,a=!1,o=0;for(let l=0;l<t.length;l++){const c=Math.floor(l%e),u=Math.floor(l/e);!c&&!a&&(a=!0),t[l]?(o++,l>0&&c>0&&t[l-1]||(n+=a?Tp("M",c+s,.5+u+s):Tp("m",i,0),i=0,a=!1),c+1<e&&t[l+1]||(n+=Tp("h",o),o=0)):i++}return n}OI.render=function(e,s,n){const i=dH.getOptions(s),a=e.modules.size,o=e.modules.data,l=a+i.margin*2,c=i.color.light.a?"<path "+wE(i.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",u="<path "+wE(i.color.dark,"stroke")+' d="'+hH(o,a,i.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+u+`</svg>
`;return typeof n=="function"&&n(null,p),p};const mH=T$,j0=jI,VI=MI,fH=OI;function hv(t,e,s,n,i){const a=[].slice.call(arguments,1),o=a.length,l=typeof a[o-1]=="function";if(!l&&!mH())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(i=s,s=e,e=n=void 0):o===3&&(e.getContext&&typeof i>"u"?(i=n,n=void 0):(i=n,n=s,s=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(s=e,e=n=void 0):o===2&&!e.getContext&&(n=s,s=e,e=void 0),new Promise(function(c,u){try{const d=j0.create(s,n);c(t(d,e,n))}catch(d){u(d)}})}try{const c=j0.create(s,n);i(null,t(c,e,n))}catch(c){i(c)}}tl.create=j0.create;tl.toCanvas=hv.bind(null,VI.render);tl.toDataURL=hv.bind(null,VI.renderToDataURL);tl.toString=hv.bind(null,function(t,e,s){return fH.render(t,s)});const pH=({reservation:t,onClose:e})=>{var a,o,l,c,u,d,m;const s=g.useRef(null);ga.useEffect(()=>{var p,f,x,S,k,v,_;if(t&&s.current){const w={reservationId:t.reservationId,customerName:`${(p=t.customerInfo)==null?void 0:p.firstName} ${(f=t.customerInfo)==null?void 0:f.lastName}`,date:(x=t.tripDetails)==null?void 0:x.date,time:(S=t.tripDetails)==null?void 0:S.time,pickup:(k=t.tripDetails)==null?void 0:k.pickupLocation,dropoff:(v=t.tripDetails)==null?void 0:v.dropoffLocation,passengerCount:(_=t.tripDetails)==null?void 0:_.passengerCount,totalPrice:t.totalPrice};tl.toCanvas(s.current,JSON.stringify(w),{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}})}},[t]);const n=()=>{if(s.current){const p=document.createElement("a");p.download=`QR-${t.reservationId}.png`,p.href=s.current.toDataURL(),p.click()}},i=async()=>{if(s.current&&navigator.share)try{s.current.toBlob(async f=>{var S,k;const x=new File([f],`QR-${t.reservationId}.png`,{type:"image/png"});await navigator.share({files:[x],title:`QR Kod - ${t.reservationId}`,text:`${(S=t.customerInfo)==null?void 0:S.firstName} ${(k=t.customerInfo)==null?void 0:k.lastName} rezervasyon QR kodu`})})}catch(p){console.error("Paylaşım hatası:",p)}};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(pa,{className:"w-5 h-5"}),"QR Kod"]}),r.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 text-center",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:t.reservationId}),r.jsxs("p",{className:"text-sm text-gray-600",children:[(a=t.customerInfo)==null?void 0:a.firstName," ",(o=t.customerInfo)==null?void 0:o.lastName]})]}),r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"p-4 bg-white border-2 border-gray-200 rounded-lg",children:r.jsx("canvas",{ref:s,className:"block"})})}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tarih:"}),r.jsxs("span",{className:"font-medium",children:[(l=t.tripDetails)==null?void 0:l.date," ",(c=t.tripDetails)==null?void 0:c.time]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Kalkış:"}),r.jsx("span",{className:"font-medium",children:(u=t.tripDetails)==null?void 0:u.pickupLocation})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Varış:"}),r.jsx("span",{className:"font-medium",children:(d=t.tripDetails)==null?void 0:d.dropoffLocation})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Yolcu:"}),r.jsxs("span",{className:"font-medium",children:[(m=t.tripDetails)==null?void 0:m.passengerCount," kişi"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tutar:"}),r.jsxs("span",{className:"font-medium text-green-600",children:["₺",t.totalPrice]})]})]})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:n,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx(Zm,{className:"w-4 h-4"}),"İndir"]}),navigator.share&&r.jsxs("button",{onClick:i,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx(rI,{className:"w-4 h-4"}),"Paylaş"]})]})]})]})}):null},gH=()=>{const[t,e]=g.useState([]),[s,n]=g.useState([]),[i,a]=g.useState([]),[o,l]=g.useState([]),[c,u]=g.useState(!0),[d,m]=g.useState(null),[p,f]=g.useState(!1),[x,S]=g.useState(!1),[k,v]=g.useState(!1),[_,w]=g.useState(!1),E=[{id:"1",reservationId:"SBS-001234",customerInfo:{firstName:"Ahmet",lastName:"Yılmaz",phone:"+90 555 123 45 67",email:"ahmet@example.com"},tripDetails:{date:"2024-01-15",time:"14:30",pickupLocation:"Lara Kundu Otelleri",dropoffLocation:"Antalya Havalimanı",passengerCount:2,luggageCount:3,flightNumber:"TK123"},status:"pending",paymentMethod:"cash",totalPrice:150,createdAt:"2024-01-10T10:00:00Z",assignedDriver:null,assignedVehicle:null},{id:"2",reservationId:"SBS-001235",customerInfo:{firstName:"Ayşe",lastName:"Demir",phone:"+90 555 987 65 43",email:"ayse@example.com"},tripDetails:{date:"2024-01-16",time:"09:00",pickupLocation:"Kaleici Otelleri",dropoffLocation:"Antalya Havalimanı",passengerCount:1,luggageCount:2,flightNumber:"PC456"},status:"confirmed",paymentMethod:"card",totalPrice:120,createdAt:"2024-01-11T08:00:00Z",assignedDriver:"driver1",assignedVehicle:"vehicle1"},{id:"3",reservationId:"SBS-001236",customerInfo:{firstName:"Mehmet",lastName:"Özkan",phone:"+90 555 333 44 55",email:"mehmet@example.com"},tripDetails:{date:"2024-01-17",time:"16:45",pickupLocation:"Antalya Havalimanı",dropoffLocation:"Belek Otelleri",passengerCount:4,luggageCount:6,flightNumber:"TK789"},status:"assigned",paymentMethod:"card",totalPrice:180,createdAt:"2024-01-12T14:00:00Z",assignedDriver:"driver2",assignedVehicle:"vehicle2"}],T=[{id:"driver1",firstName:"Mehmet",lastName:"Şoför",phone:"+90 555 111 22 33",status:"active",assignedVehicle:"vehicle1"},{id:"driver2",firstName:"Ali",lastName:"Karaca",phone:"+90 555 444 55 66",status:"active",assignedVehicle:"vehicle2"}],P=[{id:"vehicle1",brand:"Mercedes",model:"Vito",plateNumber:"07ABC123",capacity:8,status:"active"},{id:"vehicle2",brand:"Ford",model:"Transit",plateNumber:"07DEF456",capacity:12,status:"active"}];g.useEffect(()=>{console.log("Rezervasyon index: Firebase listeners başlatılıyor..."),u(!0);const D=Yn(Ie(ae,"reservations"),Y=>{console.log("Rezervasyonlar güncellendi, döküman sayısı:",Y.docs.length);const B=Y.docs.map(O=>{const K=O.data();return console.log("Rezervasyon verisi:",{id:O.id,data:K}),{id:O.id,...K,reservationId:K.reservationId||`SBS-${O.id.slice(-6)}`,customerInfo:K.customerInfo||{firstName:"Belirtilmemiş",lastName:"",phone:"",email:""},tripDetails:K.tripDetails||{date:"",time:"",pickupLocation:"",dropoffLocation:"",passengerCount:1,luggageCount:0},status:K.status||"pending",paymentMethod:K.paymentMethod||"cash",totalPrice:K.totalPrice||0,createdAt:K.createdAt||new Date().toISOString()}});console.log("İşlenmiş rezervasyon verisi:",B),B.length>0?e(B):(console.log("Firebase rezervasyon bulunamadı, mock veriler kullanılıyor"),e(E)),u(!1)},Y=>{console.error("Rezervasyonlar yüklenirken hata:",Y),e(E),u(!1)}),A=Gs(Ie(ae,"users"),cn("role","==",bt.DRIVER)),V=Yn(A,Y=>{console.log("Rezervasyon index: Şoförler güncellendi, döküman sayısı:",Y.docs.length);const B=Y.docs.map(O=>({id:O.id,...O.data(),firstName:O.data().firstName||"",lastName:O.data().lastName||"",name:O.data().firstName&&O.data().lastName?`${O.data().firstName} ${O.data().lastName}`:O.data().name||O.data().email,phone:O.data().phone||"",licenseNumber:O.data().licenseNumber||"Belirtilmemiş",assignedVehicle:O.data().assignedVehicle||null,vehicle:O.data().assignedVehicle||"Atanmamış",status:O.data().isActive!==!1?"active":"inactive"}));console.log("Firebase şoförleri işlendi:",B),B.length>0?(console.log("Firebase şoförleri yüklendi:",B),a(B)):(console.log("Firebase şoför bulunamadı, mock veriler kullanılıyor"),a(T))},Y=>{console.error("Şoförler yüklenirken hata:",Y),a(T)}),$=Yn(Ie(ae,"vehicles"),Y=>{console.log("Araçlar güncellendi, döküman sayısı:",Y.docs.length);const B=Y.docs.map(O=>({id:O.id,...O.data()}));B.length>0?l(B):l(P)},Y=>{console.error("Araçlar yüklenirken hata:",Y),l(P)});return()=>{D(),V(),$()}},[]);const b=D=>{let A=[...t];if(D.search){const V=D.search.toLowerCase();A=A.filter($=>{var Y,B,O,K;return $.reservationId.toLowerCase().includes(V)||((Y=$.customerInfo)==null?void 0:Y.firstName.toLowerCase().includes(V))||((B=$.customerInfo)==null?void 0:B.lastName.toLowerCase().includes(V))||((O=$.customerInfo)==null?void 0:O.phone.includes(V))||((K=$.customerInfo)==null?void 0:K.email.toLowerCase().includes(V))})}if(D.status!=="all"&&(A=A.filter(V=>V.status===D.status)),D.dateRange!=="all"){const V=new Date,$=new Date(V);$.setDate($.getDate()+1),A=A.filter(Y=>{var O;const B=new Date((O=Y.tripDetails)==null?void 0:O.date);switch(D.dateRange){case"today":return B.toDateString()===V.toDateString();case"tomorrow":return B.toDateString()===$.toDateString();case"this_week":const K=new Date(V);K.setDate(V.getDate()-V.getDay());const z=new Date(K);return z.setDate(K.getDate()+6),B>=K&&B<=z;case"this_month":return B.getMonth()===V.getMonth()&&B.getFullYear()===V.getFullYear();case"next_month":const M=new Date(V);return M.setMonth(V.getMonth()+1),B.getMonth()===M.getMonth()&&B.getFullYear()===M.getFullYear();default:return!0}})}D.assignedDriver!=="all"&&(D.assignedDriver==="assigned"?A=A.filter(V=>V.assignedDriver):D.assignedDriver==="unassigned"&&(A=A.filter(V=>!V.assignedDriver))),D.paymentMethod!=="all"&&(A=A.filter(V=>V.paymentMethod===D.paymentMethod)),D.passengerCount!=="all"&&(D.passengerCount==="5+"?A=A.filter(V=>{var $;return(($=V.tripDetails)==null?void 0:$.passengerCount)>=5}):A=A.filter(V=>{var $;return(($=V.tripDetails)==null?void 0:$.passengerCount)===parseInt(D.passengerCount)})),n(A)};g.useEffect(()=>{n(t)},[t]);const y=async D=>{try{const A={...D,reservationId:`SBS-${Date.now()}`,status:"pending",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},V=await un(Ie(ae,"reservations"),A),$={...A,id:V.id};e(Y=>[$,...Y]),f(!1),console.log("Yeni rezervasyon eklendi:",V.id)}catch(A){console.error("Rezervasyon eklenirken hata:",A),alert("Rezervasyon eklenirken bir hata oluştu: "+A.message)}},j=async(D,A,V)=>{try{console.log("Şoför atama başlatılıyor:",{reservationId:D,driverId:A,vehicleId:V});const $=t.find(B=>B.id===D);if(!$){console.error("Rezervasyon bulunamadı:",D),alert("Rezervasyon bulunamadı");return}console.log("Güncellenecek rezervasyon:",$);const Y={assignedDriver:A,assignedDriverId:A,assignedVehicle:V,status:"assigned",updatedAt:new Date().toISOString()};if($.id.startsWith("temp-")||$.id.startsWith("1")||$.id.startsWith("2")||$.id.startsWith("3")){const{id:B,firebaseId:O,...K}=$,z=Object.keys(K).reduce((U,W)=>(K[W]!==void 0&&K[W]!==null&&(U[W]=K[W]),U),{});console.log("Firebase'a eklenecek temiz veri:",{...z,...Y});const M=await un(Ie(ae,"reservations"),{...z,...Y,createdAt:z.createdAt||new Date().toISOString()});console.log("Mock rezervasyon Firebase'a eklendi:",M.id),e(U=>U.filter(Z=>Z.id!==D))}else{const B=$.firebaseId||$.id,O=Object.keys(Y).reduce((K,z)=>(Y[z]!==void 0&&Y[z]!==null&&(K[z]=Y[z]),K),{});console.log("Firebase güncellenecek temiz veri:",O),await Pt(Ce(ae,"reservations",B),O),console.log("Firebase rezervasyon güncellendi:",B)}S(!1),m(null),ce.success("Şoför başarıyla atandı!")}catch($){console.error("Şoför atama hatası:",$),alert("Şoför atama sırasında bir hata oluştu: "+$.message)}},C=async(D,A)=>{try{const V=t.find($=>$.id===D);if(!V){console.error("Rezervasyon bulunamadı:",D),alert("Rezervasyon bulunamadı");return}e($=>$.map(Y=>Y.id===D?{...Y,...A}:Y)),V.firebaseId&&await Pt(Ce(ae,"reservations",V.firebaseId),{...A,updatedAt:new Date().toISOString()}),v(!1),m(null)}catch(V){console.error("Rezervasyon güncelleme hatası:",V),alert("Rezervasyon güncellenirken bir hata oluştu: "+V.message)}},R=async D=>{try{const A=t.find(Y=>Y.id===D);if(!A){ce.error("Rezervasyon bulunamadı");return}if(A.status==="completed"){ce.error("Bu rezervasyon zaten tamamlanmış");return}if(!A.driverId){ce.error("Rezervasyona şoför atanmamış");return}const V=await R8(D,"admin-user");e(Y=>Y.map(B=>B.id===D?{...B,status:"completed",completedAt:new Date}:B));const $=A.paymentMethod==="cash"?"Şoför komisyon borcu eklendi":"Şoför alacağı eklendi";ce.success(`Rezervasyon tamamlandı! ${$}`)}catch(A){console.error("Rezervasyon tamamlama hatası:",A),ce.error("Rezervasyon tamamlanırken hata oluştu: "+A.message)}};return c?r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx(tf,{className:"w-8 h-8 animate-spin text-blue-600"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Rezervasyonlar yükleniyor..."})]})}):r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rezervasyon Yönetimi"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:["Toplam ",t.length," rezervasyon • Filtrelenmiş ",s.length," rezervasyon"]})]}),r.jsxs("button",{onClick:()=>f(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[r.jsx(Bt,{className:"w-4 h-4"}),"Hızlı Rezervasyon Ekle"]})]})}),r.jsx(_$,{onFilterChange:b,reservations:t}),r.jsx(k$,{reservations:s,drivers:i,vehicles:o,onEdit:D=>{m(D),v(!0)},onDriverAssign:D=>{m(D),S(!0)},onShowQR:D=>{m(D),w(!0)},onStatusChange:(D,A)=>{e(V=>V.map($=>$.id===D?{...$,status:A}:$))},onCompleteReservation:R}),p&&r.jsx(N$,{onClose:()=>f(!1),onSubmit:y}),k&&d&&r.jsx(j$,{reservation:d,onClose:()=>{v(!1),m(null)},onUpdate:C}),x&&d&&r.jsx(S$,{reservation:d,drivers:i,vehicles:o,onClose:()=>{S(!1),m(null)},onAssign:j}),_&&d&&r.jsx(pH,{reservation:d,onClose:()=>{w(!1),m(null)}})]})},xH=()=>r.jsx(gH,{}),yH=()=>{const[t,e]=g.useState({totalRevenue:0,pendingPayments:0,driverDebts:0,completedTrips:0,monthlyGrowth:0}),[s,n]=g.useState([]),[i,a]=g.useState(!0);g.useEffect(()=>{o()},[]);const o=async()=>{try{a(!0);const c=Gs(Ie(ae,"reservations"),cn("status","==","completed"),Fm("createdAt","desc")),d=(await os(c)).docs.map(v=>({id:v.id,...v.data()})),m=Gs(Ie(ae,"drivers")),f=(await os(m)).docs.map(v=>({id:v.id,...v.data()})),x=d.reduce((v,_)=>v+(_.totalPrice||0),0),S=d.filter(v=>v.paymentStatus==="pending").length;let k=0;f.forEach(v=>{v.balance&&v.balance<0&&(k+=Math.abs(v.balance))}),e({totalRevenue:x,pendingPayments:S,driverDebts:k,completedTrips:d.length,monthlyGrowth:12.5}),n(d.slice(0,10))}catch(c){console.error("Finansal veri getirme hatası:",c)}finally{a(!1)}},l=({title:c,value:u,icon:d,color:m,trend:p,prefix:f="₺"})=>r.jsx(F.div,{whileHover:{scale:1.02},className:`bg-white rounded-xl p-6 shadow-lg border-l-4 ${m}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:c}),r.jsxs("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:[f,typeof u=="number"?u.toLocaleString():u]}),p&&r.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[p>0?r.jsx(YC,{className:"w-4 h-4 text-green-500"}):r.jsx(DF,{className:"w-4 h-4 text-red-500"}),r.jsxs("span",{className:`text-sm font-medium ${p>0?"text-green-600":"text-red-600"}`,children:["%",Math.abs(p)]})]})]}),r.jsx("div",{className:`p-3 rounded-full ${m.replace("border-l-","bg-").replace("-500","-100")}`,children:r.jsx(d,{className:`w-8 h-8 ${m.replace("border-l-","text-")}`})})]})});return i?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(l,{title:"Toplam Gelir",value:t.totalRevenue,icon:xs,color:"border-l-green-500",trend:t.monthlyGrowth}),r.jsx(l,{title:"Bekleyen Ödemeler",value:t.pendingPayments,icon:Ne,color:"border-l-yellow-500",prefix:""}),r.jsx(l,{title:"Şoför Borçları",value:t.driverDebts,icon:Qe,color:"border-l-red-500"}),r.jsx(l,{title:"Tamamlanan Yolculuklar",value:t.completedTrips,icon:sa,color:"border-l-blue-500",prefix:""})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx($t,{className:"w-6 h-6 text-green-600"}),"Son İşlemler"]}),r.jsx("button",{className:"text-green-600 hover:text-green-700 font-medium",children:"Tümünü Gör"})]}),r.jsx("div",{className:"space-y-4",children:s.map((c,u)=>{var d,m,p,f,x;return r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:u*.1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${c.paymentMethod==="cash"?"bg-yellow-100":"bg-green-100"}`,children:r.jsx(xs,{className:`w-5 h-5 ${c.paymentMethod==="cash"?"text-yellow-600":"text-green-600"}`})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:c.customerName||"Müşteri"}),r.jsxs("p",{className:"text-sm text-gray-600",children:[((d=c.pickupLocation)==null?void 0:d.address)||"Lokasyon"," → ",((m=c.dropoffLocation)==null?void 0:m.address)||"Varış"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-green-600",children:["₺",(c.totalPrice||0).toLocaleString()]}),r.jsx("p",{className:"text-sm text-gray-500",children:((x=(f=(p=c.createdAt)==null?void 0:p.toDate)==null?void 0:f.call(p))==null?void 0:x.toLocaleDateString("tr-TR"))||"Tarih"})]})]},c.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all",children:[r.jsx(xs,{className:"w-8 h-8 mb-3"}),r.jsx("h4",{className:"font-bold text-lg mb-2",children:"Ödeme Yap"}),r.jsx("p",{className:"text-green-100 text-sm",children:"Şoförlere ödeme yap"})]}),r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-blue-500 to-indigo-500 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all",children:[r.jsx(Qe,{className:"w-8 h-8 mb-3"}),r.jsx("h4",{className:"font-bold text-lg mb-2",children:"Cari Takip"}),r.jsx("p",{className:"text-blue-100 text-sm",children:"Şoför carilerini görüntüle"})]}),r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-all",children:[r.jsx(Be,{className:"w-8 h-8 mb-3"}),r.jsx("h4",{className:"font-bold text-lg mb-2",children:"Rapor Al"}),r.jsx("p",{className:"text-purple-100 text-sm",children:"Finansal rapor oluştur"})]})]})]})},vH=()=>{var P;const[t,e]=g.useState([]),[s,n]=g.useState(null),[i,a]=g.useState(!0),[o,l]=g.useState(""),[c,u]=g.useState("all"),[d,m]=g.useState(!1),[p,f]=g.useState("payment"),[x,S]=g.useState(""),[k,v]=g.useState("");g.useEffect(()=>{_();const b=Yn(Ie(ae,"reservations"),y=>{y.docChanges().forEach(j=>{if(j.type==="modified"){const C=j.doc.data();C.status==="completed"&&!C.financialProcessed&&setTimeout(()=>_(),1e3)}})});return()=>b()},[]);const _=async()=>{try{a(!0);const b=await os(Ie(ae,"drivers")),y=await Promise.all(b.docs.map(async j=>{const C={id:j.id,...j.data()},R=Gs(Ie(ae,"reservations"),cn("driverId","==",C.id),cn("status","==","completed")),A=(await os(R)).docs.map(z=>({id:z.id,...z.data()}));let V=0,$=0,Y=0,B=0;A.forEach(z=>{const M=z.totalPrice||0,U=C.commissionRate||15,W=M*U/100;V+=M-W,$+=W,z.paymentMethod==="cash"&&(Y+=M,B+=W)});const O=C.balance||0,K=C.pendingPayments||0;return{...C,totalEarnings:V,totalCommission:$,cashToCollect:Y,cashCommissionOwed:B,currentBalance:O,pendingPayments:K,tripCount:A.length,transactions:C.transactions||[]}}));e(y)}catch(b){console.error("Şoför cari verilerini getirme hatası:",b)}finally{a(!1)}},w=t.filter(b=>{const y=(b.firstName||"").toLowerCase().includes(o.toLowerCase())||(b.lastName||"").toLowerCase().includes(o.toLowerCase())||(b.phone||"").includes(o);return c==="all"?y:c==="positive"?y&&b.currentBalance>=0:c==="negative"?y&&b.currentBalance<0:y}),E=async()=>{if(!s||!x||!k){ce.error("Lütfen tüm alanları doldurun");return}try{const b=parseFloat(x),y=p==="payment"?s.currentBalance+b:s.currentBalance-b,j={id:Date.now().toString(),type:p,amount:b,note:k,date:new Date,balanceBefore:s.currentBalance,balanceAfter:y},C=[...s.transactions||[],j];await Pt(Ce(ae,"drivers",s.id),{balance:y,transactions:C}),e(R=>R.map(D=>D.id===s.id?{...D,currentBalance:y,transactions:C}:D)),n(R=>({...R,currentBalance:y,transactions:C})),m(!1),S(""),v(""),ce.success("İşlem başarıyla kaydedildi")}catch(b){console.error("İşlem kaydetme hatası:",b),ce.error("İşlem kaydedilirken hata oluştu")}},T=({driver:b})=>r.jsxs(F.div,{whileHover:{scale:1.02},className:`bg-white rounded-lg p-6 shadow-sm border cursor-pointer transition-shadow hover:shadow-md ${b.currentBalance>=0?"border-l-4 border-l-green-500":"border-l-4 border-l-red-500"}`,onClick:()=>n(b),children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center",children:r.jsx(Qe,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-gray-800",children:[b.firstName," ",b.lastName]}),r.jsx("p",{className:"text-sm text-gray-500",children:b.phone})]})]}),r.jsx("div",{className:`px-2 py-1 rounded-md text-xs font-medium ${b.currentBalance>=0?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:b.currentBalance>=0?"Alacaklı":"Borçlu"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Cari Bakiye"}),r.jsxs("p",{className:`text-lg font-bold ${b.currentBalance>=0?"text-green-600":"text-red-600"}`,children:["₺",Math.abs(b.currentBalance).toLocaleString()]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Toplam Yolculuk"}),r.jsx("p",{className:"text-lg font-bold text-gray-800",children:b.tripCount})]})]}),b.cashCommissionOwed>0&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-2",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-600"}),r.jsxs("span",{className:"text-xs font-medium text-yellow-800",children:["Nakit Komisyon Borcu: ₺",b.cashCommissionOwed.toLocaleString()]})]})})]});return i?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Şoför Cari Hesapları"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Şoförlerin finansal durumlarını yönetin"})]}),r.jsxs("div",{className:"bg-white rounded-lg px-4 py-2 shadow-sm border",children:[r.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Şoför"}),r.jsx("div",{className:"text-xl font-bold text-gray-800",children:t.length})]})]}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"w-5 h-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Şoför ara (isim, telefon)...",value:o,onChange:b=>l(b.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("select",{value:c,onChange:b=>u(b.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tüm Şoförler"}),r.jsx("option",{value:"positive",children:"Alacaklılar"}),r.jsx("option",{value:"negative",children:"Borçlular"})]})})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(b=>r.jsx(T,{driver:b},b.id))}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-auto shadow-xl",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[r.jsxs("h3",{className:"text-xl font-semibold text-gray-800",children:[s.firstName," ",s.lastName," - Cari Hesap"]}),r.jsx("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-blue-600",children:"Cari Bakiye"}),r.jsxs("p",{className:`text-2xl font-bold ${s.currentBalance>=0?"text-green-600":"text-red-600"}`,children:["₺",Math.abs(s.currentBalance).toLocaleString()]})]}),r.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-600",children:"Toplam Kazanç"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₺",s.totalEarnings.toLocaleString()]})]}),r.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-purple-600",children:"Toplam Komisyon"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["₺",s.totalCommission.toLocaleString()]})]}),r.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[r.jsx("p",{className:"text-sm text-yellow-600",children:"Nakit Borç"}),r.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:["₺",s.cashCommissionOwed.toLocaleString()]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>{f("payment"),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(Bt,{className:"w-4 h-4"}),"Ödeme Yap"]}),r.jsxs("button",{onClick:()=>{f("debt"),m(!0)},className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(Uh,{className:"w-4 h-4"}),"Borç Ekle"]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"İşlem Geçmişi"}),r.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:(P=s.transactions)==null?void 0:P.map(b=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b.type==="payment"?"bg-green-100":"bg-red-100"}`,children:b.type==="payment"?r.jsx(Bt,{className:"w-4 h-4 text-green-600"}):r.jsx(Uh,{className:"w-4 h-4 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-800",children:b.note}),r.jsx("p",{className:"text-sm text-gray-600",children:new Date(b.date).toLocaleDateString("tr-TR")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:`font-bold ${b.type==="payment"?"text-green-600":"text-red-600"}`,children:[b.type==="payment"?"+":"-","₺",b.amount.toLocaleString()]}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Bakiye: ₺",b.balanceAfter.toLocaleString()]})]})]},b.id))})]})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl max-w-md w-full p-6 shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:p==="payment"?"Ödeme Yap":"Borç Ekle"}),r.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx(Ue,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tutar (₺)"}),r.jsx("input",{type:"number",value:x,onChange:b=>S(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),r.jsx("textarea",{value:k,onChange:b=>v(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"İşlem açıklaması..."})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"İptal"}),r.jsx("button",{onClick:E,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors ${p==="payment"?"bg-blue-600 hover:bg-blue-700":"bg-red-600 hover:bg-red-700"}`,children:"Kaydet"})]})]})]})})]})},bH=()=>{const[t,e]=g.useState([]),[s,n]=g.useState([]),[i,a]=g.useState([]),[o,l]=g.useState(!0),[c,u]=g.useState("pending"),[d,m]=g.useState(null),[p,f]=g.useState("all"),[x,S]=g.useState("all");g.useEffect(()=>{k()},[]);const k=async()=>{var E,T;try{l(!0);const b=(await os(Ie(ae,"drivers"))).docs.map(R=>({id:R.id,...R.data()}));a(b);const y=Gs(Ie(ae,"reservations"),cn("status","==","completed"),Fm("completedAt","desc")),j=await os(y),C=[];for(const R of j.docs){const D={id:R.id,...R.data()};if(D.driverId){const A=b.find(V=>V.id===D.driverId);if(A){const V=A.commissionRate||15,$=D.totalPrice||0,Y=$*V/100,B=$-Y,O={id:D.id,driverId:D.driverId,driverName:`${A.firstName} ${A.lastName}`,customerName:D.customerName,tripPrice:$,commission:Y,driverEarning:B,paymentMethod:D.paymentMethod,completedAt:D.completedAt,paymentStatus:D.driverPaymentStatus||"pending",route:`${((E=D.pickupLocation)==null?void 0:E.address)||"Bilinmiyor"} → ${((T=D.dropoffLocation)==null?void 0:T.address)||"Bilinmiyor"}`,commissionRate:V};C.push(O)}}}e(C.filter(R=>R.paymentStatus==="pending")),n(C.filter(R=>R.paymentStatus==="paid"))}catch(P){console.error("Ödeme verilerini getirme hatası:",P)}finally{l(!1)}},v=async E=>{try{if(await Pt(Ce(ae,"reservations",E.id),{driverPaymentStatus:"paid",paidAt:new Date}),E.paymentMethod!=="cash"){const P=(i.find(b=>b.id===E.driverId).balance||0)+E.driverEarning;await Pt(Ce(ae,"drivers",E.driverId),{balance:P})}e(T=>T.filter(P=>P.id!==E.id)),n(T=>[...T,{...E,paymentStatus:"paid",paidAt:new Date}]),alert("Ödeme başarıyla işaretlendi")}catch(T){console.error("Ödeme işaretleme hatası:",T),alert("Ödeme işaretlenirken hata oluştu")}},_=(c==="pending"?t:s).filter(E=>{var T,P;if(p!=="all"&&E.driverId!==p)return!1;if(x!=="all"){const b=((P=(T=E.completedAt)==null?void 0:T.toDate)==null?void 0:P.call(T))||new Date(E.completedAt),j=Math.floor((new Date-b)/(1e3*60*60*24));if(x==="today"&&j!==0||x==="week"&&j>7||x==="month"&&j>30)return!1}return!0}),w=({payment:E})=>{var T,P,b;return r.jsxs(F.div,{whileHover:{scale:1.01},className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-blue-500",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${E.paymentMethod==="cash"?"bg-yellow-100":"bg-green-100"}`,children:r.jsx(xs,{className:`w-5 h-5 ${E.paymentMethod==="cash"?"text-yellow-600":"text-green-600"}`})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-800",children:E.driverName}),r.jsx("p",{className:"text-sm text-gray-600",children:E.customerName})]})]}),r.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${E.paymentMethod==="cash"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:E.paymentMethod==="cash"?"Nakit":"Kredi/Havale"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Yolculuk Ücreti"}),r.jsxs("p",{className:"text-lg font-bold text-gray-800",children:["₺",E.tripPrice.toLocaleString()]})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm text-gray-600",children:["Komisyon (%",E.commissionRate,")"]}),r.jsxs("p",{className:"text-lg font-bold text-red-600",children:["₺",E.commission.toLocaleString()]})]})]}),r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-green-800",children:"Şoför Kazancı"}),r.jsxs("span",{className:"text-xl font-bold text-green-600",children:["₺",E.driverEarning.toLocaleString()]})]})}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rota"}),r.jsx("p",{className:"text-sm text-gray-800",children:E.route})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:((b=(P=(T=E.completedAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:b.toLocaleDateString("tr-TR"))||"Tarih bilinmiyor"}),c==="pending"&&r.jsxs("button",{onClick:()=>v(E),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm",children:[r.jsx(_e,{className:"w-4 h-4"}),"Ödendi İşaretle"]}),c==="completed"&&r.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[r.jsx(_e,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:"Ödendi"})]})]}),E.paymentMethod==="cash"&&r.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Is,{className:"w-4 h-4 text-yellow-600"}),r.jsx("span",{className:"text-sm text-yellow-800",children:"Nakit ödeme - Şoför komisyonu toplamalı"})]})})]})};return o?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-yellow-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ye,{className:"w-8 h-8 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Bekleyen Ödemeler"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-green-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_e,{className:"w-8 h-8 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tamamlanan"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:s.length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-blue-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(xs,{className:"w-8 h-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Bekleyen Tutar"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["₺",t.reduce((E,T)=>E+T.driverEarning,0).toLocaleString()]})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-purple-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Qe,{className:"w-8 h-8 text-purple-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Aktif Şoförler"}),r.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsx("button",{onClick:()=>u("pending"),className:`flex-1 px-6 py-4 font-medium transition-colors ${c==="pending"?"bg-yellow-50 text-yellow-600 border-b-2 border-yellow-600":"text-gray-600 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Ye,{className:"w-5 h-5"}),"Bekleyen Ödemeler (",t.length,")"]})}),r.jsx("button",{onClick:()=>u("completed"),className:`flex-1 px-6 py-4 font-medium transition-colors ${c==="completed"?"bg-green-50 text-green-600 border-b-2 border-green-600":"text-gray-600 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(_e,{className:"w-5 h-5"}),"Tamamlanan Ödemeler (",s.length,")"]})})]}),r.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("select",{value:p,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tüm Şoförler"}),i.map(E=>r.jsxs("option",{value:E.id,children:[E.firstName," ",E.lastName]},E.id))]})}),r.jsx("div",{className:"flex-1",children:r.jsxs("select",{value:x,onChange:E=>S(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Tüm Tarihler"}),r.jsx("option",{value:"today",children:"Bugün"}),r.jsx("option",{value:"week",children:"Son 7 Gün"}),r.jsx("option",{value:"month",children:"Son 30 Gün"})]})})]})}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:_.map(E=>r.jsx(w,{payment:E},E.id))}),_.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx($t,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:c==="pending"?"Bekleyen ödeme bulunamadı":"Tamamlanan ödeme bulunamadı"})]})]})]})]})},wH=()=>{const[t,e]=g.useState([]),[s,n]=g.useState([]),[i,a]=g.useState(!0),[o,l]=g.useState(!1),[c,u]=g.useState(null),[d,m]=g.useState({driverId:"",title:"",description:"",dueDate:"",amount:"",type:"payment",priority:"medium"});g.useEffect(()=>{p()},[]);const p=async()=>{try{a(!0);const y=(await os(Ie(ae,"drivers"))).docs.map(R=>({id:R.id,...R.data()}));n(y);const C=(await os(Ie(ae,"paymentReminders"))).docs.map(R=>{var D;return{id:R.id,...R.data(),dueDate:((D=R.data().dueDate)==null?void 0:D.toDate())||new Date(R.data().dueDate)}});C.sort((R,D)=>new Date(R.dueDate)-new Date(D.dueDate)),e(C)}catch(b){console.error("Veri getirme hatası:",b)}finally{a(!1)}},f=async b=>{if(b.preventDefault(),!d.driverId||!d.title||!d.dueDate){alert("Lütfen zorunlu alanları doldurun");return}try{const y={...d,dueDate:new Date(d.dueDate),amount:parseFloat(d.amount)||0,createdAt:new Date,status:"active"};if(c)await Pt(Ce(ae,"paymentReminders",c.id),y),e(j=>j.map(C=>C.id===c.id?{...C,...y}:C));else{const j=await un(Ie(ae,"paymentReminders"),y);e(C=>[...C,{id:j.id,...y}])}m({driverId:"",title:"",description:"",dueDate:"",amount:"",type:"payment",priority:"medium"}),l(!1),u(null)}catch(y){console.error("Uyarı kaydetme hatası:",y),alert("Uyarı kaydedilirken hata oluştu")}},x=async b=>{if(confirm("Bu uyarıyı silmek istediğinizden emin misiniz?"))try{await $m(Ce(ae,"paymentReminders",b)),e(y=>y.filter(j=>j.id!==b))}catch(y){console.error("Uyarı silme hatası:",y),alert("Uyarı silinirken hata oluştu")}},S=async b=>{try{await Pt(Ce(ae,"paymentReminders",b),{status:"completed",completedAt:new Date}),e(y=>y.map(j=>j.id===b?{...j,status:"completed",completedAt:new Date}:j))}catch(y){console.error("Uyarı tamamlama hatası:",y),alert("Uyarı tamamlanırken hata oluştu")}},k=b=>{u(b),m({driverId:b.driverId,title:b.title,description:b.description,dueDate:b.dueDate.toISOString().split("T")[0],amount:b.amount.toString(),type:b.type,priority:b.priority}),l(!0)},v=b=>{const y=s.find(j=>j.id===b);return y?`${y.firstName} ${y.lastName}`:"Bilinmeyen Şoför"},_=b=>{const y=new Date,C=new Date(b)-y;return Math.ceil(C/(1e3*60*60*24))},w=b=>{switch(b){case"high":return"border-l-red-500 bg-red-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":return"border-l-green-500 bg-green-50";default:return"border-l-gray-500 bg-gray-50"}},E=b=>{switch(b){case"payment":return"💰";case"commission":return"💼";case"other":return"📝";default:return"📋"}},T=t.filter(b=>b.status!=="completed"),P=t.filter(b=>b.status==="completed");return i?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Ödeme Uyarıları"}),r.jsx("p",{className:"text-gray-600",children:"Şoför ödemelerini ve komisyon tahsilat tarihlerini takip edin"})]}),r.jsxs("button",{onClick:()=>{u(null),m({driverId:"",title:"",description:"",dueDate:"",amount:"",type:"payment",priority:"medium"}),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[r.jsx(Bt,{className:"w-4 h-4"}),"Yeni Uyarı"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-red-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Is,{className:"w-8 h-8 text-red-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Acil Uyarılar"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:T.filter(b=>_(b.dueDate)<=0).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-yellow-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ye,{className:"w-8 h-8 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Bu Hafta"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:T.filter(b=>{const y=_(b.dueDate);return y>0&&y<=7}).length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-blue-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Be,{className:"w-8 h-8 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Aktif"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:T.length})]})]})}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg border-l-4 border-l-green-500",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_e,{className:"w-8 h-8 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tamamlanan"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.length})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("h3",{className:"text-xl font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Mo,{className:"w-6 h-6 text-orange-600"}),"Aktif Uyarılar"]})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[T.map(b=>{const y=_(b.dueDate),j=y<0,C=y===0;return r.jsx(F.div,{whileHover:{scale:1.01},className:`border-l-4 rounded-lg p-4 ${w(b.priority)} ${j?"ring-2 ring-red-200":C?"ring-2 ring-yellow-200":""}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:E(b.type)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-800",children:b.title}),r.jsxs("p",{className:"text-sm text-gray-600",children:[v(b.driverId)," • ",b.dueDate.toLocaleDateString("tr-TR")]}),b.description&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:b.description})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"text-right mr-4",children:[b.amount>0&&r.jsxs("p",{className:"font-bold text-green-600",children:["₺",b.amount.toLocaleString()]}),r.jsx("p",{className:`text-sm font-medium ${j?"text-red-600":C?"text-yellow-600":"text-gray-600"}`,children:j?`${Math.abs(y)} gün gecikmiş`:C?"Bugün":`${y} gün kaldı`})]}),r.jsx("button",{onClick:()=>k(b),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg",children:r.jsx(sf,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>S(b.id),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg",children:r.jsx(_e,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>x(b.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg",children:r.jsx(ka,{className:"w-4 h-4"})})]})]})},b.id)}),T.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Mo,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 text-lg",children:"Aktif uyarı bulunamadı"})]})]})})]}),o&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs(F.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:c?"Uyarı Düzenle":"Yeni Uyarı Oluştur"}),r.jsxs("form",{onSubmit:f,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şoför *"}),r.jsxs("select",{value:d.driverId,onChange:b=>m(y=>({...y,driverId:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"",children:"Şoför seçin"}),s.map(b=>r.jsxs("option",{value:b.id,children:[b.firstName," ",b.lastName]},b.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Başlık *"}),r.jsx("input",{type:"text",value:d.title,onChange:b=>m(y=>({...y,title:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Uyarı başlığı",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Açıklama"}),r.jsx("textarea",{value:d.description,onChange:b=>m(y=>({...y,description:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:"3",placeholder:"Detaylı açıklama"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tür"}),r.jsxs("select",{value:d.type,onChange:b=>m(y=>({...y,type:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[r.jsx("option",{value:"payment",children:"Ödeme"}),r.jsx("option",{value:"commission",children:"Komisyon"}),r.jsx("option",{value:"other",children:"Diğer"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öncelik"}),r.jsxs("select",{value:d.priority,onChange:b=>m(y=>({...y,priority:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[r.jsx("option",{value:"low",children:"Düşük"}),r.jsx("option",{value:"medium",children:"Orta"}),r.jsx("option",{value:"high",children:"Yüksek"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tarih *"}),r.jsx("input",{type:"date",value:d.dueDate,onChange:b=>m(y=>({...y,dueDate:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tutar (₺)"}),r.jsx("input",{type:"number",value:d.amount,onChange:b=>m(y=>({...y,amount:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"0"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400",children:"İptal"}),r.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:c?"Güncelle":"Oluştur"})]})]})]})})]})},NH=()=>{const[t,e]=g.useState({totalRevenue:0,totalCommissions:0,driverPayments:0,pendingPayments:0,cashTransactions:0,cardTransactions:0}),[s,n]=g.useState([]),[i,a]=g.useState([]),[o,l]=g.useState(!0),[c,u]=g.useState({startDate:new Date(new Date().setDate(1)).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]}),[d,m]=g.useState("summary");g.useEffect(()=>{p()},[c]);const p=async()=>{try{l(!0);const v=new Date(c.startDate),_=new Date(c.endDate);_.setHours(23,59,59,999);const E=(await os(Ie(ae,"drivers"))).docs.map(V=>({id:V.id,...V.data()}));n(E);const T=Gs(Ie(ae,"reservations"),cn("status","==","completed"),Fm("completedAt","desc"));let b=(await os(T)).docs.map(V=>({id:V.id,...V.data()})).filter(V=>{var Y;const $=((Y=V.completedAt)==null?void 0:Y.toDate())||new Date(V.completedAt);return $>=v&&$<=_});a(b);let y=0,j=0,C=0,R=0,D=0,A=0;b.forEach(V=>{const $=V.totalPrice||0;if(y+=$,V.paymentMethod==="cash"?C+=$:R+=$,V.driverId){const Y=E.find(B=>B.id===V.driverId);if(Y){const B=Y.commissionRate||15,O=$*B/100;j+=O,V.driverPaymentStatus==="paid"?D+=$-O:A+=$-O}}}),e({totalRevenue:y,totalCommissions:j,driverPayments:D,pendingPayments:A,cashTransactions:C,cardTransactions:R})}catch(v){console.error("Rapor verilerini getirme hatası:",v)}finally{l(!1)}},f=()=>s.map(v=>{const _=i.filter(y=>y.driverId===v.id),w=_.length,E=_.reduce((y,j)=>y+(j.totalPrice||0),0),T=v.commissionRate||15,P=E*T/100,b=E-P;return{id:v.id,name:`${v.firstName} ${v.lastName}`,phone:v.phone,totalTrips:w,totalRevenue:E,totalCommission:P,driverEarnings:b,commissionRate:T,averageTrip:w>0?E/w:0}}).sort((v,_)=>_.totalRevenue-v.totalRevenue),x=()=>{const v=i.filter(w=>w.paymentMethod==="cash").length,_=i.filter(w=>w.paymentMethod!=="cash").length;return{cash:{count:v,amount:t.cashTransactions,percentage:i.length>0?v/i.length*100:0},card:{count:_,amount:t.cardTransactions,percentage:i.length>0?_/i.length*100:0}}},S=(v,_)=>{const w=v.map(b=>Object.values(b).join(",")).join(`
`),E=new Blob([w],{type:"text/csv"}),T=window.URL.createObjectURL(E),P=document.createElement("a");P.href=T,P.download=_,P.click(),window.URL.revokeObjectURL(T)},k=({title:v,value:_,icon:w,color:E,change:T})=>r.jsx(F.div,{whileHover:{scale:1.02},className:`bg-white rounded-xl p-6 shadow-lg border-l-4 ${E}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm font-medium",children:v}),r.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-2",children:typeof _=="number"&&v.includes("₺")?`₺${_.toLocaleString()}`:_.toLocaleString()}),T&&r.jsxs("p",{className:`text-sm mt-2 ${T>0?"text-green-600":"text-red-600"}`,children:[T>0?"+":"",T,"% önceki döneme göre"]})]}),r.jsx("div",{className:`p-3 rounded-full ${E.replace("border-l-","bg-").replace("-500","-100")}`,children:r.jsx(w,{className:`w-8 h-8 ${E.replace("border-l-","text-")}`})})]})});return o?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Finansal Raporlar"}),r.jsx("p",{className:"text-gray-600",children:"Detaylı finansal analiz ve raporlama"})]}),r.jsx("div",{className:"flex gap-3",children:r.jsxs("button",{onClick:()=>S(f(),"sofor_raporu.csv"),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[r.jsx(Zm,{className:"w-4 h-4"}),"CSV İndir"]})})]}),r.jsx("div",{className:"bg-white rounded-xl p-6 shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Be,{className:"w-5 h-5 text-gray-600"}),r.jsx("span",{className:"font-medium text-gray-800",children:"Tarih Aralığı:"}),r.jsx("input",{type:"date",value:c.startDate,onChange:v=>u(_=>({..._,startDate:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"}),r.jsx("span",{className:"text-gray-500",children:"-"}),r.jsx("input",{type:"date",value:c.endDate,onChange:v=>u(_=>({..._,endDate:v.target.value})),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(k,{title:"Toplam Gelir",value:t.totalRevenue,icon:xs,color:"border-l-green-500"}),r.jsx(k,{title:"Toplam Komisyon",value:t.totalCommissions,icon:sa,color:"border-l-blue-500"}),r.jsx(k,{title:"Şoför Ödemeleri",value:t.driverPayments,icon:Qe,color:"border-l-purple-500"}),r.jsx(k,{title:"Bekleyen Ödemeler",value:t.pendingPayments,icon:Jm,color:"border-l-yellow-500"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"flex border-b border-gray-200",children:[r.jsx("button",{onClick:()=>m("summary"),className:`flex-1 px-6 py-4 font-medium transition-colors ${d==="summary"?"bg-green-50 text-green-600 border-b-2 border-green-600":"text-gray-600 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(QC,{className:"w-5 h-5"}),"Özet Rapor"]})}),r.jsx("button",{onClick:()=>m("drivers"),className:`flex-1 px-6 py-4 font-medium transition-colors ${d==="drivers"?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(Qe,{className:"w-5 h-5"}),"Şoför Performansı"]})}),r.jsx("button",{onClick:()=>m("payments"),className:`flex-1 px-6 py-4 font-medium transition-colors ${d==="payments"?"bg-purple-50 text-purple-600 border-b-2 border-purple-600":"text-gray-600 hover:bg-gray-50"}`,children:r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(qF,{className:"w-5 h-5"}),"Ödeme Yöntemleri"]})})]}),r.jsxs("div",{className:"p-6",children:[d==="summary"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[r.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Gelir Dağılımı"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Nakit Ödemeler"}),r.jsxs("span",{className:"font-bold",children:["₺",t.cashTransactions.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Kredi Kartı/Havale"}),r.jsxs("span",{className:"font-bold",children:["₺",t.cardTransactions.toLocaleString()]})]}),r.jsxs("div",{className:"border-t pt-3 flex justify-between font-bold text-lg",children:[r.jsx("span",{children:"Toplam"}),r.jsxs("span",{children:["₺",t.totalRevenue.toLocaleString()]})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200",children:[r.jsx("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Komisyon Analizi"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Toplam Komisyon"}),r.jsxs("span",{className:"font-bold",children:["₺",t.totalCommissions.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Ortalama Komisyon Oranı"}),r.jsxs("span",{className:"font-bold",children:["%",t.totalRevenue>0?(t.totalCommissions/t.totalRevenue*100).toFixed(1):0]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Toplam Yolculuk"}),r.jsx("span",{className:"font-bold",children:i.length})]})]})]})]})}),d==="drivers"&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"text-lg font-bold text-gray-800",children:"Şoför Performans Raporu"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-50",children:[r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Şoför"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Yolculuk"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Toplam Gelir"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Komisyon"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Şoför Kazancı"}),r.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Ort. Yolculuk"})]})}),r.jsx("tbody",{children:f().map(v=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 px-4 py-2",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:v.name}),r.jsx("div",{className:"text-sm text-gray-600",children:v.phone})]})}),r.jsx("td",{className:"border border-gray-300 px-4 py-2 text-center font-bold",children:v.totalTrips}),r.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-center font-bold text-green-600",children:["₺",v.totalRevenue.toLocaleString()]}),r.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-center font-bold text-red-600",children:["₺",v.totalCommission.toLocaleString()]}),r.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-center font-bold text-blue-600",children:["₺",v.driverEarnings.toLocaleString()]}),r.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-center",children:["₺",v.averageTrip.toLocaleString()]})]},v.id))})]})})]}),d==="payments"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h4",{className:"text-lg font-bold text-gray-800",children:"Ödeme Yöntemi Analizi"}),(()=>{const v=x();return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-6 rounded-xl border border-yellow-200",children:[r.jsx("h5",{className:"text-lg font-bold text-gray-800 mb-4",children:"💰 Nakit Ödemeler"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"İşlem Sayısı"}),r.jsx("span",{className:"font-bold",children:v.cash.count})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Toplam Tutar"}),r.jsxs("span",{className:"font-bold",children:["₺",v.cash.amount.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Yüzde"}),r.jsxs("span",{className:"font-bold",children:["%",v.cash.percentage.toFixed(1)]})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200",children:[r.jsx("h5",{className:"text-lg font-bold text-gray-800 mb-4",children:"💳 Kredi Kartı/Havale"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"İşlem Sayısı"}),r.jsx("span",{className:"font-bold",children:v.card.count})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Toplam Tutar"}),r.jsxs("span",{className:"font-bold",children:["₺",v.card.amount.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Yüzde"}),r.jsxs("span",{className:"font-bold",children:["%",v.card.percentage.toFixed(1)]})]})]})]})]})})()]})]})]})]})},jH=()=>{const[t,e]=g.useState("overview"),s=[{id:"overview",label:"Genel Bakış",icon:sa,component:yH},{id:"drivers",label:"Şoför Cariler",icon:Qe,component:vH},{id:"payments",label:"Ödeme Yönetimi",icon:$t,component:bH},{id:"reminders",label:"Ödeme Uyarıları",icon:Is,component:wH},{id:"reports",label:"Finansal Raporlar",icon:Jm,component:NH}],n=()=>{const i=s.find(o=>o.id===t),a=i==null?void 0:i.component;return a?r.jsx(a,{}):null};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Finansal Yönetim"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Tüm finansal işlemler, şoför carilik hesapları ve ödeme takibi merkezi"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[r.jsx("div",{className:"flex flex-wrap border-b border-gray-200",children:s.map(i=>r.jsxs("button",{onClick:()=>e(i.id),className:`
                flex items-center gap-2 px-6 py-4 transition-all duration-200 font-medium
                ${t===i.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-800"}
              `,children:[r.jsx(i.icon,{className:"w-5 h-5"}),i.label]},i.id))}),r.jsx("div",{className:"p-6",children:r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:n()},t)})]})]})},EH=()=>{var _;const{state:t,updateSettings:e}=Ws(),[s,n]=g.useState("general"),[i,a]=g.useState(!1),[o,l]=g.useState(!1),[c,u]=g.useState({general:{companyName:"SBS Transfer",companyEmail:"info@sbstransfer.com",companyPhone:"+90 555 123 45 67",companyAddress:"İstanbul, Türkiye",companyDescription:"Premium transfer hizmetleri",website:"https://sbstransfer.com",logo:"",favicon:""},payment:{paytrMerchantId:"",paytrMerchantKey:"",paytrMerchantSalt:"",testMode:!0,enabledMethods:{cash:!0,creditCard:!0,bankTransfer:!0,paytr:!1},currency:"TRY",taxRate:18},bankAccounts:[{id:1,bankName:"Türkiye İş Bankası",accountHolder:"SBS Transfer Hizmetleri Ltd. Şti.",iban:"TR33 0006 4000 0011 2345 6789 01",branch:"Ataşehir Şubesi",isActive:!0}],company:{taxNumber:"1234567890",commercialRegistrationNumber:"123456",mersisNumber:"0123456789012345",establishmentDate:"2020-01-01",legalStructure:"Ltd. Şti.",authorizedPerson:"Mehmet Yılmaz",authorizedPersonTitle:"Genel Müdür"},commission:{defaultDriverCommission:70,companyCommission:30,minimumCommission:50,maximumCommission:90,paymentFrequency:"weekly"},notifications:{email:{newReservation:!0,reservationUpdate:!0,driverAssignment:!0,paymentReceived:!0,cancellation:!0,weeklyReport:!0},sms:{reservationConfirmation:!0,driverAssignment:!0,paymentReminder:!1,promotions:!1},push:{newReservation:!0,statusUpdate:!0,promotions:!1}},system:{maintenanceMode:!1,debugMode:!1,dataRetention:365,backupFrequency:"daily",timezone:"Europe/Istanbul",language:"tr",dateFormat:"DD/MM/YYYY",timeFormat:"24h"}}),d=[{id:"general",name:"Genel Ayarlar",icon:Oo,description:"Şirket bilgileri ve genel ayarlar"},{id:"payment",name:"Ödeme Ayarları",icon:$t,description:"PayTR API ve ödeme yöntemleri"},{id:"bankAccounts",name:"Banka Hesapları",icon:ev,description:"Havale için banka hesap bilgileri"},{id:"company",name:"Şirket Bilgileri",icon:XC,description:"Resmi şirket ve yasal bilgiler"},{id:"commission",name:"Komisyon Ayarları",icon:WF,description:"Şoför komisyon oranları"},{id:"notifications",name:"Bildirim Ayarları",icon:Mo,description:"E-posta, SMS ve push bildirimleri"},{id:"system",name:"Sistem Ayarları",icon:YF,description:"Sistem konfigürasyonu ve güvenlik"}];g.useEffect(()=>{const w=localStorage.getItem("sbsSettings");if(w)try{const E=JSON.parse(w);u(T=>({...T,...E}))}catch(E){console.error("Error parsing saved settings:",E)}},[]);const m=(w,E,T)=>{u(P=>({...P,[w]:{...P[w],[E]:T}})),a(!0)},p=(w,E,T,P)=>{u(b=>({...b,[w]:{...b[w],[E]:{...b[w][E],[T]:P}}})),a(!0)},f=(w,E,T)=>{u(P=>({...P,bankAccounts:P.bankAccounts.map((b,y)=>y===w?{...b,[E]:T}:b)})),a(!0)},x=()=>{const w={id:Date.now(),bankName:"",accountHolder:"",iban:"",branch:"",isActive:!0};u(E=>({...E,bankAccounts:[...E.bankAccounts,w]})),a(!0)},S=w=>{u(E=>({...E,bankAccounts:E.bankAccounts.filter((T,P)=>P!==w)})),a(!0)},k=async()=>{l(!0);try{localStorage.setItem("sbsSettings",JSON.stringify(c)),await e(c),a(!1),ce.success("Ayarlar başarıyla kaydedildi!")}catch(w){console.error("Settings save error:",w),ce.error("Ayarlar kaydedilirken bir hata oluştu")}finally{l(!1)}},v=()=>{switch(s){case"general":return r.jsx(kH,{settings:c.general,onChange:(w,E)=>m("general",w,E)});case"payment":return r.jsx(_H,{settings:c.payment,onChange:(w,E)=>m("payment",w,E),onNestedChange:(w,E,T)=>p("payment",w,E,T)});case"bankAccounts":return r.jsx(SH,{accounts:c.bankAccounts,onAccountChange:f,onAddAccount:x,onRemoveAccount:S});case"company":return r.jsx(TH,{settings:c.company,onChange:(w,E)=>m("company",w,E)});case"commission":return r.jsx(CH,{settings:c.commission,onChange:(w,E)=>m("commission",w,E)});case"notifications":return r.jsx(IH,{settings:c.notifications,onChange:(w,E,T)=>p("notifications",w,E,T)});case"system":return r.jsx(AH,{settings:c.system,onChange:(w,E)=>m("system",w,E)});default:return null}};return r.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Sistem Ayarları"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Platform ayarlarını yönetin ve konfigürasyon yapın"})]}),i&&r.jsxs(F.button,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,disabled:o,className:"flex items-center space-x-2 bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-colors shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(gr,{className:"h-5 w-5"}),r.jsx("span",{children:o?"Kaydediliyor...":"Değişiklikleri Kaydet"})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"flex space-x-0",children:d.map((w,E)=>{const T=w.icon,P=s===w.id;return r.jsxs("button",{onClick:()=>n(w.id),className:`relative flex-1 py-4 px-6 text-sm font-medium transition-colors ${P?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"} ${E===0?"rounded-tl-xl":""} ${E===d.length-1?"rounded-tr-xl":""}`,children:[r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx(T,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:block",children:w.name})]}),P&&r.jsx(F.div,{layoutId:"activeTab",className:"absolute inset-0 bg-blue-50 border-b-2 border-blue-600 rounded-t-xl",style:{zIndex:-1},transition:{type:"spring",stiffness:300,damping:30}})]},w.id)})})}),r.jsx("div",{className:"px-6 py-3 bg-gray-50 rounded-b-xl",children:r.jsx("p",{className:"text-sm text-gray-600",children:(_=d.find(w=>w.id===s))==null?void 0:_.description})})]}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:v()},s),r.jsx(lr,{children:i&&r.jsx(F.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},className:"fixed bottom-6 right-6 bg-yellow-100 border border-yellow-300 rounded-lg p-4 shadow-lg max-w-sm",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ne,{className:"h-5 w-5 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Kaydedilmemiş Değişiklikler"}),r.jsx("p",{className:"text-xs text-yellow-700",children:"Değişikliklerinizi kaydetmeyi unutmayın"})]})]})})})]})},kH=({settings:t,onChange:e})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şirket Adı *"}),r.jsx("input",{type:"text",value:t.companyName,onChange:s=>e("companyName",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Şirket adını girin"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi *"}),r.jsx("input",{type:"email",value:t.companyEmail,onChange:s=>e("companyEmail",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"info@company.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon Numarası *"}),r.jsx("input",{type:"tel",value:t.companyPhone,onChange:s=>e("companyPhone",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+90 555 123 45 67"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),r.jsx("input",{type:"url",value:t.website,onChange:s=>e("website",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://company.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şirket Adresi *"}),r.jsx("textarea",{value:t.companyAddress,onChange:s=>e("companyAddress",s.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tam adres bilgisi"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şirket Açıklaması"}),r.jsx("textarea",{value:t.companyDescription,onChange:s=>e("companyDescription",s.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Şirket hakkında kısa açıklama"})]})]}),_H=({settings:t,onChange:e,onNestedChange:s})=>r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx($t,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{children:"PayTR API Ayarları"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(tv,{className:"h-4 w-4 text-blue-600"}),r.jsx("p",{className:"text-sm text-blue-800",children:"PayTR API bilgilerinizi PayTR merchant panelinden alabilirsiniz."})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Merchant ID"}),r.jsx("input",{type:"text",value:t.paytrMerchantId,onChange:n=>e("paytrMerchantId",n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"PayTR Merchant ID"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Merchant Key"}),r.jsx("input",{type:"password",value:t.paytrMerchantKey,onChange:n=>e("paytrMerchantKey",n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"PayTR Merchant Key"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Merchant Salt"}),r.jsx("input",{type:"password",value:t.paytrMerchantSalt,onChange:n=>e("paytrMerchantSalt",n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"PayTR Merchant Salt"})]}),r.jsxs("div",{className:"flex items-center space-x-3 pt-8",children:[r.jsx("input",{type:"checkbox",id:"testMode",checked:t.testMode,onChange:n=>e("testMode",n.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("label",{htmlFor:"testMode",className:"text-sm font-medium text-gray-700",children:"Test Modu Aktif"})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Ödeme Yöntemleri"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(t.enabledMethods).map(([n,i])=>r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:i,onChange:a=>s("enabledMethods",n,a.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:n==="cash"?"Nakit":n==="creditCard"?"Kredi Kartı":n==="bankTransfer"?"Banka Havalesi":n==="paytr"?"PayTR":n})]},n))})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Para Birimi"}),r.jsxs("select",{value:t.currency,onChange:n=>e("currency",n.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"TRY",children:"Türk Lirası (₺)"}),r.jsx("option",{value:"USD",children:"Amerikan Doları ($)"}),r.jsx("option",{value:"EUR",children:"Euro (€)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"KDV Oranı (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:t.taxRate,onChange:n=>e("taxRate",parseFloat(n.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),SH=({accounts:t,onAccountChange:e,onAddAccount:s,onRemoveAccount:n})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Banka Hesapları"}),r.jsxs("button",{onClick:s,className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[r.jsx(ev,{className:"h-4 w-4"}),r.jsx("span",{children:"Hesap Ekle"})]})]}),r.jsx("div",{className:"space-y-4",children:t.map((i,a)=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Banka Adı *"}),r.jsx("input",{type:"text",value:i.bankName,onChange:o=>e(a,"bankName",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Banka adı"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hesap Sahibi *"}),r.jsx("input",{type:"text",value:i.accountHolder,onChange:o=>e(a,"accountHolder",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Hesap sahibi adı"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IBAN *"}),r.jsx("input",{type:"text",value:i.iban,onChange:o=>e(a,"iban",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"TR00 0000 0000 0000 0000 0000 00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şube"}),r.jsx("input",{type:"text",value:i.branch,onChange:o=>e(a,"branch",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Şube adı"})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-4",children:[r.jsxs("label",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:i.isActive,onChange:o=>e(a,"isActive",o.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Aktif Hesap"})]}),r.jsx("button",{onClick:()=>n(a),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Hesabı Kaldır"})]})]},i.id))})]}),TH=({settings:t,onChange:e})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vergi Numarası"}),r.jsx("input",{type:"text",value:t.taxNumber,onChange:s=>e("taxNumber",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"1234567890"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ticaret Sicil Numarası"}),r.jsx("input",{type:"text",value:t.commercialRegistrationNumber,onChange:s=>e("commercialRegistrationNumber",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123456"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MERSİS Numarası"}),r.jsx("input",{type:"text",value:t.mersisNumber,onChange:s=>e("mersisNumber",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0123456789012345"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kuruluş Tarihi"}),r.jsx("input",{type:"date",value:t.establishmentDate,onChange:s=>e("establishmentDate",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hukuki Yapı"}),r.jsxs("select",{value:t.legalStructure,onChange:s=>e("legalStructure",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"Ltd. Şti.",children:"Limited Şirket"}),r.jsx("option",{value:"A.Ş.",children:"Anonim Şirket"}),r.jsx("option",{value:"Şahıs",children:"Şahıs Şirketi"}),r.jsx("option",{value:"Koop.",children:"Kooperatif"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yetkili Kişi"}),r.jsx("input",{type:"text",value:t.authorizedPerson,onChange:s=>e("authorizedPerson",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ad Soyad"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yetkili Unvanı"}),r.jsx("input",{type:"text",value:t.authorizedPersonTitle,onChange:s=>e("authorizedPersonTitle",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Genel Müdür, CEO, vs."})]})]}),CH=({settings:t,onChange:e})=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(tv,{className:"h-4 w-4 text-blue-600"}),r.jsx("p",{className:"text-sm text-blue-800",children:"Komisyon oranları toplamı %100 olmalıdır. Şoför + Şirket = %100"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Varsayılan Şoför Komisyonu (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:t.defaultDriverCommission,onChange:s=>e("defaultDriverCommission",parseInt(s.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Şoförlere verilen varsayılan komisyon oranı"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şirket Komisyonu (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:t.companyCommission,onChange:s=>e("companyCommission",parseInt(s.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Şirketin aldığı komisyon oranı"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Komisyon (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:t.minimumCommission,onChange:s=>e("minimumCommission",parseInt(s.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maksimum Komisyon (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:t.maximumCommission,onChange:s=>e("maximumCommission",parseInt(s.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ödeme Sıklığı"}),r.jsxs("select",{value:t.paymentFrequency,onChange:s=>e("paymentFrequency",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"daily",children:"Günlük"}),r.jsx("option",{value:"weekly",children:"Haftalık"}),r.jsx("option",{value:"monthly",children:"Aylık"})]})]})]}),IH=({settings:t,onChange:e})=>r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(ns,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{children:"E-posta Bildirimleri"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t.email).map(([s,n])=>r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:n,onChange:i=>e("email",s,i.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:s==="newReservation"?"Yeni Rezervasyon":s==="reservationUpdate"?"Rezervasyon Güncelleme":s==="driverAssignment"?"Şoför Atama":s==="paymentReceived"?"Ödeme Alındı":s==="cancellation"?"İptal Bildirimi":s==="weeklyReport"?"Haftalık Rapor":s})]},s))})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(QF,{className:"h-5 w-5 text-green-600"}),r.jsx("span",{children:"SMS Bildirimleri"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t.sms).map(([s,n])=>r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:n,onChange:i=>e("sms",s,i.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:s==="reservationConfirmation"?"Rezervasyon Onayı":s==="driverAssignment"?"Şoför Atama":s==="paymentReminder"?"Ödeme Hatırlatması":s==="promotions"?"Promosyonlar":s})]},s))})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[r.jsx(Mo,{className:"h-5 w-5 text-purple-600"}),r.jsx("span",{children:"Push Bildirimleri"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(t.push).map(([s,n])=>r.jsxs("label",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",checked:n,onChange:i=>e("push",s,i.target.checked),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:s==="newReservation"?"Yeni Rezervasyon":s==="statusUpdate"?"Durum Güncellemesi":s==="promotions"?"Promosyonlar":s})]},s))})]})]}),AH=({settings:t,onChange:e})=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saat Dilimi"}),r.jsxs("select",{value:t.timezone,onChange:s=>e("timezone",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"Europe/Istanbul",children:"İstanbul (UTC+3)"}),r.jsx("option",{value:"Europe/London",children:"Londra (UTC+0)"}),r.jsx("option",{value:"America/New_York",children:"New York (UTC-5)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dil"}),r.jsxs("select",{value:t.language,onChange:s=>e("language",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"tr",children:"Türkçe"}),r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"de",children:"Deutsch"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tarih Formatı"}),r.jsxs("select",{value:t.dateFormat,onChange:s=>e("dateFormat",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),r.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),r.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saat Formatı"}),r.jsxs("select",{value:t.timeFormat,onChange:s=>e("timeFormat",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"24h",children:"24 Saat"}),r.jsx("option",{value:"12h",children:"12 Saat (AM/PM)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Veri Saklama Süresi (Gün)"}),r.jsx("input",{type:"number",min:"30",max:"3650",value:t.dataRetention,onChange:s=>e("dataRetention",parseInt(s.target.value)),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yedekleme Sıklığı"}),r.jsxs("select",{value:t.backupFrequency,onChange:s=>e("backupFrequency",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"daily",children:"Günlük"}),r.jsx("option",{value:"weekly",children:"Haftalık"}),r.jsx("option",{value:"monthly",children:"Aylık"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-yellow-200 rounded-lg bg-yellow-50",children:[r.jsx("input",{type:"checkbox",checked:t.maintenanceMode,onChange:s=>e("maintenanceMode",s.target.checked),className:"h-4 w-4 text-yellow-600 focus:ring-yellow-500 border-gray-300 rounded"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Bakım Modu"}),r.jsx("p",{className:"text-xs text-yellow-700",children:"Aktif olduğunda site bakım moduna geçer"})]})]}),r.jsxs("label",{className:"flex items-center space-x-3 p-4 border border-red-200 rounded-lg bg-red-50",children:[r.jsx("input",{type:"checkbox",checked:t.debugMode,onChange:s=>e("debugMode",s.target.checked),className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-red-800",children:"Debug Modu"}),r.jsx("p",{className:"text-xs text-red-700",children:"Sadece geliştirme aşamasında aktif edilmeli"})]})]})]})]}),PH=({driverId:t,onScanComplete:e})=>{var S,k,v,_,w,E;const[s,n]=g.useState(null),[i,a]=g.useState(!1),[o,l]=g.useState(null),[c,u]=g.useState(""),[d,m]=g.useState(!1),p=async T=>{try{a(!0);let P;try{P=JSON.parse(T)}catch{P={reservationId:T}}const b=P.reservationId;if(!b)throw new Error("QR kodunda rezervasyon ID bulunamadı");const y=await ni(Ce(ae,"reservations",b));if(!y.exists())throw new Error("Rezervasyon bulunamadı");const j=y.data();l(j),n(P)}catch(P){console.error("QR scan error:",P),ce.error("QR kod okuma hatası: "+P.message)}finally{a(!1)}},f=async()=>{if(!c.trim()){ce.error("Rezervasyon ID giriniz");return}try{a(!0);const T=await ni(Ce(ae,"reservations",c));if(!T.exists())throw new Error("Rezervasyon bulunamadı");const P=T.data();l(P),n({reservationId:c})}catch(T){console.error("Manual lookup error:",T),ce.error("Rezervasyon bulunamadı: "+T.message)}finally{a(!1)}},x=async()=>{if(!s||!o){ce.error("Önce QR kod okutun");return}try{a(!0);const T=await oI(s.reservationId,t);let P="Yolculuk tamamlandı! ";o.paymentMethod==="cash"?P+=`${o.totalPrice}₺ nakit ödeme aldınız. Komisyon (${(o.totalPrice*.15).toFixed(0)}₺) cari hesabınızdan düşüldü.`:P+=`Kazancınız (${(o.totalPrice*.85).toFixed(0)}₺) cari hesabınıza eklendi.`,ce.success(P),e&&e(T),n(null),l(null),u("")}catch(T){console.error("Trip completion error:",T),ce.error("Yolculuk tamamlama hatası: "+T.message)}finally{a(!1)}};return r.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-xl shadow-lg p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx(pa,{className:"w-16 h-16 mx-auto text-blue-600 mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Yolculuk Tamamla"}),r.jsx("p",{className:"text-gray-600",children:"QR kod okutun veya rezervasyon ID girin"})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[r.jsx(pa,{className:"w-12 h-12 mx-auto text-gray-400 mb-2"}),r.jsx("p",{className:"text-gray-500",children:"QR kod okutmak için tıklayın"}),r.jsx("button",{onClick:()=>{const T=JSON.stringify({reservationId:"SBS-001234",customerName:"Demo Müşteri"});p(T)},className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Demo QR Oku"})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("button",{onClick:()=>m(!d),className:"w-full text-blue-600 hover:text-blue-800 text-sm",children:"Manuel rezervasyon ID gir"}),d&&r.jsxs(F.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-3 space-y-3",children:[r.jsx("input",{type:"text",placeholder:"Rezervasyon ID (örn: SBS-001234)",value:c,onChange:T=>u(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{onClick:f,disabled:i,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50",children:i?"Aranıyor...":"Rezervasyon Bul"})]})]}),o&&r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gray-50 rounded-lg p-4 mb-6",children:[r.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[r.jsx(_e,{className:"w-5 h-5 text-green-600 mr-2"}),"Rezervasyon Bulundu"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Fe,{className:"w-4 h-4 text-gray-500 mr-2"}),r.jsxs("span",{className:"text-sm",children:[(S=o.customerInfo)==null?void 0:S.firstName," ",(k=o.customerInfo)==null?void 0:k.lastName]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ke,{className:"w-4 h-4 text-gray-500 mr-2"}),r.jsxs("span",{className:"text-sm",children:[(v=o.tripDetails)==null?void 0:v.pickupLocation," → ",(_=o.tripDetails)==null?void 0:_.dropoffLocation]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ye,{className:"w-4 h-4 text-gray-500 mr-2"}),r.jsxs("span",{className:"text-sm",children:[(w=o.tripDetails)==null?void 0:w.date," - ",(E=o.tripDetails)==null?void 0:E.time]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx(xs,{className:"w-4 h-4 text-gray-500 mr-2"}),r.jsxs("span",{className:"text-sm",children:[o.totalPrice,"₺ - ",o.paymentMethod==="cash"?"Nakit":"Kart"]})]}),o.paymentMethod==="cash"?r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-2 mt-3",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 text-yellow-600 mr-2"}),r.jsxs("span",{className:"text-xs text-yellow-800",children:["Nakit ödeme: Müşteriden ",o.totalPrice,"₺ alacaksınız"]})]})}):r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2 mt-3",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(_e,{className:"w-4 h-4 text-blue-600 mr-2"}),r.jsx("span",{className:"text-xs text-blue-800",children:"Kart ödemesi: Kazancınız cari hesabınıza eklenecek"})]})})]})]}),s&&o&&r.jsx("button",{onClick:x,disabled:i,className:"w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 font-medium",children:i?"Tamamlanıyor...":"✓ Yolculuğu Tamamla"})]})},NE=()=>{const{currentUser:t}=Ws(),{user:e,userProfile:s}=pr(),[n,i]=g.useState([]),[a,o]=g.useState(!0),[l,c]=g.useState(null),[u,d]=g.useState("dashboard"),[m,p]=g.useState(!1),[f,x]=g.useState(null);g.useEffect(()=>{if(!(t!=null&&t.uid)&&!(e!=null&&e.uid)){console.log("DriverDashboard: User ID bulunamadı");return}const y=(t==null?void 0:t.uid)||(e==null?void 0:e.uid),j=Gs(Ie(ae,"reservations"),cn("assignedDriverId","==",y)),C=Gs(Ie(ae,"reservations"),cn("assignedDriver","==",y)),R=Yn(j,V=>{A(V)},V=>{console.error("DriverDashboard: assignedDriverId query error:",V)}),D=Yn(C,V=>{A(V)},V=>{console.error("DriverDashboard: assignedDriver query error:",V)});function A(V,$){const Y=V.docs.map(B=>({id:B.id,...B.data()}));i(B=>{const O=[...B];Y.forEach(z=>{const M=O.findIndex(U=>U.id===z.id);M>=0?O[M]=z:O.push(z)}),O.sort((z,M)=>{var Z,G;const U=((Z=z.tripDetails)==null?void 0:Z.date)||z.date,W=((G=M.tripDetails)==null?void 0:G.date)||M.date;return U&&W?new Date(W)-new Date(U):0});const K=O.find(z=>z.status==="trip-started");return x(K),O}),o(!1)}return()=>{R(),D()}},[t,e,s]);const S=n.filter(y=>y.status==="assigned"||y.status==="confirmed"),k=async y=>{try{const j=Ce(ae,"reservations",y);await Pt(j,{status:"trip-started",tripStartTime:new Date().toISOString()}),ce.success("Yolculuk başlatıldı!"),d("active-trip")}catch(j){console.error("Error starting trip:",j),ce.error("Yolculuk başlatılırken hata oluştu")}},v=async y=>{try{await oI(y),ce.success("Yolculuk tamamlandı!"),d("dashboard"),x(null)}catch(j){console.error("Error completing trip:",j),ce.error("Yolculuk tamamlanırken hata oluştu")}},_=(y,j)=>{const C=`https://www.google.com/maps/dir/${encodeURIComponent(y)}/${encodeURIComponent(j)}`;window.open(C,"_blank")},w=()=>r.jsx(lr,{children:m&&r.jsx(F.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:r.jsxs(F.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"QR Kod Okut"}),r.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(Ue,{className:"w-6 h-6 text-gray-500"})})]}),r.jsx(PH,{onScanSuccess:y=>{console.log("QR Scan Result:",y);const j=y,C=n.find(R=>R.id===j||R.reservationId===j);console.log("Bulunan rezervasyon:",C),console.log("Mevcut rezervasyonlar:",n),C?(k(C.id),p(!1),ce.success(`QR kod başarıyla okundu! Rezervasyon: ${C.reservationId||C.id}`)):(console.error("Rezervasyon bulunamadı. Aranan ID:",j),ce.error(`Bu QR koda ait rezervasyon bulunamadı: ${j}`))},onScanError:y=>{console.error("QR Scan Error:",y),ce.error("QR kod okuma hatası")}})]})})}),E=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[r.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["Merhaba ",(s==null?void 0:s.firstName)||(s==null?void 0:s.name)||"Şoför","!"]}),r.jsxs("p",{className:"text-blue-100",children:[S.length," atanmış göreviniz var"]})]}),f&&r.jsx(F.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"bg-green-500 p-2 rounded-full",children:r.jsx(je,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-green-900",children:"Aktif Yolculuk"}),r.jsx("p",{className:"text-sm text-green-700",children:f.customerName})]})]}),r.jsx("button",{onClick:()=>d("active-trip"),className:"bg-green-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-600 transition-colors",children:"Görüntüle"})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(!0),className:"bg-white border-2 border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[r.jsx(pa,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),r.jsx("p",{className:"font-semibold text-gray-900",children:"QR Kod Okut"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Yolculuk Başlat"})]}),r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d("trip-details"),className:"bg-white border-2 border-gray-200 rounded-xl p-6 text-center hover:border-blue-300 transition-colors",children:[r.jsx(dn,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),r.jsx("p",{className:"font-semibold text-gray-900",children:"Geçmiş İşler"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tamamlananlar"})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Atanmış Görevler"}),a?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>r.jsxs("div",{className:"bg-gray-100 rounded-xl p-4 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),r.jsx("div",{className:"h-3 bg-gray-300 rounded w-2/3"})]},y))}):S.length===0?r.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[r.jsx(je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Henüz atanmış görev yok"}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Yeni görevler için bekleyin"})]}):r.jsx("div",{className:"space-y-3",children:S.map(y=>{var j,C,R,D,A,V,$,Y,B,O;return r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-gray-900",children:[(j=y.customerInfo)==null?void 0:j.firstName," ",(C=y.customerInfo)==null?void 0:C.lastName]}),r.jsx("p",{className:"text-sm text-blue-600 font-medium",children:y.reservationId||y.id})]}),r.jsx("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded-lg text-xs font-medium",children:"Atandı"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Ke,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:((R=y.tripDetails)==null?void 0:R.pickupLocation)||y.pickupLocation||"Belirtilmemiş"})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Ke,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{children:((D=y.tripDetails)==null?void 0:D.dropoffLocation)||y.dropoffLocation||"Belirtilmemiş"})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:((A=y.tripDetails)==null?void 0:A.date)||y.date||"Belirtilmemiş"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ye,{className:"w-4 h-4"}),r.jsx("span",{children:((V=y.tripDetails)==null?void 0:V.time)||y.time||"Belirtilmemiş"})]})]}),((($=y.tripDetails)==null?void 0:$.flightNumber)||y.flightNumber)&&r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Gc,{className:"w-4 h-4 text-blue-500"}),r.jsxs("span",{children:["Uçuş: ",((Y=y.tripDetails)==null?void 0:Y.flightNumber)||y.flightNumber]})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Qe,{className:"w-4 h-4"}),r.jsxs("span",{children:[((B=y.tripDetails)==null?void 0:B.passengerCount)||y.passengerCount||1," Yolcu"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ta,{className:"w-4 h-4"}),r.jsxs("span",{children:[((O=y.tripDetails)==null?void 0:O.luggageCount)||y.luggageCount||0," Bavul"]})]})]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>{c(y),d("reservation-details")},className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Detaylar"}),r.jsx("button",{onClick:()=>p(!0),className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"QR Okut"})]})]},y.id)})})]})]}),T=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>d("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ea,{className:"w-6 h-6 text-gray-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Aktif Yolculuk"})]}),f&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"bg-green-500 p-4 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:r.jsx(je,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-xl font-bold text-green-900 mb-2",children:"Yolculuk Devam Ediyor"}),r.jsx("p",{className:"text-green-700",children:f.customerName}),r.jsx("p",{className:"text-sm text-green-600 mt-1",children:f.id})]})}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Yolculuk Detayları"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:r.jsx(Ke,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Alış Noktası"}),r.jsx("p",{className:"text-gray-600",children:f.pickupLocation})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:r.jsx(Ke,{className:"w-5 h-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Varış Noktası"}),r.jsx("p",{className:"text-gray-600",children:f.dropoffLocation})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:r.jsx(Fe,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Müşteri"}),r.jsx("p",{className:"text-gray-600",children:f.customerName}),r.jsx("p",{className:"text-sm text-gray-500",children:f.phone})]})]}),f.passengerCount&&r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-purple-100 p-2 rounded-full",children:r.jsx(Qe,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Yolcu Sayısı"}),r.jsxs("p",{className:"text-gray-600",children:[f.passengerCount," kişi"]})]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>_(f.pickupLocation,f.dropoffLocation),className:"w-full bg-blue-500 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-3",children:[r.jsx(ef,{className:"w-6 h-6"}),r.jsx("span",{children:"Google Maps'te Aç"}),r.jsx(VF,{className:"w-5 h-5"})]}),r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>v(f.id),className:"w-full bg-green-500 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-3",children:[r.jsx(_e,{className:"w-6 h-6"}),r.jsx("span",{children:"Yolculuğu Tamamla"})]})]})]})]}),P=()=>r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>d("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ea,{className:"w-6 h-6 text-gray-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rezervasyon Detayı"})]}),l&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Müşteri Bilgileri"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Fe,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:l.customerName}),r.jsx("p",{className:"text-sm text-gray-500",children:"Müşteri"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(nt,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:l.phone}),r.jsx("p",{className:"text-sm text-gray-500",children:"Telefon"})]})]}),l.email&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ns,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:l.email}),r.jsx("p",{className:"text-sm text-gray-500",children:"E-posta"})]})]})]})]}),r.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[r.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Yolculuk Bilgileri"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-green-100 p-2 rounded-full",children:r.jsx(Ke,{className:"w-5 h-5 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Alış Noktası"}),r.jsx("p",{className:"text-gray-600",children:l.pickupLocation})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:r.jsx(Ke,{className:"w-5 h-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Varış Noktası"}),r.jsx("p",{className:"text-gray-600",children:l.dropoffLocation})]})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Be,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:l.date}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tarih"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ye,{className:"w-5 h-5 text-gray-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:l.time}),r.jsx("p",{className:"text-sm text-gray-500",children:"Saat"})]})]})]}),l.flightNumber&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Gc,{className:"w-5 h-5 text-blue-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:l.flightNumber}),r.jsx("p",{className:"text-sm text-gray-500",children:"Uçuş Numarası"})]})]}),l.passengerCount&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Qe,{className:"w-5 h-5 text-purple-500"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[l.passengerCount," kişi"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Yolcu Sayısı"})]})]}),l.luggageCount&&r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ta,{className:"w-5 h-5 text-orange-500"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-gray-900",children:[l.luggageCount," adet"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Bagaj"})]})]})]})]}),r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(!0),className:"w-full bg-blue-500 text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-3",children:[r.jsx(pa,{className:"w-6 h-6"}),r.jsx("span",{children:"QR Kod Okut ve Başlat"})]})]})]}),b=()=>{const y=n.filter(j=>j.status==="completed");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>d("dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(ea,{className:"w-6 h-6 text-gray-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Geçmiş İşler"})]}),r.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Tamamlanan Yolculuklar"}),r.jsxs("p",{className:"text-green-100",children:["Toplam ",y.length," yolculuk tamamladınız"]})]}),r.jsx("div",{children:y.length===0?r.jsxs("div",{className:"bg-gray-50 rounded-xl p-8 text-center",children:[r.jsx(_e,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 font-medium",children:"Henüz tamamlanmış yolculuk yok"})]}):r.jsx("div",{className:"space-y-3",children:y.map(j=>r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white border border-gray-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-gray-900",children:j.customerName}),r.jsx("p",{className:"text-sm text-green-600 font-medium",children:j.id})]}),r.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-lg text-xs font-medium",children:"Tamamlandı"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Ke,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{children:j.pickupLocation})]}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx(Ke,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{children:j.dropoffLocation})]}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Be,{className:"w-4 h-4"}),r.jsx("span",{children:j.date})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ye,{className:"w-4 h-4"}),r.jsx("span",{children:j.time})]})]})]})]},j.id))})})]})};return r.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 max-w-md mx-auto",children:[r.jsxs(lr,{mode:"wait",children:[u==="dashboard"&&r.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:r.jsx(E,{})},"dashboard"),u==="active-trip"&&r.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:r.jsx(T,{})},"active-trip"),u==="reservation-details"&&r.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:r.jsx(P,{})},"reservation-details"),u==="trip-details"&&r.jsx(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:r.jsx(b,{})},"trip-details")]}),r.jsx(w,{})]})},RH=()=>{const{state:t,user:e,updateReservation:s,showNotification:n}=Ws(),{reservations:i,drivers:a}=t,[o,l]=g.useState(null),[c,u]=g.useState([]),[d,m]=g.useState("all"),[p,f]=g.useState(""),[x,S]=g.useState("");g.useEffect(()=>{const y=a.find(j=>j.email===(e==null?void 0:e.email));if(l(y),y){const j=i.filter(C=>C.driverId===y.id);u(j)}},[a,i,e]);const k=[{value:"assigned",label:"Atandı",color:"status-assigned"},{value:"in-progress",label:"Devam Ediyor",color:"status-progress"},{value:"completed",label:"Tamamlandı",color:"status-completed"},{value:"cancelled",label:"İptal Edildi",color:"status-cancelled"}],v=y=>k.find(j=>j.value===y)||k[0],_=async(y,j)=>{try{await s(y,{status:j}),n("Sefer durumu güncellendi","success")}catch(C){console.error("Durum güncelleme hatası:",C),n("Durum güncellenirken bir hata oluştu","error")}},w=c.filter(y=>{var D,A,V,$,Y,B,O,K,z,M;const j=((D=y.reservationId)==null?void 0:D.toLowerCase().includes(x.toLowerCase()))||((V=(A=y.customerInfo)==null?void 0:A.firstName)==null?void 0:V.toLowerCase().includes(x.toLowerCase()))||((Y=($=y.customerInfo)==null?void 0:$.lastName)==null?void 0:Y.toLowerCase().includes(x.toLowerCase()))||((O=(B=y.tripDetails)==null?void 0:B.from)==null?void 0:O.toLowerCase().includes(x.toLowerCase()))||((z=(K=y.tripDetails)==null?void 0:K.to)==null?void 0:z.toLowerCase().includes(x.toLowerCase())),C=d==="all"||y.status===d,R=!p||((M=y.tripDetails)==null?void 0:M.date)&&new Date(y.tripDetails.date).toDateString()===new Date(p).toDateString();return j&&C&&R}),T=(()=>{const y=c.length,j=c.filter(V=>V.status==="assigned").length,C=c.filter(V=>V.status==="in-progress").length,R=c.filter(V=>V.status==="completed").length,D=c.filter(V=>V.status==="cancelled").length,A=c.filter(V=>V.status==="completed").reduce((V,$)=>{const Y=($.totalPrice||0)*(((o==null?void 0:o.commission)||10)/100);return V+Y},0);return{total:y,assigned:j,inProgress:C,completed:R,cancelled:D,totalEarnings:A}})(),P=(y,j)=>{if(!y)return"Tarih belirtilmemiş";const R=new Date(y).toLocaleDateString("tr-TR");return j?`${R} - ${j}`:R},b=y=>!o||!y?0:y*((o.commission||10)/100);return o?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Seferlerim"}),r.jsx("p",{className:"text-gray-600",children:"Atanmış ve tamamlanmış seferlerinizi görüntüleyin"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(Be,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.total}),r.jsx("p",{className:"text-sm text-gray-600",children:"Toplam"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(Ye,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.assigned}),r.jsx("p",{className:"text-sm text-gray-600",children:"Atandı"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(ef,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.inProgress}),r.jsx("p",{className:"text-sm text-gray-600",children:"Devam Ediyor"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(_e,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.completed}),r.jsx("p",{className:"text-sm text-gray-600",children:"Tamamlandı"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(ur,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T.cancelled}),r.jsx("p",{className:"text-sm text-gray-600",children:"İptal"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(xs,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["₺",T.totalEarnings.toLocaleString("tr-TR")]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Kazanç"})]})})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Rezervasyon ID veya müşteri adı ile ara...",className:"input pl-10",value:x,onChange:y=>S(y.target.value)})]}),r.jsx("div",{children:r.jsxs("select",{className:"input",value:d,onChange:y=>m(y.target.value),children:[r.jsx("option",{value:"all",children:"Tüm Durumlar"}),k.map(y=>r.jsx("option",{value:y.value,children:y.label},y.value))]})}),r.jsx("div",{children:r.jsx("input",{type:"date",className:"input",value:p,onChange:y=>f(y.target.value),placeholder:"Tarih filtrele"})})]})})}),w.length===0?r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center py-12",children:[r.jsx(nI,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:x||d!=="all"||p?"Sefer bulunamadı":"Henüz sefer yok"}),r.jsx("p",{className:"text-gray-500",children:x||d!=="all"||p?"Arama kriterlerinize uygun sefer bulunamadı":"Size atanmış seferler burada görünecektir"})]})}):r.jsx("div",{className:"space-y-4",children:w.sort((y,j)=>{var D,A,V,$;const C=new Date(`${(D=y.tripDetails)==null?void 0:D.date}T${((A=y.tripDetails)==null?void 0:A.time)||"00:00"}`);return new Date(`${(V=j.tripDetails)==null?void 0:V.date}T${(($=j.tripDetails)==null?void 0:$.time)||"00:00"}`)-C}).map((y,j)=>{var C,R,D,A,V,$,Y,B,O,K,z,M,U;return r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:j*.05},className:"card hover:shadow-lg transition-shadow",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:y.reservationId||`RES-${(C=y.id)==null?void 0:C.slice(-6)}`}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${v(y.status).color}`,children:v(y.status).label})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["₺",((R=y.totalPrice)==null?void 0:R.toLocaleString("tr-TR"))||"0"]}),r.jsxs("p",{className:"text-sm text-green-600 font-medium",children:["Kazanç: ₺",b(y.totalPrice).toLocaleString("tr-TR")]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[r.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Müşteri"]}),r.jsxs("p",{className:"font-medium text-gray-900",children:[(D=y.customerInfo)==null?void 0:D.firstName," ",(A=y.customerInfo)==null?void 0:A.lastName]}),((V=y.customerInfo)==null?void 0:V.phone)&&r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx(nt,{className:"w-3 h-3 mr-1"}),y.customerInfo.phone]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[r.jsx(Ke,{className:"w-4 h-4 mr-1"}),"Güzergah"]}),r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("span",{className:"block truncate",children:(($=y.tripDetails)==null?void 0:$.from)||"Bilinmiyor"}),r.jsx("span",{className:"text-gray-500",children:"→"}),r.jsx("span",{className:"block truncate",children:((Y=y.tripDetails)==null?void 0:Y.to)||"Bilinmiyor"})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[r.jsx(Ye,{className:"w-4 h-4 mr-1"}),"Tarih & Saat"]}),r.jsx("p",{className:"text-sm text-gray-900",children:P((B=y.tripDetails)==null?void 0:B.date,(O=y.tripDetails)==null?void 0:O.time)}),((K=y.tripDetails)==null?void 0:K.distance)&&r.jsxs("p",{className:"text-sm text-gray-500",children:[y.tripDetails.distance," km"]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-1",children:[r.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Yolcular"]}),r.jsxs("p",{className:"text-sm text-gray-900",children:[y.passengerCount||1," Yetişkin",y.childCount>0&&`, ${y.childCount} Çocuk`]}),y.luggageCount>0&&r.jsxs("p",{className:"text-sm text-gray-500",children:[y.luggageCount," Bagaj"]})]})]}),y.specialRequests&&r.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsx("strong",{children:"Özel İstekler:"})," ",y.specialRequests]})})]}),r.jsxs("div",{className:"flex flex-col space-y-2 lg:ml-4",children:[y.status==="assigned"&&r.jsx("button",{onClick:()=>_(y.id,"in-progress"),className:"btn btn-primary",children:"Sefere Başla"}),y.status==="in-progress"&&r.jsx("button",{onClick:()=>_(y.id,"completed"),className:"btn btn-success",children:"Seferi Tamamla"}),r.jsxs("div",{className:"flex space-x-2",children:[((z=y.customerInfo)==null?void 0:z.phone)&&r.jsx("a",{href:`tel:${y.customerInfo.phone}`,className:"btn btn-sm btn-outline",title:"Müşteriyi Ara",children:r.jsx(nt,{className:"w-4 h-4"})}),((M=y.tripDetails)==null?void 0:M.from)&&((U=y.tripDetails)==null?void 0:U.to)&&r.jsx("a",{href:`https://www.google.com/maps/dir/${encodeURIComponent(y.tripDetails.from)}/${encodeURIComponent(y.tripDetails.to)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline",title:"Haritada Aç",children:r.jsx(Ke,{className:"w-4 h-4"})}),(y.status==="assigned"||y.status==="in-progress")&&r.jsx("button",{onClick:()=>{window.confirm("Bu seferi iptal etmek istediğinizden emin misiniz?")&&_(y.id,"cancelled")},className:"btn btn-sm btn-outline text-red-600 border-red-200 hover:bg-red-50",title:"Seferi İptal Et",children:r.jsx(ur,{className:"w-4 h-4"})})]}),r.jsx("div",{className:"text-center",children:r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${v(y.status).color}`,children:v(y.status).label})})]})]})})},y.id)})})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Is,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Şoför Profili Bulunamadı"}),r.jsx("p",{className:"text-gray-500",children:"Lütfen yöneticinizle iletişime geçin."})]})})},DH=()=>{var P,b,y,j,C,R,D,A,V,$,Y,B,O,K;const{state:t,user:e,updateDriver:s,showNotification:n}=Ws(),{drivers:i,reservations:a,vehicles:o}=t,[l,c]=g.useState(null),[u,d]=g.useState(!1),[m,p]=g.useState({}),[f,x]=g.useState({totalTrips:0,completedTrips:0,totalEarnings:0,averageRating:0,totalDistance:0,joinDate:null});g.useEffect(()=>{const z=i.find(M=>M.email===(e==null?void 0:e.email));if(z){c(z),p(z);const M=a.filter(G=>G.driverId===z.id),U=M.filter(G=>G.status==="completed"),W=U.reduce((G,ne)=>{const te=(ne.totalPrice||0)*((z.commission||10)/100);return G+te},0),Z=U.reduce((G,ne)=>{var te;return G+(((te=ne.tripDetails)==null?void 0:te.distance)||0)},0);x({totalTrips:M.length,completedTrips:U.length,totalEarnings:W,averageRating:z.rating||5,totalDistance:Z,joinDate:z.hireDate})}},[i,a,e]);const S=()=>{d(!0)},k=async()=>{try{if(!(l!=null&&l.id))return;if(!m.firstName||!m.lastName||!m.phone){n("Lütfen tüm zorunlu alanları doldurun","error");return}if(!/^(\+90|0)?[5][0-9]{9}$/.test(m.phone.replace(/\s/g,""))){n("Geçerli bir telefon numarası girin","error");return}await s(l.id,m),c(m),d(!1),n("Profil başarıyla güncellendi","success")}catch(z){console.error("Profil güncelleme hatası:",z),n("Profil güncellenirken bir hata oluştu","error")}},v=()=>{p(l||{}),d(!1)},_=()=>l?o.find(z=>z.driverId===l.id):null,w=z=>{if(!z)return null;const M=new Date,U=new Date(z);let W=M.getFullYear()-U.getFullYear();const Z=M.getMonth()-U.getMonth();return(Z<0||Z===0&&M.getDate()<U.getDate())&&W--,W},E=z=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(z),T=_();return l?r.jsxs("div",{className:"space-y-8",children:[r.jsxs(F.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Profil Ayarları"}),r.jsx("p",{className:"text-gray-600 mt-2 text-lg",children:"Kişisel bilgilerinizi görüntüleyin ve düzenleyin"})]}),u?r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,className:"btn btn-success",children:[r.jsx(gr,{className:"w-4 h-4 mr-2"}),"Kaydet"]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:v,className:"btn btn-outline",children:[r.jsx(Ue,{className:"w-4 h-4 mr-2"}),"İptal"]})]}):r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,className:"btn btn-primary",children:[r.jsx(fa,{className:"w-4 h-4 mr-2"}),"Düzenle"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(F.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-blue-50 hover:to-purple-50",children:r.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx(je,{className:"w-10 h-10 text-blue-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:f.totalTrips}),r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Toplam Sefer"})]})}),r.jsx(F.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,delay:.1,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-green-50 hover:to-emerald-50",children:r.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx(t1,{className:"w-10 h-10 text-green-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:f.completedTrips}),r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Tamamlanan"})]})}),r.jsx(F.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,delay:.2,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-purple-50 hover:to-pink-50",children:r.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx(sa,{className:"w-10 h-10 text-purple-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:E(f.totalEarnings)}),r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Toplam Kazanç"})]})}),r.jsx(F.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},whileHover:{scale:1.05,y:-5},transition:{duration:.3,delay:.3,type:"spring",stiffness:300},className:"card group hover:bg-gradient-to-br hover:from-yellow-50 hover:to-orange-50",children:r.jsxs("div",{className:"card-body text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx(Fs,{className:"w-10 h-10 text-yellow-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900 mb-1",children:["⭐ ",f.averageRating]}),r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Ortalama Puan"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"lg:col-span-2 card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Kişisel Bilgiler"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-blue-400 to-purple-600 rounded-full flex items-center justify-center shadow-2xl transition-all duration-300 group-hover:scale-110",children:r.jsx(Fe,{className:"w-12 h-12 text-white"})}),u&&r.jsx(F.button,{initial:{scale:0},animate:{scale:1},whileHover:{scale:1.1},whileTap:{scale:.9},className:"absolute -bottom-1 -right-1 w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full flex items-center justify-center shadow-lg hover:shadow-xl transition-all duration-300",children:r.jsx(ZC,{className:"w-4 h-4"})}),r.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-blue-500/20 to-purple-500/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 backdrop-blur-sm"})]}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("h4",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent mb-1",children:[l.firstName," ",l.lastName]}),r.jsx("p",{className:"text-blue-600 font-semibold mb-2",children:"Profesyonel Şoför"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center bg-gradient-to-r from-yellow-50 to-orange-50 px-3 py-1 rounded-full",children:[r.jsx(Fs,{className:"w-4 h-4 text-yellow-500 mr-2"}),r.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[f.averageRating," Puan"]})]}),r.jsxs("div",{className:"flex items-center bg-gradient-to-r from-green-50 to-emerald-50 px-3 py-1 rounded-full",children:[r.jsx(t1,{className:"w-4 h-4 text-green-500 mr-2"}),r.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[f.completedTrips," Sefer"]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Ad *"}),u?r.jsx("input",{type:"text",className:"input",value:m.firstName||"",onChange:z=>p(M=>({...M,firstName:z.target.value}))}):r.jsx("p",{className:"input-display",children:l.firstName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Soyad *"}),u?r.jsx("input",{type:"text",className:"input",value:m.lastName||"",onChange:z=>p(M=>({...M,lastName:z.target.value}))}):r.jsx("p",{className:"input-display",children:l.lastName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Email"}),r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(ns,{className:"w-4 h-4 mr-2 text-gray-400"}),l.email]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Telefon *"}),u?r.jsx("input",{type:"tel",className:"input",value:m.phone||"",onChange:z=>p(M=>({...M,phone:z.target.value}))}):r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(nt,{className:"w-4 h-4 mr-2 text-gray-400"}),l.phone]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Doğum Tarihi"}),u?r.jsx("input",{type:"date",className:"input",value:m.dateOfBirth||"",onChange:z=>p(M=>({...M,dateOfBirth:z.target.value}))}):r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(Be,{className:"w-4 h-4 mr-2 text-gray-400"}),l.dateOfBirth?`${new Date(l.dateOfBirth).toLocaleDateString("tr-TR")} (${w(l.dateOfBirth)} yaş)`:"Belirtilmemiş"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Şehir"}),u?r.jsx("input",{type:"text",className:"input",value:m.city||"",onChange:z=>p(M=>({...M,city:z.target.value}))}):r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(Ke,{className:"w-4 h-4 mr-2 text-gray-400"}),l.city||"Belirtilmemiş"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Adres"}),u?r.jsx("textarea",{className:"input",rows:"3",value:m.address||"",onChange:z=>p(M=>({...M,address:z.target.value}))}):r.jsx("p",{className:"input-display",children:l.address||"Belirtilmemiş"})]})]})})]}),r.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"space-y-6",children:[r.jsxs(F.div,{whileHover:{scale:1.02},className:"card group",children:[r.jsx("div",{className:"card-header bg-gradient-to-r from-blue-50 to-indigo-50 group-hover:from-blue-100 group-hover:to-indigo-100 transition-all duration-300",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center mr-3 group-hover:scale-110 transition-transform duration-300",children:r.jsx(hn,{className:"w-5 h-5 text-white"})}),"Ehliyet Bilgileri"]})}),r.jsxs("div",{className:"card-body space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Ehliyet No"}),u?r.jsx("input",{type:"text",className:"input",value:m.licenseNumber||"",onChange:z=>p(M=>({...M,licenseNumber:z.target.value}))}):r.jsx("p",{className:"input-display",children:l.licenseNumber||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Geçerlilik Tarihi"}),u?r.jsx("input",{type:"date",className:"input",value:m.licenseExpiry||"",onChange:z=>p(M=>({...M,licenseExpiry:z.target.value}))}):r.jsx("p",{className:"input-display",children:l.licenseExpiry?new Date(l.licenseExpiry).toLocaleDateString("tr-TR"):"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Deneyim (Yıl)"}),u?r.jsx("input",{type:"number",className:"input",min:"0",max:"50",value:m.experienceYears||"",onChange:z=>p(M=>({...M,experienceYears:parseInt(z.target.value)||0}))}):r.jsxs("div",{className:"input-display flex items-center justify-between",children:[r.jsxs("span",{children:[l.experienceYears||0," yıl"]}),r.jsx("div",{className:"flex space-x-1",children:[...Array(Math.min(5,l.experienceYears||0))].map((z,M)=>r.jsx(Fs,{className:"w-3 h-3 text-yellow-400 fill-current"},M))})]})]})]})]}),T&&r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(je,{className:"w-5 h-5 mr-2"}),"Atanmış Araç"]})}),r.jsxs("div",{className:"card-body space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Araç:"}),r.jsxs("span",{className:"font-medium",children:[T.brand," ",T.model]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Plaka:"}),r.jsx("span",{className:"font-medium",children:T.plateNumber})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Yıl:"}),r.jsx("span",{className:"font-medium",children:T.year})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Kapasite:"}),r.jsxs("span",{className:"font-medium",children:[T.capacity," kişi"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Durum:"}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.status==="active"?"status-active":"status-inactive"}`,children:T.status==="active"?"Aktif":"Pasif"})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(Ye,{className:"w-5 h-5 mr-2"}),"İş İstatistikleri"]})}),r.jsxs("div",{className:"card-body space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"İşe Başlama:"}),r.jsx("span",{className:"font-medium",children:f.joinDate?new Date(f.joinDate).toLocaleDateString("tr-TR"):"Bilinmiyor"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Toplam Mesafe:"}),r.jsxs("span",{className:"font-medium",children:[f.totalDistance," km"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Komisyon Oranı:"}),r.jsxs("span",{className:"font-medium",children:["%",l.commission||10]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Durum:"}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${l.status==="active"?"status-active":"status-inactive"}`,children:l.status==="active"?"Aktif":"Pasif"})]})]})]})]})]}),(((P=l.emergencyContact)==null?void 0:P.name)||u)&&r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Acil Durum İletişim"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"İsim"}),u?r.jsx("input",{type:"text",className:"input",value:((b=m.emergencyContact)==null?void 0:b.name)||"",onChange:z=>p(M=>({...M,emergencyContact:{...M.emergencyContact,name:z.target.value}}))}):r.jsx("p",{className:"input-display",children:((y=l.emergencyContact)==null?void 0:y.name)||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Telefon"}),u?r.jsx("input",{type:"tel",className:"input",value:((j=m.emergencyContact)==null?void 0:j.phone)||"",onChange:z=>p(M=>({...M,emergencyContact:{...M.emergencyContact,phone:z.target.value}}))}):r.jsx("p",{className:"input-display",children:((C=l.emergencyContact)==null?void 0:C.phone)||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Yakınlık Derecesi"}),u?r.jsx("input",{type:"text",className:"input",value:((R=m.emergencyContact)==null?void 0:R.relation)||"",onChange:z=>p(M=>({...M,emergencyContact:{...M.emergencyContact,relation:z.target.value}}))}):r.jsx("p",{className:"input-display",children:((D=l.emergencyContact)==null?void 0:D.relation)||"Belirtilmemiş"})]})]})})]}),(((A=l.bankInfo)==null?void 0:A.accountHolder)||u)&&r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx($t,{className:"w-5 h-5 mr-2"}),"Banka Bilgileri"]})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Hesap Sahibi"}),u?r.jsx("input",{type:"text",className:"input",value:((V=m.bankInfo)==null?void 0:V.accountHolder)||"",onChange:z=>p(M=>({...M,bankInfo:{...M.bankInfo,accountHolder:z.target.value}}))}):r.jsx("p",{className:"input-display",children:(($=l.bankInfo)==null?void 0:$.accountHolder)||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Banka Adı"}),u?r.jsx("input",{type:"text",className:"input",value:((Y=m.bankInfo)==null?void 0:Y.bankName)||"",onChange:z=>p(M=>({...M,bankInfo:{...M.bankInfo,bankName:z.target.value}}))}):r.jsx("p",{className:"input-display",children:((B=l.bankInfo)==null?void 0:B.bankName)||"Belirtilmemiş"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"label",children:"IBAN"}),u?r.jsx("input",{type:"text",className:"input",placeholder:"TR00 0000 0000 0000 0000 0000 00",value:((O=m.bankInfo)==null?void 0:O.iban)||"",onChange:z=>p(M=>({...M,bankInfo:{...M.bankInfo,iban:z.target.value.toUpperCase()}}))}):r.jsx("p",{className:"input-display",children:((K=l.bankInfo)==null?void 0:K.iban)||"Belirtilmemiş"})]})]})})]})]}):r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Fe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Profil Bulunamadı"}),r.jsx("p",{className:"text-gray-500",children:"Lütfen yöneticinizle iletişime geçin."})]})})},jE=()=>{const{state:t,user:e}=Ws(),{reservations:s,vehicles:n,drivers:i}=t,[a,o]=g.useState([]),[l,c]=g.useState({totalReservations:0,completedTrips:0,totalSpent:0,upcomingTrips:0});g.useEffect(()=>{if(e!=null&&e.email){const k=s.filter(E=>{var T,P;return((P=(T=E.customerInfo)==null?void 0:T.email)==null?void 0:P.toLowerCase())===e.email.toLowerCase()});o(k);const v=k.filter(E=>E.status==="completed"),_=k.filter(E=>{var b;return(b=E.tripDetails)!=null&&b.date?new Date(E.tripDetails.date)>new Date&&["confirmed","assigned","in-progress"].includes(E.status):!1}),w=v.reduce((E,T)=>E+(T.totalPrice||0),0);c({totalReservations:k.length,completedTrips:v.length,totalSpent:w,upcomingTrips:_.length})}},[s,e]);const u=k=>{if(!k)return"Atanmamış";const v=i.find(_=>_.id===k);return v?`${v.firstName} ${v.lastName}`:"Bilinmeyen Şoför"},d=k=>{if(!k)return"Atanmamış";const v=n.find(_=>_.id===k);return v?`${v.brand} ${v.model} (${v.plateNumber})`:"Bilinmeyen Araç"},m=k=>{const v={pending:{label:"Bekleyen",color:"status-pending"},confirmed:{label:"Onaylandı",color:"status-confirmed"},assigned:{label:"Atandı",color:"status-assigned"},"in-progress":{label:"Devam Ediyor",color:"status-progress"},completed:{label:"Tamamlandı",color:"status-completed"},cancelled:{label:"İptal Edildi",color:"status-cancelled"}};return v[k]||v.pending},p=()=>a.sort((k,v)=>{var E,T;const _=new Date(k.createdAt||((E=k.tripDetails)==null?void 0:E.date)||0);return new Date(v.createdAt||((T=v.tripDetails)==null?void 0:T.date)||0)-_}).slice(0,5),f=()=>{const k=new Date;return a.filter(v=>{var w;return(w=v.tripDetails)!=null&&w.date?new Date(`${v.tripDetails.date}T${v.tripDetails.time||"00:00"}`)>k&&["confirmed","assigned","in-progress"].includes(v.status):!1}).sort((v,_)=>{const w=new Date(`${v.tripDetails.date}T${v.tripDetails.time||"00:00"}`),E=new Date(`${_.tripDetails.date}T${_.tripDetails.time||"00:00"}`);return w-E}).slice(0,3)},x=p(),S=f();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Hoş geldiniz!"}),r.jsx("p",{className:"text-gray-600",children:"Transfer rezervasyonlarınızı ve seyahat geçmişinizi görüntüleyin"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Rezervasyon"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.totalReservations}),r.jsx("p",{className:"text-sm text-gray-500",children:"Tüm zamanlar"})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx(Be,{className:"w-6 h-6 text-blue-600"})})]})})}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tamamlanan Seyahat"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.completedTrips}),r.jsx("p",{className:"text-sm text-gray-500",children:"Başarılı transfer"})]}),r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx(_e,{className:"w-6 h-6 text-green-600"})})]})})}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Toplam Harcama"}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₺",l.totalSpent.toLocaleString("tr-TR")]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Transfer ücreti"})]}),r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx(xs,{className:"w-6 h-6 text-purple-600"})})]})})}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Yaklaşan Seyahat"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l.upcomingTrips}),r.jsx("p",{className:"text-sm text-gray-500",children:"Planlanmış transfer"})]}),r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx(Ye,{className:"w-6 h-6 text-orange-600"})})]})})})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hızlı İşlemler"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("a",{href:"/",className:"btn btn-primary flex items-center justify-center space-x-2 h-16",children:[r.jsx(Bt,{className:"w-5 h-5"}),r.jsx("span",{children:"Yeni Rezervasyon"})]}),r.jsxs("a",{href:"/customer/reservations",className:"btn btn-outline flex items-center justify-center space-x-2 h-16",children:[r.jsx(Be,{className:"w-5 h-5"}),r.jsx("span",{children:"Tüm Rezervasyonlar"})]}),r.jsxs("a",{href:"/customer/profile",className:"btn btn-outline flex items-center justify-center space-x-2 h-16",children:[r.jsx(Fe,{className:"w-5 h-5"}),r.jsx("span",{children:"Profil Ayarları"})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Yaklaşan Seyahatler"})}),r.jsx("div",{className:"card-body",children:S.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ye,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Yaklaşan seyahat yok"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Yeni bir rezervasyon yaparak seyahatinizi planlayın"}),r.jsxs("a",{href:"/",className:"btn btn-primary btn-sm",children:[r.jsx(Bt,{className:"w-4 h-4 mr-1"}),"Rezervasyon Yap"]})]}):r.jsx("div",{className:"space-y-4",children:S.map(k=>{var v,_,w,E,T,P;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:k.reservationId||`RES-${(v=k.id)==null?void 0:v.slice(-6)}`}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx(Ye,{className:"w-3 h-3 mr-1"}),new Date((_=k.tripDetails)==null?void 0:_.date).toLocaleDateString("tr-TR"),((w=k.tripDetails)==null?void 0:w.time)&&` - ${k.tripDetails.time}`]})]}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${m(k.status).color}`,children:m(k.status).label})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Ke,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-gray-900",children:(E=k.tripDetails)==null?void 0:E.from}),r.jsxs("div",{className:"text-gray-500",children:["→ ",(T=k.tripDetails)==null?void 0:T.to]})]})]}),k.driverId&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(Fe,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsxs("span",{className:"text-gray-600",children:["Şoför: ",u(k.driverId)]})]}),k.vehicleId&&r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx(je,{className:"w-4 h-4 text-gray-400 mr-2"}),r.jsx("span",{className:"text-gray-600",children:d(k.vehicleId)})]})]}),r.jsxs("div",{className:"flex justify-between items-center mt-3 pt-3 border-t border-gray-100",children:[r.jsxs("span",{className:"text-lg font-bold text-green-600",children:["₺",(P=k.totalPrice)==null?void 0:P.toLocaleString("tr-TR")]}),r.jsx("div",{className:"flex space-x-2",children:r.jsx("a",{href:"/customer/reservations",className:"btn btn-sm btn-outline",children:"Detay"})})]})]},k.id)})})})]}),r.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.6},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Son Rezervasyonlar"})}),r.jsx("div",{className:"card-body",children:x.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Be,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Henüz rezervasyon yok"}),r.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"İlk rezervasyonunuzu yapmaya başlayın"}),r.jsxs("a",{href:"/",className:"btn btn-primary btn-sm",children:[r.jsx(Bt,{className:"w-4 h-4 mr-1"}),"İlk Rezervasyon"]})]}):r.jsxs("div",{className:"space-y-3",children:[x.map(k=>{var v,_,w,E,T;return r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${k.status==="completed"?"bg-green-500":k.status==="pending"?"bg-yellow-500":k.status==="confirmed"?"bg-blue-500":k.status==="cancelled"?"bg-red-500":"bg-gray-500"}`}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.reservationId||`RES-${(v=k.id)==null?void 0:v.slice(-6)}`}),r.jsxs("p",{className:"text-xs text-gray-500",children:[(_=k.tripDetails)==null?void 0:_.from," → ",(w=k.tripDetails)==null?void 0:w.to]}),((E=k.tripDetails)==null?void 0:E.date)&&r.jsx("p",{className:"text-xs text-gray-400",children:new Date(k.tripDetails.date).toLocaleDateString("tr-TR")})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₺",((T=k.totalPrice)==null?void 0:T.toLocaleString("tr-TR"))||"0"]}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${m(k.status).color}`,children:m(k.status).label})]})]},k.id)}),x.length>0&&r.jsx("div",{className:"text-center pt-2",children:r.jsx("a",{href:"/customer/reservations",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Tümünü Görüntüle →"})})]})})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hizmet Bilgileri"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Ye,{className:"w-8 h-8 text-blue-600"})}),r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"7/24 Hizmet"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Günün her saati transfer hizmetimizden faydalanabilirsiniz"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(_e,{className:"w-8 h-8 text-green-600"})}),r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Güvenli Seyahat"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Lisanslı şoförlerimiz ve bakımlı araçlarımızla güvenli yolculuk"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(Fs,{className:"w-8 h-8 text-purple-600"})}),r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Kaliteli Hizmet"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Müşteri memnuniyeti odaklı premium transfer deneyimi"})]})]})})]}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"card bg-gradient-to-r from-blue-50 to-purple-50",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Yardıma mı ihtiyacınız var?"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"Herhangi bir sorunuz veya desteğe ihtiyacınız varsa bizimle iletişime geçin"}),r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs("a",{href:"tel:+905551234567",className:"btn btn-primary",children:[r.jsx(nt,{className:"w-4 h-4 mr-2"}),"Bizi Arayın"]}),r.jsx("a",{href:"mailto:destek@sbstransfer.com",className:"btn btn-outline",children:"Email Gönder"})]})]})})]})},LH=()=>{var $,Y,B,O,K,z,M;const{state:t,user:e,updateReservation:s,showNotification:n}=Ws(),{reservations:i,vehicles:a,drivers:o}=t,[l,c]=g.useState([]),[u,d]=g.useState([]),[m,p]=g.useState(""),[f,x]=g.useState("all"),[S,k]=g.useState(""),[v,_]=g.useState(null),[w,E]=g.useState(!1);g.useEffect(()=>{if(e!=null&&e.email){const U=i.filter(W=>{var Z,G;return((G=(Z=W.customerInfo)==null?void 0:Z.email)==null?void 0:G.toLowerCase())===e.email.toLowerCase()});c(U)}},[i,e]),g.useEffect(()=>{let U=l;m&&(U=U.filter(W=>{var Z,G,ne,te,ie;return((Z=W.reservationId)==null?void 0:Z.toLowerCase().includes(m.toLowerCase()))||((ne=(G=W.tripDetails)==null?void 0:G.from)==null?void 0:ne.toLowerCase().includes(m.toLowerCase()))||((ie=(te=W.tripDetails)==null?void 0:te.to)==null?void 0:ie.toLowerCase().includes(m.toLowerCase()))})),f!=="all"&&(U=U.filter(W=>W.status===f)),S&&(U=U.filter(W=>{var Z;return(Z=W.tripDetails)!=null&&Z.date?new Date(W.tripDetails.date).toDateString()===new Date(S).toDateString():!1})),U.sort((W,Z)=>{var te,ie;const G=new Date(W.createdAt||((te=W.tripDetails)==null?void 0:te.date)||0);return new Date(Z.createdAt||((ie=Z.tripDetails)==null?void 0:ie.date)||0)-G}),d(U)},[l,m,f,S]);const T=[{value:"pending",label:"Bekleyen",color:"status-pending"},{value:"confirmed",label:"Onaylandı",color:"status-confirmed"},{value:"assigned",label:"Atandı",color:"status-assigned"},{value:"in-progress",label:"Devam Ediyor",color:"status-progress"},{value:"completed",label:"Tamamlandı",color:"status-completed"},{value:"cancelled",label:"İptal Edildi",color:"status-cancelled"}],P=U=>T.find(W=>W.value===U)||T[0],b=U=>{if(!U)return"Henüz atanmadı";const W=o.find(Z=>Z.id===U);return W?`${W.firstName} ${W.lastName}`:"Bilinmeyen Şoför"},y=U=>{if(!U)return null;const W=o.find(Z=>Z.id===U);return W==null?void 0:W.phone},j=U=>{if(!U)return"Henüz atanmadı";const W=a.find(Z=>Z.id===U);return W?`${W.brand} ${W.model} (${W.plateNumber})`:"Bilinmeyen Araç"},C=async U=>{if(window.confirm("Bu rezervasyonu iptal etmek istediğinizden emin misiniz?"))try{await s(U,{status:"cancelled"}),n("Rezervasyon iptal edildi","success")}catch(W){console.error("İptal etme hatası:",W),n("Rezervasyon iptal edilirken bir hata oluştu","error")}},R=U=>["pending","confirmed","assigned"].includes(U.status),D=(U,W)=>{if(!U)return"Tarih belirtilmemiş";const G=new Date(U).toLocaleDateString("tr-TR");return W?`${G} - ${W}`:G},V=(()=>{const U=l.length,W=l.filter(te=>te.status==="pending").length,Z=l.filter(te=>te.status==="confirmed").length,G=l.filter(te=>te.status==="completed").length,ne=l.filter(te=>te.status==="cancelled").length;return{total:U,pending:W,confirmed:Z,completed:G,cancelled:ne}})();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Rezervasyonlarım"}),r.jsx("p",{className:"text-gray-600",children:"Tüm transfer rezervasyonlarınızı görüntüleyip yönetin"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(Be,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.total}),r.jsx("p",{className:"text-sm text-gray-600",children:"Toplam"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(Ye,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.pending}),r.jsx("p",{className:"text-sm text-gray-600",children:"Bekleyen"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(_e,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.confirmed}),r.jsx("p",{className:"text-sm text-gray-600",children:"Onaylı"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(_e,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.completed}),r.jsx("p",{className:"text-sm text-gray-600",children:"Tamamlandı"})]})}),r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(ur,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:V.cancelled}),r.jsx("p",{className:"text-sm text-gray-600",children:"İptal"})]})})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(bi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:"Rezervasyon ID veya güzergah ile ara...",className:"input pl-10",value:m,onChange:U=>p(U.target.value)})]}),r.jsx("div",{children:r.jsxs("select",{className:"input",value:f,onChange:U=>x(U.target.value),children:[r.jsx("option",{value:"all",children:"Tüm Durumlar"}),T.map(U=>r.jsx("option",{value:U.value,children:U.label},U.value))]})}),r.jsx("div",{children:r.jsx("input",{type:"date",className:"input",value:S,onChange:U=>k(U.target.value),placeholder:"Tarih filtrele"})})]})})}),u.length===0?r.jsx("div",{className:"card",children:r.jsxs("div",{className:"card-body text-center py-12",children:[r.jsx(Be,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:m||f!=="all"||S?"Rezervasyon bulunamadı":"Henüz rezervasyon yok"}),r.jsx("p",{className:"text-gray-500 mb-6",children:m||f!=="all"||S?"Arama kriterlerinize uygun rezervasyon bulunamadı":"İlk rezervasyonunuzu yapmaya başlayın"}),!m&&f==="all"&&!S&&r.jsxs("a",{href:"/",className:"btn btn-primary",children:[r.jsx(Be,{className:"w-4 h-4 mr-2"}),"İlk Rezervasyonu Yap"]})]})}):r.jsx("div",{className:"space-y-4",children:u.map((U,W)=>{var Z,G,ne,te,ie,Re,he,be,Tt;return r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:W*.05},className:"card hover:shadow-lg transition-shadow",children:r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:U.reservationId||`RES-${(Z=U.id)==null?void 0:Z.slice(-6)}`}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P(U.status).color}`,children:P(U.status).label})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-lg font-bold text-gray-900",children:["₺",((G=U.totalPrice)==null?void 0:G.toLocaleString("tr-TR"))||"0"]}),r.jsx("p",{className:"text-sm text-gray-500",children:D((ne=U.tripDetails)==null?void 0:ne.date,(te=U.tripDetails)==null?void 0:te.time)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[r.jsx(Ke,{className:"w-4 h-4 mr-1"}),"Güzergah"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-2"}),((ie=U.tripDetails)==null?void 0:ie.from)||"Bilinmiyor"]}),r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("span",{className:"inline-block w-2 h-2 bg-red-500 rounded-full mr-2"}),((Re=U.tripDetails)==null?void 0:Re.to)||"Bilinmiyor"]})]}),((he=U.tripDetails)==null?void 0:he.distance)&&r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Mesafe: ",U.tripDetails.distance," km"]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[r.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Yolcu Bilgileri"]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm text-gray-900",children:[U.passengerCount||1," Yetişkin",U.childCount>0&&`, ${U.childCount} Çocuk`]}),U.luggageCount>0&&r.jsxs("p",{className:"text-sm text-gray-500",children:[U.luggageCount," Bagaj"]})]})]})]}),(U.status==="assigned"||U.status==="in-progress"||U.status==="completed")&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-blue-700 mb-1",children:[r.jsx(Fe,{className:"w-4 h-4 mr-1"}),"Şoför"]}),r.jsx("p",{className:"font-medium text-blue-900",children:b(U.driverId)}),y(U.driverId)&&r.jsxs("div",{className:"flex items-center text-sm text-blue-600 mt-1",children:[r.jsx(nt,{className:"w-3 h-3 mr-1"}),y(U.driverId)]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center text-sm text-blue-700 mb-1",children:[r.jsx(je,{className:"w-4 h-4 mr-1"}),"Araç"]}),r.jsx("p",{className:"font-medium text-blue-900",children:j(U.vehicleId)})]})]})}),U.specialRequests&&r.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsx("strong",{children:"Özel İstekler:"})," ",U.specialRequests]})})]}),r.jsxs("div",{className:"flex flex-col space-y-2 lg:ml-4",children:[r.jsxs("button",{onClick:()=>{_(U),E(!0)},className:"btn btn-outline",children:[r.jsx(dn,{className:"w-4 h-4 mr-2"}),"Detaylar"]}),y(U.driverId)&&r.jsxs("a",{href:`tel:${y(U.driverId)}`,className:"btn btn-outline",children:[r.jsx(nt,{className:"w-4 h-4 mr-2"}),"Şoförü Ara"]}),((be=U.tripDetails)==null?void 0:be.from)&&((Tt=U.tripDetails)==null?void 0:Tt.to)&&r.jsxs("a",{href:`https://www.google.com/maps/dir/${encodeURIComponent(U.tripDetails.from)}/${encodeURIComponent(U.tripDetails.to)}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline",children:[r.jsx(ef,{className:"w-4 h-4 mr-2"}),"Harita"]}),R(U)&&r.jsxs("button",{onClick:()=>C(U.id),className:"btn btn-outline text-red-600 border-red-200 hover:bg-red-50",children:[r.jsx(ur,{className:"w-4 h-4 mr-2"}),"İptal Et"]}),U.status==="completed"&&!U.rating&&r.jsxs("button",{className:"btn btn-outline text-yellow-600 border-yellow-200 hover:bg-yellow-50",children:[r.jsx(Fs,{className:"w-4 h-4 mr-2"}),"Değerlendir"]})]})]})})},U.id)})}),w&&v&&r.jsx("div",{className:"modal-overlay",onClick:()=>E(!1),children:r.jsxs(F.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"modal-content max-w-2xl",onClick:U=>U.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Rezervasyon Detayları - ",v.reservationId||`RES-${($=v.id)==null?void 0:$.slice(-6)}`]}),r.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),r.jsxs("div",{className:"modal-body space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${P(v.status).color}`,children:P(v.status).label}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₺",((Y=v.totalPrice)==null?void 0:Y.toLocaleString("tr-TR"))||"0"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Toplam Ücret"})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Seyahat Detayları"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Nereden"}),r.jsx("p",{className:"font-medium",children:((B=v.tripDetails)==null?void 0:B.from)||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Nereye"}),r.jsx("p",{className:"font-medium",children:((O=v.tripDetails)==null?void 0:O.to)||"Belirtilmemiş"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tarih"}),r.jsx("p",{className:"font-medium",children:(K=v.tripDetails)!=null&&K.date?new Date(v.tripDetails.date).toLocaleDateString("tr-TR"):"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Saat"}),r.jsx("p",{className:"font-medium",children:((z=v.tripDetails)==null?void 0:z.time)||"Belirtilmemiş"})]})]}),((M=v.tripDetails)==null?void 0:M.distance)&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Mesafe"}),r.jsxs("p",{className:"font-medium",children:[v.tripDetails.distance," km"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tahmini Süre"}),r.jsx("p",{className:"font-medium",children:v.tripDetails.duration||"Hesaplanmamış"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Yolcu Bilgileri"}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Yolcu Sayısı"}),r.jsxs("p",{className:"font-medium",children:[v.passengerCount||1," Yetişkin",v.childCount>0&&`, ${v.childCount} Çocuk`]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Bagaj Sayısı"}),r.jsxs("p",{className:"font-medium",children:[v.luggageCount||0," adet"]})]})]})})]}),(v.driverId||v.vehicleId)&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Araç ve Şoför"}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-700",children:"Atanmış Şoför"}),r.jsx("p",{className:"font-medium text-blue-900",children:b(v.driverId)}),y(v.driverId)&&r.jsx("p",{className:"text-sm text-blue-600",children:y(v.driverId)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-blue-700",children:"Atanmış Araç"}),r.jsx("p",{className:"font-medium text-blue-900",children:j(v.vehicleId)})]})]})})]}),v.specialRequests&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Özel İstekler"}),r.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:r.jsx("p",{className:"text-yellow-800",children:v.specialRequests})})]})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{onClick:()=>E(!1),className:"btn btn-outline",children:"Kapat"}),R(v)&&r.jsx("button",{onClick:()=>{E(!1),C(v.id)},className:"btn btn-outline text-red-600 border-red-200 hover:bg-red-50",children:"Rezervasyonu İptal Et"})]})]})})]})},MH=()=>{var y,j,C,R,D,A,V,$,Y,B,O,K;const{state:t,user:e,showNotification:s}=Ws(),{reservations:n}=t,[i,a]=g.useState({firstName:"",lastName:"",email:(e==null?void 0:e.email)||"",phone:"",dateOfBirth:"",address:"",city:"",preferences:{language:"tr",notifications:{email:!0,sms:!1,push:!0},defaultPickupLocation:"",paymentMethod:"cash"}}),[o,l]=g.useState(!1),[c,u]=g.useState({}),[d,m]=g.useState(!1),[p,f]=g.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[x,S]=g.useState({totalReservations:0,completedTrips:0,totalSpent:0,joinDate:null,favoriteRoute:null});g.useEffect(()=>{var z;if(e!=null&&e.email){const M=n.filter(ne=>{var te,ie;return((ie=(te=ne.customerInfo)==null?void 0:te.email)==null?void 0:ie.toLowerCase())===e.email.toLowerCase()}),U=M.filter(ne=>ne.status==="completed"),W=U.reduce((ne,te)=>ne+(te.totalPrice||0),0),Z={};M.forEach(ne=>{var te,ie;if((te=ne.tripDetails)!=null&&te.from&&((ie=ne.tripDetails)!=null&&ie.to)){const Re=`${ne.tripDetails.from} → ${ne.tripDetails.to}`;Z[Re]=(Z[Re]||0)+1}});const G=Object.keys(Z).length>0?Object.keys(Z).reduce((ne,te)=>Z[ne]>Z[te]?ne:te):null;if(S({totalReservations:M.length,completedTrips:U.length,totalSpent:W,joinDate:((z=e==null?void 0:e.metadata)==null?void 0:z.creationTime)||new Date().toISOString(),favoriteRoute:G}),M.length>0){const ne=M[0];ne.customerInfo&&a(te=>({...te,firstName:ne.customerInfo.firstName||"",lastName:ne.customerInfo.lastName||"",phone:ne.customerInfo.phone||""}))}}},[n,e]),g.useEffect(()=>{u(i)},[i]);const k=()=>{l(!0)},v=async()=>{try{if(!c.firstName||!c.lastName){s("Lütfen ad ve soyad alanlarını doldurun","error");return}if(c.phone&&!/^(\+90|0)?[5][0-9]{9}$/.test(c.phone.replace(/\s/g,""))){s("Geçerli bir telefon numarası girin","error");return}const z=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(c.email&&!z.test(c.email)){s("Geçerli bir email adresi girin","error");return}a(c),l(!1),s("Profil başarıyla güncellendi","success"),localStorage.setItem("customerProfile",JSON.stringify(c))}catch(z){console.error("Profil güncelleme hatası:",z),s("Profil güncellenirken bir hata oluştu","error")}},_=()=>{u(i),l(!1)},w=async()=>{try{if(!p.currentPassword||!p.newPassword||!p.confirmPassword){s("Lütfen tüm şifre alanlarını doldurun","error");return}if(p.newPassword!==p.confirmPassword){s("Yeni şifreler eşleşmiyor","error");return}if(p.newPassword.length<6){s("Yeni şifre en az 6 karakter olmalıdır","error");return}s("Şifre başarıyla güncellendi","success"),f({currentPassword:"",newPassword:"",confirmPassword:""})}catch(z){console.error("Şifre güncelleme hatası:",z),s("Şifre güncellenirken bir hata oluştu","error")}},E=z=>{if(!z)return null;const M=new Date,U=new Date(z);let W=M.getFullYear()-U.getFullYear();const Z=M.getMonth()-U.getMonth();return(Z<0||Z===0&&M.getDate()<U.getDate())&&W--,W},T=z=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY"}).format(z),P=()=>{const z={profile:i,statistics:x,reservationHistory:n.filter(G=>{var ne,te,ie;return((te=(ne=G.customerInfo)==null?void 0:ne.email)==null?void 0:te.toLowerCase())===((ie=e==null?void 0:e.email)==null?void 0:ie.toLowerCase())}),exportDate:new Date().toISOString()},M=JSON.stringify(z,null,2),U="data:application/json;charset=utf-8,"+encodeURIComponent(M),W=`kullanici-verileri-${new Date().toISOString().split("T")[0]}.json`,Z=document.createElement("a");Z.setAttribute("href",U),Z.setAttribute("download",W),Z.click()},b=()=>{window.confirm("Hesabınızı silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.")&&window.confirm("Son kez soruyoruz: Hesabınızı kalıcı olarak silmek istediğinizden emin misiniz?")&&s("Hesap silme talebiniz alındı. 24 saat içinde işlenecektir.","info")};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Profil Ayarları"}),r.jsx("p",{className:"text-gray-600",children:"Hesap bilgilerinizi yönetin"})]}),o?r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:v,className:"btn btn-success",children:[r.jsx(gr,{className:"w-4 h-4 mr-2"}),"Kaydet"]}),r.jsxs("button",{onClick:_,className:"btn btn-outline",children:[r.jsx(Ue,{className:"w-4 h-4 mr-2"}),"İptal"]})]}):r.jsxs("button",{onClick:k,className:"btn btn-primary",children:[r.jsx(fa,{className:"w-4 h-4 mr-2"}),"Düzenle"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(Be,{className:"w-8 h-8 text-blue-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.totalReservations}),r.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Rezervasyon"})]})}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(Fs,{className:"w-8 h-8 text-green-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.completedTrips}),r.jsx("p",{className:"text-sm text-gray-600",children:"Tamamlanan Seyahat"})]})}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx($t,{className:"w-8 h-8 text-purple-500 mx-auto mb-2"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T(x.totalSpent)}),r.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Harcama"})]})}),r.jsx(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"card",children:r.jsxs("div",{className:"card-body text-center",children:[r.jsx(Ke,{className:"w-8 h-8 text-orange-500 mx-auto mb-2"}),r.jsx("p",{className:"text-lg font-bold text-gray-900 truncate",title:x.favoriteRoute,children:x.favoriteRoute||"Henüz yok"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Favori Güzergah"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(F.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"lg:col-span-2 card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Kişisel Bilgiler"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Fe,{className:"w-10 h-10 text-blue-600"})}),o&&r.jsx("button",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center",children:r.jsx(ZC,{className:"w-3 h-3"})})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-lg font-medium text-gray-900",children:[i.firstName," ",i.lastName]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Müşteri"}),r.jsxs("p",{className:"text-sm text-gray-400",children:["Üye olma: ",new Date(x.joinDate).toLocaleDateString("tr-TR")]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Ad *"}),o?r.jsx("input",{type:"text",className:"input",value:c.firstName||"",onChange:z=>u(M=>({...M,firstName:z.target.value}))}):r.jsx("p",{className:"input-display",children:i.firstName||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Soyad *"}),o?r.jsx("input",{type:"text",className:"input",value:c.lastName||"",onChange:z=>u(M=>({...M,lastName:z.target.value}))}):r.jsx("p",{className:"input-display",children:i.lastName||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Email"}),r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(ns,{className:"w-4 h-4 mr-2 text-gray-400"}),i.email]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Telefon"}),o?r.jsx("input",{type:"tel",className:"input",value:c.phone||"",onChange:z=>u(M=>({...M,phone:z.target.value}))}):r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(nt,{className:"w-4 h-4 mr-2 text-gray-400"}),i.phone||"Belirtilmemiş"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Doğum Tarihi"}),o?r.jsx("input",{type:"date",className:"input",value:c.dateOfBirth||"",onChange:z=>u(M=>({...M,dateOfBirth:z.target.value}))}):r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(Be,{className:"w-4 h-4 mr-2 text-gray-400"}),i.dateOfBirth?`${new Date(i.dateOfBirth).toLocaleDateString("tr-TR")} (${E(i.dateOfBirth)} yaş)`:"Belirtilmemiş"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Şehir"}),o?r.jsx("input",{type:"text",className:"input",value:c.city||"",onChange:z=>u(M=>({...M,city:z.target.value}))}):r.jsxs("p",{className:"input-display flex items-center",children:[r.jsx(Ke,{className:"w-4 h-4 mr-2 text-gray-400"}),i.city||"Belirtilmemiş"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Adres"}),o?r.jsx("textarea",{className:"input",rows:"3",value:c.address||"",onChange:z=>u(M=>({...M,address:z.target.value}))}):r.jsx("p",{className:"input-display",children:i.address||"Belirtilmemiş"})]})]})})]}),r.jsxs(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.5},className:"space-y-6",children:[r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(Mo,{className:"w-5 h-5 mr-2"}),"Bildirim Tercihleri"]})}),r.jsxs("div",{className:"card-body space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Email Bildirimleri"}),r.jsx("input",{type:"checkbox",className:"toggle",checked:((j=(y=c.preferences)==null?void 0:y.notifications)==null?void 0:j.email)||!1,onChange:z=>u(M=>{var U;return{...M,preferences:{...M.preferences,notifications:{...(U=M.preferences)==null?void 0:U.notifications,email:z.target.checked}}}}),disabled:!o})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"SMS Bildirimleri"}),r.jsx("input",{type:"checkbox",className:"toggle",checked:((R=(C=c.preferences)==null?void 0:C.notifications)==null?void 0:R.sms)||!1,onChange:z=>u(M=>{var U;return{...M,preferences:{...M.preferences,notifications:{...(U=M.preferences)==null?void 0:U.notifications,sms:z.target.checked}}}}),disabled:!o})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-700",children:"Push Bildirimleri"}),r.jsx("input",{type:"checkbox",className:"toggle",checked:((A=(D=c.preferences)==null?void 0:D.notifications)==null?void 0:A.push)||!1,onChange:z=>u(M=>{var U;return{...M,preferences:{...M.preferences,notifications:{...(U=M.preferences)==null?void 0:U.notifications,push:z.target.checked}}}}),disabled:!o})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Varsayılan Tercihler"})}),r.jsxs("div",{className:"card-body space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Varsayılan Alınacak Yer"}),o?r.jsx("input",{type:"text",className:"input",placeholder:"Ör: Ev adresiniz",value:((V=c.preferences)==null?void 0:V.defaultPickupLocation)||"",onChange:z=>u(M=>({...M,preferences:{...M.preferences,defaultPickupLocation:z.target.value}}))}):r.jsx("p",{className:"input-display",children:(($=i.preferences)==null?void 0:$.defaultPickupLocation)||"Belirtilmemiş"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Tercih Edilen Ödeme"}),o?r.jsxs("select",{className:"input",value:((Y=c.preferences)==null?void 0:Y.paymentMethod)||"cash",onChange:z=>u(M=>({...M,preferences:{...M.preferences,paymentMethod:z.target.value}})),children:[r.jsx("option",{value:"cash",children:"Nakit"}),r.jsx("option",{value:"card",children:"Kredi Kartı"}),r.jsx("option",{value:"transfer",children:"Banka Transferi"})]}):r.jsx("p",{className:"input-display",children:((B=i.preferences)==null?void 0:B.paymentMethod)==="cash"?"Nakit":((O=i.preferences)==null?void 0:O.paymentMethod)==="card"?"Kredi Kartı":((K=i.preferences)==null?void 0:K.paymentMethod)==="transfer"?"Banka Transferi":"Nakit"})]})]})]}),r.jsxs("div",{className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hızlı İşlemler"})}),r.jsxs("div",{className:"card-body space-y-3",children:[r.jsxs("button",{onClick:P,className:"btn btn-outline w-full justify-start",children:[r.jsx(Zm,{className:"w-4 h-4 mr-2"}),"Verilerimi İndir"]}),r.jsxs("button",{onClick:()=>s("Yakında kullanıma sunulacak","info"),className:"btn btn-outline w-full justify-start",children:[r.jsx(hn,{className:"w-4 h-4 mr-2"}),"Gizlilik Ayarları"]})]})]})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"card",children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(Kc,{className:"w-5 h-5 mr-2"}),"Şifre Değiştir"]})}),r.jsxs("div",{className:"card-body",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Mevcut Şifre"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:d?"text":"password",className:"input pr-10",value:p.currentPassword,onChange:z=>f(M=>({...M,currentPassword:z.target.value}))}),r.jsx("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",onClick:()=>m(!d),children:d?r.jsx(Hc,{className:"w-4 h-4"}):r.jsx(dn,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Yeni Şifre"}),r.jsx("input",{type:"password",className:"input",value:p.newPassword,onChange:z=>f(M=>({...M,newPassword:z.target.value}))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"label",children:"Yeni Şifre Tekrar"}),r.jsx("input",{type:"password",className:"input",value:p.confirmPassword,onChange:z=>f(M=>({...M,confirmPassword:z.target.value}))})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:w,className:"btn btn-primary",children:"Şifreyi Güncelle"})})]})]}),r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"card border-red-200",children:[r.jsx("div",{className:"card-header bg-red-50",children:r.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Tehlikeli Alan"})}),r.jsx("div",{className:"card-body",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Hesabı Sil"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Hesabınızı kalıcı olarak silin. Bu işlem geri alınamaz."})]}),r.jsxs("button",{onClick:b,className:"btn btn-outline text-red-600 border-red-200 hover:bg-red-50",children:[r.jsx(ka,{className:"w-4 h-4 mr-2"}),"Hesabı Sil"]})]})})]})]})},OH=({bookingData:t,setBookingData:e,onNext:s})=>{const[n,i]=g.useState(t.direction||null),[a,o]=g.useState(t.pickupLocation||""),[l,c]=g.useState(t.dropoffLocation||""),u=()=>new Date().toISOString().slice(0,10),d=()=>{const B=new Date;return B.setHours(B.getHours()+4),B.toTimeString().slice(0,5)},[m,p]=g.useState(t.date||u()),[f,x]=g.useState(t.time||d()),[S,k]=g.useState(t.passengerCount||1),[v,_]=g.useState(t.baggageCount||1),[w,E]=g.useState({}),T=g.useRef(null),P=g.useRef(null),b=g.useRef(null),y=g.useRef(null),j={address:"Antalya Havalimanı, Antalya, Türkiye",lat:36.8987,lng:30.8005};g.useEffect(()=>{(()=>{if(window.google&&window.google.maps&&window.google.maps.places)setTimeout(()=>{C()},100);else{const O=setInterval(()=>{window.google&&window.google.maps&&window.google.maps.places&&(C(),clearInterval(O))},500);return setTimeout(()=>{clearInterval(O)},1e4),()=>clearInterval(O)}})()},[n]);const C=()=>{try{if(!window.google||!window.google.maps||!window.google.maps.places)return;b.current&&(window.google.maps.event.clearInstanceListeners(b.current),b.current=null),y.current&&(window.google.maps.event.clearInstanceListeners(y.current),y.current=null),n==="hotel-to-airport"&&T.current&&(b.current=new window.google.maps.places.Autocomplete(T.current,{types:["lodging"],componentRestrictions:{country:"tr"},fields:["place_id","formatted_address","geometry","name"]}),b.current.addListener("place_changed",()=>{const B=b.current.getPlace();if(B&&B.geometry){const O={address:B.formatted_address||B.name,lat:B.geometry.location.lat(),lng:B.geometry.location.lng()};o(O)}})),n==="airport-to-hotel"&&P.current&&(y.current=new window.google.maps.places.Autocomplete(P.current,{types:["lodging"],componentRestrictions:{country:"tr"},fields:["place_id","formatted_address","geometry","name"]}),y.current.addListener("place_changed",()=>{const B=y.current.getPlace();if(B&&B.geometry){const O={address:B.formatted_address||B.name,lat:B.geometry.location.lat(),lng:B.geometry.location.lng()};c(O)}}))}catch(B){console.error("Google Places initialization error:",B)}};g.useEffect(()=>{n==="airport-to-hotel"?(o(j),c("")):(o(""),c(j))},[n]);const R=()=>new Date().toISOString().slice(0,10),D=B=>{k(O=>B?O<50?O+1:O:O>1?O-1:O)},A=B=>{_(O=>B?O<20?O+1:O:O>0?O-1:O)},V=B=>{i(B),o(""),c(""),E(O=>({...O,direction:"",pickupLocation:"",dropoffLocation:""}))},$=()=>{const B={};if(n||(B.direction="Transfer yönünü seçiniz"),n==="airport-to-hotel"&&(!l||typeof l=="string"&&l.trim()==="")&&(B.dropoffLocation="Otel/Konaklama yeri seçiniz"),n==="hotel-to-airport"&&(!a||typeof a=="string"&&a.trim()==="")&&(B.pickupLocation="Otel/Konaklama yeri seçiniz"),!m)B.date="Tarih seçiniz";else{const O=new Date(`${m}T${f||"00:00"}`),K=new Date;K.setHours(K.getHours()+4),O<K&&(B.date="Rezervasyon en az 4 saat önceden yapılmalıdır")}return f||(B.time="Saat seçiniz"),E(B),console.log("Transfer Details Validation:",{direction:n,dropoffLocation:l,pickupLocation:a,errors:B}),Object.keys(B).length===0},Y=()=>{if($()){const B={...t,direction:n,pickupLocation:a,dropoffLocation:l,date:m,time:f,passengerCount:S,baggageCount:v};e(B),s()}};return r.jsx("div",{className:"max-w-md sm:max-w-lg lg:max-w-2xl mx-auto p-2 sm:p-3 lg:p-4",children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-3",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Transfer Yönü"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[r.jsx(F.button,{whileHover:{scale:1.01},whileTap:{scale:.99},type:"button",onClick:()=>V("airport-to-hotel"),className:`p-2 rounded-lg border transition-all ${n==="airport-to-hotel"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-1.5",children:[r.jsx(Gc,{className:"w-4 h-4"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium text-sm",children:"Havalimanı → Otel"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Karşılama"})]})]})}),r.jsx(F.button,{whileHover:{scale:1.01},whileTap:{scale:.99},type:"button",onClick:()=>V("hotel-to-airport"),className:`p-2 rounded-lg border transition-all ${n==="hotel-to-airport"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-center space-x-1.5",children:[r.jsx(MF,{className:"w-4 h-4"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"font-medium text-sm",children:"Otel → Havalimanı"}),r.jsx("div",{className:"text-xs text-gray-500",children:"Uğurlama"})]})]})})]}),w.direction&&r.jsxs("p",{className:"text-red-500 text-xs flex items-center",children:[r.jsx(Ne,{className:"w-4 h-4 mr-1"}),w.direction]})]}),r.jsxs("div",{className:"space-y-3",children:[n==="airport-to-hotel"&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Otel/Konaklama Yeri"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:P,type:"text",placeholder:"Otel adını yazmaya başlayın...",className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pr-10",value:typeof l=="string"?l:(l==null?void 0:l.address)||"",onChange:B=>c(B.target.value),autoComplete:"off",spellCheck:"false"}),r.jsx(Ke,{className:"absolute right-2.5 top-2.5 w-4 h-4 text-gray-400"})]}),w.dropoffLocation&&r.jsxs("p",{className:"text-red-500 text-xs flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),w.dropoffLocation]})]}),n==="hotel-to-airport"&&r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Otel/Konaklama Yeri"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:T,type:"text",placeholder:"Otel adını yazmaya başlayın...",className:"w-full p-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pr-10",value:typeof a=="string"?a:(a==null?void 0:a.address)||"",onChange:B=>o(B.target.value),autoComplete:"off",spellCheck:"false"}),r.jsx(Ke,{className:"absolute right-2.5 top-2.5 w-4 h-4 text-gray-400"})]}),w.pickupLocation&&r.jsxs("p",{className:"text-red-500 text-xs flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),w.pickupLocation]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Yolcu"}),r.jsxs("div",{className:"flex items-center space-x-1.5 p-2 border border-gray-300 rounded-lg bg-gray-50",children:[r.jsx(Qe,{className:"w-4 h-4 text-gray-500"}),r.jsxs("div",{className:"flex items-center space-x-1.5 flex-1",children:[r.jsx(F.button,{whileTap:{scale:.95},type:"button",onClick:()=>D(!1),className:"w-6 h-6 rounded-full bg-white hover:bg-gray-100 flex items-center justify-center transition-colors shadow-sm",disabled:S<=1,children:r.jsx(Uh,{className:"w-3 h-3 text-gray-600"})}),r.jsx("span",{className:"text-sm font-medium text-gray-800 min-w-[1.5rem] text-center",children:S}),r.jsx(F.button,{whileTap:{scale:.95},type:"button",onClick:()=>D(!0),className:"w-6 h-6 rounded-full bg-blue-500 hover:bg-blue-600 flex items-center justify-center transition-colors shadow-sm",disabled:S>=50,children:r.jsx(Bt,{className:"w-3 h-3 text-white"})})]})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Bagaj"}),r.jsxs("div",{className:"flex items-center space-x-1.5 p-2 border border-gray-300 rounded-lg bg-gray-50",children:[r.jsx(ta,{className:"w-4 h-4 text-gray-500"}),r.jsxs("div",{className:"flex items-center space-x-1.5 flex-1",children:[r.jsx(F.button,{whileTap:{scale:.95},type:"button",onClick:()=>A(!1),className:"w-6 h-6 rounded-full bg-white hover:bg-gray-100 flex items-center justify-center transition-colors shadow-sm",disabled:v<=0,children:r.jsx(Uh,{className:"w-3 h-3 text-gray-600"})}),r.jsx("span",{className:"text-sm font-medium text-gray-800 min-w-[1.5rem] text-center",children:v}),r.jsx(F.button,{whileTap:{scale:.95},type:"button",onClick:()=>A(!0),className:"w-6 h-6 rounded-full bg-blue-500 hover:bg-blue-600 flex items-center justify-center transition-colors shadow-sm",disabled:v>=20,children:r.jsx(Bt,{className:"w-3 h-3 text-white"})})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Tarih"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"date",value:m,min:R(),onChange:B=>p(B.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pl-7"}),r.jsx(Be,{className:"absolute left-2 top-2 w-4 h-4 text-gray-400 pointer-events-none"})]}),w.date&&r.jsxs("p",{className:"text-red-500 text-xs flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),w.date]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-600 uppercase tracking-wide",children:"Saat"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"time",value:f,onChange:B=>x(B.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pl-7"}),r.jsx(Ye,{className:"absolute left-2 top-2 w-4 h-4 text-gray-400 pointer-events-none"})]}),w.time&&r.jsxs("p",{className:"text-red-500 text-xs flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),w.time]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:r.jsxs("div",{className:"flex items-start space-x-1.5",children:[r.jsx(Ne,{className:"w-4 h-4 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"text-xs text-blue-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Bilgi:"}),r.jsxs("ul",{className:"space-y-0.5",children:[r.jsx("li",{children:"• Transfer için en az 4 saat önceden rezervasyon gerekir"}),r.jsx("li",{children:"• Otel adını yazmaya başladığınızda öneriler görünecek"})]})]})]})}),r.jsxs(F.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:Y,className:"w-full bg-blue-600 text-white py-2 px-3 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center justify-center space-x-1.5 text-sm",children:[r.jsx("span",{children:"Araçları Bul"}),r.jsx(LF,{className:"w-4 h-4"})]})]})})};function VH(t,e,s,n){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(m){o(m)}}function c(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(l,c)}u((n=n.apply(t,[])).next())})}function zH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cp,EE;function BH(){return EE||(EE=1,Cp=function t(e,s){if(e===s)return!0;if(e&&s&&typeof e=="object"&&typeof s=="object"){if(e.constructor!==s.constructor)return!1;var n,i,a;if(Array.isArray(e)){if(n=e.length,n!=s.length)return!1;for(i=n;i--!==0;)if(!t(e[i],s[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===s.source&&e.flags===s.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===s.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===s.toString();if(a=Object.keys(e),n=a.length,n!==Object.keys(s).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(s,a[i]))return!1;for(i=n;i--!==0;){var o=a[i];if(!t(e[o],s[o]))return!1}return!0}return e!==e&&s!==s}),Cp}var UH=BH(),FH=zH(UH);const kE="__googleMapsScriptId";var io;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(io||(io={}));class Ui{constructor({apiKey:e,authReferrerPolicy:s,channel:n,client:i,id:a=kE,language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:m=3,url:p="https://maps.googleapis.com/maps/api/js",version:f}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=s,this.channel=n,this.client=i,this.id=a||kE,this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=m,this.url=p,this.version=f,Ui.instance){if(!FH(this.options,Ui.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(Ui.instance.options)}`);return Ui.instance}Ui.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?io.FAILURE:this.done?io.SUCCESS:this.loading?io.LOADING:io.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,s)=>{this.loadCallback(n=>{n?s(n.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,s;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(a=>!n[a]&&delete n[a]),!((s=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||s===void 0)&&s.importLibrary||(a=>{let o,l,c,u="The Google Maps JavaScript API",d="google",m="importLibrary",p="__ib__",f=document,x=window;x=x[d]||(x[d]={});const S=x.maps||(x.maps={}),k=new Set,v=new URLSearchParams,_=()=>o||(o=new Promise((w,E)=>VH(this,void 0,void 0,function*(){var T;yield l=f.createElement("script"),l.id=this.id,v.set("libraries",[...k]+"");for(c in a)v.set(c.replace(/[A-Z]/g,P=>"_"+P[0].toLowerCase()),a[c]);v.set("callback",d+".maps."+p),l.src=this.url+"?"+v,S[p]=w,l.onerror=()=>o=E(Error(u+" could not load.")),l.nonce=this.nonce||((T=f.querySelector("script[nonce]"))===null||T===void 0?void 0:T.nonce)||"",f.head.append(l)})));S[m]?console.warn(u+" only loads once. Ignoring:",a):S[m]=(w,...E)=>k.add(w)&&_().then(()=>S[m](w,...E))})(n);const i=this.libraries.map(a=>this.importLibrary(a));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),a=>{const o=new ErrorEvent("error",{error:a});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const s=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${s} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},s)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}class $H{constructor(){this.loader=new Ui(JV),this.google=null,this.placesService=null,this.directionsService=null,this.autocompleteService=null,this.geocoder=null}async initialize(){try{if(window.google&&window.google.maps){console.log("Google Maps zaten yüklü, mevcut API kullanılıyor"),this.google=window.google;try{this.placesService=new this.google.maps.places.PlacesService(document.createElement("div"))}catch(e){console.warn("PlacesService initialization failed:",e),this.placesService=null}try{this.directionsService=new this.google.maps.DirectionsService}catch(e){console.warn("DirectionsService initialization failed:",e),this.directionsService=null}try{this.autocompleteService=new this.google.maps.places.AutocompleteService}catch(e){console.warn("AutocompleteService initialization failed:",e),this.autocompleteService=null}try{this.geocoder=new this.google.maps.Geocoder}catch(e){console.warn("Geocoder initialization failed:",e),this.geocoder=null}return!0}this.google=await this.loader.load();try{this.placesService=new this.google.maps.places.PlacesService(document.createElement("div"))}catch(e){console.warn("PlacesService initialization failed:",e),this.placesService=null}try{this.directionsService=new this.google.maps.DirectionsService}catch(e){console.warn("DirectionsService initialization failed:",e),this.directionsService=null}try{this.autocompleteService=new this.google.maps.places.AutocompleteService}catch(e){console.warn("AutocompleteService initialization failed:",e),this.autocompleteService=null}try{this.geocoder=new this.google.maps.Geocoder}catch(e){console.warn("Geocoder initialization failed:",e),this.geocoder=null}return!0}catch(e){return console.error("Google Maps API initialization failed:",e),!1}}async getPlacePredictions(e,s={}){this.autocompleteService||await this.initialize();const n={input:e,componentRestrictions:{country:"TR"},language:"tr",...s};return new Promise((i,a)=>{this.autocompleteService.getPlacePredictions(n,(o,l)=>{l===this.google.maps.places.PlacesServiceStatus.OK?i(o||[]):a(new Error(`Places API error: ${l}`))})})}async getPlaceDetails(e){return this.placesService||await this.initialize(),new Promise((s,n)=>{this.placesService.getDetails({placeId:e,fields:["geometry","formatted_address","name","types"]},(i,a)=>{a===this.google.maps.places.PlacesServiceStatus.OK?s(i):n(new Error(`Place Details API error: ${a}`))})})}async calculateRoute(e,s,n={}){this.directionsService||await this.initialize();const i={origin:e,destination:s,travelMode:this.google.maps.TravelMode.DRIVING,unitSystem:this.google.maps.UnitSystem.METRIC,language:"tr",region:"TR",...n};return new Promise((a,o)=>{this.directionsService.route(i,(l,c)=>{if(c===this.google.maps.DirectionsStatus.OK){const u=l.routes[0],d=u.legs[0];a({distance:{text:d.distance.text,value:d.distance.value},duration:{text:d.duration.text,value:d.duration.value},distanceInKm:Math.round(d.distance.value/1e3),durationInMinutes:Math.round(d.duration.value/60),polyline:u.overview_polyline,startAddress:d.start_address,endAddress:d.end_address,startLocation:{lat:d.start_location.lat(),lng:d.start_location.lng()},endLocation:{lat:d.end_location.lat(),lng:d.end_location.lng()},directionsResult:l})}else o(new Error(`Directions API error: ${c}`))})})}async geocodeAddress(e){return this.geocoder||await this.initialize(),new Promise((s,n)=>{this.geocoder.geocode({address:e},(i,a)=>{if(a===this.google.maps.GeocoderStatus.OK){const o=i[0];s({formatted_address:o.formatted_address,location:{lat:o.geometry.location.lat(),lng:o.geometry.location.lng()},place_id:o.place_id,types:o.types})}else n(new Error(`Geocoding API error: ${a}`))})})}async reverseGeocode(e,s){return this.geocoder||await this.initialize(),new Promise((n,i)=>{this.geocoder.geocode({location:{lat:e,lng:s}},(a,o)=>{o===this.google.maps.GeocoderStatus.OK?n(a):i(new Error(`Reverse Geocoding API error: ${o}`))})})}async createMap(e,s={}){this.google||await this.initialize();const n={zoom:10,center:{lat:39.9334,lng:32.8597},mapTypeId:this.google.maps.MapTypeId.ROADMAP,language:"tr",region:"TR",...s};return new this.google.maps.Map(e,n)}addMarker(e,s,n={}){if(!this.google)return null;const i={position:s,map:e,...n};return new this.google.maps.Marker(i)}drawRoute(e,s){return this.google?new this.google.maps.DirectionsRenderer({map:e,suppressMarkers:!1,polylineOptions:{strokeColor:"#4285f4",strokeWeight:5,strokeOpacity:.8}}):null}async getCurrentLocation(){return new Promise((e,s)=>{if(!navigator.geolocation){s(new Error("Geolocation is not supported"));return}navigator.geolocation.getCurrentPosition(n=>{e({lat:n.coords.latitude,lng:n.coords.longitude})},n=>{s(n)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})}calculateDistanceBetweenCoords(e,s,n,i){if(!this.google)return null;const a=new this.google.maps.LatLng(e,s),o=new this.google.maps.LatLng(n,i);return this.google.maps.geometry.spherical.computeDistanceBetween(a,o)}formatTurkishAddress(e){return!e.toLowerCase().includes("turkey")&&!e.toLowerCase().includes("türkiye")?`${e}, Turkey`:e}getAirportLocation(e){const s={istanbul:{lat:41.2619,lng:28.7279,name:"İstanbul Havalimanı"},ankara:{lat:39.9496,lng:32.6884,name:"Esenboğa Havalimanı"},izmir:{lat:38.2924,lng:27.157,name:"Adnan Menderes Havalimanı"},antalya:{lat:36.8988,lng:30.8005,name:"Antalya Havalimanı"},bodrum:{lat:37.0135,lng:27.4048,name:"Milas-Bodrum Havalimanı"},dalaman:{lat:36.7131,lng:28.7925,name:"Dalaman Havalimanı"},adana:{lat:36.9823,lng:35.2803,name:"Şakirpaşa Havalimanı"},trabzon:{lat:40.9951,lng:39.7897,name:"Trabzon Havalimanı"},gaziantep:{lat:36.9472,lng:37.4786,name:"Oğuzeli Havalimanı"},kayseri:{lat:38.7704,lng:35.4954,name:"Erkilet Havalimanı"}},n=e.toLowerCase().trim();return s[n]||null}isValidCoordinates(e,s){return e>=-90&&e<=90&&s>=-180&&s<=180}formatCoordinates(e,s){return`${e.toFixed(6)}, ${s.toFixed(6)}`}}const _E=new $H,HH=({bookingData:t,setBookingData:e,onNext:s,onBack:n})=>{const[i,a]=g.useState(t.selectedVehicle||null),[o,l]=g.useState(t.selectedServices||[]),[c,u]=g.useState([]),[d,m]=g.useState([]),[p,f]=g.useState(!0),[x,S]=g.useState(""),[k,v]=g.useState(t.distance||0),[_,w]=g.useState(t.duration||0),[E,T]=g.useState(!1),[P,b]=g.useState(""),y=g.useRef(null),[j,C]=g.useState(null);g.useEffect(()=>{(async()=>{f(!0);try{const U=Gs(Ie(ae,"vehicles"),cn("status","==","active")),Z=(await os(U)).docs.map(ie=>({id:ie.id,...ie.data()})),G=Gs(Ie(ae,"extraServices"),cn("status","==","active")),te=(await os(G)).docs.map(ie=>({id:ie.id,...ie.data()}));u(Z),m(te)}catch(U){console.error("Veri alınırken hata:",U),u([]),m([])}finally{f(!1)}})()},[]),g.useEffect(()=>{const M=async()=>{const U=A();if(!U.pickup||!U.dropoff){console.log("Lokasyonlar eksik, rota hesaplanamıyor");return}T(!0),b(""),a(null),l([]);try{if(console.log("Google Maps API ile gerçek rota hesaplanıyor..."),!await _E.initialize())throw new Error("Google Maps API başlatılamadı");const Z=V(U.pickup),G=V(U.dropoff);if(console.log("Başlangıç:",Z),console.log("Varış:",G),!Z||!G)throw new Error("Geçersiz lokasyon formatı");const ne=await _E.calculateRoute(Z,G);if(ne&&ne.distance&&ne.duration){const te=Math.round(ne.distance.value/1e3),ie=Math.round(ne.duration.value/60);console.log("Gerçek rota hesaplandı:",{distance:te+" km",duration:ie+" dk"}),v(te),w(ie),e(Re=>({...Re,distance:te,duration:ie,selectedVehicle:null,selectedServices:[]})),window.routeData=ne}else throw new Error("Rota hesaplanamadı")}catch(W){console.error("Rota hesaplama hatası:",W),b("Rota hesaplanamadı. Lütfen lokasyonları kontrol edin.")}finally{T(!1)}};(t.pickupLocation||t.dropoffLocation)&&M()},[t.pickupLocation,t.dropoffLocation,t.direction]),g.useEffect(()=>{k>0&&window.routeData&&y.current&&window.google&&(console.log("🗺️ Harita çizimi başlıyor..."),setTimeout(async()=>{y.current.innerHTML="";const U=new window.google.maps.Map(y.current,{zoom:10,center:{lat:36.8987,lng:30.8005},mapTypeId:window.google.maps.MapTypeId.ROADMAP}),W=new window.google.maps.DirectionsService,Z=new window.google.maps.DirectionsRenderer({map:U,suppressMarkers:!1,polylineOptions:{strokeColor:"#4285f4",strokeWeight:6,strokeOpacity:1}}),G=A(),ne=V(G.pickup),te=V(G.dropoff);console.log("🎯 Rota çiziliyor:",ne,"→",te),W.route({origin:ne,destination:te,travelMode:window.google.maps.TravelMode.DRIVING,unitSystem:window.google.maps.UnitSystem.METRIC,language:"tr",region:"TR"},(ie,Re)=>{Re==="OK"?(console.log("✅ MAVİ ÇİZGİ ÇİZİLDİ!"),Z.setDirections(ie)):console.error("❌ Rota çizilemedi:",Re)})},500))},[k]);const R={address:"Antalya Havalimanı, Antalya, Türkiye",lat:36.8987,lng:30.8005},D=M=>{if(!M)return"Seçilmedi";if(typeof M=="string")return M;if(typeof M=="object"){if(M.address)return M.address;if(M.formatted_address)return M.formatted_address;if(M.name)return M.name;if(M.lat&&M.lng)return`${M.lat.toFixed(6)}, ${M.lng.toFixed(6)}`}return"Bilinmeyen lokasyon"},A=()=>{const M=t.direction;return M==="airport-to-hotel"?{pickup:R,dropoff:t.dropoffLocation||null}:M==="hotel-to-airport"?{pickup:t.pickupLocation||null,dropoff:R}:{pickup:t.pickupLocation||null,dropoff:t.dropoffLocation||null}},V=M=>{if(!M)return null;if(typeof M=="string")return M;if(typeof M=="object"){if(M.address)return M.address;if(M.formatted_address)return M.formatted_address;if(M.name)return M.name;if(M.lat&&M.lng)return`${M.lat},${M.lng}`}return null},$=M=>{if(!k||k===0)return 0;const U=M.kmRate||0;return Math.round(k*U)},Y=M=>{const U=$(M);a({...M,totalPrice:U,distance:k,duration:_}),S(""),e(W=>({...W,selectedVehicle:{...M,totalPrice:U,distance:k,duration:_}}))},B=()=>{if(!i){S("Lütfen bir araç seçiniz");return}const M=$(i),U=o.reduce((G,ne)=>G+(ne.price||0),0),W=M+U,Z={...t,selectedVehicle:{...i,totalPrice:M,distance:k,duration:_},selectedServices:o,totalPrice:W,distance:k,duration:_};e(Z),s()},O=M=>{l(U=>U.find(Z=>Z.id===M.id)?U.filter(Z=>Z.id!==M.id):[...U,M])},K=M=>({sedan:"🚗",suv:"🚙",minibus:"🚐",midibus:"🚌",bus:"🚍",vip:"🏎️"})[M]||"🚗",z=c.filter(M=>{const U=t.passengers||1;return M.capacity>=U});return p?r.jsx("div",{className:"max-w-4xl mx-auto p-4",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:"Araçlar yükleniyor..."})]})}):r.jsx("div",{className:"max-w-4xl mx-auto p-4",children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[r.jsx(ef,{className:"w-5 h-5 text-blue-600"}),"Transfer Rotası",t.direction&&r.jsxs("span",{className:"text-sm font-normal text-gray-500",children:["(",t.direction==="airport-to-hotel"?"Karşılama":"Uğurlama",")"]})]}),E?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Gerçek rota hesaplanıyor..."})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-2 gap-4",children:(()=>{const M=A(),U=t.direction;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-green-50 rounded-lg",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:U==="airport-to-hotel"?"Havalimanı (Başlangıç)":"Otel (Başlangıç)"}),r.jsx("p",{className:"text-sm text-gray-800",children:D(M.pickup)})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-red-50 rounded-lg",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:U==="airport-to-hotel"?"Otel (Varış)":"Havalimanı (Varış)"}),r.jsx("p",{className:"text-sm text-gray-800",children:D(M.dropoff)})]})]})]})})()}),k>0&&r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl shadow-lg p-6",children:[r.jsx("h4",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:"🗺️ Rota Haritası"}),r.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:r.jsx("div",{ref:y,className:"w-full",style:{height:"450px"}})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[r.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx(Ke,{className:"w-5 h-5 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Mesafe"}),r.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[k," km"]})]})]})}),r.jsx("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx(Ye,{className:"w-5 h-5 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Süre"}),r.jsxs("p",{className:"text-xl font-bold text-purple-600",children:[_," dk"]})]})]})})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-4 text-center",children:[D(A().pickup)," → ",D(A().dropoff)]})]}),P&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ne,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm text-red-800",children:P})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Uygun Araçlar"}),z.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(je,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:p?"Araçlar yükleniyor...":"Uygun araç bulunamadı."})]}):k===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ne,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Lütfen önce rota hesaplamasının tamamlanmasını bekleyin."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:z.map(M=>{const U=$(M),W=(i==null?void 0:i.id)===M.id;return r.jsxs(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>Y(M),className:`relative bg-white rounded-2xl border-2 cursor-pointer transition-all duration-300 overflow-hidden shadow-lg hover:shadow-xl ${W?"border-blue-500 shadow-blue-200 bg-gradient-to-br from-blue-50 to-indigo-100":"border-gray-200 hover:border-blue-300 hover:shadow-blue-100"}`,children:[W&&r.jsx("div",{className:"absolute top-4 right-4 z-10",children:r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center shadow-lg",children:r.jsx(Xm,{className:"w-5 h-5 text-white"})})}),r.jsx("div",{className:"relative h-40 bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:M.imageUrl?r.jsx("img",{src:M.imageUrl,alt:`${M.brand} ${M.model}`,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-100 to-purple-100",children:r.jsx("div",{className:"text-6xl opacity-40 text-blue-500",children:K(M.type)})})}),r.jsxs("div",{className:"p-4",children:[r.jsxs("h4",{className:"font-semibold text-lg text-gray-800 mb-2 line-clamp-1",children:[M.brand," ",M.model]}),r.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[r.jsx(Qe,{className:"w-4 h-4 text-gray-500"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[M.capacity," Kişi"]})]}),M.features&&M.features.length>0&&r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[M.features.slice(0,3).map((Z,G)=>r.jsxs("span",{className:"text-xs bg-gradient-to-r from-green-500 to-emerald-600 text-white px-3 py-1 rounded-full font-medium shadow-sm flex items-center gap-1",children:[r.jsx("span",{children:"✨"})," ",Z]},G)),M.features.length>3&&r.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full border",children:["+",M.features.length-3," özellik"]})]})}),r.jsx("div",{className:"pt-3 border-t border-gray-100",children:r.jsxs("div",{className:"text-center bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl p-3 border border-orange-200",children:[r.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["₺",U.toLocaleString()]}),r.jsx("p",{className:"text-sm font-semibold text-gray-600 mt-1",children:"Transfer Ücreti"})]})})]})]},M.id)})})]}),i&&k>0&&d.length>0&&r.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-2xl border border-purple-200 p-6 shadow-lg",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:"⭐ Ekstra Hizmetler"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(M=>{const U=o.find(W=>W.id===M.id);return r.jsx(F.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>O(M),className:`p-4 rounded-xl border-2 cursor-pointer transition-all duration-300 ${U?"border-purple-500 bg-gradient-to-br from-purple-50 to-pink-50 shadow-lg shadow-purple-200":"border-gray-200 bg-white hover:border-purple-300 hover:shadow-md"}`,children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"text-2xl",children:M.icon||"⭐"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-semibold text-gray-800",children:M.name}),r.jsxs("span",{className:"text-lg font-bold text-purple-600",children:["₺",M.price||0]})]}),r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:M.description})]})]})},M.id)})})]}),i&&k>0&&r.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border border-green-200 p-6 shadow-lg",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center gap-2",children:"💰 Fiyat Özeti"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Transfer Ücreti"}),r.jsxs("span",{className:"font-bold text-green-600",children:["₺",$(i).toLocaleString()]})]}),o.map(M=>r.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[r.jsx("span",{className:"font-medium text-gray-700",children:M.name}),r.jsxs("span",{className:"font-bold text-purple-600",children:["₺",M.price||0]})]},M.id)),r.jsx("div",{className:"border-t border-green-300 pt-4",children:r.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl border border-orange-200",children:[r.jsx("span",{className:"text-lg font-bold text-gray-800",children:"Toplam Tutar"}),r.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["₺",($(i)+o.reduce((M,U)=>M+(U.price||0),0)).toLocaleString()]})]})})]})]}),x&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ne,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm text-red-800",children:x})]})}),r.jsxs("div",{className:"flex justify-between pt-6",children:[r.jsx("button",{onClick:n,className:"px-8 py-3 bg-gradient-to-r from-gray-100 to-gray-200 text-gray-700 rounded-xl hover:from-gray-200 hover:to-gray-300 transition-all duration-300 font-semibold shadow-md hover:shadow-lg",children:"← Geri"}),r.jsx("button",{onClick:B,disabled:!i||k===0,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed transition-all duration-300 font-semibold shadow-md hover:shadow-lg",children:k===0?"Rota Hesaplanıyor...":"Devam Et →"})]})]})})},KH=({bookingData:t,setBookingData:e,onNext:s,onBack:n})=>{var f,x,S,k,v,_,w,E;const[i,a]=g.useState({firstName:((f=t.personalInfo)==null?void 0:f.firstName)||"",lastName:((x=t.personalInfo)==null?void 0:x.lastName)||"",email:((S=t.personalInfo)==null?void 0:S.email)||"",phone:((k=t.personalInfo)==null?void 0:k.phone)||"",passengerCount:t.passengerCount||1,flightNumber:((v=t.personalInfo)==null?void 0:v.flightNumber)||"",flightTime:((_=t.personalInfo)==null?void 0:_.flightTime)||"",specialRequests:((w=t.personalInfo)==null?void 0:w.specialRequests)||"",acceptTerms:((E=t.personalInfo)==null?void 0:E.acceptTerms)||!1}),[o,l]=g.useState({}),c=()=>{const T={};return i.firstName.trim()?i.firstName.trim().length<2&&(T.firstName="Ad en az 2 karakter olmalıdır"):T.firstName="Ad alanı zorunludur",i.lastName.trim()?i.lastName.trim().length<2&&(T.lastName="Soyad en az 2 karakter olmalıdır"):T.lastName="Soyad alanı zorunludur",i.email.trim()?/\S+@\S+\.\S+/.test(i.email)||(T.email="Geçerli bir e-posta adresi girin"):T.email="E-posta alanı zorunludur",i.phone.trim()?/^(\+90|0)?[0-9]{10}$/.test(i.phone.replace(/\s/g,""))||(T.phone="Geçerli bir telefon numarası girin"):T.phone="Telefon alanı zorunludur",i.flightNumber&&i.flightNumber.trim().length<3&&(T.flightNumber="Geçerli bir uçuş numarası girin"),i.acceptTerms!==!0&&(T.acceptTerms="Kullanım şartlarını kabul etmelisiniz"),l(T),Object.keys(T).length===0},u=T=>{const P=T.target.checked;a(b=>({...b,acceptTerms:P})),o.acceptTerms&&l(b=>({...b,acceptTerms:""}))},d=(T,P)=>{a(b=>({...b,[T]:P})),o[T]&&l(b=>({...b,[T]:""}))},m=()=>{if(console.log("Personal Info - Form Data:",i),c()){const T={...t,personalInfo:{...i,passengerCount:t.passengerCount||i.passengerCount}};console.log("Personal Info - Updated Data:",T),e(T),s()}else console.log("Personal Info - Validation Errors:",o)},p=T=>{const P=T.replace(/\D/g,"");return P.length>=10?P.slice(0,10).replace(/(\d{3})(\d{3})(\d{4})/,"$1 $2 $3"):P};return r.jsx("div",{className:"max-w-md sm:max-w-lg lg:max-w-2xl mx-auto p-2 sm:p-3 lg:p-4",children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-3",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center",children:[r.jsx(Fe,{className:"w-4 h-4 mr-2"}),"Kişisel Bilgiler"]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad *"}),r.jsx("input",{type:"text",value:i.firstName,onChange:T=>d("firstName",T.target.value),placeholder:"Adınızı girin",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm ${o.firstName?"border-red-300":"border-gray-300"}`}),o.firstName&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),o.firstName]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Soyad *"}),r.jsx("input",{type:"text",value:i.lastName,onChange:T=>d("lastName",T.target.value),placeholder:"Soyadınızı girin",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm ${o.lastName?"border-red-300":"border-gray-300"}`}),o.lastName&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),o.lastName]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta *"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"email",value:i.email,onChange:T=>d("email",T.target.value),placeholder:"ornek@email.com",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pl-10 ${o.email?"border-red-300":"border-gray-300"}`}),r.jsx(ns,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"})]}),o.email&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),o.email]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefon *"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"tel",value:i.phone,onChange:T=>d("phone",p(T.target.value)),placeholder:"555 123 4567",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pl-10 ${o.phone?"border-red-300":"border-gray-300"}`}),r.jsx(nt,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"})]}),o.phone&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),o.phone]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Qe,{className:"w-4 h-4 text-blue-600"}),r.jsxs("span",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Yolcu Sayısı:"})," ",t.passengerCount||1," kişi"]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3 lg:p-4",children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center",children:[r.jsx(Gc,{className:"w-4 h-4 mr-2"}),"Uçuş Bilgileri (Opsiyonel)"]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Uçuş Numarası"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:i.flightNumber,onChange:T=>d("flightNumber",T.target.value.toUpperCase()),placeholder:"TK2658",className:`w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pl-10 ${o.flightNumber?"border-red-300":"border-gray-300"}`}),r.jsx(Gc,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"})]}),o.flightNumber&&r.jsxs("p",{className:"text-red-500 text-xs mt-1 flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),o.flightNumber]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Uçuş Saati"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"time",value:i.flightTime,onChange:T=>d("flightTime",T.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm pl-10"}),r.jsx(Ye,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"})]})]})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Özel İstekler"}),r.jsx("textarea",{value:i.specialRequests,onChange:T=>d("specialRequests",T.target.value),placeholder:"Bebek koltuğu, tekerlekli sandalye erişimi vb. özel ihtiyaçlarınızı belirtiniz...",rows:"3",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm resize-none"})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Ne,{className:"w-5 h-5 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Önemli Bilgiler:"}),r.jsxs("ul",{className:"space-y-1 text-xs",children:[r.jsx("li",{children:"• Uçuş bilgileriniz transferinizin takibi için kullanılacaktır"}),r.jsx("li",{children:"• Özel istekleriniz mümkün olduğunca karşılanmaya çalışılacaktır"}),r.jsx("li",{children:"• İletişim bilgileriniz sadece transfer hizmeti için kullanılacaktır"})]})]})]})}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:i.acceptTerms,onChange:u,className:"sr-only"}),r.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center ${i.acceptTerms?"bg-blue-500 border-blue-500":"border-gray-300"}`,children:i.acceptTerms&&r.jsx(Xm,{className:"w-3 h-3 text-white"})})]}),r.jsx("div",{className:"text-sm",children:r.jsxs("span",{className:"text-gray-700",children:[r.jsx("span",{className:"font-medium",children:"Kullanım şartları"}),"nı ve ",r.jsx("span",{className:"font-medium",children:"gizlilik politikası"}),"nı okudum ve kabul ediyorum. *"]})})]}),o.acceptTerms&&r.jsxs("p",{className:"text-red-500 text-xs mt-2 flex items-center",children:[r.jsx(Ne,{className:"w-3 h-3 mr-1"}),o.acceptTerms]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between space-y-3 sm:space-y-0 sm:space-x-4",children:[r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Geri Dön"}),r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Devam Et"})]})]})})},GH=({bookingData:t,setBookingData:e,onNext:s,onBack:n})=>{var m,p,f;const[i,a]=g.useState(t.paymentMethod||ld.CASH),[o,l]=g.useState(""),c=[{id:ld.CASH,name:"Nakit Ödeme",description:"Transfer sırasında şoföre nakit olarak ödeyin",icon:ev,color:"green",details:["Transfer anında ödeme yapın","Ekstra komisyon yok","Türk Lirası kabul edilir","Para üstü verilir"],recommended:!0},{id:ld.BANK_TRANSFER,name:"Banka Havalesi",description:"Banka hesabımıza havale/EFT yapın",icon:XC,color:"blue",details:["Rezervasyon onayından sonra 24 saat içinde","Havale dekontu gereklidir","Bankacılık saatleri içinde işlem","IBAN bilgileri e-posta ile gönderilir"]},{id:ld.CREDIT_CARD,name:"Kredi Kartı",description:"Online güvenli ödeme (yakında)",icon:$t,color:"purple",details:["Anında ödeme onayı","3D Secure güvenlik","Tüm kredi kartları kabul edilir","Yakında hizmete girecek"],disabled:!0}];c.unshift({id:"test_mode",name:"Test Modu",description:"Geliştirme için ödeme atla",icon:n1,color:"orange",details:["Sadece test için kullanılır","Gerçek ödeme yapılmaz","Rezervasyon otomatik onaylanır","Geliştirme aşaması için"],recommended:!1,testMode:!0});const u=x=>{var S;(S=c.find(k=>k.id===x))!=null&&S.disabled||(a(x),l(""))},d=()=>{if(!i){l("Lütfen bir ödeme yöntemi seçiniz");return}const x=c.find(k=>k.id===i);if(x!=null&&x.disabled){l("Seçilen ödeme yöntemi şu anda kullanılamıyor");return}const S={...t,paymentMethod:i};e(S),s()};return r.jsx("div",{className:"max-w-md sm:max-w-lg lg:max-w-2xl mx-auto p-2 sm:p-3 lg:p-4",children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-3",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3",children:"Rezervasyon Özeti"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Transfer Yönü:"}),r.jsx("span",{className:"font-medium",children:t.direction==="airport-to-hotel"?"Havalimanı → Otel":"Otel → Havalimanı"})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Araç:"}),r.jsx("span",{className:"font-medium",children:(m=t.selectedVehicle)==null?void 0:m.name})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Tarih & Saat:"}),r.jsxs("span",{className:"font-medium",children:[new Date(t.date).toLocaleDateString("tr-TR")," - ",t.time]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Yolcu Sayısı:"}),r.jsxs("span",{className:"font-medium",children:[(p=t.personalInfo)==null?void 0:p.passengerCount," kişi"]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Mesafe:"}),r.jsxs("span",{className:"font-medium",children:[t.distance," km"]})]}),r.jsx("div",{className:"border-t pt-3 mt-3",children:r.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[r.jsx("span",{children:"Toplam Tutar:"}),r.jsxs("span",{className:"text-blue-600",children:["₺",(f=t.totalPrice)==null?void 0:f.toLocaleString()]})]})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Ödeme Yöntemi Seçiniz"}),r.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(n1,{className:"w-5 h-5 text-orange-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-orange-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Test Modu Aktif:"}),r.jsx("p",{className:"text-xs",children:"Sistem test modunda çalışıyor. Test Modu seçeneği ile gerçek ödeme yapmadan rezervasyon tamamlayabilirsiniz."})]})]})}),r.jsx("div",{className:"space-y-3",children:c.map(x=>{const S=i===x.id,k=x.disabled,v=x.icon;return r.jsxs(F.div,{whileHover:k?{}:{scale:1.01},whileTap:k?{}:{scale:.99},onClick:()=>u(x.id),className:`relative p-4 rounded-xl border-2 transition-all cursor-pointer ${S&&!k?`border-${x.color}-500 bg-${x.color}-50 text-${x.color}-700`:k?"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[x.recommended&&!k&&r.jsx("div",{className:"absolute -top-2 -right-2",children:r.jsx("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Önerilen"})}),S&&!k&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("div",{className:`w-6 h-6 bg-${x.color}-500 rounded-full flex items-center justify-center`,children:r.jsx(Xm,{className:"w-4 h-4 text-white"})})}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:`p-3 rounded-lg ${S&&!k?`bg-${x.color}-100`:"bg-gray-100"}`,children:r.jsx(v,{className:`w-6 h-6 ${k?"text-gray-400":S?`text-${x.color}-600`:"text-gray-500"}`})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("h4",{className:"font-semibold",children:x.name}),k&&r.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:"Yakında"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:x.description}),r.jsx("ul",{className:"space-y-1",children:x.details.map((_,w)=>r.jsxs("li",{className:"text-xs text-gray-500 flex items-center",children:[r.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2"}),_]},w))})]})]})]},x.id)})}),o&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ne,{className:"w-5 h-5 text-red-600"}),r.jsx("p",{className:"text-sm text-red-800",children:o})]})})]}),r.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Kc,{className:"w-5 h-5 text-gray-600 mt-0.5"}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("p",{className:"font-medium mb-1",children:"Güvenli Ödeme:"}),r.jsx("p",{className:"text-xs",children:"Tüm ödeme işlemleriniz güvenli bir şekilde işlenir. Kişisel ve finansal bilgileriniz korunur. Nakit ödeme seçeneği ile ekstra güvenlik sağlayabilirsiniz."})]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between space-y-3 sm:space-y-0 sm:space-x-4",children:[r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Geri Dön"}),r.jsx(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:d,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Rezervasyonu Onayla"})]})]})})},WH=({bookingData:t,onComplete:e})=>{var w,E,T,P,b;const[s,n]=g.useState(""),[i,a]=g.useState(!0),[o,l]=g.useState(!1),[c,u]=g.useState(""),[d,m]=g.useState(""),p=ys();g.useEffect(()=>{f()},[]);const f=async()=>{var A,V,$,Y,B,O,K,z;const y=Date.now(),j=Math.random().toString(36).substring(2,8).toUpperCase(),C=`SBS${y.toString().slice(-6)}${j}`;m(C);const R={id:C,status:ez.PENDING,createdAt:new Date,direction:t.direction,pickupLocation:t.pickupLocation,dropoffLocation:t.dropoffLocation,date:t.date,time:t.time,passengerCount:t.passengerCount,baggageCount:t.baggageCount,distance:t.distance,duration:t.duration,selectedVehicle:t.selectedVehicle,selectedServices:t.selectedServices||[],personalInfo:t.personalInfo,paymentMethod:t.paymentMethod,totalPrice:t.totalPrice,driverAssigned:null,specialRequests:((A=t.personalInfo)==null?void 0:A.specialRequests)||"",flightNumber:((V=t.personalInfo)==null?void 0:V.flightNumber)||"",flightTime:(($=t.personalInfo)==null?void 0:$.flightTime)||""};try{const M=await un(Ie(ae,Qs.RESERVATIONS),R);console.log("Reservation saved with ID:",M.id),ce.success("Rezervasyon başarıyla kaydedildi!"),await x()}catch(M){console.error("Error saving reservation:",M),ce.error("Rezervasyon kaydedilemedi. Lütfen tekrar deneyin.")}const D={reservationId:C,customerName:`${(Y=t.personalInfo)==null?void 0:Y.firstName} ${(B=t.personalInfo)==null?void 0:B.lastName}`,date:t.date,time:t.time,direction:t.direction,vehicle:(O=t.selectedVehicle)==null?void 0:O.name,passengers:(K=t.personalInfo)==null?void 0:K.passengerCount,amount:t.totalPrice,paymentMethod:t.paymentMethod,phone:(z=t.personalInfo)==null?void 0:z.phone,verificationUrl:`https://sbstransfer.com/verify/${C}`};try{const M=await tl.toDataURL(JSON.stringify(D),{width:200,margin:2,color:{dark:"#1F2937",light:"#FFFFFF"}});n(M),a(!1),setTimeout(()=>{l(!0)},2e3)}catch(M){console.error("Error generating QR code:",M),a(!1)}},x=async()=>{if(xn.currentUser){l(!0);return}try{const y=t.personalInfo,j=Math.random().toString(36).slice(-8)+"123";u(j);const R={uid:(await Mg(xn,y.email,j)).user.uid,email:y.email,firstName:y.firstName,lastName:y.lastName,phone:y.phone,role:bt.CUSTOMER,createdAt:new Date,reservationCount:1,isActive:!0};await un(Ie(ae,Qs.USERS),R),l(!0),ce.success("Üyeliğiniz otomatik olarak oluşturuldu!")}catch(y){console.error("Error creating membership:",y),l(!0)}},S=()=>{if(s){const y=document.createElement("a");y.href=s,y.download=`SBS-Transfer-${d}.png`,y.click()}},k=()=>{var j;const y=`SBS Transfer Rezervasyonum
Rezervasyon No: ${d}
Tarih: ${new Date(t.date).toLocaleDateString("tr-TR")}
Saat: ${t.time}
${t.direction==="airport-to-hotel"?"Havalimanı → Otel":"Otel → Havalimanı"}
Araç: ${(j=t.selectedVehicle)==null?void 0:j.name}
`;navigator.share?navigator.share({title:"SBS Transfer Rezervasyonu",text:y,url:`https://sbstransfer.com/verify/${d}`}):(navigator.clipboard.writeText(y),alert("Rezervasyon bilgileri kopyalandı!"))},v=()=>{p("/")},_=()=>{window.location.reload()};return r.jsx("div",{className:"max-w-md sm:max-w-lg lg:max-w-2xl mx-auto p-2 sm:p-3 lg:p-4",children:r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-3",children:[r.jsxs(F.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},className:"text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(_e,{className:"w-12 h-12 text-green-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Rezervasyonunuz Onaylandı!"}),r.jsx("p",{className:"text-gray-600",children:"Transfer rezervasyonunuz başarıyla oluşturuldu"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Rezervasyon Detayları"}),r.jsx("span",{className:"text-sm font-mono bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:d})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Be,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tarih & Saat"}),r.jsxs("p",{className:"font-medium",children:[new Date(t.date).toLocaleDateString("tr-TR")," - ",t.time]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(nI,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Transfer Yönü"}),r.jsx("p",{className:"font-medium",children:t.direction==="airport-to-hotel"?"Havalimanı → Otel":"Otel → Havalimanı"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(je,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Araç"}),r.jsx("p",{className:"font-medium",children:(w=t.selectedVehicle)==null?void 0:w.name})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Qe,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Yolcu Sayısı"}),r.jsxs("p",{className:"font-medium",children:[(E=t.personalInfo)==null?void 0:E.passengerCount," kişi"]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(nt,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"İletişim"}),r.jsx("p",{className:"font-medium",children:(T=t.personalInfo)==null?void 0:T.phone})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx($t,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Tutar"}),r.jsxs("p",{className:"font-bold text-blue-600",children:["₺",(P=t.totalPrice)==null?void 0:P.toLocaleString()]})]})]})]})]})]}),o&&c&&r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(s1,{className:"w-6 h-6 text-blue-600"})}),r.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Üyeliğiniz Oluşturuldu!"}),r.jsx("p",{className:"text-sm text-blue-600",children:"SBS Transfer ailesine hoş geldiniz"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-100",children:[r.jsx("h4",{className:"font-medium text-gray-800 mb-3",children:"Giriş Bilgileriniz:"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"E-posta:"}),r.jsx("span",{className:"font-medium text-gray-800",children:(b=t.personalInfo)==null?void 0:b.email})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Şifre:"}),r.jsx("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded text-gray-800",children:c})]})]}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(tv,{className:"w-4 h-4 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"text-xs text-blue-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Önemli:"}),r.jsx("p",{children:"Bu bilgilerle müşteri paneline giriş yapabilir, rezervasyonlarınızı takip edebilir ve yeni rezervasyonlar oluşturabilirsiniz."})]})]})})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center justify-center",children:[r.jsx(pa,{className:"w-5 h-5 mr-2"}),"Rezervasyon QR Kodu"]}),i?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-48 h-48 bg-gray-100 rounded-lg flex items-center justify-center mb-4",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),r.jsx("p",{className:"text-sm text-gray-600",children:"QR kod oluşturuluyor..."})]}):s?r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("img",{src:s,alt:"Reservation QR Code",className:"w-48 h-48 border rounded-lg mb-4"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Bu QR kodu şoföre göstererek rezervasyonunuzu doğrulayabilirsiniz"}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:S,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700 transition-colors",children:[r.jsx(Zm,{className:"w-4 h-4"}),r.jsx("span",{children:"İndir"})]}),r.jsxs(F.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:k,className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors",children:[r.jsx(rI,{className:"w-4 h-4"}),r.jsx("span",{children:"Paylaş"})]})]})]}):r.jsx("div",{className:"w-48 h-48 bg-gray-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:r.jsx("p",{className:"text-sm text-gray-500",children:"QR kod oluşturulamadı"})})]})}),r.jsx(F.div,{initial:{opacity:0,height:0},animate:{opacity:o?1:0,height:o?"auto":0},className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center",children:r.jsx(s1,{className:"w-6 h-6 text-yellow-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"🎉 Otomatik Üyelik Oluşturuldu!"}),r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Rezervasyonunuz ile birlikte SBS Transfer üyeliğiniz otomatik olarak oluşturuldu. Artık gelecek rezervasyonlarınızda daha hızlı işlem yapabilirsiniz."}),r.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[r.jsxs("div",{className:"flex items-center text-green-600",children:[r.jsx(UF,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"%10 indirim kazandınız"})]}),r.jsxs("div",{className:"flex items-center text-blue-600",children:[r.jsx(Fs,{className:"w-4 h-4 mr-1"}),r.jsx("span",{children:"Puan sistemi aktif"})]})]})]})]})}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Önemli Bilgiler"}),r.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(Ye,{className:"w-4 h-4 text-blue-600 mt-0.5"}),r.jsx("p",{children:"Şoförümüz belirlenen saatte sizinle iletişime geçecektir"})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(GF,{className:"w-4 h-4 text-blue-600 mt-0.5"}),r.jsx("p",{children:"Rezervasyon detayları e-posta ve SMS ile gönderilecektir"})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx(nt,{className:"w-4 h-4 text-blue-600 mt-0.5"}),r.jsx("p",{children:"Acil durumlar için: +90 (555) 000 00 00"})]}),t.paymentMethod==="bank_transfer"&&r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx($t,{className:"w-4 h-4 text-blue-600 mt-0.5"}),r.jsx("p",{children:"IBAN bilgileri e-posta ile gönderildi. 24 saat içinde ödeme yapınız."})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"İletişim & Destek"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(nt,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Telefon"}),r.jsx("p",{className:"font-medium",children:"+90 (555) 000 00 00"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ns,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"E-posta"}),r.jsx("p",{className:"font-medium",children:"destek@sbstransfer.com"})]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4",children:[r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:[r.jsx(sI,{className:"w-4 h-4"}),r.jsx("span",{children:"Ana Sayfa"})]}),r.jsxs(F.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:_,className:"flex-1 flex items-center justify-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[r.jsx("span",{children:"Yeni Rezervasyon"}),r.jsx($c,{className:"w-4 h-4"})]})]})]})})},Va=[{id:1,title:"Transfer Detayları",description:"Transfer bilgilerinizi girin",icon:Ke,component:"transfer-details"},{id:2,title:"Araç Seçimi",description:"Size uygun aracı seçin",icon:je,component:"vehicle"},{id:3,title:"Kişisel Bilgiler",description:"İletişim ve uçuş bilgileriniz",icon:Qe,component:"personal-info"},{id:4,title:"Ödeme",description:"Ödeme yönteminizi seçin",icon:$t,component:"payment"},{id:5,title:"Onay",description:"Rezervasyon tamamlandı",icon:_e,component:"confirmation"}],qH=()=>{var m,p;const t=ys(),{user:e,userProfile:s}=pr(),[n,i]=g.useState(1),[a,o]=g.useState({direction:"",pickupLocation:"",dropoffLocation:"",date:"",time:"",passengerCount:1,baggageCount:1,routeInfo:null,selectedVehicle:null,selectedServices:[],totalPrice:0,personalInfo:{firstName:"",lastName:"",email:"",phone:"",flightNumber:"",arrivalTime:"",departureTime:"",specialRequests:"",agreeToTerms:!1,marketingConsent:!1},paymentMethod:"credit_card",cardData:{cardNumber:"",expiryDate:"",cvv:"",cardholderName:"",saveCard:!1}});g.useEffect(()=>{e&&s&&o(f=>({...f,personalInfo:{...f.personalInfo,firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||e.email||"",phone:s.phone||""}}))},[e,s]);const l=()=>{u()&&n<Va.length&&i(n+1)},c=()=>{n>1&&i(n-1)},u=()=>{switch(n){case 1:return console.log("BookingWizard - Transfer Details Validation:",a),a.direction?a.direction==="airport-to-hotel"&&!a.dropoffLocation||a.direction==="hotel-to-airport"&&!a.pickupLocation?(ce.error("Lütfen otel/konaklama yeri seçin"),!1):!a.date||!a.time?(ce.error("Lütfen tarih ve saat seçin"),!1):!0:(ce.error("Lütfen transfer yönü seçin"),!1);case 2:return console.log("BookingWizard - Vehicle Selection Validation:",a),a.selectedVehicle?!0:(ce.error("Lütfen bir araç seçin"),!1);case 3:const{personalInfo:f}=a;return console.log("BookingWizard - Personal Info Validation:",f),!(f!=null&&f.firstName)||!(f!=null&&f.lastName)?(ce.error("Lütfen ad ve soyad bilgilerini girin"),!1):!(f!=null&&f.email)||!(f!=null&&f.phone)?(ce.error("Lütfen iletişim bilgilerini girin"),!1):f!=null&&f.acceptTerms?!0:(ce.error("Lütfen kullanım şartlarını kabul edin"),!1);case 4:if(!a.paymentMethod)return ce.error("Lütfen ödeme yöntemi seçin"),!1;if(a.paymentMethod==="credit_card"){const{cardData:x}=a;if(!x.cardNumber||!x.expiryDate||!x.cvv||!x.cardholderName)return ce.error("Lütfen kart bilgilerini tamamlayın"),!1}return!0;case 5:return!0;default:return!0}},d=()=>{switch(n){case 1:return r.jsx(OH,{bookingData:a,setBookingData:o,onNext:l});case 2:return r.jsx(HH,{bookingData:a,setBookingData:o,onNext:l,onBack:c});case 3:return r.jsx(KH,{bookingData:a,setBookingData:o,onNext:l,onBack:c});case 4:return r.jsx(GH,{bookingData:a,setBookingData:o,onNext:l,onBack:c});case 5:return r.jsx(WH,{bookingData:a,onComplete:()=>t("/")});default:return null}};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Transfer Rezervasyonu"}),r.jsx("p",{className:"text-xl text-gray-600",children:"Konforlu ve güvenli transfer hizmetimizle seyahatinizi planlayın"})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:Va.map((f,x)=>{const S=n===f.id,k=n>f.id,v=f.icon;return r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:`flex flex-col items-center ${x<Va.length-1?"flex-1":""}`,children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 ${k?"bg-green-500 border-green-500 text-white":S?"bg-blue-500 border-blue-500 text-white":"bg-white border-gray-300 text-gray-400"}`,children:r.jsx(v,{className:"w-4 h-4"})}),r.jsxs("div",{className:"mt-2 text-center max-w-20",children:[r.jsx("div",{className:`text-xs font-medium ${S||k?"text-gray-900":"text-gray-500"}`,children:f.title}),r.jsx("div",{className:"text-xs text-gray-500 mt-0.5 hidden sm:block",children:f.description})]})]}),x<Va.length-1&&r.jsx("div",{className:`w-8 h-0.5 mx-2 ${k?"bg-green-500":"bg-gray-200"}`})]},f.id)})})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 mb-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:Va[n-1].title}),r.jsx("p",{className:"text-sm text-gray-600",children:Va[n-1].description})]}),r.jsx(lr,{mode:"wait",children:r.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:d()},n)})]}),a.totalPrice>0&&n<5&&r.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"fixed bottom-4 right-4 bg-white rounded-xl shadow-xl p-6 max-w-sm border border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Rezervasyon Özeti"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[((m=a.routeInfo)==null?void 0:m.distance)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Mesafe:"}),r.jsx("span",{className:"font-medium",children:a.routeInfo.distance})]}),((p=a.routeInfo)==null?void 0:p.duration)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Süre:"}),r.jsx("span",{className:"font-medium",children:a.routeInfo.duration})]}),a.selectedVehicle&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Araç:"}),r.jsx("span",{className:"font-medium",children:a.selectedVehicle.name})]}),r.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[r.jsx("span",{className:"text-gray-600",children:"Toplam Tutar:"}),r.jsxs("span",{className:"font-bold text-green-600",children:["₺",a.totalPrice]})]})]})]})]})})},mv=({children:t,requiredRole:e=null,redirectTo:s="/giriş"})=>{const{user:n,userProfile:i,loading:a}=pr(),o=mn();if(a)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(!n)return r.jsx(vn,{to:s,state:{from:o},replace:!0});if(e&&(i==null?void 0:i.role)!==e)switch(i==null?void 0:i.role){case bt.ADMIN:return r.jsx(vn,{to:"/admin/dashboard",replace:!0});case bt.DRIVER:return r.jsx(vn,{to:"/şoför/dashboard",replace:!0});case bt.CUSTOMER:return r.jsx(vn,{to:"/müşteri/dashboard",replace:!0});default:return r.jsx(vn,{to:"/giriş",replace:!0})}return t},Ip=({children:t,redirectTo:e=null})=>{const{user:s,userProfile:n,loading:i}=pr();if(i)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(s&&e){if(!e||e==="auto")switch(n==null?void 0:n.role){case bt.ADMIN:return r.jsx(vn,{to:"/admin/dashboard",replace:!0});case bt.DRIVER:return r.jsx(vn,{to:"/şoför/dashboard",replace:!0});case bt.CUSTOMER:return r.jsx(vn,{to:"/müşteri/dashboard",replace:!0});default:return r.jsx(vn,{to:"/",replace:!0})}return r.jsx(vn,{to:e,replace:!0})}return t},YH=({children:t})=>r.jsx(mv,{requiredRole:bt.ADMIN,children:t}),QH=({children:t})=>r.jsx(mv,{requiredRole:bt.DRIVER,children:t}),XH=({children:t})=>r.jsx(mv,{requiredRole:bt.CUSTOMER,children:t});class ZH extends ga.Component{constructor(s){super(s);Jv(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){this.setState({error:s,errorInfo:n})}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:r.jsx("div",{className:"max-w-md w-full text-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-soft p-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx(Is,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Bir Hata Oluştu"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Uygulama beklenmedik bir hatayla karşılaştı. Lütfen sayfayı yenileyin veya daha sonra tekrar deneyin."}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:this.handleReload,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[r.jsx(tf,{className:"w-4 h-4"}),"Sayfayı Yenile"]}),r.jsx("a",{href:"/",className:"btn btn-outline w-full",children:"Ana Sayfaya Dön"})]}),!1]})})}):this.props.children}}function JH(){return r.jsx(ZH,{children:r.jsx(tz,{children:r.jsx(rz,{children:r.jsx(OD,{children:r.jsxs("div",{className:"App",children:[r.jsxs(ID,{children:[r.jsxs(Oe,{path:"/",element:r.jsx(s8,{}),children:[r.jsx(Oe,{index:!0,element:r.jsx(a8,{})}),r.jsx(Oe,{path:"rezervasyon",element:r.jsx(qH,{})}),r.jsx(Oe,{path:"araç-seçimi",element:r.jsx(o8,{})}),r.jsx(Oe,{path:"müşteri-bilgileri",element:r.jsx(l8,{})}),r.jsx(Oe,{path:"ödeme",element:r.jsx(c8,{})}),r.jsx(Oe,{path:"onay",element:r.jsx(u8,{})})]}),r.jsx(Oe,{path:"/giriş",element:r.jsx(Ip,{redirectTo:"auto",children:r.jsx(d8,{})})}),r.jsx(Oe,{path:"/kayıt",element:r.jsx(Ip,{redirectTo:"auto",children:r.jsx(h8,{})})}),r.jsx(Oe,{path:"/şifre-sıfırla",element:r.jsx(Ip,{redirectTo:"auto",children:r.jsx(m8,{})})}),r.jsxs(Oe,{path:"/admin",element:r.jsx(YH,{children:r.jsx(n8,{})}),children:[r.jsx(Oe,{index:!0,element:r.jsx(r1,{})}),r.jsx(Oe,{path:"dashboard",element:r.jsx(r1,{})}),r.jsx(Oe,{path:"araçlar",element:r.jsx(f8,{})}),r.jsx(Oe,{path:"vehicles",element:r.jsx(N8,{})}),r.jsx(Oe,{path:"şoförler",element:r.jsx(A8,{})}),r.jsx(Oe,{path:"ek-hizmetler",element:r.jsx(P8,{})}),r.jsx(Oe,{path:"rezervasyonlar",element:r.jsx(xH,{})}),r.jsx(Oe,{path:"finans",element:r.jsx(jH,{})}),r.jsx(Oe,{path:"ayarlar",element:r.jsx(EH,{})})]}),r.jsxs(Oe,{path:"/şoför",element:r.jsx(QH,{children:r.jsx(r8,{})}),children:[r.jsx(Oe,{index:!0,element:r.jsx(NE,{})}),r.jsx(Oe,{path:"dashboard",element:r.jsx(NE,{})}),r.jsx(Oe,{path:"seferlerim",element:r.jsx(RH,{})}),r.jsx(Oe,{path:"profil",element:r.jsx(DH,{})})]}),r.jsxs(Oe,{path:"/müşteri",element:r.jsx(XH,{children:r.jsx(i8,{})}),children:[r.jsx(Oe,{index:!0,element:r.jsx(jE,{})}),r.jsx(Oe,{path:"dashboard",element:r.jsx(jE,{})}),r.jsx(Oe,{path:"rezervasyonlar",element:r.jsx(LH,{})}),r.jsx(Oe,{path:"profil",element:r.jsx(MH,{})})]}),r.jsx(Oe,{path:"*",element:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-6xl font-bold text-gray-400",children:"404"}),r.jsx("p",{className:"text-xl text-gray-600 mt-4",children:"Sayfa bulunamadı"}),r.jsx("a",{href:"/",className:"btn btn-primary mt-6 inline-block",children:"Ana Sayfaya Dön"})]})})})]}),r.jsx(IL,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#22c55e",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})})})}Ap.createRoot(document.getElementById("root")).render(r.jsx(ga.StrictMode,{children:r.jsx(JH,{})}));
//# sourceMappingURL=index-DiSYrB7e.js.map
